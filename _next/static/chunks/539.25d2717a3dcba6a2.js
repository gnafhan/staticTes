(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[539],{90941:function(e){"use strict";var i=Object.prototype.hasOwnProperty,s="~";function Events(){}function EE(e,i,s){this.fn=e,this.context=i,this.once=s||!1}function addListener(e,i,r,n,a){if("function"!=typeof r)throw TypeError("The listener must be a function");var o=new EE(r,n||e,a),h=s?s+i:i;return e._events[h]?e._events[h].fn?e._events[h]=[e._events[h],o]:e._events[h].push(o):(e._events[h]=o,e._eventsCount++),e}function clearEvent(e,i){0==--e._eventsCount?e._events=new Events:delete e._events[i]}function EventEmitter(){this._events=new Events,this._eventsCount=0}Object.create&&(Events.prototype=Object.create(null),new Events().__proto__||(s=!1)),EventEmitter.prototype.eventNames=function(){var e,r,n=[];if(0===this._eventsCount)return n;for(r in e=this._events)i.call(e,r)&&n.push(s?r.slice(1):r);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(e)):n},EventEmitter.prototype.listeners=function(e){var i=s?s+e:e,r=this._events[i];if(!r)return[];if(r.fn)return[r.fn];for(var n=0,a=r.length,o=Array(a);n<a;n++)o[n]=r[n].fn;return o},EventEmitter.prototype.listenerCount=function(e){var i=s?s+e:e,r=this._events[i];return r?r.fn?1:r.length:0},EventEmitter.prototype.emit=function(e,i,r,n,a,o){var h=s?s+e:e;if(!this._events[h])return!1;var l,c,g=this._events[h],m=arguments.length;if(g.fn){switch(g.once&&this.removeListener(e,g.fn,void 0,!0),m){case 1:return g.fn.call(g.context),!0;case 2:return g.fn.call(g.context,i),!0;case 3:return g.fn.call(g.context,i,r),!0;case 4:return g.fn.call(g.context,i,r,n),!0;case 5:return g.fn.call(g.context,i,r,n,a),!0;case 6:return g.fn.call(g.context,i,r,n,a,o),!0}for(c=1,l=Array(m-1);c<m;c++)l[c-1]=arguments[c];g.fn.apply(g.context,l)}else{var x,S=g.length;for(c=0;c<S;c++)switch(g[c].once&&this.removeListener(e,g[c].fn,void 0,!0),m){case 1:g[c].fn.call(g[c].context);break;case 2:g[c].fn.call(g[c].context,i);break;case 3:g[c].fn.call(g[c].context,i,r);break;case 4:g[c].fn.call(g[c].context,i,r,n);break;default:if(!l)for(x=1,l=Array(m-1);x<m;x++)l[x-1]=arguments[x];g[c].fn.apply(g[c].context,l)}}return!0},EventEmitter.prototype.on=function(e,i,s){return addListener(this,e,i,s,!1)},EventEmitter.prototype.once=function(e,i,s){return addListener(this,e,i,s,!0)},EventEmitter.prototype.removeListener=function(e,i,r,n){var a=s?s+e:e;if(!this._events[a])return this;if(!i)return clearEvent(this,a),this;var o=this._events[a];if(o.fn)o.fn!==i||n&&!o.once||r&&o.context!==r||clearEvent(this,a);else{for(var h=0,l=[],c=o.length;h<c;h++)(o[h].fn!==i||n&&!o[h].once||r&&o[h].context!==r)&&l.push(o[h]);l.length?this._events[a]=1===l.length?l[0]:l:clearEvent(this,a)}return this},EventEmitter.prototype.removeAllListeners=function(e){var i;return e?(i=s?s+e:e,this._events[i]&&clearEvent(this,i)):(this._events=new Events,this._eventsCount=0),this},EventEmitter.prototype.off=EventEmitter.prototype.removeListener,EventEmitter.prototype.addListener=EventEmitter.prototype.on,EventEmitter.prefixed=s,EventEmitter.EventEmitter=EventEmitter,e.exports=EventEmitter},29523:function(e,i,s){"use strict";s.d(i,{Z:function(){return R}});var r=s(75280),n=s(33834),a=s(86460),o=s(58470),h=s(34970);let l=Phaser.GameObjects.GetCalcMatrix;var c=s(91002),g=s(71549);let m=Phaser.Renderer.Canvas.SetTransform,x=Phaser.GameObjects.Shape,S=Phaser.Utils.Objects.IsPlainObject,_=Phaser.Utils.Objects.GetValue,k=Phaser.Geom.Polygon.Earcut;let RoundRectangle=class RoundRectangle extends x{constructor(e,i,s,n,a,o,h,l){if(S(i)){var c,g,m,x,k=i;i=k.x,s=k.y,n=k.width,a=k.height,o=k.radius,h=k.color,l=k.alpha,c=k.strokeColor,g=k.strokeAlpha,m=k.strokeWidth,x=k.shape}void 0===i&&(i=0),void 0===s&&(s=0),void 0===n&&(n=1),void 0===a&&(a=n),void 0===o&&(o=0),void 0===x&&(x=0);var E=new r.Z;if(super(e,"rexRoundRectangleShape",E),this.setShapeType(x),0===this.shapeType){var R=_(o,"radius",o);E.setTo(0,0,n,a,R)}else{var R={x:n/2,y:a/2};E.setTo(0,0,n,a,R)}var j=_(o,"iteration",void 0);this.setIteration(j),this.setPosition(i,s),this.setFillStyle(h,l),void 0!==c&&void 0===m&&(m=2),this.setStrokeStyle(m,c,g),this.updateDisplayOrigin(),this.dirty=!0}get fillColor(){return this._fillColor}set fillColor(e){this._fillColor=e,this.isFilled=null!=e&&this._fillAlpha>0}get fillAlpha(){return this._fillAlpha}set fillAlpha(e){this._fillAlpha=e,this.isFilled=e>0&&null!=this._fillColor}setFillStyle(e,i){return void 0===i&&(i=1),this.fillColor=e,this.fillAlpha=i,this}get strokeColor(){return this._strokeColor}set strokeColor(e){this._strokeColor=e,this.isStroked=null!=e&&this._strokeAlpha>0&&this._lineWidth>0}get strokeAlpha(){return this._strokeAlpha}set strokeAlpha(e){this._strokeAlpha=e,this.isStroked=e>0&&null!=this._strokeColor&&this._lineWidth>0}get lineWidth(){return this._lineWidth}set lineWidth(e){this._lineWidth=e,this.isStroked=e>0&&null!=this._strokeColor}setStrokeStyle(e,i,s){return void 0===s&&(s=1),this.lineWidth=e,this.strokeColor=i,this.strokeAlpha=s,this}updateData(){var e=this.geom,i=this.pathData;i.length=0;var s,r=e.width,o=e.height,h=e.cornerRadius,l=this.iteration+1;if(IsArcCorner(s=h.tl)){if(s.convex){var c=s.x,g=s.y;(0,a.Z)(c,g,s.x,s.y,180,270,!1,l,i)}else{var c=0,g=0;(0,a.Z)(c,g,s.x,s.y,90,0,!0,l,i)}}else(0,n.Z)(0,0,i);if(IsArcCorner(s=h.tr)){if(s.convex){var c=r-s.x,g=s.y;(0,a.Z)(c,g,s.x,s.y,270,360,!1,l,i)}else{var c=r,g=0;(0,a.Z)(c,g,s.x,s.y,180,90,!0,l,i)}}else(0,n.Z)(r,0,i);if(IsArcCorner(s=h.br)){if(s.convex){var c=r-s.x,g=o-s.y;(0,a.Z)(c,g,s.x,s.y,0,90,!1,l,i)}else{var c=r,g=o;(0,a.Z)(c,g,s.x,s.y,270,180,!0,l,i)}}else(0,n.Z)(r,o,i);if(IsArcCorner(s=h.bl)){if(s.convex){var c=s.x,g=o-s.y;(0,a.Z)(c,g,s.x,s.y,90,180,!1,l,i)}else{var c=0,g=o;(0,a.Z)(c,g,s.x,s.y,360,270,!0,l,i)}}else(0,n.Z)(0,o,i);return i.push(i[0],i[1]),this.pathIndexes=k(i),this}setShapeType(e){return"string"==typeof e&&(e=E[e]),this.shapeType=e,this}get width(){return this.geom.width}set width(e){this.resize(e,this.height)}get height(){return this.geom.height}set height(e){this.resize(this.width,e)}setSize(e,i){if(void 0===i&&(i=e),this.geom.width===e&&this.geom.height===i)return this;this.geom.setSize(e,i),1===this.shapeType&&this.setRadius({x:e/2,y:i/2}),this.updateDisplayOrigin(),this.dirty=!0;var s=this.input;return s&&!s.customHitArea&&(s.hitArea.width=e,s.hitArea.height=i),this}resize(e,i){return this.setSize(e,i),this}get radius(){return this.geom.radius}set radius(e){this.geom.setRadius(e),this.updateDisplayOrigin(),this.dirty=!0}get radiusTL(){return this.geom.radiusTL}set radiusTL(e){this.geom.radiusTL=e,this.dirty=!0}get radiusTR(){return this.geom.radiusTR}set radiusTR(e){this.geom.radiusTR=e,this.dirty=!0}get radiusBL(){return this.geom.radiusBL}set radiusBL(e){this.geom.radiusBL=e,this.dirty=!0}get radiusBR(){return this.geom.radiusBR}set radiusBR(e){this.geom.radiusBR=e,this.dirty=!0}setRadius(e){return void 0===e&&(e=0),this.radius=e,this}setRadiusTL(e){return void 0===e&&(e=0),this.radiusTL=e,this}setRadiusTR(e){return void 0===e&&(e=0),this.radiusTR=e,this}setRadiusBL(e){return void 0===e&&(e=0),this.radiusBL=e,this}setRadiusBR(e){return void 0===e&&(e=0),this.radiusBR=e,this}get cornerRadius(){return this.geom.cornerRadius}set cornerRadius(e){this.radius=e}setCornerRadius(e){return this.setRadius(e)}get iteration(){return this._iteration}set iteration(e){if(void 0===this._iteration){this._iteration=e;return}this._iteration!==e&&(this._iteration=e,this.dirty=!0)}setIteration(e){return void 0===e&&(e=6),this.iteration=e,this}};var IsArcCorner=function(e){return e.x>0&&e.y>0};let E={rectangle:0,circle:1};Object.assign(RoundRectangle.prototype,{renderWebGL:function(e,i,s,r){i.dirty&&(i.updateData(),i.dirty=!1),s.addToRenderList(i);var n=e.pipelines.set(i.pipeline),a=l(i,s,r),c=n.calcMatrix.copyFrom(a.calc),g=i._displayOriginX,m=i._displayOriginY,x=s.alpha*i.alpha;e.pipelines.preBatch(i),i.isFilled&&(0,o.Z)(n,c,i,x,g,m),i.isStroked&&(0,h.Z)(n,i,x,g,m),e.pipelines.postBatch(i)},renderCanvas:function(e,i,s,r){i.dirty&&(i.updateData(),i.dirty=!1),s.addToRenderList(i);var n=e.currentContext;if(m(e,n,i,s,r)){var a=i._displayOriginX,o=i._displayOriginY,h=i.pathData,l=h.length-1,x=h[0]-a,S=h[1]-o;n.beginPath(),n.moveTo(x,S),i.closePath||(l-=2);for(var _=2;_<l;_+=2){var k=h[_]-a,E=h[_+1]-o;n.lineTo(k,E)}n.closePath(),i.isFilled&&((0,c.Z)(n,i),n.fill()),i.isStroked&&((0,g.Z)(n,i),n.stroke()),n.restore()}}});var R=RoundRectangle},58470:function(e,i){"use strict";var s=Phaser.Renderer.WebGL.Utils;i.Z=function(e,i,r,n,a,o){for(var h=s.getTintAppendFloatAlpha(r.fillColor,r.fillAlpha*n),l=r.pathData,c=r.pathIndexes,g=0;g<c.length;g+=3){var m=2*c[g],x=2*c[g+1],S=2*c[g+2],_=l[m+0]-a,k=l[m+1]-o,E=l[x+0]-a,R=l[x+1]-o,j=l[S+0]-a,Y=l[S+1]-o,X=i.getX(_,k),$=i.getY(_,k),Z=i.getX(E,R),q=i.getY(E,R),tt=i.getX(j,Y),te=i.getY(j,Y);e.batchTri(r,X,$,Z,q,tt,te,0,0,1,1,h,h,h,2)}}},91002:function(e,i){"use strict";i.Z=function(e,i,s,r){var n=s||i.fillColor,a=r||i.fillAlpha;e.fillStyle="rgba("+((16711680&n)>>>16)+","+((65280&n)>>>8)+","+(255&n)+","+a+")"}},71549:function(e,i){"use strict";i.Z=function(e,i,s,r){var n=s||i.strokeColor,a=r||i.strokeAlpha;e.strokeStyle="rgba("+((16711680&n)>>>16)+","+((65280&n)>>>8)+","+(255&n)+","+a+")",e.lineWidth=i.lineWidth}},34970:function(e,i){"use strict";var s=Phaser.Renderer.WebGL.Utils;i.Z=function(e,i,r,n,a){var o=e.strokeTint,h=s.getTintAppendFloatAlpha(i.strokeColor,i.strokeAlpha*r);o.TL=h,o.TR=h,o.BL=h,o.BR=h;var l=i.pathData,c=l.length-1,g=i.lineWidth,m=g/2,x=l[0]-n,S=l[1]-a;i.closePath||(c-=2);for(var _=2;_<c;_+=2){var k=l[_]-n,E=l[_+1]-a;e.batchLine(x,S,k,E,m,m,g,_-2,!!i.closePath&&_===c-1),x=k,S=E}}},86460:function(e,i,s){"use strict";var r=s(33834);let n=Phaser.Math.DegToRad;i.Z=function(e,i,s,a,o,h,l,c,g){l&&h>o?h-=360:!l&&h<o&&(h+=360);var m=n(h-o)/c;o=n(o);for(var x=0;x<=c;x++){var S=o+m*x,_=e+s*Math.cos(S),k=i+a*Math.sin(S);(0,r.Z)(_,k,g)}return g}},33834:function(e,i){"use strict";i.Z=function(e,i,s){var r=s.length;if(r>=2){var n=s[r-2],a=s[r-1];if(e===n&&i===a)return s}return s.push(e,i),s}},75280:function(e,i){"use strict";let s=Phaser.Utils.Objects.GetValue;var GetRadius=function(e,i,s){return void 0===e?e={x:i,y:s}:"number"==typeof e&&(e={x:e,y:e}),SetConvex(e),e},SetRadius=function(e,i){"number"==typeof i?(e.x=i,e.y=i):(e.x=s(i,"x",0),e.y=s(i,"y",0)),SetConvex(e)},SetConvex=function(e){e.convex=e.x>=0||e.y>=0,e.x=Math.abs(e.x),e.y=Math.abs(e.y)};i.Z=class{constructor(e,i,s,r,n){void 0===e&&(e=0),void 0===i&&(i=e),void 0===s&&(s=0),void 0===r&&(r=0),void 0===n&&(n=0),this.cornerRadius={},this._width=0,this._height=0,this.setTo(e,i,s,r,n)}setTo(e,i,s,r,n){return this.setPosition(e,i),this.setRadius(n),this.setSize(s,r),this}setPosition(e,i){return this.x=e,this.y=i,this}setRadius(e){return void 0===e&&(e=0),this.radius=e,this}setSize(e,i){return this.width=e,this.height=i,this}get minWidth(){var e=this.cornerRadius;return Math.max(e.tl.x+e.tr.x,e.bl.x+e.br.x)}get minHeight(){var e=this.cornerRadius;return Math.max(e.tl.y+e.bl.y,e.tr.y+e.br.y)}get width(){return this._width}set width(e){null==e&&(e=0),this._width=Math.max(e,this.minWidth)}get height(){return this._height}set height(e){null==e&&(e=0),this._height=Math.max(e,this.minHeight)}get radius(){var e=this.cornerRadius;return Math.max(e.tl.x,e.tl.y,e.tr.x,e.tr.y,e.bl.x,e.bl.y,e.br.x,e.br.y)}set radius(e){"number"==typeof e?(i=e,r=e):(i=s(e,"x",0),r=s(e,"y",0));var i,r,n=this.cornerRadius;n.tl=GetRadius(s(e,"tl",void 0),i,r),n.tr=GetRadius(s(e,"tr",void 0),i,r),n.bl=GetRadius(s(e,"bl",void 0),i,r),n.br=GetRadius(s(e,"br",void 0),i,r)}get radiusTL(){var e=this.cornerRadius.tl;return Math.max(e.x,e.y)}set radiusTL(e){SetRadius(this.cornerRadius.tl,e)}get radiusTR(){var e=this.cornerRadius.tr;return Math.max(e.x,e.y)}set radiusTR(e){SetRadius(this.cornerRadius.tr,e)}get radiusBL(){var e=this.cornerRadius.bl;return Math.max(e.x,e.y)}set radiusBL(e){SetRadius(this.cornerRadius.bl,e)}get radiusBR(){var e=this.cornerRadius.br;return Math.max(e.x,e.y)}set radiusBR(e){SetRadius(this.cornerRadius.br,e)}}},25801:function(e,i,s){"use strict";s.d(i,{Z:function(){return l}});var r=s(29523);function Factory(e,i,s,n,a,o,h){var l=new r.Z(this.scene,e,i,s,n,a,o,h);return this.scene.add.existing(l),l}let n=Phaser.Utils.Objects.GetAdvancedValue,a=Phaser.Utils.Objects.GetValue,o=Phaser.GameObjects.BuildGameObject;function Creator(e,i){void 0===e&&(e={}),void 0!==i&&(e.add=i);var s=n(e,"width",void 0),h=n(e,"height",s),l=a(e,"radius",void 0),c=n(e,"fillColor",void 0),g=n(e,"fillAlpha",void 0),m=new r.Z(this.scene,0,0,s,h,l,c,g);return o(this.scene,m,e),m}var h=s(62616);let RoundRectanglePlugin=class RoundRectanglePlugin extends Phaser.Plugins.BasePlugin{constructor(e){super(e),e.registerGameObject("rexRoundRectangle",Factory,Creator)}start(){this.game.events.on("destroy",this.destroy,this)}};(0,h.Z)(window,"RexPlugins.GameObjects.RoundRectangle",r.Z);var l=RoundRectanglePlugin},73936:function(e,i){"use strict";i.Z={setEventEmitter(e,i){return void 0===i&&(i=Phaser.Events.EventEmitter),this._privateEE=!0===e||void 0===e,this._eventEmitter=this._privateEE?new i:e,this},destroyEventEmitter(){return this._eventEmitter&&this._privateEE&&this._eventEmitter.shutdown(),this},getEventEmitter(){return this._eventEmitter},on(){return this._eventEmitter&&this._eventEmitter.on.apply(this._eventEmitter,arguments),this},once(){return this._eventEmitter&&this._eventEmitter.once.apply(this._eventEmitter,arguments),this},off(){return this._eventEmitter&&this._eventEmitter.off.apply(this._eventEmitter,arguments),this},emit(e){return this._eventEmitter&&e&&this._eventEmitter.emit.apply(this._eventEmitter,arguments),this},addListener(){return this._eventEmitter&&this._eventEmitter.addListener.apply(this._eventEmitter,arguments),this},removeListener(){return this._eventEmitter&&this._eventEmitter.removeListener.apply(this._eventEmitter,arguments),this},removeAllListeners(){return this._eventEmitter&&this._eventEmitter.removeAllListeners.apply(this._eventEmitter,arguments),this},listenerCount(){return this._eventEmitter?this._eventEmitter.listenerCount.apply(this._eventEmitter,arguments):0},listeners(){return this._eventEmitter?this._eventEmitter.listeners.apply(this._eventEmitter,arguments):[]},eventNames(){return this._eventEmitter?this._eventEmitter.eventNames.apply(this._eventEmitter,arguments):[]}}},27306:function(e,i){"use strict";var s={};i.Z=function(e,i,r){var n=e.camera;return n?(void 0===r?r={}:!0===r&&(r=s),n===i?(r.x=e.worldX,r.y=e.worldY):n.getWorldPoint(e.x,e.y,r),r):null}},3074:function(e,i){"use strict";var s={};i.Z=function(e,i,r){switch(void 0===r?r={}:!0===r&&(r=s),r.left=!1,r.right=!1,r.up=!1,r.down=!1,e=(e+360)%360,i){case 0:e<180?r.down=!0:r.up=!0;break;case 1:e>90&&e<=270?r.left=!0:r.right=!0;break;case 2:e>45&&e<=135?r.down=!0:e>135&&e<=225?r.left=!0:e>225&&e<=315?r.up=!0:r.right=!0;break;case 3:e>22.5&&e<=67.5?(r.down=!0,r.right=!0):e>67.5&&e<=112.5?r.down=!0:e>112.5&&e<=157.5?(r.down=!0,r.left=!0):e>157.5&&e<=202.5?r.left=!0:e>202.5&&e<=247.5?(r.left=!0,r.up=!0):e>247.5&&e<=292.5?r.up=!0:(e>292.5&&e<=337.5&&(r.up=!0),r.right=!0)}return r}},57731:function(e,i){"use strict";i.Z={"up&down":0,"left&right":1,"4dir":2,"8dir":3}},62616:function(e,i){"use strict";var IsInValidKey=function(e){return null==e||""===e||0===e.length},GetEntry=function(e,i,s){var r=e;if(IsInValidKey(i));else{"string"==typeof i&&(i=i.split("."));for(var n,a,o=0,h=i.length;o<h;o++)(null==r[n=i[o]]||"object"!=typeof r[n])&&(a=o===h-1?void 0===s?{}:s:{},r[n]=a),r=r[n]}return r};i.Z=function(e,i,s,r){if(void 0===r&&(r="."),"object"==typeof e){if(IsInValidKey(i)){if(null==s)return;"object"==typeof s&&(e=s)}else{"string"==typeof i&&(i=i.split(r));var n=i.pop();GetEntry(e,i)[n]=s}return e}}},41073:function(e,i,s){"use strict";var r=s(57374);let VirtualJoyStickPlugin=class VirtualJoyStickPlugin extends Phaser.Plugins.BasePlugin{constructor(e){super(e)}start(){this.game.events.on("destroy",this.destroy,this)}add(e,i){return new r.Z(e,i)}};i.Z=VirtualJoyStickPlugin},57374:function(e,i,s){"use strict";s.d(i,{Z:function(){return X}});let r=Phaser.Input.Keyboard.Key,n=Phaser.Input.Keyboard.KeyCodes;var a={timeStamp:0,keyCode:0,altKey:!1,ctrlKey:!1,shiftKey:!1,metaKey:!1,location:0},o=class{constructor(e){this.cursorKeys={up:new r(e,n.UP),down:new r(e,n.DOWN),left:new r(e,n.LEFT),right:new r(e,n.RIGHT)},this.noKeyDown=!0}shutdown(e){for(var i in this.cursorKeys)this.cursorKeys[i].destroy();this.cursorKeys=void 0}destroy(e){shutdown(e)}createCursorKeys(){return this.cursorKeys}setKeyState(e,i){var s=this.cursorKeys[e];return s.enabled&&(i&&(this.noKeyDown=!1),s.isDown!==i&&(a.timeStamp=Date.now(),a.keyCode=s.keyCode,i?s.onDown(a):s.onUp(a))),this}clearAllKeysState(){for(var e in this.noKeyDown=!0,this.cursorKeys)this.setKeyState(e,!1);return this}getKeyState(e){return this.cursorKeys[e]}get upKeyDown(){return this.cursorKeys.up.isDown}get downKeyDown(){return this.cursorKeys.down.isDown}get leftKeyDown(){return this.cursorKeys.left.isDown}get rightKeyDown(){return this.cursorKeys.right.isDown}get anyKeyDown(){return!this.noKeyDown}},h=180/Math.PI,l=s(57731),c=s(3074);let g=Phaser.Utils.Objects.GetValue,m=Phaser.Math.Distance.Between,x=Phaser.Math.Angle.Between;var S=class extends o{constructor(e,i){super(e),this.resetFromJSON(i)}resetFromJSON(e){void 0==this.start&&(this.start={x:0,y:0}),void 0==this.end&&(this.end={x:0,y:0}),this._enable=void 0,this.setEnable(g(e,"enable",!0)),this.setMode(g(e,"dir","8dir")),this.setDistanceThreshold(g(e,"forceMin",16));var i=g(e,"start.x",null),s=g(e,"start.y",null),r=g(e,"end.x",null),n=g(e,"end.y",null);return this.setVector(i,s,r,n),this}toJSON(){return{enable:this.enable,dir:this.dirMode,forceMin:this.forceMin,start:{x:this.start.x,y:this.start.y},end:{x:this.end.x,y:this.end.y}}}setMode(e){return"string"==typeof e&&(e=l.Z[e]),this.dirMode=e,this}get enable(){return this._enable}set enable(e){if(this._enable!==e)return e||this.clearVector(),this._enable=e,this}setEnable(e){return void 0===e&&(e=!0),this.enable=e,this}toggleEnable(){return this.setEnable(!this.enable),this}setDistanceThreshold(e){return e<0&&(e=0),this.forceMin=e,this}clearVector(){return this.start.x=0,this.start.y=0,this.end.x=0,this.end.y=0,this.clearAllKeysState(),this}setVector(e,i,s,r){if(!this.enable)return this;if(null===e||(void 0===s&&(s=e,e=0,r=i,i=0),this.start.x=e,this.start.y=i,this.end.x=s,this.end.y=r,this.forceMin>0&&this.force<this.forceMin))return this.clearVector(),this;this.noKeyDown=!0;var n=(0,c.Z)(this.angle,this.dirMode,!0);for(var a in n)this.setKeyState(a,n[a]);return this}get forceX(){return this.end.x-this.start.x}get forceY(){return this.end.y-this.start.y}get force(){return m(this.start.x,this.start.y,this.end.x,this.end.y)}get rotation(){return x(this.start.x,this.start.y,this.end.x,this.end.y)}get angle(){return this.rotation*h}get octant(){var e=0;return this.rightKeyDown?e=this.downKeyDown?45:0:this.downKeyDown?e=this.leftKeyDown?135:90:this.leftKeyDown?e=this.upKeyDown?225:180:this.upKeyDown&&(e=this.rightKeyDown?315:270),e}},_=s(73936),k=s(27306);let E=Phaser.Utils.Objects.GetValue,R=Phaser.Geom.Circle,j=Phaser.Geom.Circle.Contains;let TouchCursor=class TouchCursor extends S{constructor(e,i){var s=e.scene;super(s,i);var r=E(i,"eventEmitter",void 0),n=E(i,"EventEmitterClass",void 0);this.setEventEmitter(r,n),this.scene=s,this.mainCamera=s.sys.cameras.main,this.pointer=void 0,this.gameObject=e,this.radius=E(i,"radius",100),e.setInteractive(new R(e.displayOriginX,e.displayOriginY,this.radius),j),this.boot()}resetFromJSON(e){return super.resetFromJSON(e),this.pointer=void 0,this}toJSON(){var e=super.toJSON();return e.radius=this.radius,e}boot(){this.gameObject.on("pointerdown",this.onKeyDownStart,this),this.gameObject.on("pointerover",this.onKeyDownStart,this),this.scene.input.on("pointermove",this.onKeyDown,this),this.scene.input.on("pointerup",this.onKeyUp,this),this.gameObject.once("destroy",this.onParentDestroy,this)}shutdown(e){this.scene&&(this.scene.input.off("pointermove",this.onKeyDown,this),this.scene.input.off("pointerup",this.onKeyUp,this),this.destroyEventEmitter(),this.scene=void 0,this.mainCamera=void 0,this.pointer=void 0,this.gameObject=void 0,super.shutdown())}get enable(){return this._enable}set enable(e){if(this._enable!==e)return e||(this.pointer=void 0),super.enable=e,this}destroy(e){this.shutdown(e)}onParentDestroy(e,i){this.destroy(i)}onKeyDownStart(e){e.isDown&&void 0===this.pointer&&(this.pointer=e,this.onKeyDown(e),this.emit("pointerdown",e))}onKeyDown(e){if(this.pointer===e){var i=(0,k.Z)(e,this.mainCamera,!0);if(i){var s=e.camera,r=this.gameObject,n=r.x,a=r.y;0===r.scrollFactorX&&(n+=s.scrollX),0===r.scrollFactorY&&(a+=s.scrollY),this.setVector(n,a,i.x,i.y),this.end.x=i.x,this.end.y=i.y,this.emit("update")}}}onKeyUp(e){this.pointer===e&&(this.pointer=void 0,this.clearVector(),this.emit("update"),this.emit("pointerup",e))}forceUpdate(){var e=this.pointer;return e&&e.isDown&&this.onKeyDown(e),this}};Object.assign(TouchCursor.prototype,_.Z);let Y=Phaser.Utils.Objects.GetValue;let VirtualJoyStick=class VirtualJoyStick{constructor(e,i){void 0===i&&(i={});var s=Y(i,"eventEmitter",void 0),r=Y(i,"EventEmitterClass",void 0);this.setEventEmitter(s,r),i.eventEmitter=this.getEventEmitter(),this.scene=e,this.base=void 0,this.thumb=void 0,this.touchCursor=void 0,this.setRadius(Y(i,"radius",100)),this.addBase(Y(i,"base",void 0),i),this.addThumb(Y(i,"thumb",void 0));var n=Y(i,"x",0),a=Y(i,"y",0);this.base.setPosition(n,a),this.thumb.setPosition(n,a),Y(i,"fixed",!0)&&this.setScrollFactor(0),this.boot()}destroy(){this.destroyEventEmitter(),this.base.destroy(),this.thumb.destroy(),this.scene=void 0,this.base=void 0,this.thumb=void 0,this.touchCursor=void 0}createCursorKeys(){return this.touchCursor.createCursorKeys()}get forceX(){return this.touchCursor.forceX}get forceY(){return this.touchCursor.forceY}get force(){return this.touchCursor.force}get rotation(){return this.touchCursor.rotation}get angle(){return this.touchCursor.angle}get up(){return this.touchCursor.upKeyDown}get down(){return this.touchCursor.downKeyDown}get left(){return this.touchCursor.leftKeyDown}get right(){return this.touchCursor.rightKeyDown}get noKey(){return this.touchCursor.noKeyDown}get pointerX(){return this.touchCursor.end.x}get pointerY(){return this.touchCursor.end.y}get pointer(){return this.touchCursor.pointer}setPosition(e,i){return this.x===e&&this.y===i||(this.x=e,this.y=i,this.forceUpdateThumb()),this}set x(e){this.x!==e&&(this.base.x=e,this.thumb.x=e)}set y(e){this.y!==e&&(this.base.y=e,this.thumb.y=e)}get x(){return this.base.x}get y(){return this.base.y}setVisible(e){return this.visible=e,this}toggleVisible(){return this.visible=!this.visible,this}get visible(){return this.base.visible}set visible(e){this.base.visible=e,this.thumb.visible=e,this.enable=e}get enable(){return this.touchCursor.enable}set enable(e){this.touchCursor.setEnable(e)}setEnable(e){return void 0===e&&(e=!0),this.enable=e,this}toggleEnable(){return this.setEnable(!this.enable),this}setRadius(e){return this.radius=e,this}addBase(e,i){return this.base&&this.base.destroy(),void 0===e&&(e=this.scene.add.circle(0,0,this.radius).setStrokeStyle(3,255)),void 0===i&&(i={}),i.eventEmitter=this.getEventEmitter(),this.touchCursor=new TouchCursor(e,i),this.base=e,this}addThumb(e){return this.thumb&&this.thumb.destroy(),void 0===e&&(e=this.scene.add.circle(0,0,40).setStrokeStyle(3,65280)),this.thumb=e,this}setScrollFactor(e){return this.base.setScrollFactor(e),this.thumb.setScrollFactor(e),this}boot(){this.on("update",this.update,this)}update(){var e,i,s=this.touchCursor,r=s.dirMode;if(s.anyKeyDown){if(s.force>this.radius){var n=s.rotation;e=0!==r?Math.cos(n)*this.radius:0,i=1!==r?Math.sin(n)*this.radius:0}else e=0!==r?s.forceX:0,i=1!==r?s.forceY:0}else e=0,i=0;return this.thumb.x=this.base.x+e,this.thumb.y=this.base.y+i,this}forceUpdateThumb(){return this.touchCursor.forceUpdate(),this}};Object.assign(VirtualJoyStick.prototype,_.Z);var X=VirtualJoyStick},69562:function(e,i,s){"use strict";s.d(i,{Z:function(){return c}});var r=s(11377),n=s.n(r);let a=Phaser.Display.Canvas.CanvasPool;var webfontloader_TestFont=function(e,i){var s=a.create(),r=s.getContext("2d",{willReadFrequently:!0}),n=`8px ${e}`;r.font=n;var o=Math.ceil(r.measureText(i).width),h=2*o;(o!==s.width||h!==s.height)&&(s.width=o,s.height=h),r.fillStyle="#000",r.fillRect(0,0,o,h),r.textBaseline="alphabetic",r.fillStyle="#fff",r.font=n,r.fillText(i,0,o);for(var l=r.getImageData(0,0,o,h).data,c=!1,g=0,m=l.length;g<m;g+=4)if(l[g]>0){c=!0;break}return a.remove(s),c};let o=Phaser.Loader.FILE_POPULATED,h=Phaser.Utils.Objects.GetValue;let WebFont=class WebFont extends Phaser.Loader.File{load(){if(this.state===o)this.loader.nextFile(this,!0);else{var e=this.config;this.testString=h(e,"testString",void 0),void 0!==this.testString&&(this.testInterval=h(e,"testInterval",20),this.fontTests={},delete e.testString,delete e.testInterval),e.active=this.onLoad.bind(this),e.inactive=this.onError.bind(this),e.fontactive=this.onFontActive.bind(this),e.fontinactive=this.onFontInactive.bind(this),n().load(e)}}onLoad(){if(void 0===this.testString)this.loader.nextFile(this,!0);else{var e=(function(){this.testFonts()?this.loader.nextFile(this,!0):setTimeout(e,this.testInterval)}).bind(this);e()}}onError(){this.loader.nextFile(this,!1)}onFontActive(e,i){if(void 0!==this.testString){var s;void 0!==(s="string"==typeof this.testString?this.testString:this.testString[e])&&(this.fontTests[e]=s)}this.loader.emit("webfontactive",this,e,i)}onFontInactive(e,i){this.loader.emit("webfontinactive",this,e,i)}testFonts(){var e=!0;for(var i in this.fontTests)webfontloader_TestFont(i,this.fontTests[i])?delete this.fontTests[i]:e=!1;return e}};let l=Phaser.Utils.Objects.IsPlainObject;var WebFontLoaderCallback=function(e,i){return l(e)?(i=e).hasOwnProperty("config")?(i.type="webfont",i.url=""):i={key:"webfont",type:"webfont",url:"",config:i}:i={type:"webfont",url:"",key:e,config:i},this.addFile(new WebFont(this,i)),this};let WebFontLoaderPlugin=class WebFontLoaderPlugin extends Phaser.Plugins.BasePlugin{constructor(e){super(e),e.registerFileType("rexWebFont",WebFontLoaderCallback)}addToScene(e){e.sys.load.rexWebFont=WebFontLoaderCallback}};var c=WebFontLoaderPlugin},64741:function(e,i,s){"use strict";s.d(i,{Z:function(){return fL}});let ObjectFactory=class ObjectFactory{constructor(e){this.scene=e,this.displayList=e.sys.displayList,this.updateList=e.sys.updateList,e.events.once("destroy",this.destroy,this)}destroy(){this.scene=null,this.displayList=null,this.updateList=null}static register(e,i){ObjectFactory.prototype[e]=i}};var DefaultGetFrameNameCallback=function(e,i,s){return"__BASE"===s?`${e},${i}`:`${s}:${e},${i}`},object_IsPlainObject=function(e){if("object"!=typeof e||e.nodeType||e===e.window)return!1;try{if(e.constructor&&!({}).hasOwnProperty.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(e){return!1}return!0},DeepClone=function(e){var i,s,r;if(null==e||"object"!=typeof e)return e;if(i=Array.isArray(e)?[]:{},object_IsPlainObject(e))for(r in e)s=e[r],i[r]=DeepClone(s);else i=e;return i};let r=Phaser.Utils.Objects.IsPlainObject,n=Phaser.Utils.Objects.GetValue;var parseMode=function(e){return"string"==typeof e&&(e=a[e]),e};let a={scale:0,repeat:1};var utils_IsEdge=function(e,i){return 0===e||e===this.columns.count-1||0===i||i===this.rows.count-1},object_NOOP=function(){},o={_beginDraw:object_NOOP,_drawImage:object_NOOP,_drawTileSprite:object_NOOP,_endDraw:object_NOOP,setGetFrameNameCallback:function(e){return void 0===e&&(e=DefaultGetFrameNameCallback),this.getFrameNameCallback=e,this},setBaseTexture:function(e,i,s,r){Array.isArray(i)&&(r=s,s=i,i=void 0),null==i&&(i="__BASE"),"number"==typeof s&&arguments.length>=6?(s=[arguments[2],void 0,arguments[3]],r=[arguments[4],void 0,arguments[5]]):void 0===s&&void 0===r&&void 0!==this.columns.data&&void 0!==this.rows.data?(s=this.columns.data,r=this.rows.data):(s=DeepClone(s),r=DeepClone(r)),this.textureKey=e,this.baseFrameName=i,this.columns.data=s,this.columns.count=s?s.length:0,this.columns.stretch=0,this.columns.minWidth=0,this.columns.scale=1,this.rows.data=r,this.rows.count=r?r.length:0,this.rows.stretch=0,this.rows.minHeight=0,this.rows.scale=1;var n,a,o,h,l,c=this.scene.sys.textures.get(e);if(!c||!s||!r)return this.clear(),this;for(var g=c.get(i),m=g.width,x=0,S=0,_=s.length;S<_;S++)void 0===s[S]?x++:"number"==typeof s[S]?m-=s[S]:m-=s[S].width;for(var k=x>0?m/x:0,E=g.height,R=0,S=0,_=r.length;S<_;S++)void 0===r[S]?R++:"number"==typeof r[S]?E-=r[S]:E-=r[S].width;for(var j=R?E/R:0,Y=0,X=0,$=0,Z=r.length;$<Z;$++){void 0===r[$]&&(r[$]=j),"number"==typeof r[$]&&(r[$]={height:r[$],stretch:$%2}),o=(n=r[$]).height,this.rows.stretch+=0|n.stretch,this.rows.minHeight+=n.stretch>0?0:o,Y=0;for(var S=0,q=s.length;S<q;S++){if(void 0===s[S]&&(s[S]=k),"number"==typeof s[S]&&(s[S]={width:s[S],stretch:S%2}),h=(a=s[S]).width,0===$&&(this.columns.stretch+=0|a.stretch,this.columns.minWidth+=a.stretch>0?0:h),h>=1&&o>=1){var tt=typeof(l=this.getFrameNameCallback(S,$,i));("string"===tt||"number"===tt)&&c.add(l,0,Y+g.cutX,X+g.cutY,h,o)}Y+=h}X+=o}return this.updateTexture(),this},updateTexture:function(){if(this.clear(),void 0===this.textureKey)return this;var e,i,s,r,n,a,o,h=this.scene.sys.textures.get(this.textureKey);if(!h)return this;var l=this.columns.minWidth*this.maxFixedPartScaleX,c=this.rows.minHeight*this.maxFixedPartScaleY,g=this.width-l,m=this.height-c,x=g>=0?this.maxFixedPartScaleX:this.width/l,S=m>=0?this.maxFixedPartScaleY:this.height/c;if(this.preserveRatio){var _=Math.min(x,S);if(x>_){var k=(x-_)*l;g>=0?g+=k:g=k,x=_}if(S>_){var E=(S-_)*c;m>=0?m+=E:m=E,S=_}}this.columns.scale=x,this.rows.scale=S,e=g>0&&this.columns.stretch>0?g/this.columns.stretch:0,i=m>0&&this.rows.stretch>0?m/this.rows.stretch:0;var R=0,j=0;this._beginDraw();for(var Y=0,X=this.rows.count;Y<X;Y++){o=0===(n=this.rows.data[Y]).stretch?n.height*S:i*n.stretch,R=0;for(var $=0,Z=this.columns.count;$<Z;$++)a=0===(r=this.columns.data[$]).stretch?r.width*x:e*r.stretch,s=this.getFrameNameCallback($,Y,this.baseFrameName),h.has(s)&&a>0&&o>0&&(0==(0===n.stretch&&0===r.stretch?0:0===this.getStretchMode($,Y)?0:1)?this._drawImage(this.textureKey,s,R,j,a,o):this._drawTileSprite(this.textureKey,s,R,j,a,o)),R+=a;j+=o}this._endDraw()},setStretchMode:function(e){return r(e)?(this.stretchMode.edge=parseMode(n(e,"edge",0)),this.stretchMode.internal=parseMode(n(e,"internal",0))):(e=parseMode(e),this.stretchMode.edge=e,this.stretchMode.internal=e),this},getStretchMode:function(e,i){return utils_IsEdge.call(this,e,i)?this.stretchMode.edge:this.stretchMode.internal},setPreserveRatio:function(e){return void 0==e&&(e=!0),this.preserveRatio=e,this},setMaxFixedPartScale:function(e,i){return void 0===i&&(i=e),this.maxFixedPartScaleX=e,this.maxFixedPartScaleY=i,this}};let h=Phaser.Utils.Objects.IsPlainObject,l=Phaser.Utils.Objects.GetValue;var ninepatch_NinePatch=function(e,i){let NinePatch=class NinePatch extends e{constructor(e,s,r,n,a,o,c,g,m,x){if(h(s)?(s=l(x=s,"x",0),r=l(x,"y",0),n=l(x,"width",1),a=l(x,"height",1),o=l(x,"key",void 0),c=l(x,"baseFrame",void 0),g=l(x,"columns",void 0),m=l(x,"rows",void 0)):h(n)?(n=l(x=n,"width",1),a=l(x,"height",1),o=l(x,"key",void 0),c=l(x,"baseFrame",void 0),g=l(x,"columns",void 0),m=l(x,"rows",void 0)):h(o)?(o=l(x=o,"key",void 0),c=l(x,"baseFrame",void 0),g=l(x,"columns",void 0),m=l(x,"rows",void 0)):h(c)?(c=l(x=c,"baseFrame",void 0),g=l(x,"columns",void 0),m=l(x,"rows",void 0)):Array.isArray(c)?(x=m,m=g,g=c,c=l(x,"baseFrame",void 0)):h(g)&&(g=l(x=g,"columns",void 0),m=l(x,"rows",void 0)),void 0===c&&(c=l(x,"frame",void 0)),void 0===g){var S=l(x,"leftWidth",void 0),_=l(x,"rightWidth",void 0);void 0!==S&&void 0!==_&&(g=[S,void 0,_])}if(void 0===m){var k=l(x,"topHeight",void 0),E=l(x,"bottomHeight",void 0);void 0!==k&&void 0!==E&&(m=[k,void 0,E])}super(e),this.type=i,this.setPosition(s,r).setSize(n,a).setOrigin(.5,.5),this.columns={},this.rows={},this.stretchMode={},this._tileSprite=void 0,this._image=void 0,this.setGetFrameNameCallback(l(x,"getFrameNameCallback",void 0)),this.setStretchMode(l(x,"stretchMode",0)),this.setPreserveRatio(l(x,"preserveRatio",!0));var R=l(x,"maxFixedPartScale",1),j=l(x,"maxFixedPartScaleX",R),Y=l(x,"maxFixedPartScaleY",void 0);this.setMaxFixedPartScale(j,Y),this.setBaseTexture(o,c,g,m)}get minWidth(){return this.columns.minWidth}get minHeight(){return this.rows.minHeight}get fixedPartScaleX(){return this.columns.scale}get fixedPartScaleY(){return this.rows.scale}resize(e,i){return this.width===e&&this.height===i||(super.resize?super.resize(e,i):super.setSize(e,i),this.updateTexture()),this}get leftWidth(){return this.columns.data[0]}get rightWidth(){return this.columns.data[this.columns.count-1]}get topHeight(){return this.rows.data[0]}get bottomHeight(){return this.rows.data[this.rows.count-1]}};return Object.assign(NinePatch.prototype,o),NinePatch};let c=Phaser.Game;var system_IsGame=function(e){return e instanceof c};let g=Phaser.Scene;var system_IsSceneObject=function(e){return e instanceof g},system_GetGame=function(e){return null==e||"object"!=typeof e?null:system_IsGame(e)?e:system_IsGame(e.game)?e.game:system_IsSceneObject(e)?e.sys.game:system_IsSceneObject(e.scene)?e.scene.sys.game:void 0};let m=Phaser.GameObjects;var x=void 0,utils_GetStampGameObject=function(e,i){if(x||(x={},system_GetGame(e).events.once("destroy",function(){for(var e in x)x[e].destroy();x=void 0})),!x.hasOwnProperty(i)){var s=system_GetGame(e).scene.systemScene,e=new m[i](s);e.setOrigin(0),x[i]=e}return x[i]};let S=Phaser.GameObjects.RenderTexture;let NinePatch_NinePatch=class NinePatch_NinePatch extends ninepatch_NinePatch(S,"rexNinePatch"){};Object.assign(NinePatch_NinePatch.prototype,{_drawImage:function(e,i,s,r,n,a){var o=utils_GetStampGameObject(this,"Image").setTexture(e,i).setDisplaySize(n,a);this.draw(o,s,r)},_drawTileSprite:function(e,i,s,r,n,a){var o=utils_GetStampGameObject(this,"TileSprite").setTexture(e,i).setSize(n,a);this.draw(o,s,r)}});var _=NinePatch_NinePatch,k=s(62616);ObjectFactory.register("ninePatch",function(e,i,s,r,n,a,o,h){var l=new _(this.scene,e,i,s,r,n,a,o,h);return this.scene.add.existing(l),l}),(0,k.Z)(window,"RexPlugins.UI.NinePatch",_);let E=Phaser.GameObjects.GetCalcMatrix,R=Phaser.Renderer.Canvas.SetTransform;var methods_Resize=function(e,i){if(this.width===e&&this.height===i)return this;this.width=e,this.height=i,this.updateDisplayOrigin();var s=this.input;return s&&!s.customHitArea&&(s.hitArea.width=e,s.hitArea.height=i),this};let j=Phaser.Utils.Array.Remove;var methods_RemoveChildren=function(){return this.poolManager&&this.poolManager.freeMultiple(this.children.list),this.children.list.length=0,this.lastAppendedChildren.length=0,this.dirty=!0,this},Y={setTexture:function(e,i){return this.texture=this.scene.sys.textures.get(e),this.frame=this.texture.get(i),this},resize:methods_Resize,setSize:methods_Resize,addChild:function(e){return this.lastAppendedChildren.length=0,Array.isArray(e)?(this.children.add(e),this.lastAppendedChildren.push(...e)):(this.children.add(e),this.lastAppendedChildren.push(e)),this},removeChild:function(e){return this.poolManager&&this.poolManager.free(e),j(this.children.list,e),this.lastAppendedChildren.length=0,this.dirty=!0,this},removeChildren:methods_RemoveChildren,clear:methods_RemoveChildren,getLastAppendedChildren:function(){return this.lastAppendedChildren},getChildren:function(){return this.children.list}};Object.assign(Y,{setTint(e){return this.tint=e,this.tintFill=!1,this},setTintFill(e){return this.tint=e,this.tintFill=!0,this},clearTint(){return this.setTint(16777215),this}});var X=class{constructor(){this.items=[]}destroy(){this.clear(),this.items=void 0}pop(){return this.items.length>0?this.items.pop():null}push(e){return this.items.push(e),this}pushMultiple(e){return this.items.push.apply(this.items,e),e.length=0,this}clear(){return this.items.length=0,this}};let $=Phaser.Utils.Objects.GetValue;var Z={},q=class{constructor(e){this.pools=$(e,"pools",Z)}destroy(){this.pools=void 0}free(e){if(!this.pools)return this;var i=e.type;return this.pools.hasOwnProperty(i)||(this.pools[i]=new X),this.pools[i].push(e),e.onFree(),this}freeMultiple(e){if(!this.pools)return this;for(var i=0,s=e.length;i<s;i++)this.free(e[i]);return this}allocate(e){return this.pools&&this.pools.hasOwnProperty(e)?this.pools[e].pop():null}},tt=!1,system_CheckP3Version=function(e){tt||(void 0===e&&(e=60),parseInt(Phaser.VERSION.match(/\.(\d+)\./)[1])<e&&console.error(`Minimum supported version : 3.${e}`),tt=!0)};system_CheckP3Version();let te=Phaser.GameObjects.GameObject,ti=Phaser.Utils.Objects.IsPlainObject,ts=Phaser.Utils.Objects.GetValue,tr=Phaser.Structs.List,tn=Phaser.Utils.Array.StableSort;let Blitter=class Blitter extends te{constructor(e,i,s,r,n,a){ti(i)&&(i=ts(a=i,"x",0),s=ts(a,"y",0),r=ts(a,"texture"),n=ts(a,"frame")),void 0===i&&(i=0),void 0===s&&(s=0),super(e,"rexBlitter"),this.children=new tr,this.renderList=[],this.displayListDirty=!1,this.lastAppendedChildren=[];var o=ts(a,"reuseBob",!0);this.poolManager=o?new q(a):void 0,this.setTexture(r,n),this.setPosition(i,s),this.setOrigin(0,0),this.clearTint(),this.initPipeline(),this.initPostPipeline()}preDestroy(){this.removeChildren(),this.children.destroy(),this.renderList.length=0,this.poolManager&&this.poolManager.destroy()}getRenderList(){if(this.displayListDirty){this.renderList.length=0;for(var e=!1,i=this.children.list,s=0,r=i.length;s<r;s++){var n=i[s];ChildCanRender(n)&&(this.renderList.push(n),e||(e=0!==n.depth))}e&&tn(this.renderList,SortByDepth),this.displayListDirty=!1}return this.renderList}};var ChildCanRender=function(e){return e.active&&e.visible&&e.alpha>0},SortByDepth=function(e,i){return e._depth-i._depth};let to=Phaser.GameObjects.Components;Phaser.Class.mixin(Blitter,[to.Alpha,to.BlendMode,to.ComputedSize,to.Depth,to.GetBounds,to.Mask,to.Origin,to.Pipeline,to.PostPipeline,to.ScrollFactor,to.Transform,to.Visible,{renderWebGL:function(e,i,s,r){var n=i.getRenderList();if(0!==n.length){s.addToRenderList(i);var a=e.pipelines.set(i.pipeline),o=i.frame.glTexture,h=a.setGameObject(i),l=s.roundPixels,c=E(i,s,r),g=a.calcMatrix.copyFrom(c.calc),m=i._displayOriginX,x=i._displayOriginY,S=s.alpha*i.alpha;e.pipelines.preBatch(i);for(var _=0,k=n.length;_<k;_++)n[_].webglRender(a,g,S,m,x,o,h,l);e.pipelines.postBatch(i)}},renderCanvas:function(e,i,s,r){var n=e.currentContext,a=i.getRenderList();if(0!==a.length&&R(e,n,i,s,r)){s.addToRenderList(i);var o=s.roundPixels,h=-i._displayOriginX,l=-i._displayOriginY;n.translate(h,l);for(var c=0,g=a.length;c<g;c++)a[c].canvasRender(n,h,l,o);n.restore()}}},Y]);var th=Blitter;let tl="image";var object_GetValue=function(e,i,s){if(!e||"number"==typeof e)return s;if(e.hasOwnProperty(i))return e[i];if(-1===i.indexOf("."))return s;for(var r=i.split("."),n=e,a=s,o=0;o<r.length;o++)if(n.hasOwnProperty(r[o]))a=n[r[o]],n=n[r[o]];else{a=s;break}return a},object_Clear=function(e){if("object"!=typeof e||null===e)return e;if(Array.isArray(e))e.length=0;else for(var i in e)delete e[i];return e},td={enableData(){return void 0===this.data&&(this.data={}),this},setData(e,i){if(this.enableData(),1==arguments.length){var s=e;for(e in s)this.data[e]=s[e]}else this.data[e]=i;return this},getData(e,i){return this.enableData(),void 0===e?this.data:object_GetValue(this.data,e,i)},incData(e,i,s){return void 0===s&&(s=0),this.enableData(),this.setData(e,this.getData(e,s)+i),this},mulData(e,i,s){return void 0===s&&(s=0),this.enableData(),this.setData(e,this.getData(e,s)*i),this},clearData(){return this.data&&object_Clear(this.data),this}};let Base_Base=class Base_Base{constructor(e,i){this.type=i,this.data=void 0,this.setParent(e).reset().setActive()}destroy(){this.parent&&this.parent.removeChild(this)}setParent(e){return this.parent=e,this}setDisplayListDirty(e){return e&&this.parent&&(this.parent.displayListDirty=!0),this}get active(){return this._active}set active(e){this.setDisplayListDirty(this._active!=e),this._active=e}setActive(e){return void 0===e&&(e=!0),this.active=e,this}modifyPorperties(e){return this}reset(){this.clearData()}onFree(){this.reset().setActive(!1).setParent()}};Object.assign(Base_Base.prototype,td);var tc=Base_Base;let tu=Phaser.Math.DegToRad,tp=Phaser.Math.RadToDeg,tg=Phaser.Utils.Objects.GetValue;var tv=class extends tc{get visible(){return this._visible}set visible(e){this.setDisplayListDirty(this._visible!=e),this._visible=e}setVisible(e){return void 0===e&&(e=!0),this.visible=e,this}get alpha(){return this._alpha}set alpha(e){this.setDisplayListDirty(!!this._alpha!=!!e),this._alpha=e}setAlpha(e){return this.alpha=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setPosition(e,i){return this.x=e,this.y=i,this}setRotation(e){return this.rotation=e,this}get angle(){return tp(this.rotation)}set angle(e){this.rotation=tu(e)}setAngle(e){return this.angle=e,this}setScaleX(e){return this.scaleX=e,this}get width(){return this._width}set width(e){this._width=e}setWidth(e,i){return void 0===i&&(i=!1),this.width=e,i&&(this.scaleY=this.scaleX),this}setScaleY(e){return this.scaleY=e,this}setScale(e,i){return void 0===i&&(i=e),this.scaleX=e,this.scaleY=i,this}get height(){return this._height}set height(e){this._height=e}setHeight(e,i){return void 0===i&&(i=!1),this.height=e,i&&(this.scaleX=this.scaleY),this}setScale(e,i){return void 0===i&&(i=e),this.scaleX=e,this.scaleY=i,this}get displayWidth(){return this._width*this.scaleX}set displayWidth(e){this.scaleX=e/this._width}setDisplayWidth(e,i){return void 0===i&&(i=!1),this.displayWidth=e,i&&(this.scaleY=this.scaleX),this}get displayHeight(){return this._height*this.scaleY}set displayHeight(e){this.scaleY=e/this._height}setDisplayHeight(e,i){return void 0===i&&(i=!1),this.displayHeight=e,i&&(this.scaleX=this.scaleY),this}setOriginX(e){return this.originX=e,this._displayOriginX=this.width*e,this}setOriginY(e){return this.originY=e,this._displayOriginY=this.height*e,this}setOrigin(e,i){return void 0===i&&(i=e),this.setOriginX(e).setOriginY(i),this}get depth(){return this._depth}set depth(e){this.setDisplayListDirty(this._depth!=e),this._depth=e}setDepth(e){return void 0===e&&(e=0),this.depth=e,this}modifyPorperties(e){if(!e)return this;e.hasOwnProperty("x")&&this.setX(e.x),e.hasOwnProperty("y")&&this.setY(e.y),e.hasOwnProperty("rotation")?this.setRotation(e.rotation):e.hasOwnProperty("angle")&&this.setAngle(e.angle),e.hasOwnProperty("alpha")&&this.setAlpha(e.alpha);var i=tg(e,"width",void 0),s=tg(e,"height",void 0),r=tg(e,"scale",void 0),n=tg(e,"scaleX",r),a=tg(e,"scaleY",r);void 0!==i?void 0===s&&void 0===a?this.setWidth(i,!0):this.setWidth(i):void 0!==n?this.setScaleX(n):e.hasOwnProperty("displayWidth")&&this.setDisplayWidth(e.displayWidth),void 0!==s?void 0===i&&void 0===n?this.setHeight(s,!0):this.setHeight(s):void 0!==a?this.setScaleY(a):e.hasOwnProperty("displayHeight")&&this.setDisplayHeight(e.displayHeight);var o=tg(e,"origin",void 0);return void 0!==o?this.setOrigin(o):(e.hasOwnProperty("originX")&&this.setOriginX(e.originX),e.hasOwnProperty("originY")&&this.setOriginY(e.originY)),e.hasOwnProperty("depth")&&this.setDepth(e.depth),this}reset(){return super.reset(),this.setVisible().setAlpha(1).setPosition(0,0).setRotation(0).setScale(1,1).setOrigin(0).setDepth(0),this}webglRender(e,i,s,r,n,a,o,h){}canvasRender(e,i,s,r){}};let tf=Phaser.GameObjects.Components.TransformMatrix,tm=Phaser.Renderer.WebGL.Utils.getTintAppendFloatAlpha;var tb=new tf;let ty=Phaser.Utils.Objects.IsPlainObject;let ImageData=class ImageData extends tv{constructor(e,i){super(e,tl),this.setFrame(i)}get width(){return this._width}set width(e){}get height(){return this._height}set height(e){}setFrame(e){return arguments.length>0&&!ty(e)&&(e=this.parent.texture.get(e)),this.frame=e,this._width=e?e.width:0,this._height=e?e.height:0,this}setFlipX(e){return void 0===e&&(e=!0),this.flipX=e,this}setFlipY(e){return void 0===e&&(e=!0),this.flipY=e,this}resetFlip(){return this.flipX=!1,this.flipY=!1,this}get tint(){return void 0===this._tint?this.parent.tint:this._tint}set tint(e){this._tint=e}setTint(e){return this.tint=e,this.tintFill=!1,this}setTintFill(e){return this.tint=e,this.tintFill=!0,this}clearTint(){return this.setTint(16777215),this}resetTint(){return this.tint=void 0,this.tintFill=void 0,this}get tintFill(){return void 0===this._tintFill?this.parent.tintFill:this._tintFill}set tintFill(e){this._tintFill=e}reset(){return super.reset(),this.resetFlip().resetTint().setFrame(),this}modifyPorperties(e){return e&&(e.hasOwnProperty("width")&&(e.displayWidth=e.width,delete e.width),e.hasOwnProperty("height")&&(e.displayHeight=e.height,delete e.height),e.hasOwnProperty("frame")&&this.setFrame(e.frame),super.modifyPorperties(e),e.hasOwnProperty("flipX")&&this.setFlipX(e.flipX),e.hasOwnProperty("flipY")&&this.setFlipY(e.flipY),e.hasOwnProperty("tint")&&this.setTint(e.tint),e.hasOwnProperty("tintFill")&&this.setTintFill(e.tintFill)),this}};Object.assign(ImageData.prototype,{webglRender:function(e,i,s,r,n,a,o,h){var l=this._width,c=this._height,g=l*this.originX,m=c*this.originY,x=this.x-r,S=this.y-n,_=1,k=1;this.flipX&&(x+=l-2*g,_=-1),this.flipY&&(S+=c-2*m,k=-1),tb.applyITRS(x,S,this.rotation,this.scaleX*_,this.scaleY*k),i.multiply(tb,tb);var E=-g,R=-m,j=E+l,Y=R+c,X=tb.setQuad(E,R,j,Y,h),$=this.frame.u0,Z=this.frame.v0,q=this.frame.u1,tt=this.frame.v1,te=tm(this.tint,this.alpha*s);e.batchQuad(this.parent,X[0],X[1],X[2],X[3],X[4],X[5],X[6],X[7],$,Z,q,tt,te,te,te,te,this.tintFill,a,o)},canvasRender:function(e,i,s,r){e.save();var n=this._width,a=this._height,o=n*this.originX,h=a*this.originY,l=this.x-o,c=this.y-h,g=1,m=1;this.flipX&&(l+=n,g=-1),this.flipY&&(c+=a,m=-1),r&&(l=Math.round(l),c=Math.round(c)),e.translate(l,c),e.rotate(this.rotation),e.scale(this.scaleX*g,this.scaleY*m);var x=this.frame;e.drawImage(x.source.image,x.cutX,x.cutY,n,a,0,0,n,a),e.restore()}});var utils_AddImage=function(e,i){"string"==typeof i&&(i={frame:i});var s=e.poolManager?e.poolManager.allocate(tl):null;return null===s?s=new ImageData(e):s.setParent(e).setActive(),s.modifyPorperties(i),e.addChild(s),s};let ninepatch_NinePatch_NinePatch=class ninepatch_NinePatch_NinePatch extends ninepatch_NinePatch(th,"rexNinePatch2"){setBaseTexture(e,i,s,r){return this.setTexture(e,i),super.setBaseTexture(e,i,s,r),this}};Object.assign(ninepatch_NinePatch_NinePatch.prototype,{_drawImage:function(e,i,s,r,n,a){utils_AddImage(this,{frame:i,x:s,y:r,width:n,height:a})},_drawTileSprite:function(e,i,s,r,n,a){var o=this.texture.get(i),h=o.width,l=o.height,c=Math.floor(n/h),g=Math.floor(a/l);s+=(n-c*h)/2,r+=(a-g*l)/2;for(var m=0;m<c;m++)for(var x=0;x<g;x++)utils_AddImage(this,{frame:i,x:s+m*h,y:r+x*l})}}),ObjectFactory.register("ninePatch2",function(e,i,s,r,n,a,o,h){var l=new ninepatch_NinePatch_NinePatch(this.scene,e,i,s,r,n,a,o,h);return this.scene.add.existing(l),l}),(0,k.Z)(window,"RexPlugins.UI.NinePatch2",ninepatch_NinePatch_NinePatch);var tC=s(29523).Z;ObjectFactory.register("roundRectangle",function(e,i,s,r,n,a,o){var h=new tC(this.scene,e,i,s,r,n,a,o);return this.scene.add.existing(h),h}),(0,k.Z)(window,"RexPlugins.UI.RoundRectangle",tC);let tx=Phaser.Renderer.WebGL.Utils,tS=Phaser.Display.Color;var texture_CopyCanvasToTexture=function(e,i,s,r,n,a,o){var h,l=e.sys.textures,c=e.renderer;void 0===r&&(r=0),void 0===n&&(n=0),void 0===a&&(a=i.width),void 0===o&&(o=i.height);var g=(h=l.exists(s)?l.get(s):l.createCanvas(s,a,o)).getSourceImage();g.width!==a&&(g.width=a),g.height!==o&&(g.height=o);var m=g.getContext("2d",{willReadFrequently:!0});m.clearRect(0,0,a,o),m.drawImage(i,r,n,a,o),c.gl&&h&&c.canvasToTexture(g,h.source[0].glTexture,!0,0)};system_CheckP3Version();let t_=Phaser.Display.Canvas.CanvasPool,tw=Phaser.GameObjects.GameObject,tP=Phaser.Utils.String.UUID;let Canvas_Canvas=class Canvas_Canvas extends tw{constructor(e,i,s,r,n){void 0===i&&(i=0),void 0===s&&(s=0),void 0===r&&(r=1),void 0===n&&(n=1),super(e,"rexCanvas"),this.renderer=e.sys.game.renderer,this.resolution=1,this._width=r,this._height=n,r=Math.max(Math.ceil(r*this.resolution),1),n=Math.max(Math.ceil(n*this.resolution),1),this.canvas=t_.create(this,r,n),this.context=this.canvas.getContext("2d",{willReadFrequently:!0}),this.dirty=!1,this.setPosition(i,s),this.setOrigin(.5,.5),this.initPipeline(),this.initPostPipeline(!0),this._crop=this.resetCropObject(),this._textureKey=tP(),this.texture=e.sys.textures.addCanvas(this._textureKey,this.canvas),this.frame=this.texture.get(),this.frame.source.resolution=this.resolution,this.renderer&&this.renderer.gl&&(this.renderer.deleteTexture(this.frame.source.glTexture),this.frame.source.glTexture=null),this.dirty=!0}preDestroy(){t_.remove(this.canvas),this.canvas=null,this.context=null;var e=this.texture;e&&e.destroy()}get width(){return this._width}set width(e){this.setSize(e,this._height)}get height(){return this._height}set height(e){this.setSize(this._width,e)}setCanvasSize(e,i){return this._width===e&&this._height===i||(this._width=e,this._height=i,this.updateDisplayOrigin(),e=Math.max(Math.ceil(e*this.resolution),1),i=Math.max(Math.ceil(i*this.resolution),1),this.canvas.width=e,this.canvas.height=i,this.frame.setSize(e,i),this.dirty=!0),this}setSize(e,i){return this.setCanvasSize(e,i),this}get displayWidth(){return this.scaleX*this._width}set displayWidth(e){this.scaleX=e/this._width}get displayHeight(){return this.scaleY*this._height}set displayHeight(e){this.scaleY=e/this._height}setDisplaySize(e,i){return this.displayWidth=e,this.displayHeight=i,this}getCanvas(e){return e||(this.dirty=!0),this.canvas}getContext(e){return e||(this.dirty=!0),this.context}needRedraw(){return this.dirty=!0,this}resize(e,i){return this.setSize(e,i),this}};let tk=Phaser.GameObjects.Components;Phaser.Class.mixin(Canvas_Canvas,[tk.Alpha,tk.BlendMode,tk.Crop,tk.Depth,tk.Flip,tk.GetBounds,tk.Mask,tk.Origin,tk.Pipeline,tk.PostPipeline,tk.ScrollFactor,tk.Tint,tk.Transform,tk.Visible,{renderWebGL:function(e,i,s,r){if(i.dirty&&(i.updateTexture(),i.dirty=!1),0!==i.width&&0!==i.height){s.addToRenderList(i);var n=i.frame,a=n.width,o=n.height,h=tx.getTintAppendFloatAlpha,l=e.pipelines.set(i.pipeline,i),c=l.setTexture2D(n.glTexture,i);e.pipelines.preBatch(i),l.batchTexture(i,n.glTexture,a,o,i.x,i.y,a/i.resolution,o/i.resolution,i.scaleX,i.scaleY,i.rotation,i.flipX,i.flipY,i.scrollFactorX,i.scrollFactorY,i.displayOriginX,i.displayOriginY,0,0,a,o,h(i.tintTopLeft,s.alpha*i._alphaTL),h(i.tintTopRight,s.alpha*i._alphaTR),h(i.tintBottomLeft,s.alpha*i._alphaBL),h(i.tintBottomRight,s.alpha*i._alphaBR),i.tintFill,0,0,s,r,!1,c),e.pipelines.postBatch(i)}},renderCanvas:function(e,i,s,r){i.dirty&&(i.updateTexture(),i.dirty=!1),0!==i.width&&0!==i.height&&(s.addToRenderList(i),e.batchSprite(i,i.frame,s,r))}},{clear(){return this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.dirty=!0,this},fill(e){return this.context.fillStyle=e,this.context.fillRect(0,0,this.canvas.width,this.canvas.height),this.dirty=!0,this},drawFrame(e,i,s,r,n,a,o,h,l,c){var g=this.scene.sys.textures.getFrame(e,i);if(!g)return this;var m=g.cutWidth,x=g.cutHeight;void 0===s&&(s=0),void 0===r&&(r=0),void 0===n&&(n=m),void 0===a&&(a=x),void 0===o&&(o=0),void 0===h&&(h=0),void 0===l&&(l=m),void 0===c&&(c=x);var S=g.cutX+o,_=g.cutY+h;return this.context.drawImage(g.source.image,S,_,l,c,s,r,n,a),this.dirty=!0,this},getDataURL(e,i){return this.canvas.toDataURL(e,i)},getPixel(e,i,s){void 0===s&&(s=new tS);var r=this.context.getImageData(e,i,1,1);return s.setTo(r.data[0],r.data[1],r.data[2],r.data[3]),s},setPixel(e,i,s,r,n,a){if("number"!=typeof s){var o=s;s=o.red,r=o.green,n=o.blue,a=o.alpha}void 0===a&&(a=0!==s||0!==r||0!==n?255:0);var h=this.context.createImageData(1,1);return h.data[0]=s,h.data[1]=r,h.data[2]=n,h.data[3]=a,this.context.putImageData(h,e,i),this.dirty=!0,this}},{updateTexture(e,i){e&&(i?e.call(i,this.canvas,this.context):e(this.canvas,this.context)),(this.canvas.width!==this.frame.width||this.canvas.height!==this.frame.height)&&this.frame.setSize(this.canvas.width,this.canvas.height),this.renderer&&this.renderer.gl&&(this.frame.source.glTexture=this.renderer.canvasToTexture(this.canvas,this.frame.source.glTexture,!0),this.frame.glTexture.spectorMetadata={textureKey:"Canvas Game Object"}),this.dirty=!1;var s=this.input;return s&&!s.customHitArea&&(s.hitArea.width=this.width,s.hitArea.height=this.height),this},generateTexture(e,i,s,r,n){var a=this.canvas;return void 0===r?r=a.width:r*=this.resolution,void 0===n?n=a.height:n*=this.resolution,texture_CopyCanvasToTexture(this.scene,a,e,i,s,r,n),this},loadTexture(e,i){var s=this.scene.sys.textures.getFrame(e,i);return s&&(this.width!==s.cutWidth||this.height!==s.cutHeight?this.setSize(s.cutWidth,s.cutHeight):this.clear(),this.drawFrame(e,i),this.dirty=!0),this}}]);var tT=Canvas_Canvas;let tO=Phaser.Utils.String.Pad;var canvas_GetStyle=function(e,i,s){if(null==e)return e;switch(typeof e){case"string":default:return e;case"number":return`#${tO(Math.floor(e).toString(16),6,"0",1)}`;case"function":return e(i,s);case"object":if(e.hasOwnProperty("r")){if(e.hasOwnProperty("a"))return`rgba(${e.r},${e.g},${e.b},${e.a})`;return`rgb(${e.r},${e.g},${e.b})`}if(!e.hasOwnProperty("h"))return e;if(e.hasOwnProperty("a"))return`hsla(${e.h},${e.s},${e.l},${e.a})`;return`hsl(${e.h},${e.s},${e.l})`}},tM=s(75280);let tE=Phaser.Math.DegToRad;var IsConvexArc=function(e){return!e.hasOwnProperty("convex")||e.convex},IsArcCorner=function(e){return e.x>0&&e.y>0},ArcTo=function(e,i,s,r,n,a,o,h,l){if(h&&o>a?o-=360:!h&&o<a&&(o+=360),a=tE(a),o=tE(o),null==l)e.ellipse(i,s,r,n,0,a,o,h);else for(var c,g,m,x=(o-a)/(l+=1),S=0;S<=l;S++)c=i+r*Math.cos(m=a+x*S),g=s+n*Math.sin(m),e.lineTo(c,g)},canvas_AddRoundRectanglePath=function(e,i,s,r,n,a,o){var h,l,c,g,m,x,S=new tM.Z(i,s,r,n,a),_=S.minWidth,k=S.minHeight,E=r>=_?1:r/_,R=n>=k?1:n/k,j=S.cornerRadius;e.save(),e.beginPath(),e.translate(i,s),IsArcCorner(h=j.tl)?(l=h.x*E,c=h.y*R,IsConvexArc(h)?ArcTo(e,l,c,l,c,180,270,!1,o):ArcTo(e,0,0,l,c,90,0,!0,o),m=0,x=c):(e.lineTo(0,0),m=0,x=0),IsArcCorner(h=j.tr)?(l=h.x*E,c=h.y*R,IsConvexArc(h)?ArcTo(e,r-l,c,l,c,270,360,!1,o):ArcTo(e,r,0,l,c,180,90,!0,o)):e.lineTo(r,0),IsArcCorner(h=j.br)?(l=h.x*E,c=h.y*R,IsConvexArc(h)?ArcTo(e,r-l,n-c,l,c,0,90,!1,o):ArcTo(e,r,n,l,c,270,180,!0,o)):e.lineTo(r,n),IsArcCorner(h=j.bl)?(l=h.x*E,c=h.y*R,IsConvexArc(h)?ArcTo(e,l,n-c,l,c,90,180,!1,o):ArcTo(e,0,n,l,c,360,270,!0,o)):e.lineTo(0,n),e.lineTo(m,x),e.closePath(),e.restore()},canvas_DrawRoundRectangle=function(e,i,s,r,n,a,o,h,l,c,g,m,x){if(canvas_AddRoundRectanglePath(i,s,r,n,a,o,x),null!=h){if(null!=g){var S;(S=m?i.createLinearGradient(0,0,n,0):i.createLinearGradient(0,0,0,a)).addColorStop(0,h),S.addColorStop(1,g),h=S}i.fillStyle=h,i.fill()}null!=l&&c>0&&(i.strokeStyle=l,i.lineWidth=c,i.stroke())},utils_DrawRoundRectangleBackground=function(e,i,s,r,n,a,o,h){if(null!=i||null!=s){var l=e.canvas.width,c=e.canvas.height;null==s&&(r=0);var g=r/2;l=Math.max(1,l-r),c=Math.max(1,c-r),canvas_DrawRoundRectangle(e.canvas,e.context,g,g,l,c,n,i,s,r,a,o,h)}},roundrectangle_DrawContent=function(){utils_DrawRoundRectangleBackground(this,this.fillStyle,this.strokeStyle,this.lineWidth,this.radius,this.fillColor2,this.isHorizontalGradient,this.iteration)};let tR=Phaser.Utils.Objects.GetValue;var tL=class extends tT{constructor(e,i,s,r,n,a,o,h,l,c,g){void 0===i&&(i=0),void 0===s&&(s=0),void 0===r&&(r=1),void 0===n&&(n=r),void 0===a&&(a=0),super(e,i,s,r,n),this.type="rexRoundRectangleCanvas";var m=tR(a,"radius",a),x=tR(a,"iteration",void 0);this.setRadius(m),this.setIteration(x),this.setFillStyle(o,c,g),this.setStrokeStyle(h,l)}get radius(){return this._radius}set radius(e){this.dirty|=this._radius!=e,this._radius=e}setRadius(e){return this.radius=e,this}get iteration(){return this._iteration}set iteration(e){this.dirty|=this._iteration!=e,this._iteration=e}setIteration(e){return this.iteration=e,this}get fillStyle(){return this._fillStyle}set fillStyle(e){e=canvas_GetStyle(e,this.canvas,this.context),this.dirty|=this._fillStyle!=e,this._fillStyle=e}get fillColor2(){return this._fillColor2}set fillColor2(e){e=canvas_GetStyle(e,this.canvas,this.context),this.dirty|=this._fillColor2!=e,this._fillColor2=e}get isHorizontalGradient(){return this._isHorizontalGradient}set isHorizontalGradient(e){this.dirty|=this._isHorizontalGradient!=e,this._isHorizontalGradient=e}setFillStyle(e,i,s){return void 0===s&&(s=!0),this.fillStyle=e,this.fillColor2=i,this.isHorizontalGradient=s,this}get strokeStyle(){return this._strokeStyle}set strokeStyle(e){e=canvas_GetStyle(e,this.canvas,this.context),this.dirty|=this._strokeStyle!=e,this._strokeStyle=e}get lineWidth(){return this._lineWidth}set lineWidth(e){this.dirty|=this._lineWidth!=e,this._lineWidth=e}setStrokeStyle(e,i){return this.strokeStyle=e,this.lineWidth=i,this}updateTexture(){return this.clear(),roundrectangle_DrawContent.call(this),super.updateTexture(),this}};ObjectFactory.register("roundRectangleCanvas",function(e,i,s,r,n,a,o,h,l,c){var g=new tL(this.scene,e,i,s,r,n,a,o,h,l,c);return this.scene.add.existing(g),g}),(0,k.Z)(window,"RexPlugins.UI.RoundRectangleCanvas",tL);var tB=Phaser.Renderer.WebGL.Utils;let tI=Phaser.Display.Canvas.CanvasPool;var textstyle_MeasureTextMargins=function(e,i,s){void 0===s&&(s={});var r=tI.create(this),n=r.getContext("2d",{willReadFrequently:!0});e.syncFont(r,n);var a=Math.ceil(n.measureText(i).width*e.baselineX),o=a,h=2*o;if(o=o*e.baselineY|0,r.width=a,r.height=h,n.fillStyle="#f00",n.fillRect(0,0,a,h),n.font=e._font,n.textBaseline="alphabetic",n.fillStyle="#000",n.fillText(e.testString,0,o),s.left=0,0===a||0===h||!n.getImageData(0,0,a,h))return tI.remove(r),s;for(var l=n.getImageData(0,0,a,h).data,c=!1,g=0;g<a;g++){for(var m=0;m<h;m++)if(255!==l[(m*a+g)*4]){s.left=g,c=!0;break}if(c)break}return tI.remove(r),s};system_CheckP3Version();let tG=Phaser.GameObjects.GameObject;let TextBase=class TextBase extends tG{setStyle(e){return this.style.setStyle(e)}setFont(e){return this.style.setFont(e)}setFontFamily(e){return this.style.setFontFamily(e)}setFontSize(e){return this.style.setFontSize(e)}setFontStyle(e){return this.style.setFontStyle(e)}setTestString(e){return this.style.setTestString(e)}setFixedSize(e,i){return this.style.setFixedSize(e,i)}setBackgroundColor(e,i,s){return this.style.setBackgroundColor(e,i,s)}setBackgroundStrokeColor(e,i){return this.style.setBackgroundStrokeColor(e,i)}setBackgroundCornerRadius(e,i){return this.style.setBackgroundCornerRadius(e,i)}setFill(e){return this.style.setFill(e)}setColor(e){return this.style.setColor(e)}setStroke(e,i){return this.style.setStroke(e,i)}setShadow(e,i,s,r,n,a){return this.style.setShadow(e,i,s,r,n,a)}setShadowOffset(e,i){return this.style.setShadowOffset(e,i)}setShadowColor(e){return this.style.setShadowColor(e)}setShadowBlur(e){return this.style.setShadowBlur(e)}setShadowStroke(e){return this.style.setShadowStroke(e)}setShadowFill(e){return this.style.setShadowFill(e)}setWrapMode(e){return this.style.setWrapMode(e)}setWrapWidth(e){return this.style.setWrapWidth(e)}setWordWrapWidth(e){return this.style.setWrapWidth(e)}setAlign(e){return this.style.setHAlign(e)}setHAlign(e){return this.style.setHAlign(e)}setVAlign(e){return this.style.setVAlign(e)}setLineSpacing(e){return this.lineSpacing=e,this.updateText(!1),this}setXOffset(e){return this.style.setXOffset(e)}setMaxLines(e){return this.style.setMaxLines(e)}setResolution(e){return this.style.setResolution(e)}getTextMetrics(){return this.style.getTextMetrics()}setTextMetrics(e,i){return this.style.setTextMetrics(e,i)}measureTextMargins(e,i){return textstyle_MeasureTextMargins(this.style,e,i)}};let tD=Phaser.GameObjects.Components;Phaser.Class.mixin(TextBase,[tD.Alpha,tD.BlendMode,tD.ComputedSize,tD.Crop,tD.Depth,tD.Flip,tD.GetBounds,tD.Mask,tD.Origin,tD.Pipeline,tD.PostPipeline,tD.ScrollFactor,tD.Tint,tD.Transform,tD.Visible,{renderWebGL:function(e,i,s,r){if(0!==i.width&&0!==i.height){s.addToRenderList(i);var n=i.frame,a=n.width,o=n.height,h=tB.getTintAppendFloatAlpha,l=e.pipelines.set(i.pipeline,i),c=l.setTexture2D(n.glTexture,i);e.pipelines.preBatch(i),l.batchTexture(i,n.glTexture,a,o,i.x,i.y,a/i.style.resolution,o/i.style.resolution,i.scaleX,i.scaleY,i.rotation,i.flipX,i.flipY,i.scrollFactorX,i.scrollFactorY,i.displayOriginX,i.displayOriginY,0,0,a,o,h(i.tintTopLeft,s.alpha*i._alphaTL),h(i.tintTopRight,s.alpha*i._alphaTR),h(i.tintBottomLeft,s.alpha*i._alphaBL),h(i.tintBottomRight,s.alpha*i._alphaBR),i.tintFill,0,0,s,r,!1,c),e.pipelines.postBatch(i)}},renderCanvas:function(e,i,s,r){0!==i.width&&0!==i.height&&(s.addToRenderList(i),e.batchSprite(i,i.frame,s,r))}}]);var tj=TextBase,tA={backgroundColor:["backgroundColor",null,canvas_GetStyle],backgroundColor2:["backgroundColor2",null,canvas_GetStyle],backgroundHorizontalGradient:["backgroundHorizontalGradient",!0,null],backgroundStrokeColor:["backgroundStrokeColor",null,canvas_GetStyle],backgroundStrokeLineWidth:["backgroundStrokeLineWidth",2,null],backgroundCornerRadius:["backgroundCornerRadius",0,null],backgroundCornerIteration:["backgroundCornerIteration",null,null],fontFamily:["fontFamily","Courier",null],fontSize:["fontSize","16px",null],fontStyle:["fontStyle","",null],color:["color","#fff",canvas_GetStyle],stroke:["stroke","#fff",canvas_GetStyle],strokeThickness:["strokeThickness",0,null],shadowOffsetX:["shadow.offsetX",0,null],shadowOffsetY:["shadow.offsetY",0,null],shadowColor:["shadow.color","#000",canvas_GetStyle],shadowBlur:["shadow.blur",0,null],shadowStroke:["shadow.stroke",!1,null],shadowFill:["shadow.fill",!1,null],underlineColor:["underline.color","#000",canvas_GetStyle],underlineThickness:["underline.thickness",0,null],underlineOffset:["underline.offset",0,null],strikethroughColor:["strikethrough.color","#000",canvas_GetStyle],strikethroughThickness:["strikethrough.thickness",0,null],strikethroughOffset:["strikethrough.offset",0,null],halign:["halign","left",null],valign:["valign","top",null],maxLines:["maxLines",0,null],fixedWidth:["fixedWidth",0,null],fixedHeight:["fixedHeight",0,null],resolution:["resolution",0,null],lineSpacing:["lineSpacing",0,null],xOffset:["xOffset",0,null],rtl:["rtl",!1,null],testString:["testString","|M\xc3‰qgy",null],baselineX:["baselineX",1.2,null],baselineY:["baselineY",1.4,null],wrapMode:["wrap.mode",0,null],wrapWidth:["wrap.width",0,null],wrapCallback:["wrap.callback",null],wrapCallbackScope:["wrap.callbackScope",null]};/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2018 Photon Storm Ltd.
 * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
 */let tF=Phaser.Display.Canvas.CanvasPool;var textstyle_MeasureText=function(e){var i,s,r=tF.create(this),n=r.getContext("2d",{willReadFrequently:!0});e.syncFont(r,n);var a=n.measureText(e.testString);if("actualBoundingBoxAscent"in a){var o=a.actualBoundingBoxAscent,h=a.actualBoundingBoxDescent,l={ascent:o,descent:h,fontSize:o+h};return tF.remove(r),l}var c=Math.ceil(a.width*e.baselineX),g=c,m=2*g;g=g*e.baselineY|0,r.width=c,r.height=m,n.fillStyle="#f00",n.fillRect(0,0,c,m),n.font=e._font,n.textBaseline="alphabetic",n.fillStyle="#000",n.fillText(e.testString,0,g);var l={ascent:0,descent:0,fontSize:0};if(!n.getImageData(0,0,c,m))return l.ascent=g,l.descent=g+6,l.fontSize=l.ascent+l.descent,tF.remove(r),l;var x=n.getImageData(0,0,c,m).data,S=x.length,_=4*c,k=0,E=!1;for(i=0;i<g;i++){for(s=0;s<_;s+=4)if(255!==x[k+s]){E=!0;break}if(E)break;k+=_}for(l.ascent=g-i,k=S-_,E=!1,i=m;i>g;i--){for(s=0;s<_;s+=4)if(255!==x[k+s]){E=!0;break}if(E)break;k-=_}return l.descent=i-g,l.fontSize=l.ascent+l.descent,tF.remove(r),l},tz={NO_NEWLINE:0,RAW_NEWLINE:1,WRAPPED_NEWLINE:2,NO_WRAP:0,WORD_WRAP:1,CHAR_WRAP:2,MIX_WRAP:3,SPLITREGEXP:/(?:\r\n|\r|\n)/};let tW={none:tz.NO_WRAP,word:tz.WORD_WRAP,char:tz.CHAR_WRAP,character:tz.CHAR_WRAP,mix:tz.MIX_WRAP},tV=Phaser.Utils.Objects.GetAdvancedValue,tY=Phaser.Utils.Objects.GetValue;var tX=class{constructor(e,i,s){this.parent=e,void 0===s&&(s=tA),this.propertyMap=s,this.backgroundColor,this.backgroundColor2,this.backgroundHorizontalGradient,this.backgroundStrokeColor,this.backgroundStrokeLineWidth,this.backgroundCornerRadius,this.backgroundCornerIteration,this.fontFamily,this.fontSize,this.fontStyle,this.color,this.stroke,this.strokeThickness,this.shadowOffsetX,this.shadowOffsetY,this.shadowColor,this.shadowBlur,this.shadowStroke,this.shadowFill,this.underlineColor,this.underlineThickness,this.underlineOffset,this.strikethroughColor,this.strikethroughThickness,this.strikethroughOffset,this.halign,this.valign,this.maxLines,this.fixedWidth,this.fixedHeight,this.resolution,this.xOffset,this.rtl,this.testString,this.baselineX,this.baselineY,this.wrapMode,this.wrapWidth,this.wrapCallback,this.wrapCallbackScope,this._font,this.setStyle(i,!1,!0)}get isWrapFitMode(){return this.fixedWidth>0&&this.wrapMode!==tz.NO_WRAP&&0===this.wrapWidth}setStyle(e,i,s){if(void 0===i&&(i=!0),void 0===s&&(s=!1),e&&e.hasOwnProperty("wordWrap")){var r=e.wordWrap;r.hasOwnProperty("width")&&(e.wrap={mode:"word",width:r.width})}if(e&&e.hasOwnProperty("wrap")){var n=e.wrap;if(n.hasOwnProperty("mode")){var a=n.mode;"string"==typeof a&&(n.mode=tW[a])}else n.hasOwnProperty("width")&&(n.mode=1)}e&&e.rtl&&s&&!e.hasOwnProperty("halign")&&(e.halign="right"),e&&e.hasOwnProperty("fontSize")&&"number"==typeof e.fontSize&&(e.fontSize=e.fontSize.toString()+"px");var o=this.propertyMap;for(var h in o){var l=o[h],c=l[0],g=s?l[1]:this[h],m=l[2];if("wrapCallback"===h||"wrapCallbackScope"===h)this[h]=tY(e,c,g);else{var x=tV(e,c,g);m&&(x=m(x)),this[h]=x}}var S=tY(e,"font",null);null===S?this._font=this.fontStyle+" "+this.fontSize+" "+this.fontFamily:this._font=S;var _=tY(e,"fill",null);null!==_&&(this.color=canvas_GetStyle(_));var k=tY(e,"metrics",!1);return(k?this.metrics={ascent:tY(k,"ascent",0),descent:tY(k,"descent",0),fontSize:tY(k,"fontSize",0)}:(i||!this.metrics)&&(this.metrics=textstyle_MeasureText(this)),i)?this.parent.updateText():this.parent}syncFont(e,i){i.font=this._font}syncStyle(e,i){i.textBaseline="alphabetic",i.fillStyle=this.color,i.strokeStyle=this.stroke,i.lineWidth=this.strokeThickness,i.lineCap="round",i.lineJoin="round"}syncShadow(e,i){i?(e.shadowOffsetX=this.shadowOffsetX,e.shadowOffsetY=this.shadowOffsetY,e.shadowColor=this.shadowColor,e.shadowBlur=this.shadowBlur):(e.shadowOffsetX=0,e.shadowOffsetY=0,e.shadowColor=0,e.shadowBlur=0)}update(e){return e&&(this._font=`${this.fontStyle} ${this.fontSize} ${this.fontFamily}`.trim(),this.metrics=textstyle_MeasureText(this)),this.parent.updateText(e)}buildFont(){var e=`${this.fontStyle} ${this.fontSize} ${this.fontFamily}`.trim();return e!==this._font&&(this._font=e),this}setFont(e){return"string"==typeof e?(this.fontFamily=e,this.fontSize="",this.fontStyle=""):(this.fontFamily=tY(e,"fontFamily","Courier"),this.fontSize=tY(e,"fontSize","16px"),this.fontStyle=tY(e,"fontStyle","")),this.update(!0)}setFontFamily(e){return this.fontFamily=e,this.update(!0)}setFontStyle(e){return this.fontStyle=e,this.update(!0)}setFontSize(e){return"number"==typeof e&&(e=e.toString()+"px"),this.fontSize=e,this.update(!0)}setTestString(e){return this.testString=e,this.update(!0)}setFixedSize(e,i){return this.fixedWidth=e,this.fixedHeight=i,e&&(this.parent.width=e),i&&(this.parent.height=i),this.update(this.isWrapFitMode)}setResolution(e){return this.resolution=e,this.update(!1)}setXOffset(e){return this.xOffset=e,this.update(!1)}setBackgroundColor(e,i,s){return void 0===s&&(s=!0),this.backgroundColor=canvas_GetStyle(e,this.parent.canvas,this.parent.context),this.backgroundColor2=canvas_GetStyle(i,this.parent.canvas,this.parent.context),this.backgroundHorizontalGradient=s,this.update(!1)}setBackgroundStrokeColor(e,i){return this.backgroundStrokeColor=canvas_GetStyle(e,this.parent.canvas,this.parent.context),this.backgroundStrokeLineWidth=i,this.update(!1)}setBackgroundCornerRadius(e,i){return this.backgroundCornerRadius=e,this.backgroundCornerIteration=i,this.update(!1)}setFill(e){return this.color=canvas_GetStyle(e,this.parent.canvas,this.parent.context),this.update(!1)}setColor(e){return this.color=canvas_GetStyle(e,this.parent.canvas,this.parent.context),this.update(!1)}setStroke(e,i){return void 0===e?this.strokeThickness=0:(void 0===i&&(i=this.strokeThickness),this.stroke=canvas_GetStyle(e,this.parent.canvas,this.parent.context),this.strokeThickness=i),this.update(!0)}setShadow(e,i,s,r,n,a){return void 0===e&&(e=0),void 0===i&&(i=0),void 0===s&&(s="#000"),void 0===r&&(r=0),void 0===n&&(n=!1),void 0===a&&(a=!0),this.shadowOffsetX=e,this.shadowOffsetY=i,this.shadowColor=canvas_GetStyle(s,this.parent.canvas,this.parent.context),this.shadowBlur=r,this.shadowStroke=n,this.shadowFill=a,this.update(!1)}setShadowOffset(e,i){return void 0===e&&(e=0),void 0===i&&(i=e),this.shadowOffsetX=e,this.shadowOffsetY=i,this.update(!1)}setShadowColor(e){return void 0===e&&(e="#000"),this.shadowColor=canvas_GetStyle(e,this.parent.canvas,this.parent.context),this.update(!1)}setShadowBlur(e){return void 0===e&&(e=0),this.shadowBlur=e,this.update(!1)}setShadowStroke(e){return this.shadowStroke=e,this.update(!1)}setShadowFill(e){return this.shadowFill=e,this.update(!1)}setUnderline(e,i,s){return void 0===e&&(e="#000"),void 0===i&&(i=0),void 0===s&&(s=0),this.underlineColor=canvas_GetStyle(e,this.parent.canvas,this.parent.context),this.underlineThickness=i,this.underlineOffset=s,this.update(!1)}setUnderlineColor(e){return void 0===e&&(e="#000"),this.underlineColor=canvas_GetStyle(e,this.parent.canvas,this.parent.context),this.update(!1)}setUnderlineThickness(e){return void 0===e&&(e=0),this.underlineThickness=e,this.update(!1)}setUnderlineOffset(e){return void 0===e&&(e=0),this.underlineOffset=e,this.update(!1)}setStrikethrough(e,i,s){return void 0===e&&(e="#000"),void 0===i&&(i=0),void 0===s&&(s=0),this.strikethroughColor=canvas_GetStyle(e,this.parent.canvas,this.parent.context),this.strikethroughThickness=i,this.strikethroughOffset=s,this.update(!1)}setStrikethroughColor(e){return void 0===e&&(e="#000"),this.strikethroughColor=canvas_GetStyle(e,this.parent.canvas,this.parent.context),this.update(!1)}setStrikethroughThickness(e){return void 0===e&&(e=0),this.strikethroughThickness=e,this.update(!1)}setStrikethroughOffset(e){return void 0===e&&(e=0),this.strikethroughOffset=e,this.update(!1)}setWrapMode(e){return"string"==typeof e&&(e=tW[e.toLowerCase()]||0),this.wrapMode=e,this.update(!0)}setWrapWidth(e){return this.wrapWidth=e,this.update(!1)}setAlign(e,i){return void 0===e&&(e="left"),void 0===i&&(i="top"),this.halign=e,this.valign=i,this.update(!1)}setHAlign(e){return void 0===e&&(e="left"),this.halign=e,this.update(!1)}setVAlign(e){return void 0===e&&(e="top"),this.valign=e,this.update(!1)}setMaxLines(e){return void 0===e&&(e=0),this.maxLines=e,this.update(!1)}getTextMetrics(){var e=this.metrics;return{ascent:e.ascent,descent:e.descent,fontSize:e.fontSize}}setTextMetrics(e,i){return this.metrics.ascent=e.ascent,this.metrics.descent=e.descent,this.metrics.fontSize=e.fontSize,i&&("string"==typeof i?(this.fontFamily=i,this.fontSize="",this.fontStyle=""):(this.fontFamily=tY(i,"fontFamily",this.fontFamily),this.fontSize=tY(i,"fontSize",this.fontSize),this.fontStyle=tY(i,"fontStyle",this.fontStyle))),this.parent.updateText(!0)}get lineHeight(){return this.metrics.fontSize+this.strokeThickness+this.parent.lineSpacing}toJSON(){var e={},i=this.propertyMap;for(var s in i)e[s]=this[s];return e.metrics=this.getTextMetrics(),e}destroy(){this.parent=void 0}};let tH=Phaser.Utils.Objects.GetValue,tU=tz.NO_NEWLINE,tN=tz.RAW_NEWLINE;var t$=class{constructor(e){this.prop={},this.resetFromJSON(e)}resetFromJSON(e){this.text=tH(e,"text",""),this.x=tH(e,"x",0),this.y=tH(e,"y",0),this.width=tH(e,"width",0);var i=tH(e,"prop",null);null===i&&(i={}),this.prop=i,this.newLineMode=tH(e,"newLineMode",0),this.startIndex=tH(e,"startIndex",0)}get plainText(){var e=this.text;return this.newLineMode===tN&&(e+="\n"),e}get wrapText(){var e=this.text;return this.newLineMode!==tU&&(e+="\n"),e}get rawTextLength(){var e=this.text.length;return this.newLineMode===tN&&(e+=1),e}get endIndex(){return this.startIndex+this.rawTextLength}get lastX(){return this.x+this.width}get isTextPen(){return""!==this.text}get isImagePen(){return!!this.prop.img}get hasAreaMarker(){return!!this.prop.area||!!this.prop.url}},object_Clone=function(e,i){var s=Array.isArray(e);if(void 0===i?i=s?[]:{}:object_Clear(i),s){i.length=e.length;for(var r=0,n=e.length;r<n;r++)i[r]=e[r]}else for(var a in e)i[a]=e[a];return i};let tZ=Phaser.Utils.Objects.GetFastValue,tK=tz.NO_NEWLINE,tJ=tz.WRAPPED_NEWLINE;let PenManager=class PenManager{constructor(e){this.pens=[],this.lines=[],this.maxLinesWidth=void 0,this.pensPool=e.pensPool,this.linesPool=e.linesPool,this.tagToText=tZ(e,"tagToText",object_NOOP),this.tagToTextScope=tZ(e,"tagToTextScope",void 0)}destroy(){this.clear(),this.tagToText=void 0,this.tagToTextScope=void 0}clear(){for(var e=0,i=this.lines.length;e<i;e++)this.lines[e].length=0;this.pensPool.pushMultiple(this.pens),this.linesPool.pushMultiple(this.lines),this.maxLinesWidth=void 0}addTextPen(e,i,s,r,n,a){var o=this.pensPool.pop();return null==o&&(o=new t$),tq.text=e,tq.x=i,tq.y=s,tq.width=r,tq.prop=n,tq.newLineMode=a,o.resetFromJSON(tq),this.addPen(o),this}addImagePen(e,i,s,r){return this.addTextPen("",e,i,s,r,tK),this}addNewLinePen(){var e=this.lastPen,i=e?e.lastX:0,s=e?e.y:0,r=e?object_Clone(e.prop):null;return this.addTextPen("",i,s,0,r,tJ),this}addPen(e){var i=this.lastPen;null==i?e.startIndex=0:e.startIndex=i.endIndex,this.pens.push(e);var s=this.lastLine;null==s&&(s=this.linesPool.pop()||[],this.lines.push(s)),s.push(e),e.newLineMode!==tK&&(s=this.linesPool.pop()||[],this.lines.push(s)),this.maxLinesWidth=void 0}clone(e){null==e&&(e=new PenManager),e.clear();for(var i=0,s=this.lines.length;i<s;i++)for(var r=this.lines[i],n=0,a=r.length;n<a;n++){var o=r[n];e.addPen(o.text,o.x,o.y,o.width,object_Clone(o.prop),o.newLineMode)}return e}get lastPen(){return this.pens[this.pens.length-1]}get lastLine(){return this.lines[this.lines.length-1]}getLineStartIndex(e){if(e>=this.lines.length)return this.getLineEndIndex(e);var i=this.lines[e];return i&&i[0]?i[0].startIndex:0}getLineEndIndex(e){e>=this.lines.length&&(e=this.lines.length-1);var i,s,r=!1;for(i=e;i>=0&&!(r=null!=(s=this.lines[i])&&s.length>0);i--);return r?s[s.length-1].endIndex:0}getLineWidth(e){var i=this.lines[e];if(!i)return 0;var s=i[i.length-1];return null==s?0:s.lastX}getMaxLineWidth(){if(void 0!==this.maxLinesWidth)return this.maxLinesWidth;for(var e,i=0,s=0,r=this.lines.length;s<r;s++)(e=this.getLineWidth(s))>i&&(i=e);return this.maxLinesWidth=i,i}getLineWidths(){for(var e=[],i=0,s=this.lines.length;i<s;i++)e.push(this.getLineWidth(i));return e}get linesCount(){return this.lines.length}get plainText(){for(var e="",i=this.pens,s=0,r=i.length;s<r;s++)e+=i[s].plainText;return e}get rawTextLength(){for(var e=0,i=this.pens,s=0,r=this.pens.length;s<r;s++)e+=i[s].rawTextLength;return e}getSliceTagText(e,i,s){var r,n,a=this.lastPen;if(null==a)return"";var o=a.endIndex;(void 0===e||0===e)&&(e=-1),(void 0===i||i===o)&&(i=o+1),void 0===s&&(s=!1);for(var h,l,c,g,m="",x=0,S=this.pens.length;x<S&&((g=(h=this.pens[x]).endIndex)<=e||(h=this.pens[x],l=s?h.wrapText:h.plainText,r=h.prop,(c=h.startIndex)>=e&&g<=i||(l=l.substring(e-c,i-c)),this.tagToTextScope?m+=this.tagToText.call(this.tagToTextScope,l,r,n):m+=this.tagToText(l,r,n),n=r,!(g>=i)));x++);return m}get length(){return this.lines.length}set length(e){this.clear()}};var tq={};let tQ=Phaser.Geom.Rectangle;var t0=new X,t1=class{constructor(){this.hitAreas=[]}destroy(){this.clear()}clear(){for(var e=0,i=this.hitAreas.length;e<i;e++)object_Clear(this.hitAreas[e].data);return t0.pushMultiple(this.hitAreas),this}add(e,i,s,r,n){var a=t0.pop();return null===a?a=new tQ(e,i,s,r):a.setTo(e,i,s,r),a.data=n,this.hitAreas.push(a),this}getFirst(e,i){for(var s=0,r=this.hitAreas.length;s<r;s++){var n=this.hitAreas[s];if(n.contains(e,i))return n}return null}getByKey(e){for(var i=0,s=this.hitAreas.length;i<s;i++){var r=this.hitAreas[i];if(r.data.key===e)return r}return null}drawBounds(e,i,s){void 0===i&&(i=16777215),s&&e.save().scaleCanvas(s.scaleX,s.scaleY).rotateCanvas(s.rotation).translateCanvas(s.x,s.y);for(var r=0,n=this.hitAreas.length;r<n;r++){var a=this.hitAreas[r];e.lineStyle(1,i).strokeRect(a.x,a.y,a.width,a.height)}return s&&e.restore(),this}},OnAreaDown=function(e,i,s,r){var n=this.hitAreaManager.getFirst(i,s);null!==n&&(FireEvent.call(this,"areadown",n.data.key,e,i,s,r),n.data.isDown=!0)},OnAreaUp=function(e,i,s,r){var n=this.hitAreaManager.getFirst(i,s);if(null!==n){var a=n.data,o=a.key;if(FireEvent.call(this,"areaup",o,e,i,s,r),a.isDown){FireEvent.call(this,"areaclick",o,e,i,s,r);var h=a.url;h&&window.open(h,"_blank")}a.isDown=!1}},OnAreaOverOut=function(e,i,s,r){if(null===i){null!==this.lastHitAreaKey&&(FireEvent.call(this,"areaout",this.lastHitAreaKey,e,i,s,r),this.hitAreaManager.getByKey(this.lastHitAreaKey).isDown=!1,this.lastHitAreaKey=null);return}var n=this.hitAreaManager.getFirst(i,s),a=n?n.data.key:null;if(this.lastHitAreaKey!==a){if(null!==this.lastHitAreaKey){FireEvent.call(this,"areaout",this.lastHitAreaKey,e,i,s,r);var o=this.hitAreaManager.getByKey(this.lastHitAreaKey);this.urlTagCursorStyle&&o.data.url&&(this.scene.input.manager.canvas.style.cursor=""),o.isDown=!1}null!==a&&(FireEvent.call(this,"areaover",a,e,i,s,r),this.urlTagCursorStyle&&n.data.url&&(this.scene.input.manager.canvas.style.cursor=this.urlTagCursorStyle)),this.lastHitAreaKey=a}},FireEvent=function(e,i,s,r,n,a){this.parent.emit(`${e}-${i}`,s,r,n,a),this.parent.emit(e,i,s,r,n,a)},t2=/^[\x00-\x7F]+$/,string_IsASCIIString=function(e){return t2.test(e)};let t5=tz.NO_NEWLINE,t3=tz.RAW_NEWLINE,t7=tz.WRAPPED_NEWLINE,t6=tz.NO_WRAP,t4=tz.WORD_WRAP,t8=tz.CHAR_WRAP;tz.MIX_WRAP;let t9=tz.SPLITREGEXP;var WrapText=function(e,i,s,r,n,a){r<=0&&(s=t6);var o=[];if(!e||!e.length)return o;for(var h,l,c,g=s===t6,m=e.split(t9),x=0,S=m.length;x<S;x++){if(h=m[x],c=x===S-1?t5:t3,g){var _,k,E,R=i(h);o.push(a.getLine(h,R,c));continue}if(l=0===x?r-n:r,h.length<=100){var R=i(h);if(R<=l){o.push(a.getLine(h,R,c));continue}}for(var j=ParseLine(h,s),Y="",X=0,$=0,Z=j.length;$<Z;$++){if((k=i(_=j[$]))>r&&IsWord(_)){""!==Y?o.push(a.getLine(Y,X,t7)):0===$&&n>0&&o.push(a.getLine("",0,t7)),o.push(...WrapText(_,i,t8,r,0,a));var q=o.pop();Y=q.text,X=q.width,a.freeLine(q)," "===Y&&(Y="",X=0);continue}(E=X+k)>l?(o.push(a.getLine(Y,X,t7)),Y=_,X=k,l=r):(Y+=_,X=E),$===Z-1&&o.push(a.getLine(Y,X,c))}}return o},ParseLine=function(e,i){var s;switch(i){case t4:s=[],e=e.split(" ");for(var r=0,n=e.length;r<n;r++){var a=e[r];r<n-1?s.push(a+" "):""!==a&&s.push(a)}break;case t8:s=e.split("");break;default:s=[],e=e.split(" ");for(var r=0,n=e.length;r<n;r++){var a=e[r];r<n-1?string_IsASCIIString(a)?s.push(a+" "):(s.push(...a.split("")),s.push(" ")):""!==a&&(string_IsASCIIString(a)?s.push(a):s.push(...a.split("")))}}return s},IsWord=function(e){switch(e.length){case 1:return!1;case 2:return" "!==e.charAt(1);default:return!0}};let et=Phaser.Utils.Objects.GetValue,ee=tz.NO_WRAP,ei=tz.NO_NEWLINE;let CanvasText=class CanvasText{constructor(e){this.parent=e.parent,this.scene=this.parent.scene,this.context=et(e,"context",null),this.canvas=this.context.canvas,this.parser=et(e,"parser",null),this.defaultStyle=et(e,"style",null),this.autoRound=!0,this.pensPool=e.pensPool,this.linesPool=e.linesPool,this.wrapTextLinesPool=e.wrapTextLinesPool,this.penManager=this.newPenManager(),this._tmpPenManager=null,this.hitAreaManager=new t1,this.lastHitAreaKey=null,this.urlTagCursorStyle=null;var i=this.context;this.getTextWidth=function(e){return i.measureText(e).width}}destroy(){this.parent=void 0,this.scene=void 0,this.context=void 0,this.canvas=void 0,this.parser=void 0,this.defaultStyle=void 0,this.penManager&&(this.penManager.destroy(),this.penManager=void 0),this._tmpPenManager&&(this._tmpPenManager.destroy(),this._tmpPenManager=void 0),this.hitAreaManager&&(this.hitAreaManager.destroy(),this.hitAreaManager=void 0),this.pensPool=void 0,this.linesPool=void 0,this.wrapTextLinesPool=void 0}updatePenManager(e,i,s,r,n){if(void 0===n&&(n=this.penManager),n.clear(),""===e)return n;var a=this.parent.style;if(a.isWrapFitMode){var o=this.parent.padding;s=a.fixedWidth-o.left-o.right}for(var h,l,c,g,m,x=this.canvas,S=this.context,MeasureText=function(e){return S.measureText(e).width},_=0,k=0,E=a.wrapCallback,R=a.wrapCallbackScope,j=!0,Y=this.parser.splitText(e),X=this.wrapTextLinesPool,$=0,Z=Y.length;$<Z;$++)if(h=(g=this.parser.tagTextToProp(Y[$],l)).plainText,(l=g.prop).img){var q=this.imageManager.getOuterWidth(l.img);s>0&&i!==ee&&s<_+q&&(n.addNewLinePen(),k+=r,_=0),n.addImagePen(_,k,q,object_Clone(l)),_+=q}else if(""!==h){if(S.save(),(c=this.parser.propToContextStyle(this.defaultStyle,l)).buildFont(),c.syncFont(x,S),c.syncStyle(x,S),E){"string"==typeof(m=E.call(R,h,MeasureText,s,_))&&(m=m.split("\n"));for(var tt,te=0,ti=m.length;te<ti;te++)"string"==typeof(tt=m[te])?m[te]=X.getLine(tt,MeasureText(tt),te<ti-1?2:0):j=!1}else m=WrapText(h,MeasureText,i,s,_,X);for(var te=0,ti=m.length;te<ti;te++)tt=m[te],n.addTextPen(tt.text,_,k,tt.width,object_Clone(l),tt.newLineMode),tt.newLineMode!==ei?(_=0,k+=r):_+=tt.width;j&&X.freeLines(m),m=null,S.restore()}for(var $=0,Z=this.lines.length;$<Z;$++){var ts=this.lines[$],tr=ts[ts.length-1];tr&&(tr.width+=this.parser.getStrokeThinkness(this.defaultStyle,tr.prop))}return n}get startXOffset(){var e=this.defaultStyle;return e.strokeThickness/2+e.xOffset}get startYOffset(){var e=this.defaultStyle;return e.strokeThickness/2+e.metrics.ascent}get lines(){return this.penManager.lines}get desplayLinesCount(){var e=this.penManager.linesCount,i=this.defaultStyle.maxLines;return i>0&&e>i&&(e=i),e}get linesWidth(){return Math.ceil(this.penManager.getMaxLineWidth())}get linesHeight(){var e=this.desplayLinesCount,i=this.defaultStyle.lineHeight*e;return e>0&&(i-=this.defaultStyle.lineSpacing),i}get imageManager(){return this.parent.imageManager}get rtl(){return this.parent.style.rtl}newPenManager(){return new PenManager({pensPool:this.pensPool,linesPool:this.linesPool,tagToText:this.parser.propToTagText,tagToTextScope:this.parser})}get tmpPenManager(){return null===this._tmpPenManager&&(this._tmpPenManager=this.newPenManager()),this._tmpPenManager}getPlainText(e,i,s){var r;if(null==e)r=this.penManager.plainText;else{var n=this.parser.splitText(e,1);r="";for(var a=0,o=n.length;a<o;a++)r+=n[a]}return(null!=i||null!=s)&&(null==i&&(i=0),null==s&&(s=r.length),r=r.substring(i,s)),r}getPenManager(e,i){if(void 0===e)return this.copyPenManager(i,this.penManager);void 0===i&&(i=this.newPenManager());var s=this.defaultStyle;return this.updatePenManager(e,s.wrapMode,s.wrapWidth,s.lineHeight,i),i}getText(e,i,s,r){if(null==e)return this.penManager.getSliceTagText(i,s,r);var n=this.tmpPenManager,a=this.defaultStyle;return this.updatePenManager(e,a.wrapMode,a.wrapWidth,a.lineHeight,n),n.getSliceTagText(i,s,r)}copyPenManager(e,i){return void 0===i&&(i=this.penManager),i.copy(e)}getTextWidth(e){return void 0===e&&(e=this.penManager),e.getMaxLineWidth()}getLastPen(e){return void 0===e&&(e=this.penManager),e.lastPen}};Object.assign(CanvasText.prototype,{draw(e,i,s,r){var n,a,o,h,l,c=this.penManager;this.hitAreaManager.clear();var g=this.context;g.save();var m=this.defaultStyle;this.clear(),utils_DrawRoundRectangleBackground(this,m.backgroundColor,m.backgroundStrokeColor,m.backgroundStrokeLineWidth,m.backgroundCornerRadius,m.backgroundColor2,m.backgroundHorizontalGradient,m.backgroundCornerIteration),e+=this.startXOffset,i+=this.startYOffset;var x,S=m.halign,_=m.valign,k=m.lineHeight,E=c.lines,R=E.length,j=m.maxLines;j>0&&R>j?(n=j,a="center"===_?Math.floor((R-n)/2):"bottom"===_?R-n:0):(n=R,a=0),o=a+n;var Y=this.rtl,X=Y?this.parent.width:void 0;l=("center"===_?Math.max((r-n*k)/2,0):"bottom"===_?Math.max(r-n*k-2,0):0)+i;for(var $=a;$<o;$++)if(0!==(x=c.getLineWidth($))){for(var Z=E[$],q=Z.length,tt=S,te=0;te<q;te++){var ti=Z[te].prop.align;if(void 0!==ti){tt=ti;break}}h=("center"===tt?(s-x)/2:"right"===tt?Y?0:s-x:Y?s-x:0)+e;for(var te=0;te<q;te++)this.drawPen(Z[te],h,l,X)}g.restore()},drawPen(e,i,s,r){i+=e.x,s+=e.y+(e.prop.y||0),void 0!==r&&(i=r-i);var n=this.canvas,a=this.context;a.save();var o=this.parser.propToContextStyle(this.defaultStyle,e.prop);if(o.buildFont(),o.syncFont(n,a),o.syncStyle(n,a),o.underlineThickness>0&&e.width>0){var h=s+o.underlineOffset-o.underlineThickness/2;this.drawLine(i,h,e.width,o.underlineThickness,o.underlineColor,o)}if(e.isTextPen&&this.drawText(i,s,e.text,o),e.isImagePen&&this.drawImage(i,s,e.prop.img,e.prop.color,o),o.strikethroughThickness>0&&e.width>0){var h=s+o.strikethroughOffset-o.strikethroughThickness/2;this.drawLine(i,h,e.width,o.strikethroughThickness,o.strikethroughColor,o)}if(a.restore(),e.hasAreaMarker&&e.width>0){var l,c=e.prop.area;if(c)l={key:c};else{var g=e.prop.url;l={key:`url:${g}`,url:g}}this.hitAreaManager.add(i,s-this.startYOffset,e.width,this.defaultStyle.lineHeight,l)}},clear(){var e=this.canvas;this.context.clearRect(0,0,e.width,e.height)},drawLine(e,i,s,r,n,a){this.autoRound&&(e=Math.round(e),i=Math.round(i));var o=this.context;a.syncShadow(o,a.shadowStroke);var h=o.lineCap;o.lineCap="butt",o.strokeStyle=n,o.lineWidth=r,o.beginPath(),o.moveTo(e,i),o.lineTo(e+s,i),o.stroke(),o.lineCap=h},drawText(e,i,s,r){this.autoRound&&(e=Math.round(e),i=Math.round(i));var n=this.context;r.stroke&&"none"!==r.stroke&&r.strokeThickness>0&&(r.syncShadow(n,r.shadowStroke),n.strokeText(s,e,i)),r.color&&"none"!==r.color&&(r.syncShadow(n,r.shadowFill),n.fillText(s,e,i))},drawImage(e,i,s,r,n){i-=this.startYOffset,this.parent.imageManager.draw(s,this.context,e,i,r,this.autoRound)}},{setInteractive:function(){this.parent.on("pointerdown",OnAreaDown,this).on("pointerup",OnAreaUp,this).on("pointermove",OnAreaOverOut,this).on("pointerover",OnAreaOverOut,this).on("pointerout",function(e,i){OnAreaOverOut.call(this,e,null,null,i)},this)}});var es=class extends X{freeLine(e){if(e)return this.push(e),this}freeLines(e){if(e)return this.pushMultiple(e),this}getLine(e,i,s){var r=this.pop();return null===r&&(r={}),r.text=e,r.width=i,r.newLineMode=s,r}};let er=Phaser.Utils.Objects.IsPlainObject,en=Phaser.Utils.Objects.GetValue;var imagemanager_AddImage=function(e,i){er(e)?e=(i=e).key:void 0===i&&(i={key:e}),i.hasOwnProperty("key")||(i.key=e);var s=i.key,r=i.frame,n=i.width,a=i.height;if(void 0===n||void 0===a){var o=this.textureManager.getFrame(s,r),h=o?o.cutWidth:0,l=o?o.cutHeight:0;void 0===n&&void 0===a?(n=h,a=l):void 0===n?n=h*(a/l):void 0===a&&(a=l*(n/h))}this.images[e]={key:s,frame:r,width:n,height:a,y:en(i,"y",0),left:en(i,"left",0),right:en(i,"right",0),originX:en(i,"originX",0),originY:en(i,"originY",0),tintFill:en(i,"tintFill",!1)}};let ea=Phaser.Display.Canvas.CanvasPool;var texture_DrawFrameToCanvas=function(e,i,s,r,n,a,o,h){void 0===s&&(s=0),void 0===r&&(r=0),void 0===n&&(n=e.cutWidth),void 0===a&&(a=e.cutHeight),void 0===h&&(h=!1),h&&(s=Math.round(s),r=Math.round(r));var l=i.getContext("2d",{willReadFrequently:!0});if(o){var c=ea.create(null,n,a,Phaser.CANVAS,!0),g=c.getContext("2d",{willReadFrequently:!0});g.drawImage(e.source.image,e.cutX,e.cutY,e.cutWidth,e.cutHeight,0,0,n,a),g.globalCompositeOperation="source-in",g.fillStyle=o,g.fillRect(0,0,n,a),l.drawImage(c,0,0,n,a,s,r,n,a),ea.remove(c)}else l.drawImage(e.source.image,e.cutX,e.cutY,e.cutWidth,e.cutHeight,s,r,n,a)};let ImageManager=class ImageManager{constructor(e){this.textureManager=e.sys.textures,this.images={}}destroy(){this.textureManager=void 0,this.images=void 0}add(e,i){if("string"==typeof e)imagemanager_AddImage.call(this,e,i);else if(Array.isArray(e))for(var s=e,r=0,n=s.length;r<n;r++)imagemanager_AddImage.call(this,s[r]);else{var s=e;for(var e in s)imagemanager_AddImage.call(this,e,s[e])}return this}has(e){return this.images.hasOwnProperty(e)}remove(e){return this.has(e)&&delete this.images[e],this}get(e){return!this.has(e)&&this.textureManager.exists(e)&&this.add(e),this.images[e]}getOuterWidth(e){var i=this.get(e);return i?i.width+i.left+i.right:0}getFrame(e){var i=this.get(e);return i?this.textureManager.getFrame(i.key,i.frame):void 0}hasTexture(e){return!!this.getFrame(e)}};Object.assign(ImageManager.prototype,{draw:function(e,i,s,r,n,a){var o=this.get(e),h=this.textureManager.getFrame(o.key,o.frame),l=o.width,c=o.height;s+=o.left-o.originX*l,r+=o.y-o.originY*c,o.tintFill||(n=void 0),texture_DrawFrameToCanvas(h,i.canvas,s,r,l,c,n,a)}});var text_AppendText=function(e,i){var s;return e||0===e||(e=""),void 0===i&&(i=!0),Array.isArray(e)&&(e=e.join("\n")),(s=i?`${this.text}
${e}`:`${this.text}${e}`)!=this.text&&this.setText(s),this};let eo=Phaser.Utils.Objects.IsPlainObject,eh=Phaser.DOM.AddToDOM,el=Phaser.Display.Canvas.CanvasPool,ed=Phaser.GameObjects.GameObject,ec=Phaser.Utils.Objects.GetValue,eu=Phaser.DOM.RemoveFromDOM,ep=tz.SPLITREGEXP,eg=Phaser.Utils.String.UUID;var ev=null,ef=null,em=null;let Text=class Text extends tj{constructor(e,i,s,r,n,a,o){if(eo(i)){var h,l,c,g=i;i=ec(g,"x",0),s=ec(g,"y",0),r=ec(g,"text",""),n=ec(g,"style")}if(void 0===i&&(i=0),void 0===s&&(s=0),super(e,a),this.renderer=e.sys.game.renderer,this.setPosition(i,s),this.setOrigin(0,0),this.initPipeline(),this.initPostPipeline(!0),this.canvas=el.create(this),this.context=this.canvas.getContext("2d",{willReadFrequently:!0}),this._imageManager=void 0,n){if(n.hasOwnProperty("align")){var m=n.align;delete n.align,n.halign=m}n.hasOwnProperty("stroke")&&!n.hasOwnProperty("strokeThickness")&&(n.strokeThickness=1)}this.style=new tX(this,n);var x=ec(n,"images",void 0);x&&this.addImage(x),this.autoRound=!0,this._text=void 0,this.padding={left:0,right:0,top:0,bottom:0},this.width=1,this.height=1,this.lineSpacing=0,this.dirty=!1,0===this.style.resolution&&(this.style.resolution=1),this._crop=this.resetCropObject(),this._textureKey=eg(),this.texture=e.sys.textures.addCanvas(this._textureKey,this.canvas),this.frame=this.texture.get(),this.frame.source.resolution=this.style.resolution,this.renderer&&this.renderer.gl&&(this.renderer.deleteTexture(this.frame.source.glTexture),this.frame.source.glTexture=null),ec(n,"sharedPool",!0)?(ev||(ev={},ef=new X,em=new es,this.scene.game.events.once("destroy",function(){ev=null,ef=null,em=null})),ev.hasOwnProperty(a)||(ev[a]=new X),h=ev[a],l=ef,c=em):(h=new X,l=new X,c=new es),this.canvasText=new CanvasText({parent:this,context:this.context,parser:o,style:this.style,pensPool:h,linesPool:l,wrapTextLinesPool:c}),this.parser=o,this.initRTL(),n&&n.padding&&this.setPadding(n.padding),n&&n.lineSpacing&&this.setLineSpacing(n.lineSpacing),this.setText(r),this.setUrlTagCursorStyle(ec(n,"urlTagCursorStyle","pointer")),ec(n,"interactive",!1)&&this.setInteractive()}preDestroy(){eu(this.canvas),this.canvasText.destroy(),this.canvasText=void 0,this._imageManager&&(this._imageManager.destroy(),this._imageManager=void 0),el.remove(this.canvas);var e=this.texture;e&&e.destroy()}set text(e){this.setText(e)}get text(){return this._text}initRTL(){this.style.rtl&&(this.canvas.dir="rtl",this.context.direction="rtl",this.canvas.style.display="none",eh(this.canvas,this.scene.sys.canvas),this.originX=1)}setRTL(e){void 0===e&&(e=!0);var i=this.style;if(i.rtl===e)return this;if(i.rtl=e,e?(this.canvas.dir="rtl",this.context.direction="rtl",this.canvas.style.display="none",eh(this.canvas,this.scene.sys.canvas)):(this.canvas.dir="ltr",this.context.direction="ltr"),"left"===i.halign?i.halign="right":"right"===i.halign&&(i.halign="left"),this._imageManager){var s=this._imageManager.images;for(var r in s)s[r].originX=1-s[r].originX}return this}setText(e){return(e=null==e?"":Array.isArray(e)?e.join("\n"):e.toString())===this._text||(this._text=e,this.updateText()),this}setPadding(e,i,s,r){if("object"==typeof e){var n=e,a=ec(n,"x",null);null!==a?(e=a,s=a):(e=ec(n,"left",0),s=ec(n,"right",e));var o=ec(n,"y",null);null!==o?(i=o,r=o):(i=ec(n,"top",0),r=ec(n,"bottom",i))}else void 0===e&&(e=0),void 0===i&&(i=e),void 0===s&&(s=e),void 0===r&&(r=i);return this.padding.left=e,this.padding.top=i,this.padding.right=s,this.padding.bottom=r,this.updateText(!1)}updateText(e){void 0===e&&(e=!0);var i,s,r=this.canvasText,n=this.style;e&&r.updatePenManager(this._text,n.wrapMode,n.wrapWidth,n.lineHeight);var a=this.padding,o=Math.ceil(r.linesWidth);0===n.fixedWidth?(this.width=o+a.left+a.right,i=o):(this.width=n.fixedWidth,(i=this.width-a.left-a.right)<o&&(i=o)),0===n.fixedHeight?(this.height=r.linesHeight+a.top+a.bottom,s=r.linesHeight):(this.height=n.fixedHeight,(s=this.height-a.top-a.bottom)<r.linesHeight&&(s=r.linesHeight));var h=this.width,l=this.height;this.updateDisplayOrigin();var c=n.resolution;h*=c,l*=c,h=Math.max(Math.ceil(h),1),l=Math.max(Math.ceil(l),1);var g=this.canvas,m=this.context;g.width!==h||g.height!==l?(g.width=h,g.height=l,this.frame.setSize(h,l)):m.clearRect(0,0,h,l),m.save(),m.scale(c,c);var x=this.style.rtl?a.right:a.left,S=a.top;r.draw(x,S,i,s),m.restore(),this.renderer&&this.renderer.gl&&(this.frame.source.glTexture=this.renderer.canvasToTexture(g,this.frame.source.glTexture,!0),this.frame.glTexture.spectorMetadata={textureKey:"BBCodeText Game Object"}),this.dirty=!0;var _=this.input;return _&&!_.customHitArea&&(_.hitArea.width=this.width,_.hitArea.height=this.height),this}toJSON(){var e=Components.ToJSON(this),i={autoRound:this.autoRound,text:this._text,style:this.style.toJSON(),resolution:this.resolution,padding:{left:this.padding.left,right:this.padding.right,top:this.padding.top,bottom:this.padding.bottom}};return e.data=i,e}setInteractive(e,i,s){var r=!!this.input;return ed.prototype.setInteractive.call(this,e,i,s),r||this.canvasText.setInteractive(),this}setUrlTagCursorStyle(e){return this.urlTagCursorStyle=e,this}get urlTagCursorStyle(){return this.canvasText.urlTagCursorStyle}set urlTagCursorStyle(e){this.canvasText.urlTagCursorStyle=e}getWrappedText(e,i,s){return"number"==typeof e&&(s=i,i=e,e=void 0),(e=this.canvasText.getText(e,i,s,!0)).split(ep)}getPlainText(e,i,s){return"number"==typeof e&&(s=i,i=e,e=void 0),this.canvasText.getPlainText(e,i,s)}getText(e,i,s,r){return"number"==typeof e&&(r=s,s=i,i=e,e=void 0),void 0===r&&(r=!1),this.canvasText.getText(e,i,s,r)}getSubString(e,i,s){return"number"==typeof e&&(s=i,i=e,e=void 0),this.getText(e,i,s)}copyPenManager(e){return this.canvasText.copyPenManager(e)}getPenManager(e,i){return this.canvasText.getPenManager(e,i)}setSize(e,i){return this.setFixedSize(e,i)}resize(e,i){return this.setFixedSize(e,i)}get imageManager(){return this._imageManager||(this._imageManager=new ImageManager(this.scene)),this._imageManager}addImage(e,i){return this.imageManager.add(e,i),this}drawAreaBounds(e,i){return this.canvasText.hitAreaManager.drawBounds(e,i,this),this}generateTexture(e,i,s,r,n){var a=this.canvas;return void 0===r?r=a.width:r*=this.resolution,void 0===n?n=a.height:n*=this.resolution,texture_CopyCanvasToTexture(this.scene,a,e,i,s,r,n),this}};Object.assign(Text.prototype,{appendText:text_AppendText});var eb=Text,ey={plainText:null,prevProp:null},UpdateProp=function(e,i,s,r){return!0===i?e[s]=r:e.hasOwnProperty(s)&&delete e[s],e},GetFontStyle=function(e){var i=e.b,s=e.weight,r=e.i;return i||s||r?r?i?"bold italic":s?`${s} italic`:"italic":i?"bold":s.toString():""},eC=new tX,ex={},eS=/[|\\{}()[\]^$+*?.]/g,e_=/-/g,string_EscapeRegex=function(e){return e.replace(eS,"\\$&").replace(e_,"\\x2d")},ew={},GetOpenTagRegString=function(e,i,s,r){return void 0===r?`${e}${s}${i}`:`${e}${s}=(${r})${i}`},GetCloseTagRegString=function(e,i,s){return`${e}/${s}${i}`},eP="[-.0-9]+",ek="[a-zA-Z]+|#[0-9abcdef]+|rgba?\\(s*[.0-9]+s*(,s*[.0-9]+s*){2,3}\\)",SetDelimiters=function(e,i){if(void 0===i){var s,r=e;e=r[0],i=r[1]}if(gI===e&&gG===i)return!1;gI=e,gG=i,e=string_EscapeRegex(e);var n=(s=i=string_EscapeRegex(i),`[^${s}]+`),a=GetOpenTagRegString(e,i,"esc"),o=GetCloseTagRegString(e,i,"esc"),h=GetOpenTagRegString(e,i,"raw"),l=GetCloseTagRegString(e,i,"raw"),c=GetOpenTagRegString(e,i,"b"),g=GetCloseTagRegString(e,i,"b"),m=GetOpenTagRegString(e,i,"i"),x=GetCloseTagRegString(e,i,"i"),S="weight",_=GetOpenTagRegString(e,i,S,eP),k=GetCloseTagRegString(e,i,S),E="size",R=GetOpenTagRegString(e,i,E,eP),j=GetCloseTagRegString(e,i,E),Y="color",X=GetOpenTagRegString(e,i,Y,ek),$=GetCloseTagRegString(e,i,Y),Z=GetOpenTagRegString(e,i,"u"),q=GetOpenTagRegString(e,i,"u",ek),tt=GetCloseTagRegString(e,i,"u"),te=GetOpenTagRegString(e,i,"s"),ti=GetOpenTagRegString(e,i,"s",ek),ts=GetCloseTagRegString(e,i,"s"),tr="shadow",tn=GetOpenTagRegString(e,i,tr),to=GetOpenTagRegString(e,i,tr,ek),th=GetCloseTagRegString(e,i,tr),tl="stroke",td=GetOpenTagRegString(e,i,tl),tc=GetOpenTagRegString(e,i,tl,ek),tu=GetCloseTagRegString(e,i,tl),tp=GetOpenTagRegString(e,i,"y",eP),tg=GetCloseTagRegString(e,i,"y"),tv=GetOpenTagRegString(e,i,"img",n),tf=GetCloseTagRegString(e,i,"img"),tm="area",tb=GetOpenTagRegString(e,i,tm,n),ty=GetCloseTagRegString(e,i,tm),tC=GetOpenTagRegString(e,i,"url",n),tx=GetCloseTagRegString(e,i,"url"),tS="align",t_=GetOpenTagRegString(e,i,tS,n),tw=GetCloseTagRegString(e,i,tS),tP=GetOpenTagRegString(e,i,"id",n),tk=GetCloseTagRegString(e,i,"id");return ew.RE_ESC_OPEN=RegExp(a,"i"),ew.RE_ESC_CLOSE=RegExp(o,"i"),ew.RE_RAW_OPEN=RegExp(h,"i"),ew.RE_RAW_CLOSE=RegExp(l,"i"),ew.RE_BLOD_OPEN=RegExp(c,"i"),ew.RE_BLOD_CLOSE=RegExp(g,"i"),ew.RE_ITALICS_OPEN=RegExp(m,"i"),ew.RE_ITALICS_CLOSE=RegExp(x,"i"),ew.RE_WEIGHT_OPEN=RegExp(_,"i"),ew.RE_WEIGHT_CLOSE=RegExp(k,"i"),ew.RE_SIZE_OPEN=RegExp(R,"i"),ew.RE_SIZE_CLOSE=RegExp(j,"i"),ew.RE_COLOR_OPEN=RegExp(X,"i"),ew.RE_COLOR_CLOSE=RegExp($,"i"),ew.RE_UNDERLINE_OPEN=RegExp(Z,"i"),ew.RE_UNDERLINE_OPENC=RegExp(q,"i"),ew.RE_UNDERLINE_CLOSE=RegExp(tt,"i"),ew.RE_STRIKETHROUGH_OPEN=RegExp(te,"i"),ew.RE_STRIKETHROUGH_OPENC=RegExp(ti,"i"),ew.RE_STRIKETHROUGH_CLOSE=RegExp(ts,"i"),ew.RE_SHADOW_OPEN=RegExp(tn,"i"),ew.RE_SHADOW_OPENC=RegExp(to,"i"),ew.RE_SHADOW_CLOSE=RegExp(th,"i"),ew.RE_STROKE_OPEN=RegExp(td,"i"),ew.RE_STROKE_OPENC=RegExp(tc,"i"),ew.RE_STROKE_CLOSE=RegExp(tu,"i"),ew.RE_OFFSETY_OPEN=RegExp(tp,"i"),ew.RE_OFFSETY_CLOSE=RegExp(tg,"i"),ew.RE_IMAGE_OPEN=RegExp(tv,"i"),ew.RE_IMAGE_CLOSE=RegExp(tf,"i"),ew.RE_AREA_OPEN=RegExp(tb,"i"),ew.RE_AREA_CLOSE=RegExp(ty,"i"),ew.RE_URL_OPEN=RegExp(tC,"i"),ew.RE_URL_CLOSE=RegExp(tx,"i"),ew.RE_ALIGN_OPEN=RegExp(t_,"i"),ew.RE_ALIGN_CLOSE=RegExp(tw,"i"),ew.RE_ID_OPEN=RegExp(tP,"i"),ew.RE_ID_CLOSE=RegExp(tk,"i"),ew.RE_SPLITTEXT=RegExp([h,l,a,o,c,g,m,x,_,k,R,j,X,$,Z,q,tt,te,ti,ts,tn,to,th,td,tc,tu,tp,tg,tv,tf,tb,ty,tC,tx,t_,tw,tP,tk].join("|"),"ig"),!0},GetTagRegex=function(e,i){return void 0!==e&&SetDelimiters(e,i),Object.assign({},ew)};let eT=Phaser.Utils.Objects.GetValue;let Parser=class Parser{constructor(e){var i=eT(e,"delimiters","[]");this.tagRegex=GetTagRegex(i),this.delimiters=i}getStrokeThinkness(e,i){return i.hasOwnProperty("stroke")?e.strokeThickness:0}setDelimiters(e,i){return SetDelimiters(e,i)&&(this.tagRegex=GetTagRegex()),this}};Object.assign(Parser.prototype,{splitText:function(e,i){for(var s=this.tagRegex,r=[],n=0,a=!1,o=!1;;){var h=s.RE_SPLITTEXT.exec(e);if(!h)break;var l=h[0];if(o){if(!s.RE_ESC_CLOSE.test(l))continue;o=!1}else if(a){if(!s.RE_RAW_CLOSE.test(l))continue;a=!1}else s.RE_ESC_OPEN.test(l)?o=!0:s.RE_RAW_OPEN.test(l)&&(a=!0);var c=s.RE_SPLITTEXT.lastIndex,g=c-l.length;if(n<g){var m=e.substring(n,g);r.push(m)}void 0===i&&r.push(l),n=c}var x=e.length;return n<x&&r.push(e.substring(n,x)),r},tagTextToProp:function(e,i){var s=this.tagRegex;null==i&&(i={});var r="";if(i.img&&UpdateProp(i,!1,"img"),i.esc)s.RE_ESC_CLOSE.test(e)?UpdateProp(i,!1,"esc"):r=e;else if(i.raw)s.RE_RAW_CLOSE.test(e)?UpdateProp(i,!1,"raw"):r=e;else if(s.RE_ESC_OPEN.test(e))UpdateProp(i,!0,"esc",!0);else if(s.RE_ESC_CLOSE.test(e))UpdateProp(i,!1,"esc");else if(s.RE_RAW_OPEN.test(e))UpdateProp(i,!0,"raw",!0);else if(s.RE_RAW_CLOSE.test(e))UpdateProp(i,!1,"raw");else if(s.RE_BLOD_OPEN.test(e))UpdateProp(i,!0,"b",!0);else if(s.RE_BLOD_CLOSE.test(e))UpdateProp(i,!1,"b");else if(s.RE_ITALICS_OPEN.test(e))UpdateProp(i,!0,"i",!0);else if(s.RE_ITALICS_CLOSE.test(e))UpdateProp(i,!1,"i");else if(s.RE_WEIGHT_OPEN.test(e)){var n=e.match(s.RE_WEIGHT_OPEN);UpdateProp(i,!0,"weight",n[1])}else if(s.RE_WEIGHT_CLOSE.test(e))UpdateProp(i,!1,"weight");else if(s.RE_SIZE_OPEN.test(e)){var n=e.match(s.RE_SIZE_OPEN);UpdateProp(i,!0,"size",`${n[1]}px`)}else if(s.RE_SIZE_CLOSE.test(e))UpdateProp(i,!1,"size");else if(s.RE_COLOR_OPEN.test(e)){var n=e.match(s.RE_COLOR_OPEN);UpdateProp(i,!0,"color",n[1])}else if(s.RE_COLOR_CLOSE.test(e))UpdateProp(i,!1,"color");else if(s.RE_UNDERLINE_OPEN.test(e))UpdateProp(i,!0,"u",!0);else if(s.RE_UNDERLINE_OPENC.test(e)){var n=e.match(s.RE_UNDERLINE_OPENC);UpdateProp(i,!0,"u",n[1])}else if(s.RE_UNDERLINE_CLOSE.test(e))UpdateProp(i,!1,"u");else if(s.RE_STRIKETHROUGH_OPEN.test(e))UpdateProp(i,!0,"s",!0);else if(s.RE_STRIKETHROUGH_OPENC.test(e)){var n=e.match(s.RE_STRIKETHROUGH_OPENC);UpdateProp(i,!0,"s",n[1])}else if(s.RE_STRIKETHROUGH_CLOSE.test(e))UpdateProp(i,!1,"s");else if(s.RE_SHADOW_OPEN.test(e))UpdateProp(i,!0,"shadow",!0);else if(s.RE_SHADOW_OPENC.test(e)){var n=e.match(s.RE_SHADOW_OPENC);UpdateProp(i,!0,"shadow",n[1])}else if(s.RE_SHADOW_CLOSE.test(e))UpdateProp(i,!1,"shadow");else if(s.RE_STROKE_OPEN.test(e))UpdateProp(i,!0,"stroke",!0);else if(s.RE_STROKE_OPENC.test(e)){var n=e.match(s.RE_STROKE_OPENC);UpdateProp(i,!0,"stroke",n[1])}else if(s.RE_STROKE_CLOSE.test(e))UpdateProp(i,!1,"stroke");else if(s.RE_OFFSETY_OPEN.test(e)){var n=e.match(s.RE_OFFSETY_OPEN);UpdateProp(i,!0,"y",parseFloat(n[1]))}else if(s.RE_OFFSETY_CLOSE.test(e))UpdateProp(i,!1,"y");else if(s.RE_IMAGE_OPEN.test(e)){var n=e.match(s.RE_IMAGE_OPEN);UpdateProp(i,!0,"img",n[1])}else if(s.RE_IMAGE_CLOSE.test(e))UpdateProp(i,!1,"img");else if(s.RE_AREA_OPEN.test(e)){var n=e.match(s.RE_AREA_OPEN);UpdateProp(i,!0,"area",n[1])}else if(s.RE_AREA_CLOSE.test(e))UpdateProp(i,!1,"area");else if(s.RE_URL_OPEN.test(e)){var n=e.match(s.RE_URL_OPEN);UpdateProp(i,!0,"url",n[1])}else if(s.RE_URL_CLOSE.test(e))UpdateProp(i,!1,"url");else if(s.RE_ALIGN_OPEN.test(e)){var n=e.match(s.RE_ALIGN_OPEN);UpdateProp(i,!0,"align",n[1])}else if(s.RE_ALIGN_CLOSE.test(e))UpdateProp(i,!1,"align");else if(s.RE_ID_OPEN.test(e)){var n=e.match(s.RE_ID_OPEN);UpdateProp(i,!0,"id",n[1])}else s.RE_ID_CLOSE.test(e)?UpdateProp(i,!1,"id"):r=e;return ey.plainText=r,ey.prop=i,ey},propToContextStyle:function(e,i){if(i.hasOwnProperty("img"))eC.image=i.img;else{if(eC.image=null,i.hasOwnProperty("family")?eC.fontFamily=i.family:eC.fontFamily=e.fontFamily,i.hasOwnProperty("size")){var s=i.size;"number"==typeof s&&(s=`${s}px`),eC.fontSize=s}else eC.fontSize=e.fontSize;eC.fontStyle=GetFontStyle(i),i.hasOwnProperty("color")?eC.color=i.color:eC.color=e.color,i.hasOwnProperty("stroke")?(!0===i.stroke?eC.stroke=e.stroke:eC.stroke=i.stroke,eC.strokeThickness=e.strokeThickness):(eC.stroke=e.stroke,eC.strokeThickness=0)}return i.hasOwnProperty("shadow")?(!0===i.shadow?eC.shadowColor=e.shadowColor:eC.shadowColor=i.shadow,eC.shadowOffsetX=e.shadowOffsetX,eC.shadowOffsetY=e.shadowOffsetY,eC.shadowBlur=e.shadowBlur,eC.shadowStroke=!0,eC.shadowFill=!0):(eC.shadowColor="#000",eC.shadowOffsetX=0,eC.shadowOffsetY=0,eC.shadowBlur=0,eC.shadowStroke=!1,eC.shadowFill=!1),i.hasOwnProperty("u")?(!0===i.u?eC.underlineColor=e.underlineColor:eC.underlineColor=i.u,eC.underlineThickness=e.underlineThickness,eC.underlineOffset=e.underlineOffset):(eC.underlineColor="#000",eC.underlineThickness=0,eC.underlineOffset=0),i.hasOwnProperty("s")?(!0===i.s?eC.strikethroughColor=e.strikethroughColor:eC.strikethroughColor=i.s,eC.strikethroughThickness=e.strikethroughThickness,eC.strikethroughOffset=e.strikethroughOffset):(eC.strikethroughColor="#000",eC.strikethroughThickness=0,eC.strikethroughOffset=0),eC},propToTagText:function(e,i,s){null==s&&(s=ex);var r=this.delimiters[0],n=this.delimiters[1],a=[];for(var o in s)i.hasOwnProperty(o)||a.push(`${r}/${o}${n}`);for(var o in i){var h=i[o];if("img"===o);else if(s[o]===h)continue;switch(o){case"size":a.push(`${r}size=${h.replace("px","")}${n}`);break;case"color":case"weight":case"stroke":case"y":case"img":case"area":case"url":case"align":case"id":a.push(`${r}${o}=${h}${n}`);break;case"u":case"s":!0===h?a.push(`${r}${o}${n}`):a.push(`${r}${o}=${h}${n}`);break;default:a.push(`${r}${o}${n}`)}}return a.push(e),a.join("")}});var eO=class extends eb{constructor(e,i,s,r,n){super(e,i,s,r,n,"rexBBCodeText",new Parser(n))}setDelimiters(e,i){return this.parse.setDelimiters(e,i),this}};ObjectFactory.register("BBCodeText",function(e,i,s,r){var n=new eO(this.scene,e,i,s,r);return this.scene.add.existing(n),n}),(0,k.Z)(window,"RexPlugins.UI.BBCodeText",eO);var eM={plainText:null,prevProp:null},eE=new tX,StyleToProp=function(e){e=e.split(";");for(var i,s,r,n={},a=0,o=e.length;a<o;a++)if(s=(i=e[a].split(":"))[0],r=i[1],!(isEmpty(s)||isEmpty(r))){switch(s){case"stroke":var h=r.split(" "),l=h.length;r={},l>=1&&(r.color=h[0]),l>=2&&(r.thickness=parseInt(h[1].replace("px","")));break;case"shadow":var h=r.split(" "),l=h.length;r={},l>=1&&(r.color=h[0]),l>=2&&(r.offsetX=parseInt(h[1].replace("px",""))),l>=3&&(r.offsetY=parseInt(h[2].replace("px",""))),l>=4&&(r.blur=parseInt(h[3].replace("px","")));break;case"u":case"underline":case"s":case"strikethrough":var h=r.split(" "),l=h.length;r={},l>=1&&(r.color=h[0]),l>=2&&(r.thickness=parseInt(h[1].replace("px",""))),l>=3&&(r.offset=parseInt(h[2].replace("px",""))),"underline"===s?s="u":"strikethrough"===s&&(s="s");break;case"y":r=parseFloat(r)}n[s]=r}return n},isEmpty=function(e){return 0===(e=e.replace(eD,"")).length},eR=/<\s*class=["|']([^"|']+)["|']\s*\>([\s\S]*?)<\s*\/class\s*\>|<\s*style=["|']([^"|']+)["|']\s*\>([\s\S]*?)<\s*\/style\s*\>/g,eL=/<\s*class=/i,eB=/<\s*class=["|']([^"|']+)["|']\s*\>([\s\S]*?)<\s*\/class\s*\>/,eI=/<\s*style=/i,eG=/<\s*style=["|']([^"|']+)["|']\s*\>([\s\S]*?)<\s*\/style\s*\>/,eD=/^\s+|\s+$/,ej=class{constructor(e){void 0===e&&(e={}),this.tags=e}addTag(e,i){this.tags[e]=i}getTag(e){return this.tags[e]}splitText(e,i){for(var s=[],r=0;;){var n=eR.exec(e);if(!n)break;var a=n[0],o=eR.lastIndex-a.length;if(r<o&&s.push(e.substring(r,o)),void 0===i)s.push(a);else if(1===i){if(eL.test(a)){var h=a.match(eB);s.push(h[2])}else if(eI.test(a)){var h=a.match(eG);s.push(h[2])}}r=eR.lastIndex}var l=e.length;return r<l&&s.push(e.substring(r,l)),s}tagTextToProp(e,i){if(eL.test(e)){var s,r,n=e.match(eB);if(null!=n){var a=n[1],o=this.tags;(r=o.hasOwnProperty(a)?o[a]:{})._class=a,s=n[2]}}else if(eI.test(e)){var n=e.match(eG);if(null!=n){var h=n[1];(r=StyleToProp(h))._style=h,s=n[2]}}return null==s&&(s=e),null==r&&(r={}),eM.plainText=s,eM.prop=r,eM}propToContextStyle(e,i){if(i.hasOwnProperty("img"))eE.image=i.img;else{if(eE.image=null,i.hasOwnProperty("family")||i.hasOwnProperty("fontFamily")||i.hasOwnProperty("font-family")){var s=i.hasOwnProperty("family")?i.family:i.hasOwnProperty("fontFamily")?i.fontFamily:i["font-family"];eE.fontFamily=s}else eE.fontFamily=e.fontFamily;if(i.hasOwnProperty("size")||i.hasOwnProperty("fontSize")||i.hasOwnProperty("font-size")){var r=i.hasOwnProperty("size")?i.size:i.hasOwnProperty("fontSize")?i.fontSize:i["font-size"];"number"==typeof r&&(r=`${r}px`),eE.fontSize=r}else eE.fontSize=e.fontSize;if(i.hasOwnProperty("style")||i.hasOwnProperty("fontStyle")||i.hasOwnProperty("font-style")){var n=i.hasOwnProperty("style")?i.style:i.hasOwnProperty("fontStyle")?i.fontStyle:i["font-style"];eE.fontStyle=n}else eE.fontStyle=e.fontStyle;if(i.hasOwnProperty("color")||i.hasOwnProperty("font-color")){var a=i.hasOwnProperty("color")?i.color:i["font-color"];eE.color=a}else eE.color=e.color;if(i.hasOwnProperty("stroke")){var o=i.stroke;eE.stroke=o.hasOwnProperty("color")?o.color:e.stroke,eE.strokeThickness=o.hasOwnProperty("thickness")?o.thickness:e.strokeThickness}else eE.stroke=e.stroke,eE.strokeThickness=e.strokeThickness}if(i.hasOwnProperty("shadow")){var h=i.shadow;eE.shadowColor=h.hasOwnProperty("color")?h.color:e.shadowColor,eE.shadowOffsetX=h.hasOwnProperty("offsetX")?h.offsetX:e.shadowOffsetX,eE.shadowOffsetY=h.hasOwnProperty("offsetY")?h.offsetY:e.shadowOffsetY,eE.shadowBlur=h.hasOwnProperty("blur")?h.blur:e.shadowBlur,eE.shadowStroke=!0,eE.shadowFill=!0}else eE.shadowColor=e.shadowColor,eE.shadowOffsetX=e.shadowOffsetX,eE.shadowOffsetY=e.shadowOffsetY,eE.shadowBlur=e.shadowBlur,eE.shadowStroke=e.shadowStroke,eE.shadowFill=e.shadowFill;if(i.hasOwnProperty("u")||i.hasOwnProperty("underline")){var l=i.hasOwnProperty("u")?i.u:i.underline;eE.underlineColor=l.hasOwnProperty("color")?l.color:e.underlineColor,eE.underlineThickness=l.hasOwnProperty("thickness")?l.thickness:e.underlineThickness,eE.underlineOffset=l.hasOwnProperty("offset")?l.offset:e.underlineOffset}else eE.underlineColor=e.underlineColor,eE.underlineThickness=e.underlineThickness,eE.underlineOffset=e.underlineOffset;if(i.hasOwnProperty("s")||i.hasOwnProperty("strikethrough")){var c=i.hasOwnProperty("s")?i.s:i.strikethrough;eE.strikethroughColor=c.hasOwnProperty("color")?c.color:e.strikethroughColor,eE.strikethroughThickness=c.hasOwnProperty("thickness")?c.thickness:e.strikethroughThickness,eE.strikethroughOffset=c.hasOwnProperty("offset")?c.offset:e.strikethroughOffset}else eE.strikethroughColor=e.strikethroughColor,eE.strikethroughThickness=e.strikethroughThickness,eE.strikethroughOffset=e.strikethroughOffset;return eE}getStrokeThinkness(e,i){var s;if(i.hasOwnProperty("stroke")){var r=i.stroke;s=r.hasOwnProperty("thickness")?r.thickness:e.strokeThickness}else s=e.strokeThickness;return s}propToTagText(e,i,s){return i.hasOwnProperty("_class")?""===e&&this.isTextTag(i._class)?"":`<class='${i._class}'>${e}</class>`:i.hasOwnProperty("_style")?`<style='${i._style}'>${e}</style>`:e}destroy(){this.tags=void 0}isTextTag(e){var i=this.tags[e];return!!i&&null==i.img}};let eA=Phaser.Utils.Objects.GetValue;var eF=class extends eb{constructor(e,i,s,r,n){super(e,i,s,r,n,"rexTagText",new ej(eA(n,"tags",void 0)))}addTag(e,i){return this.parser.addTag(e,i),this.updateText(!0)}addTags(e){for(var i in e)this.parser.addTag(i,e[i]);return this.updateText(!0)}getTag(e){return this.parser.getTag(e)}preDestroy(){super.preDestroy(),this.parser.destroy(),this.parser=void 0}};ObjectFactory.register("tagText",function(e,i,s,r){var n=new eF(this.scene,e,i,s,r);return this.scene.add.existing(n),n}),(0,k.Z)(window,"RexPlugins.UI.TagText",eF);let ez=Phaser.Utils.Objects.GetValue;var GetPadding=function(e,i){return void 0===i?e:e[i]},SetPadding=function(e,i,s){void 0===e&&(e={}),void 0===i&&(i=0);var r=typeof i;return"string"===r?e[i]=s:"number"===r?(e.left=i,e.right=i,e.top=i,e.bottom=i):(e.left=ez(i,"left",0),e.right=ez(i,"right",0),e.top=ez(i,"top",0),e.bottom=ez(i,"bottom",0)),e};let bob_Base_Base=class bob_Base_Base{constructor(e,i){this.setParent(e),this.type=i,this.renderable=!1,this.reset().setActive()}destroy(){this.parent.removeChild(this)}setParent(e){return this.parent=e,this}get scene(){return this.parent.scene}get canvas(){return this.parent?this.parent.canvas:null}get context(){return this.parent?this.parent.context:null}setDirty(e){return e&&this.parent&&(this.parent.dirty=!0),this}get active(){return this._active}set active(e){this.setDirty(this._active!=e),this._active=e}setActive(e){return void 0===e&&(e=!0),this.active=e,this}modifyPorperties(e){return this}onFree(){this.reset().setParent()}reset(){return this}render(){}contains(e,i){return!1}};Object.assign(bob_Base_Base.prototype,td);var eW=bob_Base_Base;let eV=Phaser.Math.RotateAround,eY=Phaser.Geom.Rectangle;var GetBobBounds=function(e){void 0===gj&&(gj=new eY);var i=e.drawTLX,s=e.drawTLY;return gj.setTo(i,s,e.drawTRX-i,e.drawBLY-s),gj};let eX=Phaser.Math.RotateAround;var transform_BobPositionToCanvasPosition=function(e,i,s,r){return void 0===r?r={}:!0===r&&(void 0===gA&&(gA={}),r=gA),r.x=i,r.y=s,0!==e.rotation&&eX(r,0,0,e.rotation),r.x=r.x*e.scaleX+e.drawX,r.y=r.y*e.scaleY+e.drawY,r};let eH=Phaser.GameObjects.Components.TransformMatrix;var eU={},position_GameObjectLocalXYToWorldXY=function(e,i,s,r){void 0===r?r={}:!0===r&&(r=eU);var n=i-e.width*e.originX,a=s-e.height*e.originY;return void 0===gF&&(gF=new eH,gz=new eH),e.parentContainer?e.getWorldTransformMatrix(gF,gz):gF.applyITRS(e.x,e.y,e.rotation,e.scaleX,e.scaleY),gF.transformPoint(n,a,r),r},transform_BobPositionToWorldPosition=function(e,i,s,r,n){var a=transform_BobPositionToCanvasPosition(i,s,r,!0);return position_GameObjectLocalXYToWorldXY(e,a.x,a.y,n)},transform_GetBobWorldPosition=function(e,i,s,r,n){"number"!=typeof s&&(n=s,s=0,r=0);var a=i.drawCenterX+s,o=i.drawCenterY+r;return transform_BobPositionToWorldPosition(e,i,a,o,n)},eN={contains:function(e,i){if(0===this.width||0===this.height)return!1;var s,r=(!0==(s=!0)&&(void 0===gD&&(gD={}),s=gD),s.x=(e-this.drawX)/this.scaleX,s.y=(i-this.drawY)/this.scaleY,0!==this.rotation&&eV(s,0,0,-this.rotation),s);return GetBobBounds(this).contains(r.x,r.y)},getWorldPosition:function(e,i,s){return transform_GetBobWorldPosition(this.parent,this,e,i,s)}};Object.assign(eN,{renderContent(){},render(){if(!this.willRender)return this;var e=this.context;if(e.save(),e.globalAlpha=this.alpha,this.toLocalPosition){var i=this.drawX,s=this.drawY;this.autoRound&&(i=Math.round(i),s=Math.round(s)),e.translate(i,s),e.scale(this.scaleX,this.scaleY),e.rotate(this.rotation)}return this.drawBelowCallback&&this.drawBelowCallback(this),this.renderContent(),this.drawAboveCallback&&this.drawAboveCallback(this),e.restore(),this}});let e$=Phaser.Math.DegToRad,eZ=Phaser.Math.RadToDeg,eK=Phaser.Utils.Objects.GetValue;let RenderBase_RenderBase=class RenderBase_RenderBase extends eW{constructor(e,i){super(e,i),this.renderable=!0,this.scrollFactorX=1,this.scrollFactorY=1,this.toLocalPosition=!0,this.originX=0,this.offsetX=0,this.offsetY=0}get visible(){return this._visible}set visible(e){this.setDirty(this._visible!=e),this._visible=e}setVisible(e){return void 0===e&&(e=!0),this.visible=e,this}get alpha(){return this._alpha}set alpha(e){this.setDirty(this._alpha!=e),this._alpha=e}setAlpha(e){return this.alpha=e,this}get x(){return this._x}set x(e){this.setDirty(this._x!=e),this._x=e}setX(e){return this.x=e,this}get y(){return this._y}set y(e){this.setDirty(this._y!=e),this._y=e}setY(e){return this.y=e,this}setPosition(e,i){return this.x=e,this.y=i,this}setInitialPosition(e,i){return this.x0=e,this.y0=i,this}setScrollFactorX(e){return this.scrollFactorX=e,this}setScrollFactorY(e){return this.scrollFactorY=e,this}setScrollFactor(e,i){return void 0===i&&(i=e),this.scrollFactorX=e,this.scrollFactorY=i,this}get rotation(){return this._rotation}set rotation(e){this.setDirty(this._rotation!=e),this._rotation=e}setRotation(e){return this.rotation=e,this}get angle(){return eZ(this._rotation)}set angle(e){this.rotation=e$(e)}setAngle(e){return this.angle=e,this}get scaleX(){return this._scaleX}set scaleX(e){this.setDirty(this._scaleX!==e),this._scaleX=e}setScaleX(e){return this.scaleX=e,this}get width(){return 0}set width(e){}setWidth(e,i){return void 0===i&&(i=!1),this.width=e,i&&(this.scaleY=this.scaleX),this}get leftSpace(){return this._leftSpace}set leftSpace(e){this.setDirty(this._leftSpace!==e),this._leftSpace=e}setLeftSpace(e){return this.leftSpace=e,this}get rightSpace(){return this._rightSpace}set rightSpace(e){this.setDirty(this._rightSpace!==e),this._rightSpace=e}setRightSpace(e){return this.rightSpace=e,this}get outerWidth(){return this.width+this.leftSpace+this.rightSpace}get scaleY(){return this._scaleY}set scaleY(e){this.setDirty(this._scaleY!==e),this._scaleY=e}setScaleY(e){return this.scaleY=e,this}get height(){return 0}set height(e){}setHeight(e,i){return void 0===i&&(i=!1),this.height=e,i&&(this.scaleX=this.scaleY),this}setScale(e,i){return void 0===i&&(i=e),this.scaleX=e,this.scaleY=i,this}setOrigin(e){return this.originX=e,this}setAlign(e){return this.align=e,this}modifyPorperties(e){if(!e)return this;e.hasOwnProperty("x")&&this.setX(e.x),e.hasOwnProperty("y")&&this.setY(e.y),e.hasOwnProperty("rotation")?this.setRotation(e.rotation):e.hasOwnProperty("angle")&&this.setAngle(e.angle),e.hasOwnProperty("alpha")&&this.setAlpha(e.alpha);var i=eK(e,"width",void 0),s=eK(e,"height",void 0),r=eK(e,"scaleX",void 0),n=eK(e,"scaleY",void 0);return void 0!==i?void 0===s&&void 0===n?this.setWidth(i,!0):this.setWidth(i):void 0!==r&&this.setScaleX(r),void 0!==s?void 0===i&&void 0===r?this.setHeight(s,!0):this.setHeight(s):void 0!==n&&this.setScaleY(n),e.hasOwnProperty("leftSpace")&&this.setLeftSpace(e.leftSpace),e.hasOwnProperty("rightSpace")&&this.setRightSpace(e.rightSpace),e.hasOwnProperty("align")&&this.setAlign(e.align),this}setDrawBelowCallback(e){return this.drawBelowCallback=e,this}setDrawAboveCallback(e){return this.drawAboveCallback=e,this}reset(){return this.setVisible().setAlpha(1).setPosition(0,0).setRotation(0).setScale(1,1).setLeftSpace(0).setRightSpace(0).setOrigin(0).setAlign().setDrawBelowCallback().setDrawAboveCallback(),this}get willRender(){return this.visible&&this.alpha>0}get drawX(){var e=this.x+this.leftSpace+this.offsetX-this.originX*this.width;return this.parent._textOX*this.scrollFactorX+e}get drawY(){var e=this.y+this.offsetY;return this.parent._textOY*this.scrollFactorY+e}get drawTLX(){return 0}get drawTLY(){return 0}get drawBLX(){return 0}get drawBLY(){return 0}get drawTRX(){return 0}get drawTRY(){return 0}get drawBRX(){return 0}get drawBRY(){return 0}get drawCenterX(){return(this.drawTRX+this.drawTLX)/2}get drawCenterY(){return(this.drawBLY+this.drawTLY)/2}};Object.assign(RenderBase_RenderBase.prototype,eN);var eJ=RenderBase_RenderBase,utils_GetProperty=function(e,i,s){return i.hasOwnProperty(e)?i[e]:s[e]};let eq=Phaser.Utils.Objects.GetValue;var eQ=class extends eJ{constructor(e,i){super(e,"background"),this.setScrollFactor(0),this.setColor(eq(i,"color",null),eq(i,"color2",null),eq(i,"horizontalGradient",!0)),this.setStroke(eq(i,"stroke",null),eq(i,"strokeThickness",2)),this.setCornerRadius(eq(i,"cornerRadius",0),eq(i,"cornerIteration",null))}set color(e){e=canvas_GetStyle(e,this.canvas,this.context),this.setDirty(this._color!=e),this._color=e}get color(){return this._color}set color2(e){e=canvas_GetStyle(e,this.canvas,this.context),this.setDirty(this._color2!=e),this._color2=e}get color2(){return this._color2}set horizontalGradient(e){this.setDirty(this._horizontalGradient!=e),this._horizontalGradient=e}get horizontalGradient(){return this._horizontalGradient}setColor(e,i,s){return void 0===s&&(s=!0),this.color=e,this.color2=i,this.horizontalGradient=s,this}set stroke(e){e=canvas_GetStyle(e,this.canvas,this.context),this.setDirty(this._stroke!=e),this._stroke=e}get stroke(){return this._stroke}set strokeThickness(e){this.setDirty(this._strokeThickness!=e),this._strokeThickness=e}get strokeThickness(){return this._strokeThickness}setStroke(e,i){return null!=e&&void 0===i&&(i=2),this.stroke=e,this.strokeThickness=i,this}set cornerRadius(e){this.setDirty(this._cornerRadius!=e),this._cornerRadius=e}get cornerRadius(){return this._cornerRadius}set cornerIteration(e){this.setDirty(this._cornerIteration!=e),this._cornerIteration=e}get cornerIteration(){return this._cornerIteration}modifyStyle(e){return e.hasOwnProperty("color")&&this.setColor(e.color,utils_GetProperty("color2",e,this),utils_GetProperty("horizontalGradient",e,this)),e.hasOwnProperty("stroke")&&this.setStroke(e.stroke,utils_GetProperty("strokeThickness",e,this)),e.hasOwnProperty("cornerRadius")&&this.setCornerRadius(e.cornerRadius,utils_GetProperty("cornerIteration",e,this)),this}modifyPorperties(e){return super.modifyPorperties(e),this.modifyStyle(e),this}setCornerRadius(e,i){return this.cornerRadius=e,this.cornerIteration=i,this}renderContent(){utils_DrawRoundRectangleBackground(this.parent,this.color,this.stroke,this.strokeThickness,this.cornerRadius,this.color2,this.horizontalGradient,this.cornerIteration)}};let e0=Phaser.Utils.Objects.GetValue;var e1=class extends eJ{constructor(e,i){super(e,"innerbounds"),this.setScrollFactor(0),this.setColor(e0(i,"color",null),e0(i,"color2",null),e0(i,"horizontalGradient",!0)),this.setStroke(e0(i,"stroke",null),e0(i,"strokeThickness",2))}set color(e){e=canvas_GetStyle(e,this.canvas,this.context),this.setDirty(this._color!=e),this._color=e}get color(){return this._color}set color2(e){e=canvas_GetStyle(e,this.canvas,this.context),this.setDirty(this._color2!=e),this._color2=e}get color2(){return this._color2}set horizontalGradient(e){this.setDirty(this._horizontalGradient!=e),this._horizontalGradient=e}get horizontalGradient(){return this._horizontalGradient}setColor(e,i,s){return void 0===s&&(s=!0),this.color=e,this.color2=i,this.horizontalGradient=s,this}set stroke(e){e=canvas_GetStyle(e,this.canvas,this.context),this.setDirty(this._stroke!=e),this._stroke=e}get stroke(){return this._stroke}set strokeThickness(e){this.setDirty(this._strokeThickness!=e),this._strokeThickness=e}get strokeThickness(){return this._strokeThickness}setStroke(e,i){return null!=e&&void 0===i&&(i=2),this.stroke=e,this.strokeThickness=i,this}modifyPorperties(e){super.modifyPorperties(e),e.hasOwnProperty("color")&&this.setColor(e.color,e0(e,"color2",null),e0(e,"horizontalGradient",!0)),e.hasOwnProperty("stroke")&&this.setStroke(e.stroke,e0(e,"strokeThickness",2))}renderContent(){var e,i,s=this.parent.padding,r=s.left,n=s.top,a=this.parent.width-s.left-s.right,o=this.parent.height-s.top-s.bottom,h=this.context;null!=this.color&&(null!=this.color2?((i=this.horizontalGradient?h.createLinearGradient(0,0,a,0):h.createLinearGradient(0,0,0,o)).addColorStop(0,this.color),i.addColorStop(1,this.color2),e=i):e=this.color,h.fillStyle=e,h.fillRect(r,n,a,o)),null!=this.stroke&&this.strokeThickness>0&&(h.strokeStyle=this.stroke,h.lineWidth=this.strokeThickness,h.strokeRect(r,n,a,o))}};let e2=Phaser.Utils.Objects.GetValue;let TextStyle_TextStyle=class TextStyle_TextStyle{constructor(e,i){this.parent=e,this.set(i)}toJSON(){return{bold:this.bold,italic:this.italic,fontSize:this.fontSize,fontFamily:this.fontFamily,color:this.color,stroke:this.stroke,strokeThickness:this.strokeThickness,shaodwColor:this.shadowColor,shadowBlur:this.shadowBlur,shadowOffsetX:this.shadowOffsetX,shadowOffsetY:this.shadowOffsetY,offsetX:this.offsetX,offsetY:this.offsetY,leftSpace:this.leftSpace,rightSpace:this.rightSpace,backgroundHeight:this.backgroundHeight,backgroundBottomY:this.backgroundBottomY,align:this.align}}set(e){return this.setBold(e2(e,"bold",!1)),this.setItalic(e2(e,"italic",!1)),this.setFontSize(e2(e,"fontSize","16px")),this.setFontFamily(e2(e,"fontFamily","Courier")),this.setColor(e2(e,"color","#fff")),this.setStrokeStyle(e2(e,"stroke",null),e2(e,"strokeThickness",0)),this.setShadow(e2(e,"shadowColor",null),e2(e,"shadowOffsetX",0),e2(e,"shadowOffsetY",0),e2(e,"shadowBlur",0)),this.setOffset(e2(e,"offsetX",0),e2(e,"offsetY",0)),this.setSpace(e2(e,"leftSpace",0),e2(e,"rightSpace",0)),this.setAlign(e2(e,"align",void 0)),this.setBackgroundColor(e2(e,"backgroundColor",null)),this.setBackgroundHeight(e2(e,"backgroundHeight",void 0)),this.setBackgroundBottomY(e2(e,"backgroundBottomY",void 0)),this}modify(e){return e.hasOwnProperty("bold")&&this.setBold(e.bold),e.hasOwnProperty("italic")&&this.setItalic(e.italic),e.hasOwnProperty("fontSize")&&this.setFontSize(e.fontSize),e.hasOwnProperty("fontFamily")&&this.setFontFamily(e.fontFamily),e.hasOwnProperty("color")&&this.setColor(e.color),(e.hasOwnProperty("stroke")||e.hasOwnProperty("strokeThickness"))&&this.setStrokeStyle(utils_GetProperty("stroke",e,this),utils_GetProperty("strokeThickness",e,this)),e.hasOwnProperty("shadowColor")&&this.setShadowColor(e.shadowColor),(e.hasOwnProperty("shadowOffsetX")||e.hasOwnProperty("shadowOffsetY"))&&this.setShadowOffset(utils_GetProperty("shadowOffsetX",e,this),utils_GetProperty("shadowOffsetY",e,this)),e.hasOwnProperty("shadowBlur")&&this.setShadowBlur(e.shaodwBlur),e.hasOwnProperty("offsetX")&&this.setOffsetX(e.offsetX),e.hasOwnProperty("offsetY")&&this.setOffsetY(e.offsetY),e.hasOwnProperty("leftSpace")&&this.setLeftSpace(e.leftSpace),e.hasOwnProperty("rightSpace")&&this.setRightSpace(e.rightSpace),e.hasOwnProperty("align")&&this.setAlign(e.align),e.hasOwnProperty("backgroundColor")&&this.setBackgroundColor(e.backgroundColor),e.hasOwnProperty("backgroundHeight")&&this.setBackgroundHeight(e.backgroundHeight),e.hasOwnProperty("backgroundBottomY")&&this.setBackgroundBottomY(e.backgroundBottomY),this}setUpdateTextFlag(){return this.parent&&(this.parent.updateTextFlag=!0),this}clone(){return new TextStyle_TextStyle(null,this.toJSON())}copyFrom(e){return this.set(e.toJSON()),this}copyTo(e){return e.set(this.toJSON()),this}setBold(e){return void 0===e&&(e=!0),this.bold=e,this.setUpdateTextFlag(),this}setItalic(e){return void 0===e&&(e=!0),this.italic=e,this.setUpdateTextFlag(),this}get fontStyle(){return this.bold&&this.italic?"bold italic":this.bold?"bold":this.italic?"italic":""}setFontSize(e){return"number"==typeof e&&(e=`${e}px`),this.fontSize=e,this.setUpdateTextFlag(),this}setFontFamily(e){return this.fontFamily=e,this.setUpdateTextFlag(),this}get font(){return`${this.fontStyle} ${this.fontSize} ${this.fontFamily}`}setColor(e){return this.color=canvas_GetStyle(e),this}get hasFill(){return null!=this.color}setStrokeStyle(e,i){return this.stroke=canvas_GetStyle(e),void 0!==i&&(this.strokeThickness=i),this}setStrokeThickness(e){return this.strokeThickness=e,this}get hasStroke(){return null!=this.stroke&&this.strokeThickness>0}setShadowColor(e){return this.shadowColor=canvas_GetStyle(e),this}setShadowOffset(e,i){return void 0===e&&(e=0),void 0===i&&(i=0),this.shadowOffsetX=e,this.shadowOffsetY=i,this}setShadowBlur(e){return void 0===e&&(e=0),this.shaodwBlur=e,this}setShadow(e,i,s,r){return this.setShadowColor(e).setShadowOffset(i,s).setShadowBlur(r),this}setBackgroundColor(e){return this.backgroundColor=canvas_GetStyle(e),this}get hasBackgroundColor(){return null!=this.backgroundColor}setBackgroundHeight(e){return this.backgroundHeight=e,this}setBackgroundBottomY(e){return this.backgroundBottomY=e,this}setOffsetX(e){return void 0===e&&(e=0),this.offsetX=e,this}setOffsetY(e){return void 0===e&&(e=0),this.offsetY=e,this}setOffset(e,i){return this.setOffsetX(e).setOffsetY(i),this}setLeftSpace(e){return void 0===e&&(e=0),this.leftSpace=e,this}setRightSpace(e){return void 0===e&&(e=0),this.rightSpace=e,this}setSpace(e,i){return this.setLeftSpace(e).setRightSpace(i),this}setAlign(e){return this.align=e,this}syncFont(e){return e.font=this.font,this}syncStyle(e){e.textBaseline="alphabetic";var i=this.hasFill,s=this.hasStroke;return e.fillStyle=i?this.color:"#000",e.strokeStyle=s?this.stroke:"#000",e.lineWidth=s?this.strokeThickness:0,e.lineCap="round",e.lineJoin="round",this}syncShadow(e){null!=e.shadowColor?(e.shadowColor=this.shadowColor,e.shadowOffsetX=this.shadowOffsetX,e.shadowOffsetY=this.shadowOffsetY,e.shadowBlur=this.shadowBlur):(e.shadowColor=0,e.shadowOffsetX=0,e.shadowOffsetY=0,e.shadowBlur=0)}getTextMetrics(e,i){return this.syncFont(e).syncStyle(e),e.measureText(i)}};let e5=Phaser.Utils.Array.Remove,e3=Phaser.Utils.Array.Remove,e7="text",e6="image",e4="drawer",e8="space",e9="command";var IsNewLineChar=function(e){return e.type===e7&&"\n"===e.text},IsPageBreakChar=function(e){return e.type===e7&&"\f"===e.text},IsChar=function(e){return e.type===e7},it=class extends eJ{constructor(e,i,s){super(e,e7),this.updateTextFlag=!1,this.style=new TextStyle_TextStyle(this,s),this.setText(i)}get autoRound(){return this.parent.autoRound}get offsetX(){return this.style.offsetX}set offsetX(e){this.style&&(this.style.offsetX=e)}get offsetY(){return this.style.offsetY}set offsetY(e){this.style&&(this.style.offsetY=e)}get leftSpace(){return this.style.leftSpace*this.scaleX}set leftSpace(e){this.style&&(this.style.leftSpace=e),super.leftSpace=e}get rightSpace(){return this.style.rightSpace*this.scaleX}set rightSpace(e){this.style&&(this.style.rightSpace=e),super.rightSpace=e}get align(){return this.style.align}set align(e){this.style&&(this.style.align=e)}modifyStyle(e){return this.setDirty(!0),this.style.modify(e),this.updateTextFlag&&this.updateTextSize(),this}modifyPorperties(e){return e&&(this.modifyStyle(e),super.modifyPorperties(e)),this}setText(e){return this.setDirty(this.text!=e),this.text=e,this.updateTextSize(),this}updateTextSize(){var e=this.text;if("\n"===e||"\f"===e||""===e)this.clearTextSize();else{var i,s,r=this.style.getTextMetrics(this.context,this.text);this.textWidth=r.width,"actualBoundingBoxAscent"in r?(i=r.actualBoundingBoxAscent,s=r.actualBoundingBoxDescent):(i=0,s=0),this.textHeight=i+s,this.ascent=i,this.descent=s}return this.updateTextFlag=!1,this}clearTextSize(){return this.textWidth=0,this.textHeight=0,this.ascent=0,this.descent=0,this}copyTextSize(e){return this.textWidth=e.textWidth,this.textHeight=e.textHeight,this.ascent=e.ascent,this.descent=e.descent,this}get width(){return this.textWidth*this.scaleX}set width(e){this.textWidth>0?this.scaleX=e/this.textWidth:this.scaleX=1}get height(){return this.textHeight*this.scaleY}set height(e){this.textHeight>0?this.scaleY=e/this.textHeight:this.scaleY=1}get willRender(){return 0!==this.textWidth&&super.willRender}renderContent(){var e=this.context,i=this.style;if(i.hasBackgroundColor){e.fillStyle=i.backgroundColor;var s=this.drawTLX,r=this.drawTRX-s,n=i.backgroundBottomY;null==n&&(n=this.drawBLY);var a=i.backgroundHeight;null==a&&(a=n-this.drawTLY);var o=n-a;e.fillRect(s,o,r,a)}var h=i.hasFill,l=i.hasStroke;(h||l)&&(i.syncFont(e).syncStyle(e),l&&(i.syncShadow(e),e.strokeText(this.text,0,0)),h&&(i.syncShadow(e),e.fillText(this.text,0,0)))}get drawTLX(){return-this.leftSpace}get drawTLY(){return-this.ascent}get drawBLX(){return-this.leftSpace}get drawBLY(){return this.descent}get drawTRX(){return this.textWidth+this.rightSpace}get drawTRY(){return-this.ascent}get drawBRX(){return this.textWidth+this.rightSpace}get drawBRY(){return this.descent}},methods_AppendText=function(e,i){var s=this.createCharChildren(e,i);return this.addChild(s),this};Phaser.Display.Canvas.CanvasPool;var ie=class extends eJ{constructor(e,i,s){super(e,e6),this.setTexture(i,s),this.color=void 0}get frameWidth(){return this.frameObj?this.frameObj.cutWidth:0}get frameHeight(){return this.frameObj?this.frameObj.cutHeight:0}get offsetY(){return-this.height}set offsetY(e){}get key(){return this._key}set key(e){this.setDirty(this._key!=e),this._key=e}get frame(){return this._frame}set frame(e){this.setDirty(this._frame!=e),this._frame=e}setTexture(e,i){return this.key=e,this.frame=i,this.frameObj=this.scene.sys.textures.getFrame(e,i),this}get width(){return this.frameWidth*this.scaleX}set width(e){this.setDirty(this.width!==e),this.scaleX=e/this.frameWidth}get height(){return this.frameHeight*this.scaleY}set height(e){this.setDirty(this.height!==e),this.scaleY=e/this.frameHeight}setHeight(e,i){return void 0===i&&(i=!1),this.height=e,i&&(this.scaleX=this.scaleY),this}setColor(e){return this.color=e,this}modifyPorperties(e){return e.hasOwnProperty("color")&&this.setColor(e.color),super.modifyPorperties(e),this}renderContent(){texture_DrawFrameToCanvas(this.frameObj,this.canvas,0,0,this.frameWidth,this.frameHeight,this.color,!1)}get drawTLX(){return-this.leftSpace}get drawTLY(){return 0}get drawBLX(){return-this.leftSpace}get drawBLY(){return this.frameHeight}get drawTRX(){return this.frameWidth+this.rightSpace}get drawTRY(){return 0}get drawBRX(){return this.frameWidth+this.rightSpace}get drawBRY(){return this.frameHeight}},methods_AppendImage=function(e,i,s){var r=this.createImageChild(e,i,s);return this.addChild(r),this},ii=class extends eJ{constructor(e,i,s,r){super(e,e4),this.setRenderCallback(i),this.setDrawerSize(s,r)}setRenderCallback(e){return e?this.renderContent=e.bind(this):delete this.renderContent,this}setDrawerSize(e,i){return!0===e?(this.toLocalPosition=!1,e=void 0,i=void 0):this.toLocalPosition=!0,void 0===e&&(e=0),void 0===i&&(i=e),this.drawerWidth=e,this.drawerHeight=i,this}onFree(){super.onFree(),this.setRenderCallback()}get width(){return this.drawerWidth*this.scaleX}set width(e){this.setDirty(this.width!==e),this.scaleX=this.drawerWidth>0?e/this.drawerWidth:1}get height(){return this.drawerHeight*this.scaleY}set height(e){this.setDirty(this.height!==e),this.scaleY=this.drawerHeight>0?e/this.drawerHeight:1}get offsetY(){return-this.height}set offsetY(e){}get drawTLX(){return-this.leftSpace}get drawTLY(){return 0}get drawBLX(){return-this.leftSpace}get drawBLY(){return this.drawerHeight}get drawTRX(){return this.drawerWidth+this.rightSpace}get drawTRY(){return 0}get drawBRX(){return this.drawerWidth+this.rightSpace}get drawBRY(){return this.drawerHeight}},is=class extends eJ{constructor(e,i){super(e,e8),this.setSpaceWidth(i)}get width(){return this.spaceWidth*this.scaleX}set width(e){this.spaceWidth>0?this.scaleX=e/this.spaceWidth:this.scaleX=1}setSpaceWidth(e){return this.spaceWidth=e,this}},methods_AppendSpace=function(e){var i=this.createSpaceChild(e);return this.addChild(i),this},ir=class extends eW{constructor(e,i,s,r,n){super(e,e9),this.setName(i).setParameter(r).setCallback(s,n)}setName(e){return this.name=e,this}setParameter(e){return this.param=e,this}setCallback(e,i){return this.callback=e,this.scope=i,this}exec(){return this.scope?this.callback.call(this.scope,this.param,this.name):this.callback(this.param,this.name)}onFree(){super.onFree(),this.setName().setCallback().setParameter()}},methods_AppendCommand=function(e,i,s,r){var n=this.createCommandChild(e,i,s,r);return this.addChild(n),this},wrap_CreateWrapResultData=function(e){return Object.assign({callback:void 0,start:0,isLastPage:!1,maxLines:void 0,padding:void 0,letterSpacing:void 0,hAlign:void 0,vAlign:void 0,children:[],lines:[],maxLineWidth:0,linesHeight:0,lineHeight:void 0,maxLineHeight:0,linesWidth:0,lineWidth:void 0},e)},runwordwrap_GetWord=function(e,i,s,r){void 0===r&&(r={word:[],width:0}),r.word.length=0;for(var n=e.length,a=i,o=r.word,h=0;a<n;){var l=e[a];if(!l.renderable){o.push(l),a++;continue}var c=l.type===e7?l.text:null;if(null!==c&&" "!==c&&"\n"!==c&&"\f"!==c)o.push(l),h+=l.outerWidth,a++;else{a===i&&(o.push(l),h+=l.outerWidth);break}if(s)break}return r.width=h,r},wrap_GetChildrenAlign=function(e){for(var i=0,s=e.length;i<s;i++){var r=e[i];if(void 0!==r.align)return r.align}},wrap_OffsetChildren=function(e,i,s){if(0!==i||0!==s)for(var r=0,n=e.length;r<n;r++){var a=e[r];a.renderable&&(a.x+=i,a.y+=s)}},runwordwrap_AlignLines=function(e,i,s){var r,n,a=e.hAlign,o=e.vAlign,h=e.linesHeight;switch(o){case 1:case"center":n=(s-h)/2;break;case 2:case"bottom":n=s-h;break;default:n=0}for(var l=e.lines,c=0,g=l.length;c<g;c++){var m=l[c],x=m.width,S=m.children,_=wrap_GetChildrenAlign(S);switch(void 0===_&&(_=a),_){case 1:case"center":r=(i-x)/2;break;case 2:case"right":r=i-x;break;default:r=0}wrap_OffsetChildren(S,r,n)}},ia={},runwordwrap_GetDefaultTextHeight=function(){var e,i,s=this.defaultTextStyle.getTextMetrics(this.context,this.testString);return"actualBoundingBoxAscent"in s?(e=s.actualBoundingBoxAscent,i=s.actualBoundingBoxDescent):(e=0,i=0),ia.ascent=e,ia.descent=i,ia.height=e+i,ia};let io=Phaser.Utils.Objects.GetValue;var runwordwrap_RunWordWrap=function(e){var i,s,r=io(e,"start",0);SetPadding(this.wrapPadding,io(e,"padding",0));var n=this.padding.top+this.padding.bottom+this.wrapPadding.top+this.wrapPadding.bottom,a=this.padding.left+this.padding.right+this.wrapPadding.left+this.wrapPadding.right,o=io(e,"lineHeight"),h=io(e,"ascent",o);if(void 0===o){var l=io(e,"useDefaultTextHeight",!1);if(i=io(e,"maxLines",0),this.fixedHeight>0&&!l){var c=this.fixedHeight-n;if(i>0)o=c/i;else{var g=runwordwrap_GetDefaultTextHeight.call(this);o=g.height,i=Math.floor((c-(h=g.ascent))/o)}}else{var g=runwordwrap_GetDefaultTextHeight.call(this);o=g.height,h=g.ascent}}else if(this.fixedHeight>0){if(void 0===(i=io(e,"maxLines"))){var c=this.fixedHeight-n;i=Math.floor(c/o)}}else i=io(e,"maxLines",0);void 0===h&&(h=o);var m=0===i,x=io(e,"wrapWidth",void 0);void 0===x&&(x=this.fixedWidth>0?this.fixedWidth-a:1/0);for(var S=io(e,"letterSpacing",0),_=io(e,"hAlign",0),k=io(e,"vAlign",0),E=io(e,"charWrap",!1),R=wrap_CreateWrapResultData({callback:"runWordWrap",start:r,padding:this.wrapPadding,letterSpacing:S,maxLines:i,hAlign:_,vAlign:k,ascent:h,lineHeight:o,wrapWidth:x,charWrap:E}),j=this.children,Y=0,X=j.length;Y<X;Y++)j[Y].setActive(!1);x+=S;for(var $=this.padding.left+this.wrapPadding.left,Z=this.padding.top+this.wrapPadding.top+h,q=$,tt=Z,te=x,ti=r,ts=j.length,tr=R.children,tn=R.lines,to=[],th=0,tl=0,td=!1;ti<ts;){var tc=(s=runwordwrap_GetWord(j,ti,E,s)).word,tu=tc.length,tp=s.width+tu*S;ti+=tu;var tg=IsNewLineChar(tc[0]);td=IsPageBreakChar(tc[0]);var tv=tg||td;if(te<tp||tv){if(tv){var tf=tc[0];tf.setActive().setPosition(q,tt),tr.push(tf),to.push(tf)}if(q=$,tt+=o,te=x,tn.push({children:to,width:th}),tl=Math.max(tl,th),th=0,to=[],td||!m&&tn.length===i)break;if(tv)continue}te-=tp,th+=tp;for(var Y=0,X=tc.length;Y<X;Y++){var tm=tc[Y];tm.setActive(),tr.push(tm),to.push(tm),tm.renderable&&(tm.setPosition(q,tt),q+=tm.outerWidth+S)}}to.length>0&&(tn.push({children:to,width:th}),tl=Math.max(tl,th)),R.start+=tr.length,R.isLastPage=!td&&R.start===ts,R.maxLineWidth=tl,R.linesHeight=tn.length*o;var tb=this.fixedWidth>0?this.fixedWidth:R.maxLineWidth+a,ty=this.fixedHeight>0?this.fixedHeight:R.linesHeight+n,c=ty-n;runwordwrap_AlignLines(R,tb-a,c),this.setCanvasSize(tb,ty);for(var Y=0,X=tr.length;Y<X;Y++){var tm=tr[Y];tm.renderable&&(tm.x0=tm.x,tm.y0=tm.y)}return R};let ih=Phaser.Utils.Objects.Merge;var runverticalwrap_AlignLines=function(e,i,s){var r,n,a=e.hAlign,o=e.vAlign,h=e.rtl,l=e.lines,c=e.lineWidth,g=e.linesWidth;switch(a){case 1:case"center":r=(i-g)/2;break;case 2:case"right":r=i-g;break;default:r=0}h&&(r+=c);for(var m=0,x=l.length;m<x;m++){var S=l[h?x-m-1:m],_=S.children,k=S.height,E=wrap_GetChildrenAlign(_);switch(void 0===E&&(E=o),E){case 1:case"center":n=(s-k)/2;break;case 2:case"bottom":n=s-k;break;default:n=0}wrap_OffsetChildren(_,r,n),r+=c}};let il=Phaser.Utils.Objects.GetValue;var runverticalwrap_RunVerticalWrap=function(e){var i,s=il(e,"start",0);SetPadding(this.wrapPadding,il(e,"padding",0));var r=this.padding.top+this.padding.bottom+this.wrapPadding.top+this.wrapPadding.bottom,n=this.padding.left+this.padding.right+this.wrapPadding.left+this.wrapPadding.right,a=il(e,"lineWidth",void 0);if(void 0===a){if(i=il(e,"maxLines",0),this.fixedWidth>0){var o=this.fixedWidth-n;a=o/i}else a=0}else if(this.fixedWidth>0){if(void 0===(i=il(e,"maxLines",void 0))){var o=this.fixedWidth-n;i=Math.floor(o/a)+1}}else i=il(e,"maxLines",0);var h=0===i,l=il(e,"fixedCharacterHeight",void 0);if(void 0===l){var c=il(e,"charPerLine",void 0);if(void 0!==c){var g=this.fixedHeight-r;l=Math.floor(g/c)}}var m=il(e,"wrapHeight",void 0);void 0===m&&(m=this.fixedHeight>0?this.fixedHeight-r:1/0);for(var x=il(e,"letterSpacing",0),S=il(e,"rtl",!0),_=il(e,"hAlign",S?2:0),k=il(e,"vAlign",0),E=wrap_CreateWrapResultData({callback:"runVerticalWrap",start:s,padding:this.wrapPadding,letterSpacing:x,maxLines:i,hAlign:_,vAlign:k,lineWidth:a,fixedCharacterHeight:l,wrapHeight:m,rtl:S}),R=this.children,j=0,Y=R.length;j<Y;j++)R[j].setActive(!1);m+=x;for(var X=this.padding.left+this.wrapPadding.left,$=this.padding.top+this.wrapPadding.top,Z=X,q=$,tt=m,te=s,ti=R.length,ts=E.children,tr=E.lines,tn=[],to=0,th=0;te<ti;){var tl=R[te];if(te++,!tl.renderable){tl.setActive(),ts.push(tl),tn.push(tl);continue}var td=(void 0!==l?l:tl.height)+x,tc=IsNewLineChar(tl),tu=IsPageBreakChar(tl),tp=tc||tu;if(tt<td||tp){if(tc&&(tl.setActive().setPosition(Z,q).setOrigin(.5),ts.push(tl),tn.push(tl)),Z=X,q=$,tt=m,tr.push({children:tn,height:to}),th=Math.max(th,to),to=0,tn=[],tu||!h&&tr.length===i)break;if(tp)continue}tt-=td,to+=td,tl.setActive().setPosition(Z,q).setOrigin(.5),ts.push(tl),tn.push(tl),q+=td}tn.length>0&&(tr.push({children:tn,height:to}),th=Math.max(th,to)),E.start+=ts.length,E.isLastPage=E.start===ti,E.maxLineHeight=th,E.linesWidth=tr.length*a;var tg=this.fixedWidth>0?this.fixedWidth:E.linesWidth+n,tv=this.fixedHeight>0?this.fixedHeight:E.maxLineHeight+r,o=tg-n,g=tv-r;runverticalwrap_AlignLines(E,o,g),this.setCanvasSize(tg,tv);for(var j=0,Y=ts.length;j<Y;j++){var tl=ts[j];tl.renderable&&(tl.x0=tl.x,tl.y0=tl.y)}return E};let id=Phaser.Utils.Objects.Merge,ic=Phaser.Utils.Objects.GetValue,iu=Phaser.Utils.Array.GetAll;var transform_GetBobCenterPosition=function(e,i,s,r){"number"!=typeof i&&(r=i,i=0,s=0);var n=e.drawCenterX+i,a=e.drawCenterY+s;return transform_BobPositionToCanvasPosition(e,n,a,r)};let ip=Phaser.Math.Distance.BetweenPointsSquared;var input_GetFirstChildContains=function(e,i,s){for(var e=e,r=0,n=e.length;r<n;r++){var a=e[r];if(a.active&&a.renderable&&a.contains(i,s))return a}return null},OnPointerDown=function(e,i,s,r){if(this.childrenInteractiveEnable){var n=input_GetFirstChildContains(this.children,i,s);n&&this.emit("child.pointerdown",n,e,i,s,r)}},OnPointerUp=function(e,i,s,r){if(this.childrenInteractiveEnable){var n=input_GetFirstChildContains(this.children,i,s);n&&this.emit("child.pointerup",n,e,i,s,r)}},OnPointOverOut=function(e,i,s,r){if(this.childrenInteractiveEnable){if(null===i){null!==this.lastOverChild&&(this.emit("child.pointerout",this.lastOverChild,e,i,s,r),this.lastOverChild=null);return}var n=input_GetFirstChildContains(this.children,i,s);n!==this.lastOverChild&&(null!==this.lastOverChild&&this.emit("child.pointerout",this.lastOverChild,e,i,s,r),null!==n&&this.emit("child.pointerover",n,e,i,s,r),this.lastOverChild=n)}},input_SetChildrenInteractive=function(){return this.on("pointerdown",OnPointerDown,this).on("pointerdown",OnPointerUp,this).on("pointermove",OnPointOverOut,this).on("pointerover",OnPointOverOut,this).on("pointerout",function(e,i){OnPointOverOut.call(this,e,null,null,i)},this),this};let ig=Phaser.GameObjects.GameObject,iv=Phaser.Utils.Array.BringToTop,im=Phaser.Utils.Array.SendToBack,ib=Phaser.Utils.Array.MoveUp,iy=Phaser.Utils.Array.MoveDown,iC=Phaser.Utils.Array.MoveAbove,ix=Phaser.Utils.Array.MoveBelow;var iS={setFixedSize:function(e,i){return void 0===e&&(e=0),void 0===i&&(i=0),this.fixedWidth===e&&this.fixedHeight===i||(this.fixedWidth=e,this.fixedHeight=i,this.dirty=!0,this.setCanvasSize(e>0?e:this.width,i>0?i:this.height)),this},setPadding:function(e,i){var s=this.padding,r=s.left,n=s.right,a=s.top,o=s.bottom;return SetPadding(s,e,i),this.dirty=this.dirty||r!=s.left||n!=s.right||a!=s.top||o!=s.bottom,this},getPadding:function(e){return GetPadding(this.padding,e)},modifyTextStyle:function(e){return this.textStyle.modify(e),this},modifyDefaultTextStyle:function(e){return this.defaultTextStyle.modify(e),this},resetTextStyle:function(){return this.textStyle.copyFrom(this.defaultTextStyle),this},setTestString:function(e){return this.testString=e,this},removeChild:function(e){return this.poolManager.free(e),e5(this.children,e),this.lastAppendedChildren.length=0,this.lastOverChild=null,this.dirty=!0,this},removeChildren:function(){return this.poolManager.freeMultiple(this.children),this.children.length=0,this.lastAppendedChildren.length=0,this.lastOverChild=null,this.dirty=!0,this},popChild:function(e){return e3(this.children,e),this.lastAppendedChildren.length=0,this.lastOverChild=null,this.dirty=!0,this},clearContent:function(){return this.setText(),this},addChild:function(e,i){var s=Array.isArray(e);return void 0===i||i===this.children.length?s?this.children.push(...e):this.children.push(e):s?this.children.splice(i,0,...e):this.children.splice(i,0,e),this.lastAppendedChildren.length=0,s?this.lastAppendedChildren.push(...e):this.lastAppendedChildren.push(e),this},createCharChild:function(e,i){i&&this.textStyle.modify(i);var s=this.poolManager.allocate(e7);return null===s?s=new it(this,e,this.textStyle):s.setParent(this).setActive().modifyStyle(this.textStyle).setText(e),s},createCharChildren:function(e,i){i&&this.textStyle.modify(i);for(var s=[],r=0,n=e.length;r<n;r++){var a=e.charAt(r),o=this.poolManager.allocate(e7);null===o?o=new it(this,a,this.textStyle):o.setParent(this).setActive().modifyStyle(this.textStyle).setText(a),s.push(o)}return s},setText:function(e,i){return void 0===e&&(e=""),this.removeChildren(),methods_AppendText.call(this,e,i),this.dirty=!0,this},appendText:methods_AppendText,insertText:function(e,i,s){var r=this.createCharChildren(i,s);return e=this.getCharChildIndex(e,!0),this.addChild(r,e),this},removeText:function(e,i){void 0===i&&(i=1);for(var s=0;s<i;s++){var r=this.getCharChildIndex(e,!0);if(void 0===r)break;this.removeChild(this.children[r])}return this},getText:function(e){var i="";return this.forEachCharChild(function(e){i+=e.text},void 0,e),i},createImageChild:function(e,i,s){var r=this.poolManager.allocate(e6);return null===r?r=new ie(this,e,i):r.setParent(this).setActive().setTexture(e,i),r.modifyPorperties(s),r},appendImage:methods_AppendImage,createDrawerChild:function(e,i,s){var r=this.poolManager.allocate(e4);return null===r?r=new ii(this,e,i,s):r.setParent(this).setActive().setRenderCallback(e).setDrawerSize(i,s),r},appendDrawer:function(e,i,s){var r=this.createDrawerChild(e,i,s);return this.addChild(r),this},createSpaceChild:function(e){var i=this.poolManager.allocate(e8);return null===i?i=new is(this,e):i.setParent(this).setActive().setSpaceWidth(e),i},appendSpace:methods_AppendSpace,createCommandChild:function(e,i,s,r){var n=this.poolManager.allocate(e9);return null===n?n=new ir(this,e,i,s,r):n.setParent(this).setActive().setName(e).setCallback(i,r).setParameter(s),n},appendCommand:methods_AppendCommand,setWrapConfig:function(e){return void 0===e?e={}:"object"==typeof e&&(e=DeepClone(e)),this.wrapConfig=e,this},runWordWrap:function(e){return void 0===e&&(e={}),runwordwrap_RunWordWrap.call(this,ih(e,this.wrapConfig))},runVerticalWrap:function(e){return void 0===e&&(e={}),runverticalwrap_RunVerticalWrap.call(this,id(e,this.wrapConfig))},runWrap:function(e){var i=ic(this.wrapConfig,"callback");return i||(i=ic(e,"callback",this.runWordWrap)),"string"==typeof i&&(i=this[i]),i.call(this,e)},renderContent:function(){this.clear(),this.setCanvasSize(this.width,this.height),this.background.active&&this.background.render();for(var e,i=0,s=this.children.length;i<s;i++)(e=this.children[i]).active&&e.render();this.innerBounds.active&&this.innerBounds.render()},forEachChild:function(e,i,s){void 0===s&&(s=!0);for(var r=this.children,n=0,a=0,o=r.length;a<o;a++){var h,l=r[a];if((!s||l.active)&&(h=i?e.call(this,l,n,r):e(l,n,r),n++,h))break}return this},forEachRenderableChild:function(e,i,s){void 0===s&&(s=!0);for(var r=this.children,n=0,a=0,o=r.length;a<o;a++){var h,l=r[a];if((!s||l.active)&&l.renderable&&!l.removed&&(h=i?e.call(this,l,n,r):e(l,n,r),n++,h))break}return this},forEachCharChild:function(e,i,s){void 0===s&&(s=!0);for(var r=this.children,n=0,a=0,o=r.length;a<o;a++){var h,l=r[a];if((!s||l.active)&&IsChar(l)&&!l.removed&&(h=i?e.call(this,l,n,r):e(l,n,r),n++,h))break}return this},getChildren:function(){return this.children},getActiveChildren:function(){return iu(this.children,"active",!0)},getCharChildren:function(e,i){return void 0===i&&(i=[]),this.forEachCharChild(function(e){i.push(e)},void 0,e),i},getLastAppendedChildren:function(){return this.lastAppendedChildren},getNearestChild:function(e,i){var s={x:e,y:i},r=1/0,n=null;return this.forEachRenderableChild(function(e){var i=ip(s,transform_GetBobCenterPosition(e,!0));r>i&&(r=i,n=e)}),n},getCharWorldPosition:function(e,i,s,r){return"number"==typeof e&&(e=this.getCharChild(e,!0)),transform_GetBobWorldPosition(this,e,i,s,r)},setToMinSize:function(){for(var e=this.children,i=0,s=0,r=0,n=e.length;r<n;r++){var a=e[r];if(a.renderable&&a.active&&a.visible){var o=void 0!==a.x0?a.x0:a.x,h=void 0!==a.y0?a.y0:a.y;i=Math.max(i,o),s=Math.max(s,h)}}var l=i+this.padding.left+this.padding.right+this.wrapPadding.left+this.wrapPadding.right,c=s+this.padding.top+this.padding.bottom+this.wrapPadding.top+this.wrapPadding.bottom;return(this.width!==l||this.height!==c)&&(this.dirty=!0,this.setCanvasSize(l,c)),this},getCharChildIndex:function(e,i){void 0===i&&(i=!0);for(var s=this.children,r=0,n=s.length;r<n;r++){var a=s[r];if((!i||a.active)&&IsChar(a)&&!a.removed){if(0===e)return r;e--}}},getCharChild:function(e,i){void 0===i&&(i=!0);for(var s=this.children,r=0,n=s.length;r<n;r++){var a=s[r];if((!i||a.active)&&IsChar(a)&&!a.removed){if(0===e)return a;e--}}},getCharIndex:function(e,i){if("number"!=typeof e&&(e=this.children.indexOf(e))<0)return null;void 0===i&&(i=!0);var s=this.children;e>=s.length&&(e=s.length);for(var r=0,n=0;n<e;n++){var a=s[n];(!i||a.active)&&IsChar(a)&&!a.removed&&r++}return r},setChildrenInteractiveEnable:function(e){return void 0===e&&(e=!0),this.childrenInteractiveEnable!==e&&(this.lastOverChild=null),this.childrenInteractiveEnable=e,this},setInteractive:function(e,i,s){var r=!!this.input;return ig.prototype.setInteractive.call(this,e,i,s),r||input_SetChildrenInteractive.call(this),this}};Object.assign(iS,{moveChildToFist(e){return im(this.children,e),this},moveChildToLast(e){return iv(this.children,e),this},movechildUp(e){return ib(this.children,e),this},movechildDown(e){return iy(this.children,e),this},movechildAbove(e,i){return iC(this.children,e,i),this},movechildBelow(e,i){return ix(this.children,e,i),this}},{setBackgroundColor(e,i,s){return this.background.setColor(e,i,s),this},setBackgroundStroke(e,i){return this.background.setStroke(e,i),this},setBackgroundCornerRadius(e,i){return this.background.setCornerRadius(e,i),this}},{setInnerBoundsColor(e,i,s){return this.innerBounds.setColor(e,i,s),this},setInnerBoundsStroke(e,i){return this.innerBounds.setStroke(e,i),this}},{setVAlign(e){return this.wrapConfig.vAlign=e,this},setHAlign(e){return this.wrapConfig.hAlign=e,this}},{setTextOX(e){return e===this._textOX||(this._textOX=e),this},setTextOY(e){return e===this._textOY||(this._textOY=e),this},setTextOXY(e,i){if(e!==this._textOX||i!==this._textOY)return this._textOX=e,this._textOY=i,this},addTextOX(e){return this.setTextOX(this._textOX+e),this},addTextOY(e){return this.setTextOY(this._textOY+e),this},addTextOXY(e,i){return this.setTextOXY(this._textOX+e,this._textOY+i),this}});let i_=Phaser.Utils.Objects.GetFastValue;var iw={},iP=class{constructor(e){this.pools=i_(e,"pools",iw)}free(e){if(!this.pools)return this;var i=e.type;return this.pools.hasOwnProperty(i)||(this.pools[i]=new X),this.pools[i].push(e),e.onFree(),this}freeMultiple(e){if(!this.pools)return this;for(var i=0,s=e.length;i<s;i++)this.free(e[i]);return this}allocate(e){return this.pools&&this.pools.hasOwnProperty(e)?this.pools[e].pop():null}};let ik=Phaser.Utils.Objects.IsPlainObject,iT=Phaser.Utils.Objects.GetValue;let DynamicText_DynamicText=class DynamicText_DynamicText extends tT{constructor(e,i,s,r,n,a){ik(i)?(i=iT(a=i,"x",0),s=iT(a,"y",0),r=iT(a,"width",0),n=iT(a,"height",0)):ik(r)&&(r=iT(a=r,"width",0),n=iT(a,"height",0)),super(e,i,s,0===r?1:r,0===n?1:n),this.type="rexDynamicText",this.autoRound=!0,this.padding=SetPadding(),this.wrapPadding=SetPadding();var o=iT(a,"style",void 0);this.defaultTextStyle=new TextStyle_TextStyle(null,o),this.textStyle=this.defaultTextStyle.clone(),this.setTestString(iT(a,"testString","|M\xc9qgy")),this._textOX=0,this._textOY=0,this.background=new eQ(this,iT(a,"background",void 0)),this.innerBounds=new e1(this,iT(a,"innerBounds",void 0)),this.children=[],this.lastAppendedChildren=[],this.lastOverChild=null,this.poolManager=new iP(a),this.setFixedSize(r,n),this.setPadding(iT(a,"padding",0)),this.setWrapConfig(iT(a,"wrap",void 0)),this.setChildrenInteractiveEnable(iT(a,"childrenInteractive",!1));var h=iT(a,"text",void 0);h&&this.setText(h)}updateTexture(){return this.renderContent(),super.updateTexture(),this}get text(){return this.getText(!0)}set text(e){this.setText(e)}setSize(e,i){return this.setFixedSize(e,i),this}get textOX(){return this._textOX}set textOX(e){this.setTextOX(e)}get textOY(){return this._textOY}set textOY(e){this.setTextOY(e)}};Object.assign(DynamicText_DynamicText.prototype,iS);var iO=DynamicText_DynamicText;ObjectFactory.register("dynamicText",function(e,i,s,r,n){var a=new iO(this.scene,e,i,s,r,n);return this.scene.add.existing(a),a}),(0,k.Z)(window,"RexPlugins.UI.DynamicText",iO);var iM=s(73936);let BobBase=class BobBase{constructor(e,i,s){this.GOManager=e,this.tweens={},this.effects={},this.setGO(i,s)}get scene(){return this.GOManager.scene}get timeScale(){return this.GOManager.timeScale}destroy(){this.freeGO(),this.GOManager=void 0}freeGO(){return this.freeTweens(),this.gameObject.destroy(),this.gameObject=void 0,this}setGO(e,i){return e.goName=i,e.goType=this.GOManager.name,this.gameObject=e,this.name=i,this.freeTweens(),this}setTimeScale(e){var i=this.tweens;for(var s in i){var r=i[s];r&&(r.timeScale=e)}return this}};Object.assign(BobBase.prototype,{hasProperty(e){var i=this.gameObject;return!!i.hasOwnProperty(e)||void 0!==i[e]},getProperty(e){return this.gameObject[e]},setProperty(e,i){return this.gameObject[e]=i,this},easeProperty(e,i,s,r,n,a,o,h){void 0===h&&(h=this.gameObject);var l=this.tweens,c=l[e];c&&c.remove();var g={targets:h,duration:s,ease:r,repeat:n,yoyo:a,onComplete:function(){l[e].remove(),l[e]=null,o&&o(h,e)}};return g[e]=i,(c=this.scene.tweens.add(g)).timeScale=this.timeScale,l[e]=c,this},getTweenTask(e){return this.tweens[e]},freeTweens(){var e,i=this.tweens;for(var s in i)(e=i[s])&&e.remove(),i[s]=null;return this}},{hasMethod(e){return"function"==typeof this.gameObject[e]},call(e,...i){if(!this.hasMethod(e))return console.warn(`[GameObjectManager] Game object '${this.name}' does not have method '${e}'`),this;var s=this.gameObject;return s[e].apply(s,i),this}},{hasData(e){var i=this.gameObject;return!!i.data&&i.data.has(e)},getData(e){return this.gameObject.getData(e)},setData(e,i){return this.gameObject.setData(e,i),this}});var iE=BobBase,object_IsEmpty=function(e){for(var i in e)return!1;return!0},methods_IsSingleBob=function(e){return e&&"!"!==e.charAt(0)},GetR=function(e){return e>>16&255},GetG=function(e){return e>>8&255},GetB=function(e){return 255&e},tintrgb_AddTintRGBProperties=function(e,i){if(e.hasOwnProperty("tintR"))return e;void 0===i&&(i=16777215);var s=GetR(i),r=GetG(i),n=GetB(i);return Object.defineProperty(e,"tint",{get:function(){return i},set:function(a){a=16777215&Math.floor(a),e.setTint&&e.setTint(a),i!==a&&(s=GetR(i=a),r=GetG(i),n=GetB(i))}}),Object.defineProperty(e,"tintR",{get:function(){return s},set:function(r){s!==(r=255&Math.floor(r))&&(s=r,e.tint=(255&r)<<16|65535&i)}}),Object.defineProperty(e,"tintG",{get:function(){return r},set:function(s){r!==(s=255&Math.floor(s))&&(r=s,e.tint=(255&s)<<8|16711935&i)}}),Object.defineProperty(e,"tintB",{get:function(){return n},set:function(s){n!==(s=255&Math.floor(s))&&(n=s,e.tint=255&s|16776960&i)}}),Object.defineProperty(e,"tintGray",{get:function(){return Math.floor((s+r+n)/3)},set:function(i){(s!==(i=255&Math.floor(i))||r!==i||n!==i)&&(s=i,r=i,n=i,e.tint=(255&i)<<16|(255&i)<<8|255&i)}}),e.tint=i,e};let iR=Phaser.Events.EventEmitter;var viewportcoordinate_MonitorViewport=function(e){if(e.events)return e;var i=new iR,s=e.x;Object.defineProperty(e,"x",{get:function(){return s},set:function(r){s!==r&&(s=r,i.emit("update",e))}});var r=e.y;Object.defineProperty(e,"y",{get:function(){return r},set:function(s){r!==s&&(r=s,i.emit("update",e))}});var n=e.width;Object.defineProperty(e,"width",{get:function(){return n},set:function(s){n!==s&&(n=s,i.emit("update",e))}});var a=e.height;return Object.defineProperty(e,"height",{get:function(){return a},set:function(s){a!==s&&(a=s,i.emit("update",e))}}),e.events=i,e},iL={},viewportcoordinate_VPXYToXY=function(e,i,s,r,n,a){return void 0===a?a={}:!0===a&&(a=iL),"number"!=typeof s&&(s=0,r=0),a.x=n.x+n.width*e+s,a.y=n.y+n.height*i+r,a},viewportcoordinate_AddViewportCoordinateProperties=function(e,i,s,r,n,a,o){if(e.hasOwnProperty("vp"))return e;"function"==typeof s&&(o=s,s=void 0),"function"==typeof n&&(o=n,n=void 0),void 0===s&&(s=.5),void 0===r&&(r=.5),void 0===n&&(n=0),void 0===a&&(a=0),void 0===o&&(o=viewportcoordinate_VPXYToXY),viewportcoordinate_MonitorViewport(i);var h=i.events;e.vp=i;var Transform=function(){o(s,r,n,a,i,e)};h.on("update",Transform),e.once("destroy",function(){h.off("update",Transform),e.vp=void 0}),Object.defineProperty(e,"vpx",{get:function(){return s},set:function(e){s!==e&&(s=e,Transform())}}),Object.defineProperty(e,"vpy",{get:function(){return r},set:function(e){r!==e&&(r=e,Transform())}}),Object.defineProperty(e,"vpxOffset",{get:function(){return n},set:function(e){n!==e&&(n=e,Transform())}}),Object.defineProperty(e,"vpyOffset",{get:function(){return a},set:function(e){a!==e&&(a=e,Transform())}}),Transform()},object_HasProperty=function(e,i){if(!e)return!1;if(e.hasOwnProperty(i))return!0;for(;e;){if(Object.getOwnPropertyDescriptor(e,i))return!0;e=e.__proto__}return!1},effectproperties_GetFXFactory=function(e){return e.preFX?e.preFX:e.postFX?e.postFX:null},effectproperties_AddClearEffectCallback=function(e,i){e._effectSwitchNames||(e._effectSwitchNames=[],e.clearAllEffects=function(){for(var i=e._effectSwitchNames,s=0,r=i.length;s<r;s++)e[i[s]]=null;return e},e.on("destroy",e.clearAllEffects,e)),e._effectSwitchNames.push(i)},colormatrix_AddColorMatrixEffectPropertiesBase=function(e,i,s){if(object_HasProperty(e,i))return e;var r,n=effectproperties_GetFXFactory(e);if(!n)return e;var a=`_${i}Effect`;return Object.defineProperty(e,i,{get:function(){return r},set:function(o){r!==o&&(null===(r=o)||!1===r?e[a]&&(n.remove(e[a]),e[a]=void 0):(e[a]||(e[a]=n.addColorMatrix()),e[a][i](1===s?o:void 0)))}}),e[i]=null,effectproperties_AddClearEffectCallback(e,i),e},iB={barrel:function(e){if(object_HasProperty(e,"barrel"))return e;var i,s=effectproperties_GetFXFactory(e);return s&&(Object.defineProperty(e,"barrel",{get:function(){return i},set:function(r){i!==r&&(null===(i=r)||!1===i?e._barrelEffect&&(s.remove(e._barrelEffect),e._barrelEffect=void 0):(e._barrelEffect||(e._barrelEffect=s.addBarrel()),e._barrelEffect.amount=i))}}),e.barrel=null,effectproperties_AddClearEffectCallback(e,"barrel")),e},blackWhite:function(e){return colormatrix_AddColorMatrixEffectPropertiesBase(e,"blackWhite"),e},bloom:function(e){if(object_HasProperty(e,"bloomColor"))return e;var i=effectproperties_GetFXFactory(e);if(!i)return e;var s,r=1,n=1,a=1,o=1,h=4;return Object.defineProperty(e,"bloomColor",{get:function(){return s},set:function(l){s!==l&&(null===(s=l)||!1===s?e._bloom&&(i.remove(e._bloom),e._bloom=void 0,i.setPadding(0)):(e._bloom||(e._bloom=i.addBloom(s,r,n,a,o,h),i.setPadding(Math.max(r,n)+1)),e._bloom.color=s))}}),Object.defineProperty(e,"bloomOffsetX",{get:function(){return r},set:function(s){if(r!==s&&(r=s,e._bloom)){var a=Math.max(r,n);i.setPadding(a+1),e._bloom.offsetX=r}}}),Object.defineProperty(e,"bloomOffsetY",{get:function(){return n},set:function(s){if(n!==s&&(n=s,e._bloom)){var a=Math.max(r,n);i.setPadding(a+1),e._bloom.offsetY=n}}}),Object.defineProperty(e,"bloomBlurStrength",{get:function(){return a},set:function(i){a!==i&&(a=i,e._bloom&&(e._bloom.blurStrength=a))}}),Object.defineProperty(e,"bloomStrength",{get:function(){return o},set:function(i){o!==i&&(o=i,e._bloom&&(e._bloom.strength=o))}}),Object.defineProperty(e,"bloomSteps",{get:function(){return h},set:function(i){h!==i&&(h=i,e._bloom&&(e._bloom.steps=h))}}),e.bloomColor=null,effectproperties_AddClearEffectCallback(e,"bloomColor"),e},blur:function(e){if(object_HasProperty(e,"blurColor"))return e;var i=effectproperties_GetFXFactory(e);if(!i)return e;var s,r=0,n=1,a=1,o=1,h=4;return Object.defineProperty(e,"blurColor",{get:function(){return s},set:function(l){s!==l&&(null===(s=l)||!1===s?e._blur&&(i.remove(e._blur),e._blur=void 0,i.setPadding(0)):(e._blur||(e._blur=i.addBlur(r,n,a,o,s,h),i.setPadding(Math.max(n,a)+1)),e._blur.color=s))}}),Object.defineProperty(e,"blurQuality",{get:function(){return r},set:function(i){r!==i&&(r=i,e._blur&&(e._blur.quality=r))}}),Object.defineProperty(e,"blurX",{get:function(){return n},set:function(s){if(n!==s&&(n=s,e._blur)){var r=Math.max(n,a);i.setPadding(r+1),e._blur.x=n}}}),Object.defineProperty(e,"blurY",{get:function(){return a},set:function(s){if(a!==s&&(a=s,e._blur)){var r=Math.max(n,a);i.setPadding(r+1),e._blur.y=a}}}),Object.defineProperty(e,"blurStrength",{get:function(){return o},set:function(i){o!==i&&(o=i,e._blur&&(e._blur.strength=o))}}),Object.defineProperty(e,"blurSteps",{get:function(){return h},set:function(i){h!==i&&(h=i,e._blur&&(e._blur.steps=h))}}),e.blurColor=null,effectproperties_AddClearEffectCallback(e,"blurColor"),e},bokeh:function(e){if(object_HasProperty(e,"bokehRadius"))return e;var i=effectproperties_GetFXFactory(e);if(!i)return e;var s,r=1,n=.2;return Object.defineProperty(e,"bokehRadius",{get:function(){return s},set:function(a){s!==a&&(null===(s=a)||!1===s?e._bokeh&&(i.remove(e._bokeh),e._bokeh=void 0):(e._bokeh||(e._bokeh=i.addBokeh(s,r,n)),e._bokeh.radius=s))}}),Object.defineProperty(e,"bokehAmount",{get:function(){return r},set:function(i){r!==i&&(r=i,e._bokeh&&(e._bokeh.amount=r))}}),Object.defineProperty(e,"bokehContrast",{get:function(){return n},set:function(i){n!==i&&(n=i,e._bokeh&&(e._bokeh.contrast=n))}}),e.bokehRadius=null,effectproperties_AddClearEffectCallback(e,"bokehRadius"),e},brightness:function(e){return colormatrix_AddColorMatrixEffectPropertiesBase(e,"brightness",1),e},brown:function(e){return colormatrix_AddColorMatrixEffectPropertiesBase(e,"brown"),e},circle:function(e){if(object_HasProperty(e,"circleColor"))return e;var i=effectproperties_GetFXFactory(e);if(!i)return e;var s,r=8,n=0,a=.4,o=1,h=.005;return Object.defineProperty(e,"circleColor",{get:function(){return s},set:function(l){s!==l&&(null===(s=l)||!1===s?e._circle&&(i.remove(e._circle),e._circle=void 0):(e._circle||(e._circle=i.addCircle(r,s,n,o,h),e.circleBackgroundAlpha=a),e._circle.color=s))}}),Object.defineProperty(e,"circleThickness",{get:function(){return r},set:function(i){r!==i&&(r=i,e._circle&&(e._circle.thickness=r))}}),Object.defineProperty(e,"circleBackgroundColor",{get:function(){return n},set:function(i){n!==i&&(n=i,e._circle&&(e._circle.backgroundColor=n))}}),Object.defineProperty(e,"circleBackgroundAlpha",{get:function(){return a},set:function(i){a!==i&&(a=i,e._circle&&(e._circle.glcolor2[3]=a))}}),Object.defineProperty(e,"circleScale",{get:function(){return o},set:function(i){o!==i&&(o=i,e._circle&&(e._circle.scale=o))}}),Object.defineProperty(e,"circleFeather",{get:function(){return h},set:function(i){h!==i&&(h=i,e._circle&&(e._circle.feather=h))}}),e.circleColor=null,effectproperties_AddClearEffectCallback(e,"circleColor"),e},contrast:function(e){return colormatrix_AddColorMatrixEffectPropertiesBase(e,"contrast",1),e},desaturate:function(e){return colormatrix_AddColorMatrixEffectPropertiesBase(e,"desaturate",1),e},desaturateLuminance:function(e){return colormatrix_AddColorMatrixEffectPropertiesBase(e,"desaturateLuminance"),e},displacement:function(e){if(object_HasProperty(e,"displacementKey"))return e;var i=effectproperties_GetFXFactory(e);if(!i)return e;var s,r=.005,n=.005;return Object.defineProperty(e,"displacementKey",{get:function(){return s},set:function(a){s!==a&&(null===(s=a)||!1===s?e._displacement&&(i.remove(e._displacement),e._displacement=void 0):(e._displacement||(e._displacement=i.addDisplacement(s,r,n)),e._displacement.setTexture(s)))}}),Object.defineProperty(e,"displacementX",{get:function(){return r},set:function(i){r!==i&&(r=i,e._displacement&&(e._displacement.x=r))}}),Object.defineProperty(e,"displacementY",{get:function(){return n},set:function(i){n!==i&&(n=i,e._displacement&&(e._displacement.y=n))}}),e.displacementKey=null,effectproperties_AddClearEffectCallback(e,"displacementKey"),e},glow:function(e){if(object_HasProperty(e,"glowColor"))return e;var i=effectproperties_GetFXFactory(e);if(!i)return e;var s,r=4,n=0;return Object.defineProperty(e,"glowColor",{get:function(){return s},set:function(a){s!==a&&(null===(s=a)||!1===s?e._glow&&(i.remove(e._glow),e._glow=void 0,i.setPadding(0)):(e._glow||(e._glow=i.addGlow(s,r,n),i.setPadding(r+1)),e._glow.color=s))}}),Object.defineProperty(e,"glowOuterStrength",{get:function(){return r},set:function(s){r!==s&&(r=s,e._glow&&(i.setPadding(r+1),e._glow.outerStrength=r))}}),Object.defineProperty(e,"glowInnerStrength",{get:function(){return n},set:function(i){n!==i&&(n=i,e._glow&&(e._glow.innerStrength=n))}}),e.glowColor=null,effectproperties_AddClearEffectCallback(e,"glowColor"),e},gradient:function(e){if(object_HasProperty(e,"gradientColor"))return e;var i=effectproperties_GetFXFactory(e);if(!i)return e;var s,r,n=.5,a=0,o=0,h=0,l=1,c=0;return Object.defineProperty(e,"gradientColor",{get:function(){return[s,r]},set:function(g){var m,x;null===g||!1===g?(m=null,x=null):(m=g[0],x=g[1]),(s!==m||r!==x)&&(s=m,r=x,null===s||!1===s?e._gradient&&(i.remove(e._gradient),e._gradient=void 0):(e._gradient||(e._gradient=i.addGradient(s,r,n,a,o,h,l,c)),e._gradient.color1=s,e._gradient.color2=r))}}),Object.defineProperty(e,"gradientColor1",{get:function(){return s},set:function(i){if(null===i||!1===i){e.gradientColor=i;return}s!==i&&(s=i,e._gradient&&(e._gradient.color1=s))}}),Object.defineProperty(e,"gradientColor2",{get:function(){return r},set:function(i){if(null===i||!1===i){e.gradientColor=i;return}r!==i&&(r=i,e._gradient&&(e._gradient.color2=r))}}),Object.defineProperty(e,"gradientAlpha",{get:function(){return n},set:function(i){n!==i&&(n=i,e._gradient&&(e._gradient.alpha=n))}}),Object.defineProperty(e,"gradientFromX",{get:function(){return a},set:function(i){a!==i&&(a=i,e._gradient&&(e._gradient.fromX=a))}}),Object.defineProperty(e,"gradientFromY",{get:function(){return o},set:function(i){o!==i&&(o=i,e._gradient&&(e._gradient.fromY=o))}}),Object.defineProperty(e,"gradientToX",{get:function(){return h},set:function(i){h!==i&&(h=i,e._gradient&&(e._gradient.toX=h))}}),Object.defineProperty(e,"gradientToY",{get:function(){return l},set:function(i){l!==i&&(l=i,e._gradient&&(e._gradient.toY=l))}}),Object.defineProperty(e,"gradientSize",{get:function(){return c},set:function(i){c!==i&&(c=i,e._gradient&&(e._gradient.size=c))}}),e.gradientColor=null,effectproperties_AddClearEffectCallback(e,"gradientColor"),e},grayscale:function(e){return colormatrix_AddColorMatrixEffectPropertiesBase(e,"grayscale",1),e},hue:function(e){return colormatrix_AddColorMatrixEffectPropertiesBase(e,"hue",1),e},kodachrome:function(e){return colormatrix_AddColorMatrixEffectPropertiesBase(e,"kodachrome"),e},lsd:function(e){return colormatrix_AddColorMatrixEffectPropertiesBase(e,"lsd"),e},negative:function(e){return colormatrix_AddColorMatrixEffectPropertiesBase(e,"negative"),e},pixelate:function(e){if(object_HasProperty(e,"pixelate"))return e;var i,s=effectproperties_GetFXFactory(e);return s&&(Object.defineProperty(e,"pixelate",{get:function(){return i},set:function(r){i!==r&&(null===(i=r)||!1===i?e._pixelateEffect&&(s.remove(e._pixelateEffect),e._pixelateEffect=void 0):(e._pixelateEffect||(e._pixelateEffect=s.addPixelate()),e._pixelateEffect.amount=i))}}),e.pixelate=null,effectproperties_AddClearEffectCallback(e,"pixelate")),e},polaroid:function(e){return colormatrix_AddColorMatrixEffectPropertiesBase(e,"polaroid"),e},reveal:function(e){if(object_HasProperty(e,"revealLeft"))return e;var i=effectproperties_GetFXFactory(e);if(!i)return e;var s,r,n,a,o=.1,ClearRevealFlags=function(){s=null,r=null,n=null,a=null},RemoveEffect=function(e){e._revealEffect&&(i.remove(e._revealEffect),e._revealEffect=void 0)};return Object.defineProperty(e,"revealLeft",{get:function(){return s},set:function(r){s!==r&&(ClearRevealFlags(),null===(s=r)||!1===s?RemoveEffect(e):(e._revealEffect||(e._revealEffect=i.addReveal(o,0,0)),e._revealEffect.direction=1,e._revealEffect.axis=0,e._revealEffect.progress=s))}}),Object.defineProperty(e,"revealRight",{get:function(){return r},set:function(s){r!==s&&(ClearRevealFlags(),null===(r=s)||!1===r?RemoveEffect(e):(e._revealEffect||(e._revealEffect=i.addReveal(o,0,0)),e._revealEffect.direction=0,e._revealEffect.axis=0,e._revealEffect.progress=r))}}),Object.defineProperty(e,"revealUp",{get:function(){return n},set:function(s){n!==s&&(ClearRevealFlags(),null===(n=s)||!1===n?RemoveEffect(e):(e._revealEffect||(e._revealEffect=i.addReveal(o,0,0)),e._revealEffect.direction=1,e._revealEffect.axis=1,e._revealEffect.progress=n))}}),Object.defineProperty(e,"revealDown",{get:function(){return a},set:function(s){a!==s&&(ClearRevealFlags(),null===(a=s)||!1===a?RemoveEffect(e):(e._revealEffect||(e._revealEffect=i.addReveal(o,0,0)),e._revealEffect.direction=0,e._revealEffect.axis=1,e._revealEffect.progress=a))}}),Object.defineProperty(e,"revealWidth",{get:function(){return o},set:function(i){o!==i&&(o=i,e._revealEffect&&(e._revealEffect.wipeWidth=o))}}),e.revealLeft=null,effectproperties_AddClearEffectCallback(e,"revealLeft"),effectproperties_AddClearEffectCallback(e,"revealRight"),effectproperties_AddClearEffectCallback(e,"revealUp"),effectproperties_AddClearEffectCallback(e,"revealDown"),e},saturate:function(e){return colormatrix_AddColorMatrixEffectPropertiesBase(e,"saturate",1),e},sepia:function(e){return colormatrix_AddColorMatrixEffectPropertiesBase(e,"sepia"),e},shadow:function(e){if(object_HasProperty(e,"shadowColor"))return e;var i=effectproperties_GetFXFactory(e);if(!i)return e;var s,r=0,n=0,a=.1,o=1,h=6,l=1;return Object.defineProperty(e,"shadowColor",{get:function(){return s},set:function(c){s!==c&&(null===(s=c)||!1===s?e._shadow&&(i.remove(e._shadow),e._shadow=void 0):(e._shadow||(e._shadow=i.addShadow(r,n,a,o,s,h,l)),e._shadow.color=s))}}),Object.defineProperty(e,"shadowX",{get:function(){return r},set:function(i){r!==i&&(r=i,e._shadow&&(e._shadow.x=r))}}),Object.defineProperty(e,"shadowY",{get:function(){return n},set:function(i){n!==i&&(n=i,e._shadow&&(e._shadow.y=n))}}),Object.defineProperty(e,"decay",{get:function(){return a},set:function(i){a!==i&&(a=i,e._shadow&&(e._shadow.decay=a))}}),Object.defineProperty(e,"shadowPower",{get:function(){return o},set:function(i){o!==i&&(o=i,e._shadow&&(e._shadow.power=o))}}),Object.defineProperty(e,"shadowSamples",{get:function(){return h},set:function(i){h!==i&&(h=i,e._shadow&&(e._shadow.samples=h))}}),Object.defineProperty(e,"shadowIntensity",{get:function(){return l},set:function(i){l!==i&&(l=i,e._shadow&&(e._shadow.intensity=l))}}),e.shadowColor=null,effectproperties_AddClearEffectCallback(e,"shadowColor"),e},shiftToBGR:function(e){return colormatrix_AddColorMatrixEffectPropertiesBase(e,"shiftToBGR"),e},shine:function(e){if(object_HasProperty(e,"shineSpeed"))return e;var i=effectproperties_GetFXFactory(e);if(!i)return e;var s,r=.5,n=3;return Object.defineProperty(e,"shineSpeed",{get:function(){return s},set:function(a){s!==a&&(null===(s=a)||!1===s?e._shine&&(i.remove(e._shine),e._shine=void 0):(e._shine||(e._shine=i.addShine(s,r,n)),e._shine.speed=s))}}),Object.defineProperty(e,"shineLineWidth",{get:function(){return r},set:function(i){r!==i&&(r=i,e._shine&&(e._shine.lineWidth=r))}}),Object.defineProperty(e,"shineGradient",{get:function(){return n},set:function(i){n!==i&&(n=i,e._shine&&(e._shine.gradient=n))}}),e.shineSpeed=null,effectproperties_AddClearEffectCallback(e,"shineSpeed"),e},technicolor:function(e){return colormatrix_AddColorMatrixEffectPropertiesBase(e,"technicolor"),e},tiltShift:function(e){if(object_HasProperty(e,"tiltShiftRadius"))return e;var i=effectproperties_GetFXFactory(e);if(!i)return e;var s,r=1,n=.2,a=1,o=1,h=1;return Object.defineProperty(e,"tiltShiftRadius",{get:function(){return s},set:function(l){s!==l&&(null===(s=l)||!1===s?e._tiltShift&&(i.remove(e._tiltShift),e._tiltShift=void 0):(e._tiltShift||(e._tiltShift=i.addTiltShift(s,r,n,a,o,h)),e._tiltShift.radius=s))}}),Object.defineProperty(e,"tiltShiftAmount",{get:function(){return r},set:function(i){r!==i&&(r=i,e._tiltShift&&(e._tiltShift.amount=r))}}),Object.defineProperty(e,"tiltShiftContrast",{get:function(){return n},set:function(i){n!==i&&(n=i,e._tiltShift&&(e._tiltShift.contrast=n))}}),Object.defineProperty(e,"tiltShiftBlurX",{get:function(){return a},set:function(i){a!==i&&(a=i,e._tiltShift&&(e._tiltShift.blurX=a))}}),Object.defineProperty(e,"tiltShiftBlurY",{get:function(){return o},set:function(i){o!==i&&(o=i,e._tiltShift&&(e._tiltShift.blurY=o))}}),Object.defineProperty(e,"tiltShiftStrength",{get:function(){return h},set:function(i){h!==i&&(h=i,e._tiltShift&&(e._tiltShift.strength=h))}}),e.tiltShiftRadius=null,effectproperties_AddClearEffectCallback(e,"tiltShiftRadius"),e},vignette:function(e){if(object_HasProperty(e,"vignetteColor"))return e;var i=effectproperties_GetFXFactory(e);if(!i)return e;var s,r=.5,n=.5,a=.5;return Object.defineProperty(e,"vignetteRadius",{get:function(){return s},set:function(o){s!==o&&(null===(s=o)||!1===s?e._vignette&&(i.remove(e._vignette),e._vignette=void 0):(e._vignette||(e._vignette=i.addVignette(r,n,s,a)),e._vignette.radius=s))}}),Object.defineProperty(e,"vignetteX",{get:function(){return r},set:function(i){r!==i&&(r=i,e._vignette&&(e._vignette.x=r))}}),Object.defineProperty(e,"vignetteY",{get:function(){return n},set:function(i){n!==i&&(n=i,e._vignette&&(e._vignette.y=n))}}),Object.defineProperty(e,"vignetteStrength",{get:function(){return a},set:function(i){a!==i&&(a=i,e._vignette&&(e._vignette.strength=a))}}),e.vignetteRadius=null,effectproperties_AddClearEffectCallback(e,"vignetteRadius"),e},vintagePinhole:function(e){return colormatrix_AddColorMatrixEffectPropertiesBase(e,"vintagePinhole"),e},wipe:function(e){if(object_HasProperty(e,"wipeLeft"))return e;var i=effectproperties_GetFXFactory(e);if(!i)return e;var s,r,n,a,o=.1,ClearWipeFlags=function(){s=null,r=null,n=null,a=null},RemoveEffect=function(e){e._wipeEffect&&(i.remove(e._wipeEffect),e._wipeEffect=void 0)};return Object.defineProperty(e,"wipeLeft",{get:function(){return s},set:function(r){s!==r&&(ClearWipeFlags(),null===(s=r)||!1===s?RemoveEffect(e):(e._wipeEffect||(e._wipeEffect=i.addWipe(o,0,0)),e._wipeEffect.direction=1,e._wipeEffect.axis=0,e._wipeEffect.progress=s))}}),Object.defineProperty(e,"wipeRight",{get:function(){return r},set:function(s){r!==s&&(ClearWipeFlags(),null===(r=s)||!1===r?RemoveEffect(e):(e._wipeEffect||(e._wipeEffect=i.addWipe(o,0,0)),e._wipeEffect.direction=0,e._wipeEffect.axis=0,e._wipeEffect.progress=r))}}),Object.defineProperty(e,"wipeUp",{get:function(){return n},set:function(s){n!==s&&(ClearWipeFlags(),null===(n=s)||!1===n?RemoveEffect(e):(e._wipeEffect||(e._wipeEffect=i.addWipe(o,0,0)),e._wipeEffect.direction=1,e._wipeEffect.axis=1,e._wipeEffect.progress=n))}}),Object.defineProperty(e,"wipeDown",{get:function(){return a},set:function(s){a!==s&&(ClearWipeFlags(),null===(a=s)||!1===a?RemoveEffect(e):(e._wipeEffect||(e._wipeEffect=i.addWipe(o,0,0)),e._wipeEffect.direction=0,e._wipeEffect.axis=1,e._wipeEffect.progress=a))}}),Object.defineProperty(e,"wipeWidth",{get:function(){return o},set:function(i){o!==i&&(o=i,e._wipeEffect&&(e._wipeEffect.wipeWidth=o))}}),e.wipeLeft=null,effectproperties_AddClearEffectCallback(e,"wipeLeft"),effectproperties_AddClearEffectCallback(e,"wipeRight"),effectproperties_AddClearEffectCallback(e,"wipeUp"),effectproperties_AddClearEffectCallback(e,"wipeDown"),e}},effectproperties_AddEffectProperties=function(e,i){if(void 0===i)i=!0;else if("string"==typeof i)i={config:!0};else if(Array.isArray(i))for(var s=i,i={},r=0,n=s.length;r<n;r++)i[s[r]]=!0;if(!0===i)for(var a in iB)iB[a](e);else for(var a in i)i[a]&&iB[a]&&iB[a](e);return e};let iI=Phaser.Utils.Array.Remove,iG={tint:0,alpha:1,revealUp:2,revealDown:3,revealLeft:4,revealRight:5};var GetDisplayWidth=function(e){return void 0!==e.displayWidth?e.displayWidth:e.width},GetDisplayHeight=function(e){return void 0!==e.displayHeight?e.displayHeight:e.height};let iD=Phaser.Geom.Rectangle,ij=Phaser.Math.Vector2,iA=Phaser.Math.RotateAround;var GetBounds=function(e,i){if(void 0===i?i=new iD:!0===i&&(void 0===iF&&(iF=new iD),i=iF),e.getBounds)return e.getBounds(i);if(e.parentContainer){var s,r,n,a,o,h,l,c,g=e.parentContainer.getBoundsTransformMatrix();GetTopLeft(e,i),g.transformPoint(i.x,i.y,i),s=i.x,r=i.y,GetTopRight(e,i),g.transformPoint(i.x,i.y,i),n=i.x,a=i.y,GetBottomLeft(e,i),g.transformPoint(i.x,i.y,i),o=i.x,h=i.y,GetBottomRight(e,i),g.transformPoint(i.x,i.y,i),l=i.x,c=i.y}else GetTopLeft(e,i),s=i.x,r=i.y,GetTopRight(e,i),n=i.x,a=i.y,GetBottomLeft(e,i),o=i.x,h=i.y,GetBottomRight(e,i),l=i.x,c=i.y;return i.x=Math.min(s,n,o,l),i.y=Math.min(r,a,h,c),i.width=Math.max(s,n,o,l)-i.x,i.height=Math.max(r,a,h,c)-i.y,i},iF=void 0,GetTopLeft=function(e,i,s){return(void 0===i?i=new ij:!0===i&&(void 0===iz&&(iz=new ij),i=iz),e.getTopLeft)?e.getTopLeft(i):(i.x=e.x-GetDisplayWidth(e)*e.originX,i.y=e.y-GetDisplayHeight(e)*e.originY,PrepareBoundsOutput(e,i,s))},GetTopRight=function(e,i,s){return(void 0===i?i=new ij:!0===i&&(void 0===iz&&(iz=new ij),i=iz),e.getTopRight)?e.getTopRight(i):(i.x=e.x-GetDisplayWidth(e)*e.originX+GetDisplayWidth(e),i.y=e.y-GetDisplayHeight(e)*e.originY,PrepareBoundsOutput(e,i,s))},GetBottomLeft=function(e,i,s){return(void 0===i?i=new ij:!0===i&&(void 0===iz&&(iz=new ij),i=iz),e.getBottomLeft)?e.getBottomLeft(i):(i.x=e.x-GetDisplayWidth(e)*e.originX,i.y=e.y-GetDisplayHeight(e)*e.originY+GetDisplayHeight(e),PrepareBoundsOutput(e,i,s))},GetBottomRight=function(e,i,s){return(void 0===i?i=new ij:!0===i&&(void 0===iz&&(iz=new ij),i=iz),e.getBottomRight)?e.getBottomRight(i):(i.x=e.x-GetDisplayWidth(e)*e.originX+GetDisplayWidth(e),i.y=e.y-GetDisplayHeight(e)*e.originY+GetDisplayHeight(e),PrepareBoundsOutput(e,i,s))},iz=void 0,PrepareBoundsOutput=function(e,i,s){return void 0===s&&(s=!1),0!==e.rotation&&iA(i,e.x,e.y,e.rotation),s&&e.parentContainer&&e.parentContainer.getBoundsTransformMatrix().transformPoint(i.x,i.y,i),i};let iW=Phaser.Utils.Objects.GetValue;var Draw=function(e,i,s,r,n,a,o){if(e.getBounds||void 0!==e.width&&void 0!==e.height){void 0===s&&(s=16777215),void 0===r&&(r=1),void 0===n&&(n=null),void 0===a&&(a=1),void 0===o&&(o=0);var h=GetTopLeft(e,iV[0]);h.x-=o,h.y-=o;var l=GetTopRight(e,iV[1]);l.x+=o,l.y-=o;var c=GetBottomRight(e,iV[2]);c.x+=o,c.y+=o;var g=GetBottomLeft(e,iV[3]);g.x-=o,g.y+=o,null!==n&&i.fillStyle(n,a).fillPoints(iV,!0,!0),null!==s&&i.lineStyle(r,s).strokePoints(iV,!0,!0)}},iV=[{x:0,y:0},{x:0,y:0},{x:0,y:0},{x:0,y:0}],bounds_DrawBounds=function(e,i,s){var r,n,a,o,h;if("number"==typeof s?r=s:(r=iW(s,"color"),n=iW(s,"lineWidth"),a=iW(s,"fillColor"),o=iW(s,"fillAlpha",1),h=iW(s,"padding",0)),Array.isArray(e))for(var l=0,c=e.length;l<c;l++)Draw(e[l],i,r,n,a,o,h);else Draw(e,i,r,n,a,o,h)},iY={drawGameObjectsBounds:function(e,i){return this.forEachGO(function(s){s.drawBounds?s.drawBounds(e,i):bounds_DrawBounds(s,e,i)}),this}};Object.assign(iY,{has(e){return this.bobs.hasOwnProperty(e)},exists(e){return this.bobs.hasOwnProperty(e)},get(e,i){if(methods_IsSingleBob(e))return this.bobs[e];for(var s in void 0===i&&(i=[]),e&&(e=e.substring(1)),this.bobs)e&&s===e||i.push(this.bobs[s]);return i},getFitst(e){for(var i in e&&"!"===e.charAt(0)&&(e=e.substring(1)),this.bobs)if(!e||e!==i)return this.bobs[i];return null},getGO(e,i){var s=this.get(e);return s?Array.isArray(s)?(void 0===i&&(i=[]),s.forEach(function(e){i.push(e.gameObject)}),i):s.gameObject:null},forEachGO(e,i){for(var s in this.bobs){var r=this.bobs[s].gameObject;if(i?e.call(i,r,s,this):e(r,s,this))break}return this},getAllGO(e){for(var i in void 0===e&&(e=[]),this.bobs){var s=this.bobs[i].gameObject;e.push(s)}return e}},{addGO(e,i){this.remove(e,!0),this.useTintFadeEffect(i)&&tintrgb_AddTintRGBProperties(i),this.viewportCoordinateEnable&&viewportcoordinate_AddViewportCoordinateProperties(i,this.viewport),this.effectPropertiesConfig&&effectproperties_AddEffectProperties(i,this.effectPropertiesConfig),i.setName(e).once("destroy",function(){iI(this.removedGOs,i),this.isEmpty&&this.emit("empty")},this);var s=new this.BobClass(this,i,e);return this.bobs[e]=s,this},add(e,...i){var s=this.createGameObjectCallback,r=this.createGameObjectScope,n=s.call(r,this.scene,...i);this.addGO(e,n),null!=this.gameObjectDepth&&n.setDepth(this.gameObjectDepth);var a=this.get(e);return this.fadeBob(a,0,1),this}},{remove(e,i){var s=this.get(e);if(!s)return this;Array.isArray(s)||(s=[s]);var r=this;return s.forEach(function(e){delete r.bobs[e.name];var s=e.gameObject;r.removedGOs.push(s),s.setName(),i?e.destroy():r.fadeBob(e,void 0,0,function(){e.destroy()})}),this},removeAll(){var e=this.bobs;for(var i in e)this.remove(i);return this},clear(e){void 0===e&&(e=!0);var i=this.bobs;for(var s in i)e&&i[s].destroy(),delete i[s];return this.removedGOs.length=0,this}},{hasProperty(e,i){var s=methods_IsSingleBob(e)?this.get(e):this.getFitst(e);return!!s&&s.hasProperty(i)},getProperty(e,i){var s=methods_IsSingleBob(e)?this.get(e):this.getFitst(e);if(s)return s.getProperty(i)},isNumberProperty(e,i){return"number"==typeof this.getProperty(e,i)},setProperty(e,i,s){var r=this.get(e);return r&&(Array.isArray(r)||(r=[r]),this.symbols&&"string"==typeof s&&this.isNumberProperty(e,i)&&(s in this.symbols?s=this.symbols[s]:console.warn(`Can't find symbol ${s}`)),r.forEach(function(e){e.setProperty(i,s)})),this},easeProperty(e,i,s,r,n,a,o,h){var l=this.get(e);return l&&(Array.isArray(l)||(l=[l]),void 0===r&&(r=1e3),void 0===n&&(n="Linear"),void 0===a&&(a=0),void 0===o&&(o=!1),this.symbols&&"string"==typeof s&&this.isNumberProperty(e,i)&&(s in this.symbols?s=this.symbols[s]:console.warn(`Can't find symbol ${s}`)),l.forEach(function(e){e.easeProperty(i,s,r,n,a,o,h)})),this},hasTweenTask(e,i){var s=methods_IsSingleBob(e)?this.get(e):this.getFitst(e);return!!s&&s.tweens.hasOwnProperty(i)},getTweenTask(e,i){var s=methods_IsSingleBob(e)?this.get(e):this.getFitst(e);return s&&s.tweens[i]||null}},{hasMethod(e,i){var s=methods_IsSingleBob(e)?this.get(e):this.getFitst(e);return!!s&&s.hasMethod(i)},call(e,i,...s){var r=this.get(e);return r&&(Array.isArray(r)||(r=[r]),r.forEach(function(e){e.call(i,...s)})),this}},{hasData(e,i){var s=methods_IsSingleBob(e)?this.get(e):this.getFitst(e);return!!s&&s.hasData(i)},getData(e,i){if(this.has(e))return this.get(e).getData(i)},setData(e,i,s){var r=this.get(e);return r&&(Array.isArray(r)||(r=[r]),r.forEach(function(e){e.setData(i,s)})),this}},{setGOFadeMode(e){return"string"==typeof e&&(e=iG[e]),this.fadeMode=e,this},setGOFadeTime(e){return this.fadeTime=e,this},useTintFadeEffect(e){return(void 0===this.fadeMode||0===this.fadeMode)&&this.fadeTime>0&&void 0!==e.setTint},useAlphaFadeEffect(e){return(void 0===this.fadeMode||1===this.fadeMode)&&this.fadeTime>0&&void 0!==e.setAlpha},useRevealEffect(e){return this.fadeMode>=2&&this.fadeMode<=5&&this.fadeTime>0&&(e.preFX||e.postFX)},fadeBob(e,i,s,r){var n,a=e.gameObject;if(this.useTintFadeEffect(a))void 0!==i&&e.setProperty("tintGray",255*i),e.easeProperty("tintGray",Math.floor(255*s),this.fadeTime,"Linear",0,!1,r);else if(this.useAlphaFadeEffect(a))void 0!==i&&e.setProperty("alpha",i),e.easeProperty("alpha",s,this.fadeTime,"Linear",0,!1,r);else if(this.useRevealEffect(a)){switch(effectproperties_AddEffectProperties(a,"reveal"),this.fadeMode){case 2:n="revealUp";break;case 3:n="revealDown";break;case 4:n="revealLeft";break;case 5:n="revealRight"}void 0===i&&(i=0),a[n]=i,e.easeProperty(n,s,this.fadeTime,"Linear",0,!1,r),e.getTweenTask(n).once("complete",function(){a[n]=null})}else r&&r(a);return this}});let iX=Phaser.Cameras.Scene2D.BaseCamera,iH=Phaser.Geom.Rectangle;var iU=new iH,system_GetViewport=function(e,i,s){return i instanceof iX||(s=i,i=void 0),(void 0===s?s=new iH:!0===s&&(s=iU),i)?e.scale.getViewPort(i,s):e.scale.getViewPort(s)};let iN=Phaser.Utils.Objects.GetValue;let GOManager=class GOManager{constructor(e,i){this.scene=e,this.BobClass=iN(i,"BobClass",iE),this.setCreateGameObjectCallback(iN(i,"createGameObject"),iN(i,"createGameObjectScope")),this.setEventEmitter(iN(i,"eventEmitter",void 0)),this.setGameObjectDepth(iN(i,"depth",void 0));var s=iN(i,"fade",500);"number"==typeof s?(this.setGOFadeMode(),this.setGOFadeTime(s)):(this.setGOFadeMode(iN(s,"mode")),this.setGOFadeTime(iN(s,"time",500)));var r=iN(i,"viewportCoordinate",!1);!1!==r?(this.setViewportCoordinateEnable(iN(i,"enable",!0)),this.setViewport(iN(r,"viewport"))):this.setViewportCoordinateEnable(!1);var n=iN(i,"effectProperties",!1);this.setEffectPropertiesConfig(n),this.setSymbols(iN(i,"symbols")),this.bobs={},this.removedGOs=[],this._timeScale=1,this.name=iN(i,"name")}destroy(e){this.clear(!e),this.createGameObjectCallback=void 0,this.viewport=void 0,this.scene=void 0}set timeScale(e){if(this._timeScale!==e){this._timeScale=e;var i=this.bobs;for(var s in i)i[s].setTimeScale(e)}}get timeScale(){return this._timeScale}setTimeScale(e){return this.timeScale=e,this}setCreateGameObjectCallback(e,i){return this.createGameObjectCallback=e,this.createGameObjectScope=i,this}setGameObjectDepth(e){return this.gameObjectDepth=e,this}setViewportCoordinateEnable(e){return void 0===e&&(e=!0),this.viewportCoordinateEnable=e,this}setEffectPropertiesConfig(e){return void 0===e&&(e=!0),this.effectPropertiesConfig=e,this}setViewport(e){return void 0===e&&(e=system_GetViewport(this.scene,this.scene.cameras.main)),this.viewport=e,this}setSymbols(e){return this.symbols=e,this}get isEmpty(){return object_IsEmpty(this.bobs)&&0===this.removedGOs.length}};Object.assign(GOManager.prototype,iM.Z,iY);var i$=GOManager,system_SortGameObjectsByDepth=function(e,i){if(e.length<=1)return e;void 0===i&&(i=!1);for(var s,r=0,n=e.length;r<n;r++){var a=e[r];if(a.displayList?s=a.displayList:a.parentContainer&&(s=a.parentContainer.list),s)break}return s||(s=a.scene.sys.displayList),s.depthSort&&(s.depthSort(),s=s.list),i?e.sort(function(e,i){return s.indexOf(i)-s.indexOf(e)}):e.sort(function(e,i){return s.indexOf(e)-s.indexOf(i)}),e};let iZ=Phaser.Utils.Array;var iK={bringMeToTop(){var e;return this.parentContainer?e=this.parentContainer.list:this.displayList&&(e=this.displayList.list),e&&iZ.BringToTop(e,this),this},sendMeToBack(){var e;return this.parentContainer?e=this.parentContainer.list:this.displayList&&(e=this.displayList.list),e&&iZ.SendToBack(e,this),this},moveMyDepthBelow(e){var i;return this.parentContainer?i=this.parentContainer.list:this.displayList&&(i=this.displayList.list),i&&iZ.MoveBelow(i,this,e),this},moveMyDepthAbove(e){var i;return this.parentContainer?i=this.parentContainer.list:this.displayList&&(i=this.displayList.list),i&&iZ.MoveAbove(i,this,e),this}},iJ={};Object.assign(iJ,{getLayer(e){return this.getGO(e)},getLayers(e){return void 0===e&&(e=[]),this.forEachGO(function(i){e.push(i)}),system_SortGameObjectsByDepth(e,!1),e},addToLayer(e,i){var s=this.getGO(e);if(!s){console.warn(`[LayerManager] Can't get layer "${e}"`);return}return i.isRexContainerLite?i.addToLayer(s):s.add(i),this},removeFromLayer(e,i,s){var r=this.getGO(e);if(!r){console.warn(`[LayerManager] Can't get layer "${e}"`);return}return void 0===s&&(s=!0),i.isRexContainerLite?i.removeFromLayer(r,s):(r.remove(i),s&&i.addToDisplayList()),this},clearLayer(e,i){void 0===i&&(i=!0);var s=this.getGO(e);if(!s){console.warn(`Can't get layer "${e}"`);return}if(i)for(var r=s.getAll(),n=0,a=r.length;n<a;n++)r.destroy();else s.removeAll();return this}},{bringLayerToTop(e){var i=this.getLayer(e);return i&&iK.bringMeToTop.call(i),this},sendLayerToBack(e){var i=this.getLayer(e);return i&&iK.sendMeToBack.call(i),this},moveLayerBelow(e,i){if(e===i)return this;var s=this.getLayer(e),r=this.getLayer(i);return s&&r&&iK.moveMyDepthBelow.call(s,r),this},moveLayerAbove(e,i){if(e===i)return this;var s=this.getLayer(e),r=this.getLayer(i);return s&&r&&iK.moveMyDepthAbove.call(s,r),this}});let iq=Phaser.Utils.Objects.GetValue;let LayerManager_LayerManager=class LayerManager_LayerManager extends i${constructor(e,i){void 0===i?i={}:Array.isArray(i)&&(i={layers:i}),i.hasOwnProperty("fade")||(i.fade=0),i.viewportCoordinate=!1,super(e,i);var s=iq(i,"rootLayer");this.setRootLayer(s);var r=iq(i,"layers");if(r)for(var n=0,a=r.length;n<a;n++)this.add(r[n])}setCreateGameObjectCallback(e,i){return e||(e=CreateLayer),super.setCreateGameObjectCallback(e,i),this}setRootLayer(e){if(e===this.rootLayer)return this;var i=this.getAllGO();return e?e.add(i):this.scene.displayList.add(i),this.rootLayer=e,this}addGO(e,i){return super.addGO(e,i),i.name=e,this.rootLayer&&this.rootLayer.add(i),this}};var CreateLayer=function(e,i){var s=e.add.layer();return void 0!==i&&s.setDepth(i),s};Object.assign(LayerManager_LayerManager.prototype,iJ);var system_GetSceneObject=function(e){return null==e||"object"!=typeof e?null:system_IsSceneObject(e)?e:e.scene&&system_IsSceneObject(e.scene)?e.scene:e.parent&&e.parent.scene&&system_IsSceneObject(e.parent.scene)?e.parent.scene:null};let iQ=Phaser.Utils.Objects.GetValue;let ComponentBase=class ComponentBase{constructor(e,i){this.setParent(e),this.isShutdown=!1,this.setEventEmitter(iQ(i,"eventEmitter",!0)),this.parent&&(this.parent===this.scene?this.scene.sys.events.once("shutdown",this.onEnvDestroy,this):this.parent===this.game?this.game.events.once("shutdown",this.onEnvDestroy,this):this.parent.once&&this.parent.once("destroy",this.onParentDestroy,this))}shutdown(e){this.isShutdown||(this.parent&&(this.parent===this.scene?this.scene.sys.events.off("shutdown",this.onEnvDestroy,this):this.parent===this.game?this.game.events.off("shutdown",this.onEnvDestroy,this):this.parent.once&&this.parent.off("destroy",this.onParentDestroy,this)),this.destroyEventEmitter(),this.parent=void 0,this.scene=void 0,this.game=void 0,this.isShutdown=!0)}destroy(e){this.shutdown(e)}onEnvDestroy(){this.destroy(!0)}onParentDestroy(e,i){this.destroy(i)}setParent(e){return this.parent=e,this.scene=system_GetSceneObject(e),this.game=system_GetGame(e),this}};Object.assign(ComponentBase.prototype,iM.Z);var i0=ComponentBase;let i1=Phaser.Utils.Objects.GetValue,i2={no:0,lazy:1,always:2};var i5=class extends i0{constructor(e,i){super(e,i),this._isRunning=!1,this.isPaused=!1,this.tickingState=!1,this.setTickingMode(i1(i,"tickingMode",1))}boot(){2!==this.tickingMode||this.tickingState||this.startTicking()}shutdown(e){this.isShutdown||(this.stop(),this.tickingState&&this.stopTicking(),super.shutdown(e))}setTickingMode(e){"string"==typeof e&&(e=i2[e]),this.tickingMode=e}startTicking(){this.tickingState=!0}stopTicking(){this.tickingState=!1}get isRunning(){return this._isRunning}set isRunning(e){this._isRunning!==e&&(this._isRunning=e,1===this.tickingMode&&e!=this.tickingState&&(e?this.startTicking():this.stopTicking()))}start(){return this.isPaused=!1,this.isRunning=!0,this}pause(){return this.isRunning&&(this.isPaused=!0,this.isRunning=!1),this}resume(){return this.isPaused&&(this.isRunning=!0),this}stop(){return this.isPaused=!1,this.isRunning=!1,this}complete(){this.isPaused=!1,this.isRunning=!1,this.emit("complete",this.parent,this)}};let i3=Phaser.Utils.Objects.GetValue;var i7=class extends i5{constructor(e,i){super(e,i);var s,r=this.scene?"update":"step";this.tickEventName=i3(i,"tickEventName",r),this.isSceneTicker=!("step"===(s=this.tickEventName)||"poststep"===s)}startTicking(){super.startTicking(),this.isSceneTicker?this.scene.sys.events.on(this.tickEventName,this.update,this):this.game.events.on(this.tickEventName,this.update,this)}stopTicking(){super.stopTicking(),this.isSceneTicker&&this.scene?this.scene.sys.events.off(this.tickEventName,this.update,this):this.game&&this.game.events.off(this.tickEventName,this.update,this)}};let i6=Phaser.Utils.Objects.GetValue,i4=Phaser.Math.Clamp;var i8=class{constructor(e){this.resetFromJSON(e)}resetFromJSON(e){this.state=i6(e,"state",0),this.timeScale=i6(e,"timeScale",1),this.delay=i6(e,"delay",0),this.repeat=i6(e,"repeat",0),this.repeatCounter=i6(e,"repeatCounter",0),this.repeatDelay=i6(e,"repeatDelay",0),this.duration=i6(e,"duration",0),this.nowTime=i6(e,"nowTime",0),this.justRestart=i6(e,"justRestart",!1)}toJSON(){return{state:this.state,timeScale:this.timeScale,delay:this.delay,repeat:this.repeat,repeatCounter:this.repeatCounter,repeatDelay:this.repeatDelay,duration:this.duration,nowTime:this.nowTime,justRestart:this.justRestart}}destroy(){}setTimeScale(e){return this.timeScale=e,this}setDelay(e){return void 0===e&&(e=0),this.delay=e,this}setDuration(e){return this.duration=e,this}setRepeat(e){return this.repeat=e,this}setRepeatInfinity(){return this.repeat=-1,this}setRepeatDelay(e){return this.repeatDelay=e,this}start(){return this.nowTime=this.delay>0?-this.delay:0,this.state=this.nowTime>=0?2:1,this.repeatCounter=0,this}stop(){return this.state=0,this}update(e,i){0!==this.state&&-1!==this.state&&0!==i&&0!==this.timeScale&&(this.nowTime+=i*this.timeScale,this.justRestart=!1,this.nowTime>=this.duration?-1===this.repeat||this.repeatCounter<this.repeat?(this.repeatCounter++,this.justRestart=!0,this.nowTime-=this.duration,this.repeatDelay>0&&(this.nowTime-=this.repeatDelay,this.state=3)):(this.nowTime=this.duration,this.state=-1):this.nowTime>=0&&(this.state=2))}get t(){var e;switch(this.state){case 0:case 1:case 3:e=0;break;case 2:e=this.nowTime/this.duration;break;case -1:e=1}return i4(e,0,1)}set t(e){(e=i4(e,-1,1))<0?(this.state=1,this.nowTime=-this.delay*e):(this.state=2,this.nowTime=this.duration*e,1===e&&0!==this.repeat&&this.repeatCounter++)}setT(e){return this.t=e,this}get isIdle(){return 0===this.state}get isDelay(){return 1===this.state}get isCountDown(){return 2===this.state}get isRunning(){return 1===this.state||2===this.state}get isDone(){return -1===this.state}get isOddIteration(){return(1&this.repeatCounter)==1}get isEvenIteration(){return(1&this.repeatCounter)==0}},i9=class extends i7{constructor(e,i){super(e,i),this.timer=new i8}shutdown(e){this.isShutdown||(super.shutdown(e),this.timer.destroy(),this.timer=void 0)}start(){return this.timer.start(),super.start(),this}stop(){return this.timer.stop(),super.stop(),this}complete(){return this.timer.stop(),super.complete(),this}};let st=Phaser.Utils.Objects.GetValue,se=Phaser.Utils.Objects.GetAdvancedValue,si=Phaser.Tweens.Builders.GetEaseFunction;var ss=class extends i9{resetFromJSON(e){return this.timer.resetFromJSON(st(e,"timer")),this.setEnable(st(e,"enable",!0)),this.setTarget(st(e,"target",this.parent)),this.setDelay(se(e,"delay",0)),this.setDuration(se(e,"duration",1e3)),this.setEase(st(e,"ease","Linear")),this.setRepeat(st(e,"repeat",0)),this}setEnable(e){return void 0==e&&(e=!0),this.enable=e,this}setTarget(e){return void 0===e&&(e=this.parent),this.target=e,this}setDelay(e){return this.delay=e,this}setDuration(e){return this.duration=e,this}setRepeat(e){return this.repeat=e,this}setRepeatDelay(e){return this.repeatDelay=e,this}setEase(e){return void 0===e&&(e="Linear"),this.ease=e,this.easeFn=si(e),this}start(){return this.timer.isRunning||super.start(),this}restart(){return this.timer.stop(),this.start.apply(this,arguments),this}stop(e){return void 0===e&&(e=!1),super.stop(),e&&(this.timer.setT(1),this.updateGameObject(this.target,this.timer),this.complete()),this}update(e,i){if(!this.isRunning||!this.enable||!this.parent.active)return this;var s=this.target,r=this.timer;return r.update(e,i),r.isDelay||this.updateGameObject(s,r),this.emit("update",s,this),r.isDone&&this.complete(),this}updateGameObject(e,i){}};let sr=Phaser.Sound.BaseSound;var system_IsSoundObject=function(e){return e instanceof sr};let sn=Phaser.Utils.Objects.GetValue,so=Phaser.Utils.Objects.GetAdvancedValue,sh=Phaser.Math.Linear,sl={stop:1,destroy:2};var sd=class extends ss{constructor(e,i,s){system_IsSoundObject(e)&&(s=i,i=e,e=void 0),i.active=!0,i.scene=e,i.game=i.manager.game,super(i,s),this.volume={},this.resetFromJSON(s)}resetFromJSON(e){return super.resetFromJSON(e),this.setMode(sn(e,"mode",0)),this.setEnable(sn(e,"enable",!0)),this.setVolumeRange(so(e,"volume.start",this.parent.volume),so(e,"volume.end",0)),this}setMode(e){return"string"==typeof e&&(e=sl[e]),this.mode=e,this}setVolumeRange(e,i){return this.volume.start=e,this.volume.end=i,this}start(){return this.timer.isRunning||(this.parent.setVolume(this.volume.start),this.timer.setDelay(this.delay).setDuration(this.duration),super.start()),this}updateGameObject(e,i){e.volume=sh(this.volume.start,this.volume.end,i.t)}complete(){switch(super.complete(),this.mode){case 1:this.parent.stop();break;case 2:this.parent.stop(),this.parent.destroy()}return this}},fade_FadeIn=function(e,i,s,r,n){system_IsSoundObject(e)&&(n=r,r=s,s=i,i=e,e=void 0),void 0===r&&(r=1),void 0===n&&(n=0);var a,o={mode:0,volume:{start:n,end:r},duration:s};return"string"==typeof i&&(i=e.sys.sound.add(i)),i.hasOwnProperty("_fade")?(a=i._fade).stop().resetFromJSON(o):(a=new sd(e,i,o),i._fade=a),a.start(),i.isPlaying||i.setVolume(n).play(),i},fade_FadeOut=function(e,i,s,r){system_IsSoundObject(e)&&(r=s,s=i,i=e,e=void 0),void 0===r&&(r=!0);var n,a={mode:r?2:1,volume:{start:i.volume,end:0},duration:s};return i.hasOwnProperty("_fade")?(n=i._fade).stop().resetFromJSON(a):(n=new sd(e,i,a),i._fade=n),n.start(),i.isPlaying||i.play(),i};let sc=Phaser.Utils.Objects.GetValue,su=Phaser.Utils.Objects.GetValue,sp=Phaser.Utils.Array.Remove,sg=Phaser.Utils.Objects.GetValue,sv=Phaser.Utils.Array.Remove,sf=Phaser.Utils.Objects.GetValue;var sm={hasAudio:function(e){return this.sound.game.cache.audio.has(e)}};Object.assign(sm,{setBackgroundMusicLoop(e){return void 0===e&&(e=!0),this.backgroundMusicLoop=e,this},setBackgroundMusicFadeTime(e){return this.backgroundMusicFadeTime=e,this},getBackgroundMusic(){return this.backgroundMusic},setCurrentBackgroundMusic(e){return this.backgroundMusic=e,e&&(e.once("complete",function(){this.backgroundMusic===e&&(this.backgroundMusic.destroy(),this.backgroundMusic=void 0)},this).once("destroy",function(){this.backgroundMusic===e&&(this.backgroundMusic=void 0)},this),e.isPlaying||e.play()),this},playBackgroundMusic(e,i){if(!this.hasAudio(e))return console.error(`[Sound manager] Audio key'${e}' is not existed`),this;if(this.backgroundMusic&&this.backgroundMusic.key===e)return this;this.stopBackgroundMusic();var s=this.sound.add(e,{loop:sc(i,"loop",this.backgroundMusicLoop),mute:sc(i,"mute",this.backgroundMusicMute),volume:sc(i,"volume",this.backgroundMusicVolume),detune:sc(i,"detune",0),rate:sc(i,"rate",1)});return this.setCurrentBackgroundMusic(s),this.backgroundMusicFadeTime>0&&this.fadeInBackgroundMusic(this.backgroundMusicFadeTime),this},pauseBackgroundMusic(){return this.backgroundMusic&&this.backgroundMusic.pause(),this},resumeBackgroundMusic(){return this.backgroundMusic&&this.backgroundMusic.resume(),this},stopBackgroundMusic(){return this.backgroundMusic&&(this.backgroundMusicFadeTime>0?this.fadeOutBackgroundMusic(this.backgroundMusicFadeTime,!0):(this.backgroundMusic.stop(),this.backgroundMusic.destroy(),this.backgroundMusic=void 0)),this},fadeInBackgroundMusic(e){return this.backgroundMusic&&fade_FadeIn(this.backgroundMusic,e,this.backgroundMusicVolume,0),this},fadeOutBackgroundMusic(e,i){return this.backgroundMusic&&fade_FadeOut(this.backgroundMusic,e,i),this},crossFadeBackgroundMusic(e,i){if(!this.hasAudio(e))return console.error(`[Sound manager] Audio key'${e}' is not existed`),this;var s=this.backgroundMusicFadeTime;return this.backgroundMusicFadeTime=0,this.fadeOutBackgroundMusic(i,!0).playBackgroundMusic(e).fadeInBackgroundMusic(i),this.backgroundMusicFadeTime=s,this},setBackgroundMusicMute(e){return void 0===e&&(e=!0),this.backgroundMusicMute=e,this},setBackgroundMusicVolume(e){return this.backgroundMusicVolume=e,this},setBackgroundMusicRate(e){return this.backgroundMusic&&this.backgroundMusic.setRate(e),this},setBackgroundMusicDetune(e){return this.backgroundMusic&&this.backgroundMusic.setDetune(e),this}},{setBackgroundMusic2Loop(e){return void 0===e&&(e=!0),this.backgroundMusic2Loop=e,this},setBackgroundMusic2FadeTime(e){return this.backgroundMusic2FadeTime=e,this},getBackgroundMusic2(){return this.backgroundMusic2},setCurrentBackgroundMusic2(e){return this.backgroundMusic2=e,e&&(e.once("complete",function(){this.backgroundMusic2===e&&(this.backgroundMusic2.destroy(),this.backgroundMusic2=void 0)},this).once("destroy",function(){this.backgroundMusic2===e&&(this.backgroundMusic2=void 0)},this),e.isPlaying||e.play()),this},playBackgroundMusic2(e,i){if(!this.hasAudio(e))return console.error(`[Sound manager] Audio key'${e}' is not existed`),this;if(this.backgroundMusic2&&this.backgroundMusic2.key===e)return this;this.stopBackgroundMusic2();var s=this.sound.add(e,{loop:su(i,"loop",this.backgroundMusicLoop),mute:su(i,"mute",this.backgroundMusic2Mute),volume:su(i,"volume",this.backgroundMusic2Volume),detune:su(i,"detune",0),rate:su(i,"rate",1)});return this.setCurrentBackgroundMusic2(s),this.backgroundMusic2FadeTime>0&&this.fadeInBackgroundMusic2(this.backgroundMusic2FadeTime),this},pauseBackgroundMusic2(){return this.backgroundMusic2&&this.backgroundMusic2.pause(),this},resumeBackgroundMusic2(){return this.backgroundMusic2&&this.backgroundMusic2.resume(),this},stopBackgroundMusic2(){return this.backgroundMusic2&&(this.backgroundMusic2FadeTime>0?this.fadeOutBackgroundMusic2(this.backgroundMusic2FadeTime,!0):(this.backgroundMusic2.stop(),this.backgroundMusic2.destroy(),this.backgroundMusic2=void 0)),this},fadeInBackgroundMusic2(e){return this.backgroundMusic2&&fade_FadeIn(this.backgroundMusic2,e,this.backgroundMusic2Volume,0),this},fadeOutBackgroundMusic2(e,i){return this.backgroundMusic2&&fade_FadeOut(this.backgroundMusic2,e,i),this},crossFadeBackgroundMusic2(e,i){if(!this.hasAudio(e))return console.error(`[Sound manager] Audio key'${e}' is not existed`),this;var s=this.backgroundMusic2FadeTime;return this.backgroundMusic2FadeTime=0,this.fadeOutBackgroundMusic2(i,!0).playBackgroundMusic2(e).fadeInBackgroundMusic2(i),this.backgroundMusic2FadeTime=s,this},setBackgroundMusic2Mute(e){return void 0===e&&(e=!0),this.backgroundMusic2Mute=e,this},setBackgroundMusic2Volume(e){return this.backgroundMusic2Volume=e,this},setBackgroundMusic2Rate(e){return this.backgroundMusic2&&this.backgroundMusic2.setRate(e),this},setBackgroundMusic2Detune(e){return this.backgroundMusic2&&this.backgroundMusic2.setDetune(e),this}},{getSoundEffects(){return this.soundEffects},getLastSoundEffect(){return this.soundEffects[this.soundEffects.length-1]},playSoundEffect(e,i){if(!this.hasAudio(e))return console.error(`[Sound manager] Audio key'${e}' is not existed`),this;var s=this.sound.add(e,{mute:sg(i,"mute",this.soundEffectsMute),volume:sg(i,"volume",this.soundEffectsVolume),detune:sg(i,"detune",0),rate:sg(i,"rate",1)});return this.soundEffects.push(s),s.once("complete",function(){s.destroy(),this.sound&&sp(this.soundEffects,s)},this).once("destroy",function(){this.sound&&sp(this.soundEffects,s)},this).play(),this},stopAllSoundEffects(){for(var e=this.soundEffects.length-1;e>=0;e--){var i=this.soundEffects[e];i.stop(),i.destroy()}return this},fadeInSoundEffect(e){var i=this.getLastSoundEffect();return i&&fade_FadeIn(i,e,this.soundEffectsVolume,0),this},fadeOutSoundEffect(e,i){var s=this.getLastSoundEffect();return s&&fade_FadeOut(s,e,i),this},fadeOutAllSoundEffects(e,i){for(var s=this.soundEffects.length-1;s>=0;s--)fade_FadeOut(this.soundEffects[s],e,i);return this},setSoundEffectMute(e,i){if(void 0===e&&(e=!0),void 0===i&&(i=!1),i){var s=this.getLastSoundEffect();s&&s.setMute(e)}else this.soundEffectsMute=e;return this},setSoundEffectVolume(e,i){if(void 0===i&&(i=!1),i){var s=this.getLastSoundEffect();s&&s.setVolume(e)}else this.soundEffectsVolume=e;return this},setSoundEffectDetune(e,i){void 0===i&&(i=!1),s=i?[this.getLastSoundEffect()]:this.soundEffects;for(var s,r=0,n=s.length;r<n;r++)s[r].setDetune(e);return this},setSoundEffectRate(e,i){void 0===i&&(i=!1),s=i?[this.getLastSoundEffect()]:this.soundEffects;for(var s,r=0,n=s.length;r<n;r++)s[r].setRate(e);return this}},{getSoundEffects2(){return this.soundEffects2},getLastSoundEffect2(){return this.soundEffects2[this.soundEffects2.length-1]},playSoundEffect2(e,i){if(!this.hasAudio(e))return console.error(`[Sound manager] Audio key'${e}' is not existed`),this;var s=this.sound.add(e,{mute:sf(i,"mute",this.soundEffects2Mute),volume:sf(i,"volume",this.soundEffects2Volume),detune:sf(i,"detune",0),rate:sf(i,"rate",1)});return this.soundEffects2.push(s),s.once("complete",function(){s.destroy(),this.sound&&sv(this.soundEffects2,s)},this).once("destroy",function(){this.sound&&sv(this.soundEffects2,s)},this).play(),this},stopAllSoundEffects2(){for(var e=this.soundEffects.length-1;e>=0;e--){var i=this.soundEffects[e];i.stop(),i.destroy()}return this},fadeInSoundEffect2(e){var i=this.getLastSoundEffect2();return i&&fade_FadeIn(i,e,this.soundEffects2Volume,0),this},fadeOutSoundEffect2(e,i){var s=this.getLastSoundEffect2();return s&&fade_FadeOut(s,e,i),this},fadeOutAllSoundEffects2(e,i){for(var s=this.soundEffects2.length-1;s>=0;s--)fade_FadeOut(this.soundEffects2[s],e,i);return this},setSoundEffect2Mute(e,i){if(void 0===e&&(e=!0),void 0===i&&(i=!1),i){var s=this.getLastSoundEffect2();s&&s.setMute(e)}else this.soundEffects2Mute=e;return this},setSoundEffect2Volume(e,i){if(void 0===i&&(i=!1),i){var s=this.getLastSoundEffect2();s&&s.setVolume(e)}else this.soundEffects2Volume=e;return this},setSoundEffect2Detune(e,i){void 0===i&&(i=!1),s=i?[this.getLastSoundEffect2()]:this.soundEffects2;for(var s,r=0,n=s.length;r<n;r++)s[r].setDetune(e);return this},setSoundEffect2Rate(e,i){void 0===i&&(i=!1),s=i?[this.getLastSoundEffect2()]:this.soundEffects2;for(var s,r=0,n=s.length;r<n;r++)s[r].setRate(e);return this}});let sb=Phaser.Utils.Objects.GetValue;let SoundManager=class SoundManager{constructor(e,i){this.sound=system_IsSceneObject(e)?e.sys.sound:e.sound,this.backgroundMusic=void 0,this._backgroundMusicVolume=sb(i,"bgm.volume",1),this._backgroundMusicMute=sb(i,"bgm.mute",!1),this.setBackgroundMusicLoop(sb(i,"bgm.loop",!0)),this.setBackgroundMusicFadeTime(sb(i,"bgm.fade",500)),this.backgroundMusic2=void 0,this._backgroundMusic2Volume=sb(i,"bgm2.volume",1),this._backgroundMusic2Mute=sb(i,"bgm2.mute",!1),this.setBackgroundMusic2Loop(sb(i,"bgm2.loop",!0)),this.setBackgroundMusic2FadeTime(sb(i,"bgm2.fade",500)),this.soundEffects=[],this._soundEffectsVolume=sb(i,"soundEffect.volume",1),this.soundEffects2=[],this._soundEffects2Volume=sb(i,"soundEffect2.volume",1);var s=sb(i,"bgm.initial",void 0);s&&this.setCurrentBackgroundMusic(s);var r=sb(i,"bgm2.initial",void 0);r&&this.setCurrentBackgroundMusic2(r)}destroy(){if(this.backgroundMusic&&this.backgroundMusic.destroy(),this.backgroundMusic=void 0,this.backgroundMusic2&&this.backgroundMusic2.destroy(),this.backgroundMusic2=void 0,this.soundEffects.length)for(var e=this.soundEffects.length-1;e>=0;e--)this.soundEffects[e].destroy();if(this.soundEffects.length=0,this.soundEffects2.length)for(var e=this.soundEffects2.length-1;e>=0;e--)this.soundEffects2[e].destroy();return this.soundEffects2.length=0,this.sound=void 0,this}get backgroundMusicMute(){return this._backgroundMusicMute}set backgroundMusicMute(e){this._backgroundMusicMute=e,this.backgroundMusic&&this.backgroundMusic.setMute(mute)}get backgroundMusicVolume(){return this._backgroundMusicVolume}set backgroundMusicVolume(e){this._backgroundMusicVolume=e,this.backgroundMusic&&this.backgroundMusic.setVolume(e)}get backgroundMusic2Mute(){return this._backgroundMusic2Mute}set backgroundMusic2Mute(e){this._backgroundMusic2Mute=e,this.backgroundMusic2&&this.backgroundMusic2.setMute(mute)}get backgroundMusic2Volume(){return this._backgroundMusic2Volume}set backgroundMusic2Volume(e){this._backgroundMusic2Volume=e,this.backgroundMusic2&&this.backgroundMusic2.setVolume(e)}get soundEffectsMute(){return this._soundEffectsMute}set soundEffectsMute(e){this._soundEffectsMute=e;for(var i=this.soundEffects,s=0,r=i.length;s<r;s++)i[s].setMute(e)}get soundEffectsVolume(){return this._soundEffectsVolume}set soundEffectsVolume(e){this._soundEffectsVolume=e;for(var i=this.soundEffects,s=0,r=i.length;s<r;s++)i[s].setVolume(e)}get soundEffects2Mute(){return this._soundEffects2Mute}set soundEffects2Mute(e){this._soundEffects2Mute=e;for(var i=this.soundEffects,s=0,r=soundEffects2.length;s<r;s++)i[s].setMute(e)}get soundEffects2Volume(){return this._soundEffects2Volume}set soundEffects2Volume(e){this._soundEffects2Volume=e;for(var i=this.soundEffects2,s=0,r=i.length;s<r;s++)i[s].setVolume(e)}};Object.assign(SoundManager.prototype,sm);let sy=Phaser.Utils.Objects.GetValue;var sC=class extends i5{constructor(e,i){super(e,i),this.resetFromJSON(i),this.boot()}resetFromJSON(e){return this.isRunning=sy(e,"isRunning",!1),this.timeScale=sy(e,"timeScale",1),this.now=sy(e,"now",0),this}toJSON(){return{isRunning:this.isRunning,timeScale:this.timeScale,now:this.now,tickingMode:this.tickingMode}}start(e){return void 0===e&&(e=0),this.delta=0,this.now=e,super.start(),this}seek(e){return this.now=e,this}setTimeScale(e){return this.timeScale=e,this}tick(e){return e*=this.timeScale,this.now+=e,this.delta=e,this.emit("update",this.now,this.delta),this}},sx=class extends sC{startTicking(){super.startTicking(),this.scene.sys.events.on("update",this.update,this)}stopTicking(){super.stopTicking(),this.scene&&this.scene.sys.events.off("update",this.update,this)}update(e,i){return this.isRunning&&0!==this.timeScale&&this.tick(i),this}},math_Yoyo=function(e,i){return void 0===i&&(i=.5),e<=i?e/=i:e=1-(e-i)/(1-i),e};let sS=Phaser.Math.Clamp;var s_=class{constructor(e,i){this.setTimeline(e).reset(i)}setTimeline(e){return this.timeline=e,this}setName(e){return this.name=e,this}setCallbacks(e,i,s,r){return this.target=e,this.onStart=i,this.onProgress=s,this.onComplete=r,this}setDuration(e,i){return void 0===i&&(i=!1),this.duration=e,this.remainder=e,this.t=0,this.yoyo=i,this}setPaused(e){return this.isPaused=e,this}pause(){return this.isPaused=!0,this}resume(){return this.isPaused=!1,this}setRemoved(e){return this.removed=e,this}remove(){return this.removed=!0,this}seek(e){return this.remainder=this.duration*(1-e),this}reset(e){return this.setName(e.name).setDuration(e.duration,e.yoyo).setCallbacks(e.target,e.onStart,e.onProgress,e.onComplete).setPaused(!1).setRemoved(!1),this}onFree(){this.setTimeline().setCallbacks()}getProgress(){var e=1-this.remainder/this.duration;return e=sS(e,0,1),this.yoyo&&(e=math_Yoyo(e)),e}setProgress(e){e=sS(e,0,1),this.remainder=this.duration*(1-e)}runCallback(e){e&&e(this.target,this.t,this)}update(e,i){if(this.removed)return!0;if(this.isPaused)return!1;this.remainder-=i,this.t=this.getProgress(),this.runCallback(this.onProgress);var s=this.remainder<=0;return s&&this.runCallback(this.onComplete),s}},sw=class extends X{allocate(){return this.pop()}free(e){e.onFree(),this.push(e)}freeMultiple(e){for(var i=0,s=e.length;i<s;i++)this.free(e[i]);return this}};let sP=Phaser.Utils.Objects.GetValue,sk=new sw;var sT=class extends sx{constructor(e,i){super(e,i),this.addedTimers=[],this.timers=[],this.timerPool=sP(i,"pool",sk)}shutdown(){this.isShutdown||(this.timerPool.freeMultiple(this.addedTimers).freeMultiple(this.timers),this.timerPool=void 0,this.addedTimers=void 0,this.timers=void 0,super.shutdown())}addTimer(e){var i=this.timerPool.allocate();return i?i.setTimeline(this).reset(e):i=new s_(this,e),this.addedTimers.push(i),i.runCallback(i.onStart),this.isRunning||this.start(),i}delayCall(e,i,s,r){return this.addTimer({duration:e,onComplete:function(e,n,a){void 0===s&&(s=[]),s.push(a),i.apply(r,s)}})}delayEvent(e,i){this.removeDelayEvent(i);var s=this.delayCall(e,function(){this.removeDelayEvent(i),this.emit(i)},[],this);return this.once(`_remove.${i}`,function(){s.remove(),s=void 0}),this}removeDelayEvent(e){return this.emit(`_remove.${e}`),this}getTimers(e){for(var i=[],s=[this.addedTimers,this.timers],r=0,n=s.length;r<n;r++)for(var a=s[r],o=0,h=a.length;o<h;o++){var l=a[o];l.name===e&&i.push(l)}return i}update(e,i){if(super.update(e,i),this.isRunning){this.timers.push(...this.addedTimers),this.addedTimers.length=0;for(var s=[],r=0,n=this.timers.length;r<n;r++){var a=this.timers[r];a.update(this.now,this.delta)?this.timerPool.free(a):s.push(a)}this.timers=s,0===this.timers.length&&0===this.addedTimers.length&&this.complete()}}},time_PreUpdateDelayCall=function(e,i,s,r,n){var a=system_GetSceneObject(e);return a.time.delayedCall(i,function(){a.sys.events.once("preupdate",function(){s.call(r,n)})})};let WaitEvent=class WaitEvent{constructor(e){e||(this.setEventEmitter(!0),e=this),this.parent=e,this.waitId=0,this.waitCompleteEventName="_wait.complete",this.removeWaitEventsEventName="_remove.wait"}destroy(){this.removeWaitEvents(),this.clearWaitCompleteCallbacks(),this.parent=null}waitEvent(e,i,s){var r=this.getWaitCompleteTriggerCallback(s);return e.once(i,r,this),this.parent.once(this.removeWaitEventsEventName,function(){e.off(i,r,this)}),this.parent}getWaitCompleteTriggerCallback(e){void 0===e&&(e=!0);var i=this.waitId,s=this,completeCallback=function(){i<s.waitId||(s.waitId++,s.removeWaitEvents(),s.parent.emit(s.waitCompleteEventName))};return e?function(){time_PreUpdateDelayCall(s.parent,0,completeCallback)}:completeCallback}removeWaitEvents(){return this.parent.emit(this.removeWaitEventsEventName),this}addWaitCompleteCallback(e,i){return this.parent.on(this.waitCompleteEventName,e,i),this}clearWaitCompleteCallbacks(){return this.parent.off(this.waitCompleteEventName),this}};Object.assign(WaitEvent.prototype,iM.Z);var sO=WaitEvent,string_Split=function(e,i){var s=`(?<!\\\\)\\${i}`,r=`\\${i}`;return e.split(RegExp(s,"g")).map(function(e){return e.replace(r,i)})};let WaitEventManager=class WaitEventManager extends sO{constructor(e,i){super(e),this.waitCompleteEventName=object_GetValue(i,"completeEventName",this.waitCompleteEventName),this.setClickTarget(object_GetValue(i,"clickTarget",this.scene)),this.setCameraTarget(object_GetValue(i,"camera",this.scene.cameras.main))}get clickTarget(){return this.parent.clickTarget}set clickTarget(e){this.parent.clickTarget=e}get cameraTarget(){return this.parent.cameraTarget}set cameraTarget(e){this.parent.cameraTarget=e}destroy(){this.setClickTarget(),this.setCameraTarget(),super.destroy()}get scene(){return this.parent.managersScene}};Object.assign(WaitEventManager.prototype,{waitTime(e){var i=this.parent.timeline;return i.delayEvent(e,"delay"),this.parent.once(this.removeWaitEventsEventName,function(){i.removeDelayEvent("delay")}),this.waitEvent(i,"delay")}},{setClickTarget(e){this.clickTarget=e,e?system_IsSceneObject(e)?this.clickEE=e.input:this.clickEE=e.setInteractive():this.clickEE=null},waitClick(){return this.clickEE?this.waitEvent(this.clickEE,"pointerdown"):this.waitTime(0)},waitKeyDown(e){var i=this.scene.input.keyboard;if("string"!=typeof e)return this.waitEvent(i,"keydown");if(-1===e.indexOf("|"))return this.waitEvent(i,`keydown-${e.toUpperCase()}`);for(var s=string_Split(e,"|"),r=0,n=s.length;r<n;r++)this.waitEvent(i,`keydown-${e.toUpperCase()}`);return this.parent}},{waitGameObjectTweenComplete(e,i,s){var r=this.parent.getGameObjectTweenTask(e,i,s);return r?this.waitEvent(r,"complete"):this.waitTime(0)},waitGameObjectDataFlag(e,i,s,r){var n=this.parent.getGameObject(e,i);if(!n||n.getData(s)===r)return this.waitTime(0);var a=`changedata-${s}`,callback=function(e,i,s){(i=!!i)===r&&e.emit("_dataFlagMatch")};return n.on(a,callback),this.parent.once(this.removeWaitEventsEventName,function(){n.off(a,callback)}),this.waitEvent(n,"_dataFlagMatch")},waitGameObjectDestroy(e,i){var s=this.parent.getGameObject(e,i);return s?this.waitEvent(s,"destroy"):this.waitTime(0)},waitGameObjectManagerEmpty(e){if(e){var i=this.parent.getGameObjectManager(e);return i?this.waitEvent(i,"empty"):this.waitTime(0)}var s=this.parent.gameObjectManagers,r=!1;for(var n in s)r=!0,this.waitEvent(s[n],"empty");return r?this.parent:this.waitTime(0)}},{setCameraTarget(e){return this.cameraTarget=e,this},waitCameraEffectComplete(e){var i,s,r=this.cameraTarget;if(!r)return this.waitTime(0);switch(e){case"camera.fadein":i=r.fadeEffect,s="camerafadeincomplete";break;case"camera.fadeout":i=r.fadeEffect,s="camerafadeoutcomplete";break;case"camera.flash":i=r.flashEffect,s="cameraflashcomplete";break;case"camera.shake":i=r.shakeEffect,s="camerashakecomplete";break;case"camera.zoom":i=r.zoomEffect,s="camerazoomcomplete";break;case"camera.rotate":i=r.rotateToEffect,s="camerarotatecomplete";break;case"camera.scroll":i=r.panEffect,s="camerapancomplete"}return i.isRunning?this.waitEvent(r,s):this.waitTime(0)}},{waitSoundEffectComplete(){if(!this.parent.soundManager)return this.waitTime(0);var e=this.parent.soundManager.getLastSoundEffect();return e?this.waitEvent(e,"complete"):this.waitTime(0)},waitSoundEffect2Complete(){if(!this.parent.soundManager)return this.waitTime(0);var e=this.parent.soundManager.getLastSoundEffect2();return e?this.waitEvent(e,"complete"):this.waitTime(0)},waitBackgroundMusicComplete(){if(!this.parent.soundManager)return this.waitTime(0);var e=this.parent.soundManager.getBackgroundMusic();return e?this.waitEvent(e,"complete"):this.waitTime(0)},waitBackgroundMusic2Complete(){if(!this.parent.soundManager)return this.waitTime(0);var e=this.parent.soundManager.getBackgroundMusic2();return e?this.waitEvent(e,"complete"):this.waitTime(0)}},{waitAny:function(e){if(!e)return this.waitTime(0);var i=!1;for(var s in e)switch(s){case"time":i=!0,this.waitTime(e.time);break;case"click":i=!0,this.waitClick(e.key);break;case"key":i=!0,this.waitKeyDown(e.key);break;case"bgm":i=!0,this.waitBackgroundMusicComplete();break;case"bgm2":i=!0,this.waitBackgroundMusic2Complete();break;case"se":i=!0,this.waitSoundEffectComplete();break;case"se2":i=!0,this.waitSoundEffect2Complete();break;case"camera":i=!0,this.waitCameraEffectComplete(`camera.${e.camera.toLowerCase()}`);break;default:var r=s.split(".");if(2===r.length){var n=r[0],a=r[1],o=this.parent.getGameObjectManager(void 0,n);if(!o)continue;if("destroy"===a)return this.waitGameObjectDestroy(void 0,n);if("number"==typeof o.getProperty(n,a)){i=!0,this.waitGameObjectTweenComplete(void 0,n,a);continue}var h=a,l=h.startsWith("!");if(l&&(h=h.substring(1)),o.hasData(n,a)){i=!0,this.waitGameObjectDataFlag(void 0,n,h,!l);continue}this.waitEvent(gameObject,a);continue}r.length}return i||this.waitTime(0),this.parent}});let sM=Phaser.Utils.Objects.GetValue;var managers_InitManagers=function(e,i){this.clickTarget=void 0,this.cameraTarget=void 0,this.managersScene=e,this.gameObjectManagers={};var s=sM(i,"layers",!1);if(!1!==s){var r=new LayerManager_LayerManager(e,{name:"LAYER",layers:s,rootLayer:sM(i,"rootLayer",void 0),depth:sM(i,"layerDepth",void 0)});this.addGameObjectManager(r),this.layerManager=r}var n=sM(i,"sounds");return!1!==n&&(this.soundManager=new SoundManager(e,n)),this.timeline=new sT(this),this.waitEventManager=new WaitEventManager(this,i),this},managers_SetTimeScale=function(e){for(var i in this.timeline.timeScale=e,this.gameObjectManagers)this.gameObjectManagers[i].setTimeScale(e);return this},managers_GetTimeScale=function(){return this.timeline.timeScale},managers_DestroyManagers=function(e){for(var i in this.waitEventManager.destroy(),this.waitEventManager=void 0,delete this.gameObjectManagers.layer,this.gameObjectManagers)this.gameObjectManagers[i].destroy(e),delete this.gameObjectManagers[i];this.layerManager&&(this.layerManager.destroy(e),this.layerManager=void 0),this.soundManager&&(this.soundManager.destroy(),this.soundManager=void 0),this.timeline&&(this.timeline.destroy(),this.timeline=void 0),this.clickTarget=void 0,this.cameraTarget=void 0,this.managersScene=void 0},sE={addGameObjectManager(e,i){var s;return e instanceof i$?s=e:"string"==typeof e?(s=i).name=e:(void 0===e&&(e={}),void 0===i&&(i=i$),e.createGameObjectScope||(e.createGameObjectScope=this),s=new i(this.managersScene,e)),this.gameObjectManagers[s.name]=s,this},getGameObjectManager(e,i){if(e){var s=this.gameObjectManagers[e];return s}for(var e in i&&"!"===i.charAt(0)&&(i=i.substring(1)),this.gameObjectManagers){var s=this.gameObjectManagers[e];if(s.has(i))return s}},getGameObjectManagerNames(){var e=[];for(var i in this.gameObjectManagers)e.push(i);return e},getGameObjectManagerName(e){var i=this.getGameObjectManager(void 0,e);if(i)return i.name},hasGameObjectMananger(e){return e in this.gameObjectManagers}},sR={createGameObject(e,i,...s){return this.getGameObjectManager(e,i).add(i,...s),this},destroyGameObject(e,i){var s=this.getGameObjectManager(e,i);return void 0===i?s.removeAll():s.remove(i),this},hasGameObject(e,i){return!!this.getGameObjectManager(e,i)},callGameObjectMethod(e,i,s,...r){return this.getGameObjectManager(e,i).call(i,s,...r),this},setGameObjectProperty(e,i,s,r){return this.getGameObjectManager(e,i).setProperty(i,s,r),this},easeGameObjectProperty(e,i,s,r,n,a,o,h){return this.getGameObjectManager(e,i).easeProperty(i,s,r,n,a,o,h),this},getGameObjectTweenTask(e,i,s){return this.getGameObjectManager(e,i).getTweenTask(i,s)},getGameObject(e,i,s){var r=this.getGameObjectManager(e,i);if("string"==typeof i)return r.getGO(i);void 0===s&&(s=[]);var n=i;void 0===n&&(n=Object.keys(r.bobs));for(var a=Array.isArray(s),o=0,h=n.length;o<h;o++){i=n[o];var l=r.getGO(i);l&&(a?s.push(l):s[i]=l)}return s},addGameObject(e,i,s){var r=this.getGameObjectManager(e,i);if("string"==typeof i)r.addGO(i,s);else{var n=i;for(i in n)r.addGO(i,n[i])}return this},drawGameObjectsBounds(e,i,s){e instanceof Phaser.GameObjects.Graphics&&(s=i,i=e,e=void 0),void 0===e&&(e=this.getGameObjectManagerNames()),Array.isArray(e)||(e=[e]);for(var r=0,n=e.length;r<n;r++)this.getGameObjectManager(e[r]).drawGameObjectsBounds(i,s);return this}},managers_Extend=function(e){let Managers=class Managers extends e{};return Object.assign(Managers.prototype,{initManagers:managers_InitManagers,setTimeScale:managers_SetTimeScale,getTimeScale:managers_GetTimeScale,destroyManagers:managers_DestroyManagers},sE,sR),Managers},sL=s(90941),sB=s.n(sL);let EventEmitter_EventEmitter=class EventEmitter_EventEmitter extends sB(){shutdown(){this.removeAllListeners()}destroy(){this.removeAllListeners()}};var sI=EventEmitter_EventEmitter,sG={setEventEmitter(e,i){return void 0===i&&(i=sI),this._privateEE=!0===e||void 0===e,this._eventEmitter=this._privateEE?new i:e,this},destroyEventEmitter(){return this._eventEmitter&&this._privateEE&&this._eventEmitter.shutdown(),this},getEventEmitter(){return this._eventEmitter},on:function(){return this._eventEmitter&&this._eventEmitter.on.apply(this._eventEmitter,arguments),this},once:function(){return this._eventEmitter&&this._eventEmitter.once.apply(this._eventEmitter,arguments),this},off:function(){return this._eventEmitter&&this._eventEmitter.off.apply(this._eventEmitter,arguments),this},emit:function(e){return this._eventEmitter&&e&&this._eventEmitter.emit.apply(this._eventEmitter,arguments),this},addListener:function(){return this._eventEmitter&&this._eventEmitter.addListener.apply(this._eventEmitter,arguments),this},removeListener:function(){return this._eventEmitter&&this._eventEmitter.removeListener.apply(this._eventEmitter,arguments),this},removeAllListeners:function(){return this._eventEmitter&&this._eventEmitter.removeAllListeners.apply(this._eventEmitter,arguments),this},listenerCount:function(){return this._eventEmitter?this._eventEmitter.listenerCount.apply(this._eventEmitter,arguments):0},listeners:function(){return this._eventEmitter?this._eventEmitter.listeners.apply(this._eventEmitter,arguments):[]},eventNames:function(){return this._eventEmitter?this._eventEmitter.eventNames.apply(this._eventEmitter,arguments):[]}},sD=/^\s*-?(\d*\.?\d+|\d+\.?\d*)(e[-+]?\d+)?\s*$/i,sj=/^0x[0-9A-F]+$/i,string_TypeConvert=function(e){if("string"!=typeof e)return e;if(""===e)e=null;else if(sD.test(e))e=parseFloat(e);else if(sj.test(e))e=parseInt(e,16);else switch(e){case"false":e=!1;break;case"true":e=!0;break;case"null":e=null;break;case"undefined":e=void 0}return e};let BracketParser=class BracketParser{constructor(e){this.setEventEmitter(object_GetValue(e,"eventEmitter",void 0)),this.setValueConverter(object_GetValue(e,"valueConvert",!0)),this.setLoopEnable(object_GetValue(e,"loop",!1)),this.setMultipleLinesTagEnable(object_GetValue(e,"multipleLinesTag",!1));var i=object_GetValue(e,"delimiters","<>");this.setDelimiters(i[0],i[1]),this.setTranslateTagNameCallback(object_GetValue(e,"translateTagNameCallback")),this.isRunning=!1,this.isPaused=!1,this.skipEventFlag=!1,this.justCompleted=!1,this.lastTagStart=null,this.lastTagEnd=null,this.lastContent=null}shutdown(){this.destroyEventEmitter()}destroy(){this.shutdown()}setMultipleLinesTagEnable(e){return void 0===e&&(e=!0),this.multipleLinesTagEnable=e,this}setDelimiters(e,i){void 0===i&&(i=e[1],e=e[0]),this.delimiterLeft=e,this.delimiterRight=i,e=string_EscapeRegex(this.delimiterLeft),i=string_EscapeRegex(this.delimiterRight);var s=this.multipleLinesTagEnable?"gs":"gi";return this.reSplit=RegExp(`${e}(.+?)${i}`,s),this}setTranslateTagNameCallback(e){return this.translateTagNameCallback=e,this}setValueConverter(e){return!0===e?e=string_TypeConvert:e||(e=BypassValueConverter),this.valueConverter=e,this}setLoopEnable(e){return void 0===e&&(e=!0),this.loopEnable=e,this}setSource(e){return this.source=e,this}resetIndex(e){return void 0===e&&(e=0),this.progressIndex=e,this.reSplit.lastIndex=e,this.lastTagStart=null,this.lastTagEnd=null,this.lastContent=null,this.justCompleted=!1,this.isRunning=!1,this}start(e){return this.setSource(e).restart(),this}restart(){this.resetIndex().next()}next(){if(this.isPaused&&this.onResume(),this.isRunning)return this;if(this.isRunning=!0,this.justCompleted)return this.isRunning=!1,this;0===this.reSplit.lastIndex&&this.onStart();var e=this.source,i=e.length;for(this.reSplit.lastIndex=this.progressIndex;;){var s=this.reSplit.exec(e);if(!s){if(this.progressIndex<i&&(this.onContent(e.substring(this.progressIndex,i)),this.isPaused)){this.progressIndex=i;break}this.onComplete(),this.isRunning=!1;return}var r=this.reSplit.lastIndex,n=r-s[0].length;if(this.progressIndex<n&&(this.onContent(e.substring(this.progressIndex,n)),this.isPaused)){this.progressIndex=n;break}if(this.lastTagSource=s[0],this.onTag(s[1]),this.lastTagSource=void 0,this.progressIndex=r,this.isPaused)break}return this.isRunning=!1,this}skipEvent(){return this.skipEventFlag=!0,this}pause(){return this.isPaused||this.onPause(),this}pauseUntilEvent(e,i){return this.isPaused||(this.pause(),e.once(i,function(){this.next()},this)),this}onContent(e){this.skipEventFlag=!1,this.emit("content",e),this.lastContent=e}onTag(e){}onStart(){this.isRunning=!0,this.emit("start",this)}onComplete(){this.isRunning=!1,this.justCompleted=!0,this.emit("complete",this),this.loopEnable&&this.resetIndex()}onPause(){this.isPaused=!0,this.emit("pause",this)}onResume(){this.isPaused=!1,this.emit("resume",this)}};let BypassValueConverter=function(e){return e};Object.assign(BracketParser.prototype,sG);var sA=BracketParser,string_StringToValues=function(e,i,s){if(null==e)return[];void 0===i&&(i=string_TypeConvert),void 0===s&&(s=",");for(var r=e.split(s),n=0,a=r.length;n<a;n++)r[n]=i(r[n]);return r};let sF="[^=]+";var sz=class extends sA{constructor(e){void 0===e&&(e={}),e.hasOwnProperty("multipleLinesTag")||(e.multipleLinesTag=!1),super(e),this.setTagExpression(object_GetValue(e,"regex.tag",void 0)),this.setValueExpression(object_GetValue(e,"regex.value",void 0));var i=object_GetValue(e,"delimiters","<>");this.setDelimiters(i[0],i[1])}setTagExpression(e){return e||(e=sF),this.tagExpression=e,this}setValueExpression(e){return e||(e=sF),this.valueExpression=e,this}setDelimiters(e,i){super.setDelimiters(e,i);var s=`(${this.tagExpression})(=(${this.valueExpression}))?`;if(this.reTag=RegExp(s,"i"),this.tagExpression!==sF||this.valueExpression!==sF){var r=`${this.tagExpression}(=${this.valueExpression})?`,n=`/${this.tagExpression}`;e=string_EscapeRegex(this.delimiterLeft),i=string_EscapeRegex(this.delimiterRight);var a=this.multipleLinesTagEnable?"gs":"gi";this.reSplit=RegExp(`${e}((${r})|(${n}))${i}`,a)}return this}onTag(e){var i=e.match(this.reTag),s=i[1],r="/"===s.charAt(0);if(r&&(s=s.substring(1,s.length)),this.translateTagNameCallback&&(s=this.translateTagNameCallback(s)),this.skipEventFlag=!1,r)this.emit(`-${s}`),this.skipEventFlag||this.emit("-",s),this.lastTagEnd=s;else{var n=string_StringToValues(i[3],this.valueConverter);this.emit(`+${s}`,...n),this.skipEventFlag||this.emit("+",s,...n),this.lastTagStart=s}}},SetTypingSpeed=function(e){this.typeWriter.setTypingSpeed(e)},OnParseTypingSpeedTag_AppendCommand=function(e,i){methods_AppendCommand.call(e,"speed",SetTypingSpeed,i,e)},PlaySoundEffect=function(e){if(!this.skipSoundEffect){var i=e[0],s=e[1];this.soundManager.playSoundEffect(i),s&&this.soundManager.fadeInSoundEffect(s)}},PlaySoundEffect2=function(e){if(!this.skipSoundEffect){var i=e[0],s=e[1];this.soundManager.playSoundEffect2(i),s&&this.soundManager.fadeInSoundEffect2(s)}},FadeInSoundEffect=function(e){this.soundManager.fadeInSoundEffect(e)},FadeInSoundEffect2=function(e){this.soundManager.fadeInSoundEffect2(e)},FadeOutSoundEffect=function(e){this.soundManager.fadeOutSoundEffect(...e)},FadeOutSoundEffect2=function(e){this.soundManager.fadeOutSoundEffect2(...e)},SetSoundEffectVolume=function(e){this.soundManager.setSoundEffectVolume(e,!0)},SetSoundEffectVolume2=function(e){this.soundManager.setSoundEffectVolume2(e,!0)},SetSoundEffectMute=function(){this.soundManager.setSoundEffectMute(!0)},SetSoundEffect2Mute=function(){this.soundManager.setSoundEffect2Mute(!0)},SetSoundEffectUnMute=function(){this.soundManager.setSoundEffectMute(!1)},SetSoundEffect2UnMute=function(){this.soundManager.setSoundEffect2Mute(!1)},PlayBackgroundMusic=function(e){var i=e[0],s=e[1];this.soundManager.playBackgroundMusic(i),s&&this.soundManager.fadeInBackgroundMusic(s)},StopBackgroundMusic=function(){this.soundManager.stopBackgroundMusic()},PlayBackgroundMusic2=function(e){var i=e[0],s=e[1];this.soundManager.playBackgroundMusic2(i),s&&this.soundManager.fadeInBackgroundMusic2(s)},StopBackgroundMusic2=function(){this.soundManager.stopBackgroundMusic2()},FadeInBackgroundMusic=function(e){this.soundManager.fadeInBackgroundMusic(e)},FadeInBackgroundMusic2=function(e){this.soundManager.fadeInBackgroundMusic2(e)},FadeOutBackgroundMusic=function(e){this.soundManager.fadeOutBackgroundMusic(...e)},FadeOutBackgroundMusic2=function(e){this.soundManager.fadeOutBackgroundMusic2(...e)},CrossFadeBackgroundMusic=function(e){this.soundManager.crossFadeBackgroundMusic(...e)},CrossFadeBackgroundMusic2=function(e){this.soundManager.crossFadeBackgroundMusic2(...e)},PauseBackgroundMusic=function(){this.soundManager.pauseBackgroundMusic()},ResumeBackgroundMusic=function(){this.soundManager.resumeBackgroundMusic()},PauseBackgroundMusic2=function(){this.soundManager.pauseBackgroundMusic2()},ResumeBackgroundMusic2=function(){this.soundManager.resumeBackgroundMusic2()},SetBackgroundMusicVolume=function(e){this.soundManager.setBackgroundMusicVolume(e)},SetBackgroundMusicVolume2=function(e){this.soundManager.setBackgroundMusicVolume2(e)},SetBackgroundMusicMute=function(){this.soundManager.setBackgroundMusicMute(!0)},SetBackgroundMusic2Mute=function(){this.soundManager.setBackgroundMusic2Mute(!0)},SetBackgroundMusicUnMute=function(){this.soundManager.setBackgroundMusicMute(!1)},SetBackgroundMusic2UnMute=function(){this.soundManager.setBackgroundMusic2Mute(!1)},PlayFadeInEffect=function(e){this.cameraTarget.fadeIn(...e)},PlayFadeOutEffect=function(e){this.cameraTarget.fadeOut(...e)},PlayShakeEffect=function(e){this.cameraTarget.shake(...e)},PlayFlashEffect=function(e){this.cameraTarget.flash(...e)},Zoom=function(e){this.cameraTarget.setZoom(e)},ZoomTo=function(e){this.cameraTarget.zoomTo(...e)};let sW=Phaser.Math.DegToRad;var OnParseRotateCameraTag_Rotate=function(e){this.cameraTarget.setRotation(e)},RotateTo=function(e){var i=e[0],s=e[1],r=e[2];this.cameraTarget.rotateTo(i,!1,s,r)},Scroll=function(e){this.cameraTarget.setScroll(...e)},ScrollTo=function(e){var i=e[0],s=e[1],r=e[2],n=e[3],a=this.cameraTarget,o=a.scrollX,h=a.scrollY;a.setScroll(i,s),i+=a.centerX,s+=a.centerY,a.setScroll(o,h),a.pan(i,s,r,n)},Wait=function(e){this.typeWriter.wait(e)},OnParseWaitTag_AppendCommand=function(e,i){methods_AppendCommand.call(e,"wait",Wait,i,e)},OnParseCustomTag_FireEvent=function(e,i){var s=`tag.${i}`;null==e?this.emit(s):this.emit(s,...e)},OnParseCustomTag_AppendCommand=function(e,i,s){methods_AppendCommand.call(e,i,OnParseCustomTag_FireEvent,s,e)};let sV=[function(e,i,s){var r,n="color";i.on("start",function(){r=e.textStyle.color}).on(`+${n}`,function(s){e.textStyle.setColor(s),i.skipEvent()}).on(`-${n}`,function(){e.textStyle.setColor(r),i.skipEvent()}).on("complete",function(){e.textStyle.setColor(r)})},function(e,i,s){var r,n="stroke";i.on("start",function(){r=e.textStyle.stroke,e.textStyle.setStrokeStyle(null)}).on(`+${n}`,function(s){void 0===s&&(s=r),e.textStyle.setStrokeStyle(s),i.skipEvent()}).on(`-${n}`,function(){e.textStyle.setStrokeStyle(null),i.skipEvent()}).on("complete",function(){e.textStyle.setStrokeStyle(r)})},function(e,i,s){i.on("start",function(){e.textStyle.setBold(!1)}).on("+b",function(){e.textStyle.setBold(!0),i.skipEvent()}).on("-b",function(){e.textStyle.setBold(!1),i.skipEvent()})},function(e,i,s){i.on("start",function(){e.textStyle.setItalic(!1)}).on("+i",function(){e.textStyle.setItalic(!0),i.skipEvent()}).on("-i",function(){e.textStyle.setItalic(!1),i.skipEvent()})},function(e,i,s){var r,n="size";i.on("start",function(){r=e.textStyle.fontSize}).on(`+${n}`,function(s){e.textStyle.setFontSize(s),i.skipEvent()}).on(`-${n}`,function(){e.textStyle.setFontSize(r),i.skipEvent()}).on("complete",function(){e.textStyle.setFontSize(r)})},function(e,i,s){var r,n="shadow";i.on("start",function(){r=e.textStyle.shadowColor,e.textStyle.setShadowColor(null)}).on(`+${n}`,function(s){void 0===s&&(s=r),e.textStyle.setShadowColor(s),i.skipEvent()}).on(`-${n}`,function(){e.textStyle.setShadowColor(null),i.skipEvent()}).on("complete",function(){e.textStyle.setShadowColor(r)})},function(e,i,s){var r="align";i.on(`+${r}`,function(s){e.textStyle.setAlign(s),i.skipEvent()}).on(`-${r}`,function(){e.textStyle.setAlign(),i.skipEvent()}).on("complete",function(){e.textStyle.setAlign()})},function(e,i,s){var r;i.on("start",function(){r=e.textStyle.offsetY,e.textStyle.setOffsetY(0)}).on("+y",function(s){void 0===s&&(s=r),e.textStyle.setOffsetY(s),i.skipEvent()}).on("-y",function(){e.textStyle.setOffsetY(0),i.skipEvent()}).on("complete",function(){e.textStyle.setOffsetY(0)})},function(e,i,s){var r;i.on("start",function(){r=e.textStyle.offsetY,e.textStyle.setOffsetX(0)}).on("+x",function(s){void 0===s&&(s=r),e.textStyle.setOffsetX(s),i.skipEvent()}).on("-x",function(){e.textStyle.setOffsetX(0),i.skipEvent()}).on("complete",function(){e.textStyle.setOffsetX(0)})},function(e,i,s){var r,n="left";i.on("start",function(){r=e.textStyle.leftSpace,e.textStyle.setLeftSpace(0)}).on(`+${n}`,function(s){void 0===s&&(s=r),e.textStyle.setLeftSpace(s),i.skipEvent()}).on(`-${n}`,function(){e.textStyle.setLeftSpace(0),i.skipEvent()}).on("complete",function(){e.textStyle.setLeftSpace(0)})},function(e,i,s){var r,n="right";i.on("start",function(){r=e.textStyle.rightSpace,e.textStyle.setRightSpace(0)}).on(`+${n}`,function(s){void 0===s&&(s=r),e.textStyle.setRightSpace(s),i.skipEvent()}).on(`-${n}`,function(){e.textStyle.setRightSpace(0),i.skipEvent()}).on("complete",function(){e.textStyle.setRightSpace(0)})},function(e,i,s){i.on("+img",function(s){var r=e.imageManager.get(s);methods_AppendImage.call(e,r.key,r.frame,{width:r.width,hieght:r.height,leftSpace:r.left,rightSpace:r.right,color:r.tintFill?e.textStyle.color:void 0}),i.skipEvent()}).on("-img",function(){i.skipEvent()})},function(e,i,s){var r="space";i.on(`+${r}`,function(s){methods_AppendSpace.call(e,s),i.skipEvent()}).on(`-${r}`,function(){i.skipEvent()})},function(e,i,s){var r="speed";i.on(`+${r}`,function(s){OnParseTypingSpeedTag_AppendCommand(e,s),i.skipEvent()}).on(`-${r}`,function(){OnParseTypingSpeedTag_AppendCommand(e,void 0),i.skipEvent()})},function(e,i,s){var r="se";i.on(`+${r}`,function(s,n){methods_AppendCommand.call(e,r,PlaySoundEffect,[s,n],e),i.skipEvent()}).on(`-${r}`,function(){i.skipEvent()});var r="se2";i.on(`+${r}`,function(s,n){methods_AppendCommand.call(e,r,PlaySoundEffect2,[s,n],e),i.skipEvent()}).on(`-${r}`,function(){i.skipEvent()})},function(e,i,s){var r="se.fadein";i.on(`+${r}`,function(s){methods_AppendCommand.call(e,r,FadeInSoundEffect,s,e),i.skipEvent()}).on(`-${r}`,function(){i.skipEvent()});var r="se2.fadein";i.on(`+${r}`,function(s){methods_AppendCommand.call(e,r,FadeInSoundEffect2,s,e),i.skipEvent()}).on(`-${r}`,function(){i.skipEvent()})},function(e,i,s){var r="se.fadeout";i.on(`+${r}`,function(s,n){n="stop"===n,methods_AppendCommand.call(e,r,FadeOutSoundEffect,[s,n],e),i.skipEvent()}).on(`-${r}`,function(){i.skipEvent()});var r="se2.fadeout";i.on(`+${r}`,function(s,n){n="stop"===n,methods_AppendCommand.call(e,r,FadeOutSoundEffect2,[s,n],e),i.skipEvent()}).on(`-${r}`,function(){i.skipEvent()})},function(e,i,s){var r="se.volume";i.on(`+${r}`,function(s){methods_AppendCommand.call(e,r,SetSoundEffectVolume,s,e),i.skipEvent()}).on(`-${r}`,function(){i.skipEvent()});var r="se2.volume";i.on(`+${r}`,function(s){methods_AppendCommand.call(e,r,SetSoundEffectVolume2,s,e),i.skipEvent()}).on(`-${r}`,function(){i.skipEvent()})},function(e,i,s){var r="se.mute";i.on(`+${r}`,function(){methods_AppendCommand.call(e,r,SetSoundEffectMute,void 0,e),i.skipEvent()}).on(`-${r}`,function(){i.skipEvent()});var r="se2.mute";i.on(`+${r}`,function(){methods_AppendCommand.call(e,r,SetSoundEffect2Mute,void 0,e),i.skipEvent()}).on(`-${r}`,function(){i.skipEvent()});var r="se.unmute";i.on(`+${r}`,function(){methods_AppendCommand.call(e,r,SetSoundEffectUnMute,void 0,e),i.skipEvent()}).on(`-${r}`,function(){i.skipEvent()});var r="se2.unmute";i.on(`+${r}`,function(){methods_AppendCommand.call(e,r,SetSoundEffect2UnMute,void 0,e),i.skipEvent()}).on(`-${r}`,function(){i.skipEvent()})},function(e,i,s){var r="bgm";i.on(`+${r}`,function(s,n){methods_AppendCommand.call(e,r,PlayBackgroundMusic,[s,n],e),i.skipEvent()}).on(`-${r}`,function(){methods_AppendCommand.call(e,"bgm.stop",StopBackgroundMusic,void 0,e),i.skipEvent()});var r="bgm2";i.on(`+${r}`,function(s,n){methods_AppendCommand.call(e,r,PlayBackgroundMusic2,[s,n],e),i.skipEvent()}).on(`-${r}`,function(){methods_AppendCommand.call(e,"bgm2.stop",StopBackgroundMusic2,void 0,e),i.skipEvent()})},function(e,i,s){var r="bgm.fadein";i.on(`+${r}`,function(s){methods_AppendCommand.call(e,r,FadeInBackgroundMusic,s,e),i.skipEvent()}).on(`-${r}`,function(){i.skipEvent()});var r="bgm2.fadein";i.on(`+${r}`,function(s){methods_AppendCommand.call(e,r,FadeInBackgroundMusic2,s,e),i.skipEvent()}).on(`-${r}`,function(){i.skipEvent()})},function(e,i,s){var r="bgm.fadeout";i.on(`+${r}`,function(s,n){n="stop"===n,methods_AppendCommand.call(e,r,FadeOutBackgroundMusic,[s,n],e),i.skipEvent()}).on(`-${r}`,function(){i.skipEvent()});var r="bgm2.fadeout";i.on(`+${r}`,function(s,n){n="stop"===n,methods_AppendCommand.call(e,r,FadeOutBackgroundMusic2,[s,n],e),i.skipEvent()}).on(`-${r}`,function(){i.skipEvent()})},function(e,i,s){var r="bgm.cross";i.on(`+${r}`,function(s,n){methods_AppendCommand.call(e,r,CrossFadeBackgroundMusic,[s,n],e),i.skipEvent()}).on(`-${r}`,function(){i.skipEvent()});var r="bgm2.cross";i.on(`+${r}`,function(s,n){methods_AppendCommand.call(e,r,CrossFadeBackgroundMusic2,[s,n],e),i.skipEvent()}).on(`-${r}`,function(){i.skipEvent()})},function(e,i,s){var r="bgm.pause";i.on(`+${r}`,function(){methods_AppendCommand.call(e,r,PauseBackgroundMusic,void 0,e),i.skipEvent()}).on(`-${r}`,function(){methods_AppendCommand.call(e,"bgm.resume",ResumeBackgroundMusic,void 0,e),i.skipEvent()});var r="bgm2.pause";i.on(`+${r}`,function(){methods_AppendCommand.call(e,r,PauseBackgroundMusic2,void 0,e),i.skipEvent()}).on(`-${r}`,function(){methods_AppendCommand.call(e,"bgm2.resume",ResumeBackgroundMusic2,void 0,e),i.skipEvent()})},function(e,i,s){var r="bgm.volume";i.on(`+${r}`,function(s){methods_AppendCommand.call(e,r,SetBackgroundMusicVolume,s,e),i.skipEvent()}).on(`-${r}`,function(){i.skipEvent()});var r="bgm2.volume";i.on(`+${r}`,function(s){methods_AppendCommand.call(e,r,SetBackgroundMusicVolume2,s,e),i.skipEvent()}).on(`-${r}`,function(){i.skipEvent()})},function(e,i,s){var r="bgm.mute";i.on(`+${r}`,function(){methods_AppendCommand.call(e,r,SetBackgroundMusicMute,void 0,e),i.skipEvent()}).on(`-${r}`,function(){i.skipEvent()});var r="bgm2.mute";i.on(`+${r}`,function(){methods_AppendCommand.call(e,r,SetBackgroundMusic2Mute,void 0,e),i.skipEvent()}).on(`-${r}`,function(){i.skipEvent()});var r="bgm.unmute";i.on(`+${r}`,function(){methods_AppendCommand.call(e,r,SetBackgroundMusicUnMute,void 0,e),i.skipEvent()}).on(`-${r}`,function(){i.skipEvent()});var r="bgm2.unmute";i.on(`+${r}`,function(){methods_AppendCommand.call(e,r,SetBackgroundMusic2UnMute,void 0,e),i.skipEvent()}).on(`-${r}`,function(){i.skipEvent()})},function(e,i,s){var r="camera.fadein";i.on(`+${r}`,function(s,n,a,o){methods_AppendCommand.call(e,r,PlayFadeInEffect,[s,n,a,o],e),i.skipEvent()})},function(e,i,s){var r="camera.fadeout";i.on(`+${r}`,function(s,n,a,o){methods_AppendCommand.call(e,r,PlayFadeOutEffect,[s,n,a,o],e),i.skipEvent()})},function(e,i,s){var r="camera.shake";i.on(`+${r}`,function(s,n){methods_AppendCommand.call(e,r,PlayShakeEffect,[s,n],e),i.skipEvent()})},function(e,i,s){var r="camera.flash";i.on(`+${r}`,function(s,n,a,o){methods_AppendCommand.call(e,r,PlayFlashEffect,[s,n,a,o],e),i.skipEvent()})},function(e,i,s){var r="camera.zoom";i.on(`+${r}`,function(s){methods_AppendCommand.call(e,r,Zoom,s,e),i.skipEvent()}).on(`+${r}.to`,function(s,r,n){methods_AppendCommand.call(e,"camera.zoom.to",ZoomTo,[s,r,n],e),i.skipEvent()})},function(e,i,s){var r="camera.rotate";i.on(`+${r}`,function(s){s=sW(s),methods_AppendCommand.call(e,r,OnParseRotateCameraTag_Rotate,s,e),i.skipEvent()}).on(`+${r}.to`,function(s,r,n){s=sW(s),methods_AppendCommand.call(e,"camera.rotate.to",RotateTo,[s,r,n],e),i.skipEvent()})},function(e,i,s){var r="camera.scroll";i.on(`+${r}`,function(s,n){methods_AppendCommand.call(e,r,Scroll,[s,n],e),i.skipEvent()}).on(`+${r}.to`,function(s,r,n,a){methods_AppendCommand.call(e,"camera.scroll.to",ScrollTo,[s,r,n,a],e),i.skipEvent()})},function(e,i,s){var r="wait",n="click";i.on(`+${r}`,function(s){OnParseWaitTag_AppendCommand(e,s),i.skipEvent()}).on(`-${r}`,function(){i.skipEvent()}).on(`+${n}`,function(){OnParseWaitTag_AppendCommand(e,"click"),i.skipEvent()}).on(`-${n}`,function(){i.skipEvent()})},function(e,i,s){i.on("+r",function(){methods_AppendText.call(e,"\n"),i.skipEvent()}).on("-r",function(){i.skipEvent()})},function(e,i,s){for(var r=["pagebreak","pb"],n=0,a=r.length;n<a;n++){var o=r[n];i.on(`+${o}`,function(){methods_AppendText.call(e,"\f"),i.skipEvent()}).on(`-${o}`,function(){i.skipEvent()})}},function(e,i,s){i.on("+content.off",function(){i.setContentOutputEnable(!1),i.skipEvent()})},function(e,i,s){i.on("+content.on",function(){i.setContentOutputEnable(),i.skipEvent()})},function(e,i,s){i.on("content",function(s){if(i.contentOutputEnable)methods_AppendText.call(e,s);else{var r=`+${i.lastTagStart}`;e.emit(`parser.${r}#content`,i,s)}})},function(e,i,s){i.on("start",function(){e.emit("parser.start",i)}).on("+",function(s,...r){if(!i.skipEventFlag){var n=`+${s}`;e.emit(`parser.${n}`,i,...r,r),OnParseCustomTag_AppendCommand(e,n,r)}}).on("-",function(s){if(!i.skipEventFlag){var r=`-${s}`,n=[];e.emit(`parser.${r}`,i,n),OnParseCustomTag_AppendCommand(e,r,n)}}).on("complete",function(){e.emit("parser.complete",i)})}];var parser_AddParseCallbacks=function(e,i,s){for(var r=0,n=sV.length;r<n;r++)sV[r](e,i,s)},PreProcessSource=function(e,i){for(var s=e.commentLineStart,r=i.split("\n"),n=0,a=r.length;n<a;n++){var o=r[n];""===o||(0===o.trim().length?r[n]="":s&&o.startsWith(s)&&(r[n]=""))}return r.join("")};let sY=Phaser.Utils.Objects.GetValue;var sX=class extends sz{constructor(e,i){void 0===i&&(i={}),i.hasOwnProperty("delimiters")||(i.delimiters="[]"),super(i),parser_AddParseCallbacks(e,this,i),this.setCommentLineStartSymbol(sY(i,"comment","//")),this.setContentOutputEnable()}setCommentLineStartSymbol(e){return this.commentLineStart=e,this}setContentOutputEnable(e){return void 0===e&&(e=!0),this.contentOutputEnable=e,this}start(e){return super.start(PreProcessSource(this,e)),this}};let sH="page.fadeout",sU="_remove.play",sN=[sH,sU];var WaitEvent_WaitEvent=function(e,i){return new Promise(function(s,r){e.once(i,function(){s()})})},WaitComplete=function(e){return WaitEvent_WaitEvent(e,"complete")};let s$="anim";var Typing=function(e){void 0===e&&(e=0);var i=0;for(this.inTypingProcessLoop=!0;this.inTypingProcessLoop;){var s=this.getNextChild();if(!s){this.timeline.isRunning?this.timeline.once("complete",function(){this.isPageTyping=!1,this.emit("complete")},this):(this.isPageTyping=!1,this.emit("complete"));break}if(s.renderable){var r,n=this.animationConfig;if(n.duration>0){var a=this.timeline.addTimer({name:s$,target:s,duration:n.duration,yoyo:n.yoyo,onStart:n.onStart,onProgress:n.onProgress,onComplete:n.onComplete});this.skipTypingAnimation&&a.seek(1)}else n.onStart&&n.onStart(s,0);this.minSizeEnable&&this.textPlayer.setToMinSize(),this.textPlayer.emit("typing",s);var o=this.nextChild;if(o){if(this.skipSpaceEnable&&(r=o).type===e7&&" "===r.text);else if(i+=this.speed+e,e=0,i>0){this.typingTimer=this.timeline.addTimer({name:"delay",target:this,duration:i,onComplete:function(e,i,s){e.typingTimer=void 0,Typing.call(e,s.remainder)}});break}}}else s.type===e9&&s.exec()}this.minSizeEnable&&this.textPlayer.setToMinSize(),this.inTypingProcessLoop=!1},IsWaitCameraEffect=function(e){switch(e){case"camera.fadein":case"camera.fadeout":case"camera.flash":case"camera.shake":case"camera.zoom":case"camera.rotate":case"camera.scroll":return!0;default:return!1}},IsWaitGameObject=function(e,i){var s=i.split(".");return e.gameObjectManagers.hasOwnProperty(s[0])},WaitGameObject=function(e,i,s,r){var n=e.waitEventManager,a=i.split("."),o=a[0],h=e.getGameObjectManager(o),l=`wait.${o}`;switch(a.length){case 1:n.waitGameObjectManagerEmpty(o),e.emit(l);return;case 2:var c=a[1];n.waitGameObjectDestroy(o,c),e.emit(l,c);return;case 3:var c=a[1],g=a[2];if("number"==typeof h.getProperty(c,g)){n.waitGameObjectTweenComplete(o,c,g),e.emit(l,c,g);return}var m=g,x=m.startsWith("!");if(x&&(m=m.substring(1)),h.hasData(c,m)){n.waitGameObjectDataFlag(o,c,m,!x),e.emit(l,c,m);return}n.waitTime(0);return}};let sZ=Phaser.Input.Keyboard.KeyCodes;var wait_WaitAny=function(e,i,s,r){var n=e.waitEventManager;n.clearWaitCompleteCallbacks().addWaitCompleteCallback(s,r),i="string"==typeof i&&i.length>1&&-1!==i.indexOf("|")?i.split("|"):[i];for(var a=0,o=i.length;a<o;a++){var h=i[a];if(null==h||"wait"===h){var l=e.waitEventManager.getWaitCompleteTriggerCallback();e.emit("wait",l)}else if("number"!=typeof h&&isNaN(h)){if("click"===h)n.waitClick(),e.emit("wait.click");else if("se"===h){n.waitSoundEffectComplete();var c=e.soundManager.getLastSoundEffect();e.emit("wait.music",c)}else if("se2"===h){n.waitSoundEffect2Complete();var c=e.soundManager.getLastSoundEffect2();e.emit("wait.music",c)}else if("bgm"===h){n.waitBackgroundMusicComplete();var c=e.soundManager.getBackgroundMusic();e.emit("wait.music",c)}else if("bgm2"===h){n.waitBackgroundMusic2Complete();var c=e.soundManager.getBackgroundMusic2();e.emit("wait.music",c)}else if(sZ.hasOwnProperty(h.toUpperCase()))n.waitKeyDown(h),e.emit("wait.keydown",h);else if(IsWaitCameraEffect(h))n.waitCameraEffectComplete(h),e.emit("wait.camera",h);else if(IsWaitGameObject(e,h))WaitGameObject(e,h,s,r);else{var l=e.waitEventManager.getWaitCompleteTriggerCallback();e.emit(`wait.${h}`,l)}}else{var g=parseFloat(h);n.waitTime(g),e.emit("wait.time",g)}}},sK={fadeOutPage:function(){if(!this.fadeOutPageCallback||!this.children)return this.emit(sH),this;var e=this.children.filter(function(e){return e.renderable}),i=this.fadeOutPageCallback(e,this.fadeOutPageDuration);if(i){if(i.once)i.once("complete",function(){this.emit(sH)},this);else if(i.then){var s=this;i.then(function(){s.emit(sH)})}else this.emit(sH)}else this.emit(sH);return this},start:function(e){return this.children=e,this.index=0,this.isPageTyping=!0,this.onTypeStart&&this.onTypeStart(e),this.typing(),WaitComplete(this)},typing:Typing,pause:function(){return this.timeline.pause(),this},resume:function(){return this.timeline.resume(),this},pauseTyping:function(){return this.isTypingPaused||(this.typingTimer?(this.typingTimer.pause(),this.isTypingPaused=!0):this.inTypingProcessLoop&&(this.inTypingProcessLoop=!1,this.isTypingPaused=!0)),this},resumeTyping:function(e){return this.isTypingPaused&&(void 0===e&&(e=0),this.typingTimer?(this.isTypingPaused=!1,this.typingTimer.resume(),this.typingTimer.remainder+=e):this.isTypingPaused&&(this.isTypingPaused=!1,this.typing(e))),this},wait:function(e){return this.ignoreWait||(this.pauseTyping(),wait_WaitAny(this.textPlayer,e,this.resumeTyping,this)),this},setIgnoreWait:function(e){return void 0===e&&(e=!0),this.ignoreWait=e,this},setSkipSpaceEnable:function(e){return void 0===e&&(e=!0),this.skipSpaceEnable=e,this},setSkipTypingAnimation:function(e){if(void 0===e&&(e=!0),this.skipTypingAnimation=e,e)for(var i=this.timeline.getTimers(s$),s=0,r=i.length;s<r;s++)i[s].seek(1);return this},setSkipSoundEffect:function(e){if(void 0===e&&(e=!0),this.skipSoundEffect=e,e){var i=this.textPlayer._soundManager;i&&i.fadeOutAllSoundEffects(100,!0)}return this},skipCurrentTypingDelay:function(){return this.typingTimer&&this.typingTimer.seek(1),this}};Object.assign(sK,{setDefaultTypingSpeed(e){return this.defaultSpeed=e,this},setTypingSpeed(e){return void 0===e&&(e=this.defaultSpeed),this.speed=e,this}});let sJ=Phaser.Utils.Objects.GetValue;let TypeWriter=class TypeWriter{constructor(e,i){this.setEventEmitter(),this.textPlayer=e,this.isPageTyping=!1,this.typingTimer=void 0,this.pauseTypingTimer=void 0,this.inTypingProcessLoop=!1,this.isTypingPaused=!1,this.setIgnoreWait(!1),this.setSkipTypingAnimation(!1),this.setTypingStartCallback(sJ(i,"onTypingStart",SetChildrenInvisible)),this.setDefaultTypingSpeed(sJ(i,"speed",250)),this.setTypingSpeed(),this.setSkipSpaceEnable(sJ(i,"skipSpace",!1)),this.setAnimationConfig(sJ(i,"animation",void 0)),this.setMinSizeEnable(sJ(i,"minSizeEnable",!1)),this.setFadeOutPageCallback(sJ(i,"fadeOutPage"))}destroy(){this.destroyEventEmitter(),this.textPlayer=void 0,this.typingTimer=void 0,this.pauseTypingTimer=void 0,this.onTypeStart=void 0,this.animationConfig=void 0}get timeline(){return this.textPlayer.timeline}setTypingStartCallback(e){return this.onTypeStart=e,this}setAnimationConfig(e){return e||(e={}),e.hasOwnProperty("duration")||(e.duration=0),e.hasOwnProperty("onStart")||(e.onStart=SetChildVisible),this.animationConfig=e,this}setFadeOutPageCallback(e){return this.fadeOutPageCallback=e,this}setMinSizeEnable(e){return void 0===e&&(e=!0),this.minSizeEnable=e,this}getNextChild(){var e=this.nextChild;return this.index=Math.min(this.index+1,this.children.length),this._nextChild=void 0,e}get nextChild(){return this._nextChild||(this._nextChild=this.children[this.index]),this._nextChild}};var SetChildVisible=function(e){e.setVisible&&e.setVisible()},SetChildrenInvisible=function(e){for(var i=0,s=e.length;i<s;i++){var r=e[i];r.setVisible&&r.setVisible(!1)}};Object.assign(TypeWriter.prototype,iM.Z,sK);var sq=class extends iE{playAnimation(e){return this.gameObject.anims.timeScale=this.timeScale,this.gameObject.play(e),this}stopAnimation(){return this.gameObject.stop(),this}chainAnimation(e){return this.gameObject.chain(e),this}pauseAnimation(){return this.gameObject.anims.pause(),this}setTimeScale(e){return super.setTimeScale(e),this.gameObject.anims&&(this.gameObject.anims.timeScale=e),this}},sQ={};Object.assign(sQ,{playAnimation(e,i){return this.has(e)||this.add(e),this.get(e).playAnimation(i),this},stopAnimation(e){return this.has(e)&&this.get(e).stopAnimation(),this},chainAnimation(e,i){return this.has(e)&&this.get(e).chainAnimation(i),this},pauseAnimation(e){return this.has(e)&&this.get(e).pauseAnimation(),this}});let SpriteManager=class SpriteManager extends i${constructor(e,i){void 0===i&&(i={}),i.BobClass=sq,super(e,i)}setCreateGameObjectCallback(e,i){return e&&"sprite"!==e?"image"===e&&(e=CreateImage):e=CreateSprite,super.setCreateGameObjectCallback(e,i),this}};var CreateSprite=function(e,i,s){return"string"!=typeof s&&"number"!=typeof s&&(s=void 0),e.add.sprite(0,0,i,s)},CreateImage=function(e,i,s){return"string"!=typeof s&&"number"!=typeof s&&(s=void 0),e.add.image(0,0,i,s)};Object.assign(SpriteManager.prototype,sQ);var IsPlayAnimationTag=function(e,i){return 3===e.length&&e[0]===i&&"play"===e[2]},PlayAnimation=function(e){[i,s,r]=e;var i,s,r,n=r.shift(),a=this.getGameObjectManager(i);a.playAnimation(s,n),r.length>0&&a.chainAnimation(s,r)},StopAnimation=function(e){var i,s;[i,...s]=e,this.getGameObjectManager(i).stopAnimation(...s)},PauseAnimation=function(e){var i,s;[i,...s]=e,this.getGameObjectManager(i).pauseAnimation(...s)},ChainAnimation=function(e){var i,s;[i,...s]=e,this.getGameObjectManager(i).chainAnimation(...s)};let s0=[function(e,i,s){var r=s.name;i.on("+",function(s,...n){if(!i.skipEventFlag){var a,o=s.split(".");IsPlayAnimationTag(o,r)&&(a=o[1],methods_AppendCommand.call(e,`${r}.play`,PlayAnimation,[r,a,n],e),i.skipEvent())}}).on("+",function(s){if(!i.skipEventFlag){var n,a=s.split(".");3===a.length&&a[0]===r&&"stop"===a[2]&&(n=a[1],methods_AppendCommand.call(e,`${r}.stop`,StopAnimation,[r,n],e),i.skipEvent())}}).on("-",function(s){if(!i.skipEventFlag){var n,a=s.split(".");IsPlayAnimationTag(a,r)&&(n=a[1],methods_AppendCommand.call(e,`${r}.stop`,StopAnimation,[r,n],e),i.skipEvent())}})},function(e,i,s){var r=s.name;i.on("+",function(s){if(!i.skipEventFlag){var n,a=s.split(".");3===a.length&&a[0]===r&&"pause"===a[2]&&(n=a[1],methods_AppendCommand.call(e,`${r}.pause`,PauseAnimation,[r,n],e),i.skipEvent())}})},function(e,i,s){var r=s.name;i.on("+",function(s){if(!i.skipEventFlag){var n,a=s.split(".");if(3===a.length&&a[0]===r&&"chain"===a[2]){n=a[1];var o=Array.prototype.slice.call(arguments,1);methods_AppendCommand.call(e,`${r}.chain`,ChainAnimation,[r,n,o],e),i.skipEvent()}}})}];var spritemanager_AddSpriteManager=function(e){void 0===e&&(e={}),e.name="sprite",e.parseCallbacks=s0,this.addGameObjectManager(e,SpriteManager)},IsAddGameObjectTag=function(e,i){return 2===e.length&&e[0]===i},AddGameObject=function(e){var i,s;[i,...s]=e,this.getGameObjectManager(i).add(...s)},RemoveGameObject=function(e){var i,s;[i,...s]=e,this.getGameObjectManager(i).remove(...s)},RemoveAllSprites=function(e){this.getGameObjectManager(e).removeAll()},CallMethod=function(e){[i,s,r,...n]=e;var i,s,r,n,a=`${i}.${r}`;if(this.emit(a,s,...n),!(this.listenerCount(a)>0)){var o=this.getGameObjectManager(i);o.hasMethod(s,r)?o.call(s,r,...n):o.setProperty(s,r,n[0])}},s1={to:!0,yoyo:!0,from:!0,toLeft:!0,toRight:!0,toUp:!0,toDown:!0,yoyoLeft:!0,yoyoRight:!0,yoyoUp:!0,yoyoDown:!0,fromLeft:!0,fromRight:!0,fromUp:!0,fromDown:!0},EaseProperty=function(e){[i,s,r,n,a,o,h,l]=e;var i,s,r,n,a,o,h,l,c=this.getGameObjectManager(i),g=c.getProperty(s,r);if("number"==typeof g){l.endsWith("Left")||l.endsWith("Up")?l.startsWith("to")||l.startsWith("yoyo")?n=g-n:l.startsWith("from")&&(c.setProperty(s,r,g-n),n=g):l.endsWith("Right")||l.endsWith("Down")?l.startsWith("to")||l.startsWith("yoyo")?n=g+n:l.startsWith("from")&&(c.setProperty(s,r,g+n),n=g):"from"===l&&(c.setProperty(s,r,n),n=g);var m=l.startsWith("yoyo");c.easeProperty(s,r,n,a,o,h,m)}};let s2=[function(e,i,s){var r=s.name;i.on("+",function(s,...n){if(!i.skipEventFlag){var a,o=s.split(".");IsAddGameObjectTag(o,r)&&(a=o[1],methods_AppendCommand.call(e,`${r}.add`,AddGameObject,[r,a,...n],e),i.skipEvent())}}).on("-",function(s){if(!i.skipEventFlag){var n,a=s.split(".");IsAddGameObjectTag(a,r)&&(n=a[1],methods_AppendCommand.call(e,`${r}.remove`,RemoveGameObject,[r,n],e),i.skipEvent())}})},function(e,i,s){var r=s.name;i.on("-",function(s){!i.skipEventFlag&&s===r&&(methods_AppendCommand.call(e,`${r}.removeall`,RemoveAllSprites,r,e),i.skipEvent())})},function(e,i,s){var r=s.name;i.on("+",function(s,...n){if(!i.skipEventFlag){var a,o,h=s.split(".");3===h.length&&h[0]===r&&(a=h[1],o=h[2],methods_AppendCommand.call(e,`${r}.call`,CallMethod,[r,a,o,...n],e),i.skipEvent())}})},function(e,i,s){var r=s.name;e.getGameObjectManager(r),i.on("+",function(s,n,a,o,h){if(!i.skipEventFlag){var l,c,g,m=s.split(".");4===m.length&&m[0]===r&&s1[m[3]]&&(l=m[1],c=m[2],g=m[3],"number"==typeof o&&(h=o,o=void 0),methods_AppendCommand.call(e,`${r}.ease`,EaseProperty,[r,l,c,n,a,o,h,g],e),i.skipEvent())}})}],s5=sE.addGameObjectManager;var TypingNextPage=function(){return!this.isPlaying||this.isPageTyping||this.typeWriter.once(sH,_TypingNextPage,this).fadeOutPage(),this},_TypingNextPage=function(){var e=this.runWrap(this.lastWrapResult);this.lastWrapResult=e,this.emit("page.start");var OnTypingPageComplete=function(){this.emit(sU),e.isLastPage?this.emit("complete"):(this.emit("page.complete"),this.ignoreNextPageInput?TypingNextPage.call(this):this.nextPageInput&&this.nextPageInput(TypingNextPage,this))};this.once(sU,function(){this.typeWriter.off("complete",OnTypingPageComplete,this)},this),this.typeWriter.once("complete",OnTypingPageComplete,this).start(e.children)},s3={setClickTarget:function(e){return this.waitEventManager.setClickTarget(e),this},setCameraTarget:function(e){return this.waitEventManager.setCameraTarget(e),this},setNextPageInput:function(e){var i=this;e?"function"==typeof e?this.nextPageInput=function(s,r){var n=i.waitEventManager;n.clearWaitCompleteCallbacks().addWaitCompleteCallback(s,r);var a=n.getWaitCompleteTriggerCallback();e.call(i,a)}:this.nextPageInput=function(s,r){wait_WaitAny(i,e,s,r)}:this.nextPageInput=null},addImage:function(e,i){return this.imageManager.add(e,i),this},typingNextPage:TypingNextPage,wait:function(e){return this.typeWriter.wait(e),this},setIgnoreWait:function(e){return this.typeWriter.setIgnoreWait(e),this},setIgnoreNextPageInput:function(e){return void 0===e&&(e=!0),this.ignoreNextPageInput=e,this},showPage:function(){if(!this.isPlaying||!this.isPageTyping)return this;var e=this.typeWriter.speed,i=this.typeWriter.ignoreWait,s=this.typeWriter.skipTypingAnimation,r=this.typeWriter.skipSoundEffect;return this.typeWriter.once("complete",function(){this.typeWriter.setTypingSpeed(e).setIgnoreWait(i).setSkipTypingAnimation(s).setSkipSoundEffect(r)},this).setTypingSpeed(0).skipCurrentTypingDelay().setIgnoreWait(!0).setSkipTypingAnimation(!0).setSkipSoundEffect(!0),this}};Object.assign(s3,{addGameObjectManager(e,i){(e=e?object_Clone(e):{}).name||console.warn("[TextPlayer] Parameter 'name' is required in addGameObjectManager(config) method");var s=e.defaultLayer,r=e.createGameObject,n=this.layerManager;e.createGameObject=function(e,...i){var a=r.call(this,e,...i);return s&&n&&n.addToLayer(s,a),a},s5.call(this,e,i);var a=e.parseCallbacks;a=a?[...a,...s2]:s2;for(var o=0,h=a.length;o<h;o++)a[o](this,this.parser,e);return this}},{play(e){return this.isPlaying||(this.removeChildren(),this.parser.start(e),this.isPlaying=!0,this.once("complete",function(){this.isPlaying=!1},this),this.lastWrapResult=void 0,this.typingNextPage()),this},playPromise(e){var i=WaitComplete(this);return this.play(e),i}},{pause(){return this.timeline.pause(),this},pauseTyping(){return this.typeWriter.pauseTyping(),this}},{resume(){return this.timeline.resume(),this},resumeTyping(e){return this.typeWriter.resumeTyping(e),this}},{setDefaultTypingSpeed(e){return this.defaultTypingSpeed=e,this},setTypingSpeed(e){return this.typingSpeed=e,this}},{getSprite(e){return this.getGameObject("sprite",e)},addSprite(e,i){return this.addGameObject("sprite",e,i),this}},{setContentOutputEnable(e){return this.parser.setContentOutputEnable(e),this},setContentCallback(e,i){return this.contentCallback=e,this.contentCallbackScope=i,this}});var utils_ClearEvents=function(e){for(var i=0,s=sN.length;i<s;i++)e.emit(sN[i])};let s7=Phaser.Utils.Objects.IsPlainObject,s6=Phaser.Utils.Objects.GetValue;let TextPlayer_TextPlayer=class TextPlayer_TextPlayer extends managers_Extend(iO){constructor(e,i,s,r,n,a){s7(i)?a=i:s7(r)&&(a=r),void 0===a&&(a={});var o=a.text;delete a.text,super(e,i,s,r,n,a),this.type="rexTextPlayer",this.initManagers(e,a),this.parser=new sX(this,s6(a,"parser",void 0)),this.typeWriter=new TypeWriter(this,s6(a,"typing",void 0)),this._imageManager=void 0;var h=s6(a,"images",void 0);h&&this.addImage(h);var l=s6(a,"sprites");!1!==l&&null!==l&&spritemanager_AddSpriteManager.call(this,l),this.setIgnoreNextPageInput(s6(a,"ignoreNextPageInput",!1)),this.setNextPageInput(s6(a,"nextPageInput",null)),this.isPlaying=!1,o&&this.play(o)}get imageManager(){return void 0===this._imageManager&&(this._imageManager=new ImageManager(this.scene)),this._imageManager}get spriteManager(){return this.getGameObjectManager("sprite")}destroy(e){this.scene&&!this.ignoreDestroy&&(utils_ClearEvents(this),this.parser.destroy(),this.parser=void 0,this.typeWriter.destroy(e),this.typeWriter=void 0,this._imageManager&&this._imageManager.destroy(e),this._imageManager=void 0,this.destroyManagers(e),super.destroy(e))}get isPageTyping(){return this.typeWriter.isPageTyping}set defaultTypingSpeed(e){this.typeWriter.setDefaultTypingSpeed(e)}get defaultTypingSpeed(){return this.typeWriter.defaultTypingSpeed}set typingSpeed(e){this.typeWriter.setTypingSpeed(e)}get typingSpeed(){return this.typeWriter.speed}set timeScale(e){this.setTimeScale(e)}get timeScale(){return this.getTimeScale()}};Object.assign(TextPlayer_TextPlayer.prototype,s3),ObjectFactory.register("textPlayer",function(e,i,s,r,n){var a=new TextPlayer_TextPlayer(this.scene,e,i,s,r,n);return this.scene.add.existing(a),a}),(0,k.Z)(window,"RexPlugins.UI.TextPlayer",TextPlayer_TextPlayer);let s4={maxLength:["maxLength",void 0],minLength:["minLength",void 0],readOnly:["readOnly",!1]},s8={direction:["direction",void 0]};var CopyProperty=function(e,i,s){if("string"==typeof s)e.hasOwnProperty(s)&&(i[s]=e[s]);else if(Array.isArray(s))for(var r=0,n=s.length;r<n;r++)CopyProperty(e,i,s[r]);else for(var s in s)CopyProperty(e,i,s)},methods_CopyElementConfig=function(e){void 0===e&&(e={});var i={};return CopyProperty(e,i,"inputType"),CopyProperty(e,i,"type"),CopyProperty(e,i,"style"),CopyProperty(e,i,s8),CopyProperty(e,i,s4),i},HitTest=function(e,i){for(var s=e.scene,r=s.input.cameras.getCamerasBelowPointer(i),n=s.input.manager,a=[e],o=0,h=r.length;o<h;o++)if(n.hitTest(i,a,r[o],s9),s9.length>0)return s9.length=0,!0;return s9.length=0,!1},s9=[],input_IsPointerInHitArea=function(e,i,s,r){if(i)return!!((!s||s(e,i))&&HitTest(e,i)&&(!r||r(e,i)));for(var n=e.scene.input.manager,a=n.pointersTotal,o=n.pointers,h=0;h<a;h++)if(i=o[h],(!s||s(e,i))&&HitTest(e,i)&&(!r||r(e,i)))return!0;return!1},rt=void 0,SetLastOpenedEditor=function(e){e!==rt&&(void 0!==rt&&rt.close(),rt=e)},CloseLastOpenEditor=function(e){e===rt&&(rt=void 0)};let re=Phaser.Utils.Objects.GetValue;var utils_SetProperties=function(e,i,s){var r,n;for(var a in void 0===s&&(s={}),e)r=e[a],void 0!==(n=re(i,a,r[1]))&&(s[r[0]]=n);return s},callback=function(e){e.stopPropagation()},utils_StopPropagationTouchEvents=function(e){e.addEventListener("touchstart",callback,!1),e.addEventListener("touchmove",callback,!1),e.addEventListener("touchend",callback,!1),e.addEventListener("mousedown",callback,!1),e.addEventListener("mouseup",callback,!1),e.addEventListener("mousemove",callback,!1)},methods_EnterClose=function(){return this.close(),this.emit("keydown-ENTER",this.parent,this),this},methods_OnOpen=function(){this.isOpened=!0,this.initText(),this.enterCloseEnable&&this.scene.input.keyboard.once("keydown-ENTER",methods_EnterClose,this),this.scene.sys.events.on("postupdate",this.updateText,this),this.scene.input.on("pointerdown",this.onClickOutside,this),this.onOpenCallback&&this.onOpenCallback(this.parent,this),this.emit("open",this)},methods_RemoveElement=function(e){if(e){var i=e.parentElement;i&&i.removeChild(e)}},methods_OnClose=function(){this.isOpened=!1,this.updateText(),this.scene.sys.events.off("postupdate",this.updateText,this),this.scene.input.off("pointerdown",this.onClickOutside,this),this.onCloseCallback&&this.onCloseCallback(this.parent,this),methods_RemoveElement(this.node),this.node=void 0,this.emit("close",this)};let ri=Phaser.Utils.Objects.GetValue;var methods_CreateElement=function(e,i){var s,r=ri(i,"inputType",void 0);void 0===r&&(r=ri(i,"type","text")),"textarea"===r?(s=document.createElement("textarea")).style.resize="none":(s=document.createElement("input")).type=r;var n=ri(i,"style",void 0),a=s.style;utils_SetProperties(s8,n,a),a.position="absolute",a.opacity=0,a.pointerEvents="none",a.zIndex=0,a.transform="scale(0)",utils_SetProperties(s4,i,s),utils_StopPropagationTouchEvents(s);var o=e.scene.sys.scale;return(o.isFullscreen?o.fullscreenTarget:document.body).appendChild(s),s.addEventListener("focus",function(i){methods_OnOpen.call(e)}),s.addEventListener("blur",function(i){methods_OnClose.call(e)}),s};let rs=Phaser.Utils.Objects.GetValue;let HiddenTextEditBase=class HiddenTextEditBase extends i0{constructor(e,i){super(e);var s=rs(i,"inputType",void 0);void 0===s&&(s=rs(i,"type","text")),this.setEnterCloseEnable(rs(i,"enterClose","textarea"!==s));var r=rs(i,"onOpen",void 0);r||(r=rs(i,"onFocus",void 0)),this.onOpenCallback=r;var n=rs(i,"onClose",void 0);n||(n=rs(i,"onBlur",void 0)),this.onCloseCallback=n,this.onUpdateCallback=rs(i,"onUpdate",void 0),this.isOpened=!1,e.on("pointerdown",function(){this.open()},this).setInteractive(),this.nodeConfig=methods_CopyElementConfig(i),this.node=void 0}destroy(){this.close(),super.destroy()}onClickOutside(e){input_IsPointerInHitArea(this.parent,e)||this.close()}setEnterCloseEnable(e){return void 0===e&&(e=!0),this.enterCloseEnable=e,this}initText(){}updateText(){}get text(){return this.node?this.node.value:""}set text(e){this.node&&(this.node.value=e)}setText(e){return this.text=e,this}get maxLength(){return this.nodeConfig.maxLength}set maxLength(e){this.nodeConfig.maxLength=e,this.node&&(this.node.maxLength=e)}setMaxLength(e){return this.maxLength=e,this}get minLength(){return this.nodeConfig.minLength}set minLength(e){this.nodeConfig.minLength=e,this.node&&(this.node.minLength=e)}setMinLength(e){return this.minLength=e,this}get placeholder(){return this.node.placeholder}set placeholder(e){this.node&&(this.node.placeholder=e)}setPlaceholder(e){return this.placeholder=e,this}selectText(e,i){return this.node&&(void 0===e?this.node.select():this.node.setSelectionRange(e,i)),this}selectAll(){return this.selectText(),this}get selectionStart(){return this.node?this.node.selectionStart:0}get selectionEnd(){return this.node?this.node.selectionEnd:0}get selectedText(){if(!this.node)return"";var e=this.node;return e.value.substring(e.selectionStart,e.selectionEnd)}get cursorPosition(){return this.node?this.node.selectionStart:0}set cursorPosition(e){this.node&&this.node.setSelectionRange(e,e)}setCursorPosition(e){return void 0===e?e=this.text.length:e<0&&(e=this.text.length+e),this.cursorPosition=e,this}get tooltip(){return this.node?this.node.title:""}set tooltip(e){if(!this.node)return this;this.node.title=e}setTooltip(e){return this.tooltip=e,this}setTextChangedCallback(e){return this.onTextChanged=e,this}get readOnly(){return this.nodeConfig.readOnly}set readOnly(e){this.nodeConfig.readOnly=e,this.node&&(this.node.readOnly=e)}setReadOnly(e){return void 0===e&&(e=!0),this.readOnly=e,this}get spellCheck(){return this.node?this.node.spellcheck:""}set spellCheck(e){this.node&&(this.node.spellcheck=e)}setSpellCheck(e){return this.spellCheck=e,this}get fontColor(){if(this.node)return this.node.style.color}set fontColor(e){this.node&&(this.node.style.color=e)}setFontColor(e){return this.fontColor=e,this}setStyle(e,i){return this.node&&(this.node.style[e]=i),this}getStyle(e){if(this.node)return this.node.style[e]}scrollToBottom(){return this.node&&(this.node.scrollTop=this.node.scrollHeight),this}setEnabled(e){return this.node&&(void 0===e&&(e=!0),this.node.disabled=!e),this}setBlur(){return this.node&&this.node.blur(),this}setFocus(){return this.node&&this.node.focus(),this}get isFocused(){return this.isOpened}};Object.assign(HiddenTextEditBase.prototype,{open:function(){return this.isOpened||this.readOnly||(SetLastOpenedEditor(this),this.node||(this.node=methods_CreateElement(this,this.nodeConfig)),this.setFocus()),this},close:function(){return this.isOpened&&(CloseLastOpenEditor(this),this.setBlur()),this}});var rr=HiddenTextEditBase,defaultcallbacks_NumberInputUpdateCallback=function(e,i,s){e=e.replace(" ","");var r=s.previousText;if(e===r)return e;if(isNaN(e)){s.emit("nan",e,s),e=r;var n=s.cursorPosition-1;s.setText(e),s.setCursorPosition(n)}else s.previousText=e;return e},textedit_SelectRange=function(e){var i=e.parent,s=e.isOpened?e.selectionStart:null,r=e.isOpened?e.selectionEnd:null,n=e.prevSelectionStart,a=e.prevSelectionEnd;if(n!==s||a!==r){null===n?(h=s,l=r):null===s?(h=n,l=a):(h=Math.min(n,s),l=Math.max(a,r));for(var o=h;o<l;o++)if((c=null!==n&&o>=n&&o<a)!=(null!==s&&o>=s&&o<r)){var h,l,c,g=i.getCharChild(o);if(g){var m=c?"cursorout":"cursorin";i.emit(m,g,o,i)}}e.prevSelectionStart=s,e.prevSelectionEnd=r}},utils_ScrollToBob=function(e){var i=e.parent,s=i.width,r=i.height,n=e.drawX,a=e.drawY,o=n+e.drawTLX,h=n+e.drawTRX,l=a+e.drawTLY,c=a+e.drawBLY;i._textOX+=o<0?0-o:h>s?s-h:0,i._textOY+=l<0?0-l:c>r?r-c:0},textedit_MoveCursor=function(e){var i=e.parent,s=i.text,r=e.cursorPosition;if(e.prevCursorPosition!==r){if(null!==e.prevCursorPosition&&e.prevCursorPosition>s.length&&(e.prevCursorPosition=null),null!==e.prevCursorPosition){var n=i.getCharChild(e.prevCursorPosition);n&&("\n"===n.text&&n.clearTextSize(),i.emit("cursorout",n,e.prevCursorPosition,i))}if(null!=r){var n=i.getCharChild(r);n&&("\n"===n.text&&n.copyTextSize(i.lastInsertCursor),utils_ScrollToBob(n),i.emit("cursorin",n,r,i))}i.emit("movecursor",r,e.prevCursorPosition,i),e.prevCursorPosition=r}},textedit_ClearSelectRange=function(e){var i=e.prevSelectionStart;if(null!==i){for(var s=e.prevSelectionEnd,r=e.parent,n=i;n<s;n++){var a=r.getCharChild(n);a&&r.emit("cursorout",a,n,r)}e.prevSelectionStart=null,e.prevSelectionEnd=null}},textedit_ClearCursor=function(e){var i=e.prevCursorPosition;if(null!==i){var s=e.parent,r=s.getCharChild(i);r&&s.emit("cursorout",r,i,s),e.prevCursorPosition=null}};let rn=Phaser.Utils.Objects.GetValue;var ro=class extends rr{constructor(e,i){super(e,i),this.setSelectAllWhenFocusEnable(rn(i,"selectAll",!1)),this.cursorMoveStartIndex=null,this.prevCursorPosition=null,this.prevSelectionStart=null,this.prevSelectionEnd=null,this.firstClickAfterOpen=!1,e.on("pointerdown",function(i,s,r,n){var a=e.getNearestChild(s,r),o=e.getCharIndex(a);this.selectAllWhenFocus&&this.firstClickAfterOpen||this.setCursorPosition(o),this.cursorMoveStartIndex=o,this.firstClickAfterOpen=!1},this).on("pointermove",function(i,s,r,n){if(i.isDown){var a=e.getNearestChild(s,r),o=e.getCharIndex(a);this.cursorMoveStartIndex<o?this.selectText(this.cursorMoveStartIndex,o+1):this.selectText(o,this.cursorMoveStartIndex+1)}},this),this.on("open",function(){this.selectAllWhenFocus&&this.selectAll(),this.firstClickAfterOpen=!0,e.emit("open")},this).on("close",function(){e.emit("close")}).on("keydown-ENTER",function(){e.emit("keydown-ENTER")})}initText(){var e=this.parent;return this.prevCursorPosition=null,this.setText(e.text),this}updateText(){var e=this.parent,i=this.text;if(this.onUpdateCallback){var s=this.onUpdateCallback(i,e,this);null!=s&&(i=s)}return e.text!==i&&e.setText(i),this.isOpened?this.selectionStart!==this.selectionEnd?(textedit_ClearCursor(this),textedit_SelectRange(this)):(textedit_ClearSelectRange(this),textedit_MoveCursor(this)):(textedit_ClearSelectRange(this),textedit_ClearCursor(this)),this}setNumberInput(){return this.onUpdateCallback=defaultcallbacks_NumberInputUpdateCallback,this}setSelectAllWhenFocusEnable(e){return void 0===e&&(e=!0),this.selectAllWhenFocus=e,this}};let rh=Phaser.Utils.Objects.GetValue,rl=["inputType","onOpen","onFocus","onClose","onBlur","onUpdate","enterClose","readOnly","maxLength","minLength","selectAll"];var textedit_CreateHiddenTextEdit=function(e,i){var s=rh(i,"edit");return void 0===s&&(s={}),CopyProperty(i,s,rl),new ro(e,s)},object_HasValue=function(e,i){if(!e||"number"==typeof e)return!1;if(e.hasOwnProperty(i))return!0;if(-1===i.indexOf("."))return!1;for(var s=i.split("."),r=e,n=0;n<s.length;n++){if(!r.hasOwnProperty(s[n]))return!1;r=r[s[n]]}return!0},methods_InjectDefaultConfig=function(e){var i=!e.textArea;if(!object_HasValue(e,"wrap.vAlign")){var s=i?"center":"top";(0,k.Z)(e,"wrap.vAlign",s)}if(object_HasValue(e,"wrap.charWrap")||(0,k.Z)(e,"wrap.charWrap",!0),!object_HasValue(e,"wrap.maxLines")){var s=i?1:void 0;(0,k.Z)(e,"wrap.maxLines",s)}if(i&&(0,k.Z)(e,"wrap.wrapWidth",1/0),object_HasValue(e,"wrap.useDefaultTextHeight")||(0,k.Z)(e,"wrap.useDefaultTextHeight",!0),e.edit||(e.edit={}),!object_HasValue(e.edit,"inputType")){var s=i?"text":"textarea";(0,k.Z)(e.edit,"inputType",s)}return e},object_ExtractByPrefix=function(e,i,s,r){if(void 0===s&&(s="."),void 0===r&&(r={}),!e)return r;if(i in e)return Object.assign(r,e[i]);for(var n in i+=s,e)n.startsWith(i)&&(r[n.replace(i,"")]=e[n]);return r},object_GetPartialData=function(e,i,s){if(void 0===s&&(s={}),Array.isArray(i))for(var r,n=0,a=i.length;n<a;n++)s[r=i[n]]=e[r];else for(var r in i)s[r]=e[r];return s},object_IsKeyValueEqual=function(e,i){for(var s in e)if(!(s in i)||e[s]!==i[s])return!1;for(var s in i)if(!(s in e))return!1;return!0},methods_RegisterCursorStyle=function(e){object_IsEmpty(e)||this.setCursorStyle(e).on("cursorin",function(e){var i=this.cursorStyle,s=object_GetPartialData(e.style,i);object_IsKeyValueEqual(i,s)||(e.styleSave=s,e.modifyStyle(i))},this).on("cursorout",function(e){e.styleSave&&(e.modifyStyle(e.styleSave),e.styleSave=void 0)},this)},methods_RegisterFocusStyle=function(e){object_IsEmpty(e)||this.setFocusStyle(e).on("open",function(){var e=this.background,i=this.focusStyle,s=object_GetPartialData(e,i);object_IsKeyValueEqual(i,s)||(e.styleSave=s,e.modifyStyle(i))},this).on("close",function(){var e=this.background;e.styleSave&&(e.modifyStyle(e.styleSave),e.styleSave=void 0)},this)},methods_CreateInsertCursorChild=function(e){var i=e.createCharChild("|");return i.text="",i};function Diff(){}Diff.prototype={diff(e,i,s={}){let r=s.callback;"function"==typeof s&&(r=s,s={}),this.options=s;let n=this;function done(e){return r?(setTimeout(function(){r(void 0,e)},0),!0):e}e=this.castInput(e),i=this.castInput(i),e=this.removeEmpty(this.tokenize(e));let a=(i=this.removeEmpty(this.tokenize(i))).length,o=e.length,h=1,l=a+o;s.maxEditLength&&(l=Math.min(l,s.maxEditLength));let c=[{newPos:-1,components:[]}],g=this.extractCommon(c[0],i,e,0);if(c[0].newPos+1>=a&&g+1>=o)return done([{value:this.join(i),count:i.length}]);function execEditLength(){for(let s=-1*h;s<=h;s+=2){let r;let h=c[s-1],l=c[s+1],g=(l?l.newPos:0)-s;h&&(c[s-1]=void 0);let m=h&&h.newPos+1<a,x=l&&0<=g&&g<o;if(!m&&!x){c[s]=void 0;continue}if(!m||x&&h.newPos<l.newPos?(r={newPos:l.newPos,components:l.components.slice(0)},n.pushComponent(r.components,void 0,!0)):(r=h,r.newPos++,n.pushComponent(r.components,!0,void 0)),g=n.extractCommon(r,i,e,s),r.newPos+1>=a&&g+1>=o)return done(function(e,i,s,r,n){let a=0,o=i.length,h=0,l=0;for(;a<o;a++){let o=i[a];if(o.removed){if(o.value=e.join(r.slice(l,l+o.count)),l+=o.count,a&&i[a-1].added){let e=i[a-1];i[a-1]=i[a],i[a]=e}}else{if(!o.added&&n){let i=s.slice(h,h+o.count);i=i.map(function(e,i){let s=r[l+i];return s.length>e.length?s:e}),o.value=e.join(i)}else o.value=e.join(s.slice(h,h+o.count));h+=o.count,o.added||(l+=o.count)}}let c=i[o-1];return o>1&&"string"==typeof c.value&&(c.added||c.removed)&&e.equals("",c.value)&&(i[o-2].value+=c.value,i.pop()),i}(n,r.components,i,e,n.useLongestToken));c[s]=r}h++}if(r)!function exec(){setTimeout(function(){if(h>l)return r();execEditLength()||exec()},0)}();else for(;h<=l;){let e=execEditLength();if(e)return e}},pushComponent(e,i,s){let r=e[e.length-1];r&&r.added===i&&r.removed===s?e[e.length-1]={count:r.count+1,added:i,removed:s}:e.push({count:1,added:i,removed:s})},extractCommon(e,i,s,r){let n=i.length,a=s.length,o=e.newPos,h=o-r,l=0;for(;o+1<n&&h+1<a&&this.equals(i[o+1],s[h+1]);)o++,h++,l++;return l&&e.components.push({count:l}),e.newPos=o,h},equals(e,i){return this.options.comparator?this.options.comparator(e,i):e===i||this.options.ignoreCase&&e.toLowerCase()===i.toLowerCase()},removeEmpty(e){let i=[];for(let s=0;s<e.length;s++)e[s]&&i.push(e[s]);return i},castInput:e=>e,tokenize:e=>e.split(""),join:e=>e.join("")};let rd=new Diff,rc=/^[a-zA-Z\u{C0}-\u{FF}\u{D8}-\u{F6}\u{F8}-\u{2C6}\u{2C8}-\u{2D7}\u{2DE}-\u{2FF}\u{1E00}-\u{1EFF}]+$/u,ru=/\S/,rp=new Diff;rp.equals=function(e,i){return this.options.ignoreCase&&(e=e.toLowerCase(),i=i.toLowerCase()),e===i||this.options.ignoreWhitespace&&!ru.test(e)&&!ru.test(i)},rp.tokenize=function(e){let i=e.split(/([^\S\r\n]+|[()[\]{}'"\r\n]|\b)/);for(let e=0;e<i.length-1;e++)!i[e+1]&&i[e+2]&&rc.test(i[e])&&rc.test(i[e+2])&&(i[e]+=i[e+2],i.splice(e+1,2),e--);return i};let rg=new Diff;rg.tokenize=function(e){let i=[],s=e.split(/(\n|\r\n)/);s[s.length-1]||s.pop();for(let e=0;e<s.length;e++){let r=s[e];e%2&&!this.options.newlineIsToken?i[i.length-1]+=r:(this.options.ignoreWhitespace&&(r=r.trim()),i.push(r))}return i};let rv=new Diff;rv.tokenize=function(e){return e.split(/(\S.+?[.!?])(?=\s+|$)/)};let rf=new Diff;rf.tokenize=function(e){return e.split(/([{}:;,]|\s+)/)};let rm=Object.prototype.toString,rb=new Diff;rb.useLongestToken=!0,rb.tokenize=rg.tokenize,rb.castInput=function(e){let{undefinedReplacement:i,stringifyReplacer:s=(e,s)=>void 0===s?i:s}=this.options;return"string"==typeof e?e:JSON.stringify(function canonicalize(e,i,s,r,n){let a,o;for(i=i||[],s=s||[],r&&(e=r(n,e)),a=0;a<i.length;a+=1)if(i[a]===e)return s[a];if("[object Array]"===rm.call(e)){for(i.push(e),o=Array(e.length),s.push(o),a=0;a<e.length;a+=1)o[a]=canonicalize(e[a],i,s,r,n);return i.pop(),s.pop(),o}if(e&&e.toJSON&&(e=e.toJSON()),"object"==typeof e&&null!==e){i.push(e),o={},s.push(o);let n=[],h;for(h in e)e.hasOwnProperty(h)&&n.push(h);for(n.sort(),a=0;a<n.length;a+=1)o[h=n[a]]=canonicalize(e[h],i,s,r,h);i.pop(),s.pop()}else o=e;return o}(e,null,null,s),s,"  ")},rb.equals=function(e,i){return Diff.prototype.equals.call(rb,e.replace(/,([\r\n])/g,"$1"),i.replace(/,([\r\n])/g,"$1"))};let ry=new Diff;ry.tokenize=function(e){return e.slice()},ry.join=ry.removeEmpty=function(e){return e};let rC=Phaser.Utils.Array.Remove;var canvasinput_methods_SetText=function(e,i){var s=e.text;if(i!==s){if(null==s&&(s=""),rC(e.children,e.lastInsertCursor),""===i)e.removeChildren();else for(var r,n=(r=s,rd.diff(r,i,void 0)),a=0,o=0,h=n.length;o<h;o++){var l=n[o];l.removed?e.removeText(a,l.count):(l.added&&e.insertText(a,l.value),a+=l.count)}e.children.push(e.lastInsertCursor),e.runWrap(),e.emit("textchange",i,e)}};let rx=Phaser.Utils.Objects.IsPlainObject;let CanvasInput_CanvasInput=class CanvasInput_CanvasInput extends iO{constructor(e,i,s,r,n,a){rx(i)?a=i:rx(r)&&(a=r),void 0===a&&(a={}),methods_InjectDefaultConfig(a);var o=a.text;o&&delete a.text;var h=object_ExtractByPrefix(a.background,"focus"),l=object_ExtractByPrefix(a.style,"cursor");super(e,i,s,r,n,a),this.type="rexCanvasInput",this.contentWidth=void 0,this.contentHeight=void 0,this.lineHeight=void 0,this.linesCount=void 0,this._text,this.textEdit=textedit_CreateHiddenTextEdit(this,a),a.focusStyle&&Object.assign(h,a.focusStyle),methods_RegisterFocusStyle.call(this,h),a.cursorStyle&&Object.assign(l,a.cursorStyle),methods_RegisterCursorStyle.call(this,l);var c=a.onAddChar;c&&this.on("addchar",c);var g=a.onCursorOut;g&&this.on("cursorout",g);var m=a.onCursorIn;m&&this.on("cursorin",m);var x=a.onMoveCursor;x&&this.on("movecursor",x),this.setParseTextCallback(a.parseTextCallback),this.lastInsertCursor=methods_CreateInsertCursorChild(this),o||(o=""),this.setText(o)}addChild(e,i){if(super.addChild(e,i),Array.isArray(e))for(var s=e,r=0,n=s.length;r<n;r++){var e=s[r];IsChar(e)&&this.emit("addchar",e,i+r,this)}else IsChar(e)&&this.emit("addchar",e,i,this);return this}get text(){return this._text}set text(e){e=null==e?"":e.toString(),this._text!==e&&(canvasinput_methods_SetText(this,e),this._text=e)}setText(e){return this.text=e,this}appendText(e){return this.setText(this.text+e),this}runWrap(e){var i=super.runWrap(e);return this.contentWidth=i.maxLineWidth,this.contentHeight=i.linesHeight,this.lineHeight=i.lineHeight,this.linesCount=i.lines.length,i}setSize(e,i){return this.width===e&&this.height===i||(super.setSize(e,i),this.runWrap()),this}get displayText(){return this.text}set displayText(e){this.text=e}setDisplayText(e){return this.displayText=e,this}get inputText(){return this.textEdit.text}set inputText(e){this.textEdit.text=e}setInputText(e){return this.inputText=e,this}setParseTextCallback(e){return e||(e=DefaultParseTextCallback),this.parseTextCallback=e,this}get value(){return this.parseTextCallback(this.text)}set value(e){this.setText(e)}getValue(){return this.value}setValue(e){return this.value=e,this}get readOnly(){return this.textEdit.readOnly}set readOnly(e){this.textEdit.readOnly=e}setReadOnly(e){return this.textEdit.setReadOnly(e),this}open(e){return e&&this.textEdit.once("close",e),this.textEdit.open(),this}close(){return this.textEdit.close(),this}get isOpened(){return this.textEdit.isOpened}setFocusStyle(e){return this.focusStyle=e,this}setCursorStyle(e){return this.cursorStyle=e,this}setNumberInput(){return this.textEdit.setNumberInput().setSelectAllWhenFocusEnable(),this.parseTextCallback=Number,this}get maxLength(){return this.textEdit.maxLength}set maxLength(e){this.textEdit.maxLength=e}setMaxLength(e){return this.maxLength=e,this}get minLength(){return this.textEdit.minLength}set minLength(e){this.textEdit.minLength=e}setMinLength(e){return this.minLength=e,this}get topTextOY(){return 0}get bottomTextOY(){return-this.tableVisibleHeight}get leftTextOX(){return 0}get rightTextOX(){return-this.textVisibleWidth}get textVisibleHeight(){var e=this.contentHeight-this.height;return e<0&&(e=0),e}get textVisibleWidth(){var e=this.contentWidth-this.width;return e<0&&(e=0),e}set t(e){this.setTextOYByPercentage(e).updateTexture()}get t(){return this.getTextOYPercentage()}set s(e){this.setTextOXByPercentage(e).updateTexture()}get s(){return this.getTextOXPercentage()}};var DefaultParseTextCallback=function(e){return e};Object.assign(CanvasInput_CanvasInput.prototype,{setTextOYByPercentage(e){return this.setTextOY(-this.textVisibleHeight*e),this},getTextOYPercentage(){var e=this.textVisibleHeight;return 0===e?0:-(this._textOY/e)},setTextOXByPercentage(e){return this.setTextOX(-this.textVisibleWidth*e),this},getTextOXPercentage(){var e=this.textVisibleWidth;return 0===e?0:-(this._textOX/e)}}),ObjectFactory.register("canvasInput",function(e,i,s,r,n){var a=new CanvasInput_CanvasInput(this.scene,e,i,s,r,n);return this.scene.add.existing(a),a}),(0,k.Z)(window,"RexPlugins.UI.CanvasInput",CanvasInput_CanvasInput);var system_GetTickDelta=function(e){return system_GetGame(e).loop.delta};let rS=Phaser.Utils.Objects.GetValue,r_=Phaser.Math.Wrap;var rw=class extends rr{constructor(e,i){void 0===i&&(i={}),"number"===i.onUpdate&&(i.onUpdate=defaultcallbacks_NumberInputUpdateCallback),super(e,i),this.setCursor(rS(i,"cursor","|")),this.setCursorFlashDuration(rS(i,"cursorFlashDuration",1e3)),this.cursorFlashTimer=0}initText(){return this.cursorFlashTimer=0,this.prevCursorPosition=void 0,this.setText(this.parent.text),this.setCursorPosition(),this}updateText(){var e=this.parent,i=this.text;if(this.onUpdateCallback){var s=this.onUpdateCallback(i,e,this);null!=s&&(i=s)}if(this.isOpened&&this.hasCursor){var r=this.cursorPosition;i=i.substring(0,r)+this.cursor+i.substring(r),this.prevCursorPosition!==r&&(this.prevCursorPosition=r)}return e.text!==i&&(e.setText(i),this.emit("textchange",i,e,this)),this}setCursor(e){return this._cursor=e,this.hasCursor=e&&""!==e,e}setCursorFlashDuration(e){return this.cursorFlashDuration=e,this}get cursor(){if(!this._isFocused)return this._cursor;e=this.cursorFlashTimer<this.cursorFlashDuration/2?this._cursor:" ";var e,i=this.cursorFlashTimer+system_GetTickDelta(this.scene);return this.cursorFlashTimer=r_(i,0,this.cursorFlashDuration),e}};ObjectFactory.register("hiddenEdit",function(e,i){return new rw(e,i)}),(0,k.Z)(window,"RexPlugins.UI.HiddenEdit",rw);let rP=Phaser.GameObjects.GetCalcMatrix,rk=Phaser.Renderer.Canvas.SetTransform,rT=Phaser.GameObjects.Shape,rO=Phaser.Utils.Array.Remove;let BaseShapes=class BaseShapes extends rT{constructor(e,i,s,r,n){void 0===i&&(i=0),void 0===s&&(s=0),void 0===r&&(r=2),void 0===n&&(n=r),super(e,"rexShapes",[]),this._width=-1,this._height=-1,this.dirty=!0,this.isSizeChanged=!0,this.shapes={},this.setPosition(i,s),this.setSize(r,n),this.updateDisplayOrigin()}get width(){return this._width}set width(e){this.setSize(e,this._height)}get height(){return this._height}set height(e){this.setSize(this._width,e)}setDirty(e){return void 0===e&&(e=!0),this.dirty=e,this}setSize(e,i){this.isSizeChanged=this.isSizeChanged||this._width!==e||this._height!==i,this.dirty=this.dirty||this.isSizeChanged,this._width=e,this._height=i,this.updateDisplayOrigin();var s=this.input;return s&&!s.customHitArea&&(s.hitArea.width=e,s.hitArea.height=i),this}resize(e,i){return this.setSize(e,i),this}get fillColor(){return this._fillColor}set fillColor(e){this.setFillStyle(e,this._fillAlpha)}get fillAlpha(){return this._fillAlpha}set fillAlpha(e){this.setFillStyle(this._fillColor,e)}setFillStyle(e,i){return void 0===i&&(i=1),this.dirty=this.dirty||this.fillColor!==e||this.fillAlpha!==i,this._fillColor=e,this._fillAlpha=i,this}get lineWidth(){return this._lineWidth}set lineWidth(e){this.setStrokeStyle(e,this._strokeColor,this._strokeAlpha)}get strokeColor(){return this._strokeColor}set strokeColor(e){this.setStrokeStyle(this._lineWidth,e,this._strokeAlpha)}get strokeAlpha(){return this._strokeAlpha}set strokeAlpha(e){this.setStrokeStyle(this._lineWidth,this._strokeColor,e)}setStrokeStyle(e,i,s){return void 0===s&&(s=1),this.dirty=this.dirty||this.lineWidth!==e||this.strokeColor!==i||this.strokeAlpha!==s,this._lineWidth=e,this._strokeColor=i,this._strokeAlpha=s,this}updateShapes(){}updateData(){if(!this.dirty)return this;this.updateShapes();for(var e=this.geom,i=0,s=e.length;i<s;i++){var r=e[i];r.dirty&&r.updateData()}return this.isSizeChanged=!1,this.dirty=!1,this}clear(){return this.geom.length=0,object_Clear(this.shapes),this}getShape(e){return this.shapes[e]}getShapes(){return this.geom}addShape(e){this.geom.push(e);var i=e.name;return i&&(this.shapes[i]=e),this.dirty=!0,this}deleteShape(e){var i=this.getShape(e);return i&&(delete this.shapes[e],rO(this.geom,i)),this}};Object.assign(BaseShapes.prototype,{renderWebGL:function(e,i,s,r){i.updateData(),s.addToRenderList(i);var n=e.pipelines.set(i.pipeline),a=rP(i,s,r),o=n.calcMatrix.copyFrom(a.calc),h=i._displayOriginX,l=i._displayOriginY,c=s.alpha*i.alpha;e.pipelines.preBatch(i);for(var g,m=i.geom,x=0,S=m.length;x<S;x++)(g=m[x]).visible&&g.webglRender(n,o,c,h,l);e.pipelines.postBatch(i)},renderCanvas:function(e,i,s,r){i.updateData(),s.addToRenderList(i);var n=e.currentContext;if(rk(e,n,i,s,r)){for(var a,o=i._displayOriginX,h=i._displayOriginY,l=i.geom,c=0,g=l.length;c<g;c++)(a=l[c]).visible&&a.canvasRender(n,o,h);n.restore()}}});var rM=BaseShapes;let BaseGeom=class BaseGeom{constructor(){this.name=void 0,this.dirty=!0,this.visible=!0,this.data=void 0,this.isFilled=!1,this.fillColor=void 0,this.fillAlpha=1,this.isStroked=!1,this.lineWidth=1,this.strokeColor=void 0,this.strokeAlpha=1}setName(e){return this.name=e,this}setVisible(e){return void 0===e&&(e=!0),this.visible=e,this}reset(){return this.setVisible().fillStyle().lineStyle(),this}webglRender(e,i,s,r,n){}canvasRender(e,i,s){}updateData(){this.dirty=!1}};Object.assign(BaseGeom.prototype,{fillStyle:function(e,i){return null==e?this.isFilled=!1:(void 0===i&&(i=1),this.isFilled=!0,this.fillColor=e,this.fillAlpha=i),this},lineStyle:function(e,i,s){return null==e||null==i?this.isStroked=!1:(void 0===s&&(s=1),this.isStroked=!0,this.lineWidth=e,this.strokeColor=i,this.strokeAlpha=s),this}},td);var rE=BaseGeom,rR=s(58470),rL=s(34970),rB=s(91002),rI=s(71549);let rG=Phaser.Geom.Polygon.Earcut;var rD=class extends rE{constructor(){super(),this.pathData=[],this.pathIndexes=[],this.closePath=!1}updateData(){return this.pathIndexes=rG(this.pathData),super.updateData(),this}webglRender(e,i,s,r,n){this.isFilled&&(0,rR.Z)(e,i,this,s,r,n),this.isStroked&&(0,rL.Z)(e,this,s,r,n)}canvasRender(e,i,s){var r=this.pathData,n=r.length-1,a=r[0]-i,o=r[1]-s;e.beginPath(),e.moveTo(a,o),this.closePath||(n-=2);for(var h=2;h<n;h+=2){var l=r[h]-i,c=r[h+1]-s;e.lineTo(l,c)}this.closePath&&e.closePath(),this.isFilled&&((0,rB.Z)(e,this),e.fill()),this.isStroked&&((0,rI.Z)(e,this),e.stroke())}},rj=s(86460);let rA=Phaser.Math.DegToRad;var rF=class extends rD{constructor(e,i,s,r,n,a,o,h){void 0===e&&(e=0),void 0===i&&(i=0),void 0===s&&(s=0),void 0===r&&(r=0),void 0===n&&(n=0),void 0===a&&(a=360),void 0===o&&(o=!1),void 0===h&&(h=!1),super(),this.setCenterPosition(e,i),this.setRadius(s,r),this.setAngle(n,a,o),this.setPie(h),this.setIterations(32)}get x(){return this._x}set x(e){this.dirty=this.dirty||this._x!==e,this._x=e}get y(){return this._y}set y(e){this.dirty=this.dirty||this._y!==e,this._y=e}setCenterPosition(e,i){return void 0===i&&(i=e),this.x=e,this.y=i,this}get radiusX(){return this._radiusX}set radiusX(e){this.dirty=this.dirty||this._radiusX!==e,this._radiusX=e}get radiusY(){return this._radiusY}set radiusY(e){this.dirty=this.dirty||this._radiusY!==e,this._radiusY=e}setRadius(e,i){return void 0===i&&(i=e),this.radiusX=e,this.radiusY=i,this}get startAngle(){return this._startAngle}set startAngle(e){this.dirty=this.dirty||this._startAngle!==e,this._startAngle=e}get endAngle(){return this._endAngle}set endAngle(e){this.dirty=this.dirty||this._endAngle!==e,this._endAngle=e}get anticlockwise(){return this._anticlockwise}set anticlockwise(e){this.dirty=this.dirty||this._anticlockwise!==e,this._anticlockwise=e}setAngle(e,i,s){return void 0===s&&(s=!1),this.startAngle=e,this.endAngle=i,this.anticlockwise=s,this}get pie(){return this._pie}set pie(e){this.dirty=this.dirty||this._pie!==e,this._pie=e}setPie(e){return void 0===e&&(e=!0),this.pie=e,this}get iterations(){return this._iterations}set iterations(e){this.dirty=this.dirty||this._iterations!==e,this._iterations=e}setIterations(e){return this.iterations=e,this}updateData(){return this.pathData.length=0,this.pie&&this.pathData.push(this.x,this.y),(0,rj.Z)(this.x,this.y,this.radiusX,this.radiusY,this.startAngle,this.endAngle,this.anticlockwise,this.iterations,this.pathData),this.pie&&this.pathData.push(this.x,this.y),this.pathData.push(this.pathData[0],this.pathData[1]),super.updateData(),this}canvasRender(e,i,s){e.beginPath();var r=this.x-i,n=this.y-s,a=rA(this.startAngle),o=rA(this.endAngle);this.pie&&(e.moveTo(r,n),e.lineTo(r+Math.cos(a)*this.radiusX,n+Math.sin(a)*this.radiusY)),e.ellipse(r,n,this.radiusX,this.radiusY,0,a,o,this.anticlockwise),this.pie&&e.lineTo(r,n),this.isFilled&&((0,rB.Z)(e,this),e.fill()),this.isStroked&&((0,rI.Z)(e,this),e.stroke())}},rz=class extends rF{constructor(e,i,s){super(e,i,s,s,0,360)}},rW=class extends rD{constructor(e){super(),this.setCurve(e),this.setIterations(32)}get curve(){return this._curve}set curve(e){this.dirty=this.dirty||this._curve!==e,this._curve=e}setCurve(e){return this.curve=e,this}get iterations(){return this._iterations}set iterations(e){this.dirty=this.dirty||this._iterations!==e,this._iterations=e}setIterations(e){return this.iterations=e,this}updateData(){this.pathData.length=0;for(var e=this.curve.getPoints(this.iterations),i=0,s=e.length;i<s;i++)this.pathData.push(e[i].x,e[i].y);return this.pathData.push(e[0].x,e[0].y),super.updateData(),this}},rV=class extends rF{constructor(e,i,s,r){super(e,i,s,r,0,360)}},rY=class extends rD{constructor(e,i,s,r){void 0===e&&(e=0),void 0===i&&(i=0),void 0===s&&(s=0),void 0===r&&(r=0),super(),this.setP0(e,i),this.setP1(s,r)}get x0(){return this._x0}set x0(e){this.dirty=this.dirty||this._x0!==e,this._x0=e}get y0(){return this._y0}set y0(e){this.dirty=this.dirty||this._y0!==e,this._y0=e}setP0(e,i){return this.x0=e,this.y0=i,this}get x1(){return this._x1}set x1(e){this.dirty=this.dirty||this._x1!==e,this._x1=e}get y1(){return this._y1}set y1(e){this.dirty=this.dirty||this._y1!==e,this._y1=e}setP1(e,i){return this.x1=e,this.y1=i,this}updateData(){return this.pathData.length=0,this.pathData.push(this.x0,this.y0),this.pathData.push(this.x1,this.y1),this.pathData.push(this.x0,this.y0),super.updateData(),this}},rX=s(33834);let rH=Phaser.Math.Interpolation.QuadraticBezier;var pathdata_QuadraticBezierTo=function(e,i,s,r,n,a){for(var o=a.length,h=a[o-2],l=a[o-1],c=1,g=n-1;c<=g;c++){var m=c/g;a.push(rH(m,h,e,s),rH(m,l,i,r))}return a};let rU=Phaser.Math.Interpolation.CubicBezier;var pathdata_CubicBezierCurveTo=function(e,i,s,r,n,a,o,h){for(var l=h.length,c=h[l-2],g=h[l-1],m=1,x=o-1;m<=x;m++){var S=m/x;h.push(rU(S,c,e,s,n),rU(S,g,i,r,a))}return h},pathdata_DuplicateLast=function(e){var i=e.length;if(i<2)return e;var s=e[i-2],r=e[i-1];return e.push(s),e.push(r),e};let rN=Phaser.Math.RotateAround;var pathdata_RotateAround=function(e,i,s,r){for(var n={x:0,y:0},a=0,o=r.length-1;a<o;a+=2)n.x=r[a],n.y=r[a+1],rN(n,e,i,s),r[a]=n.x,r[a+1]=n.y;return r},pathdata_Scale=function(e,i,s,r,n){for(var a=0,o=n.length-1;a<o;a+=2){var h=n[a]-e,l=n[a+1]-i;h*=s,l*=r,n[a]=h+e,n[a+1]=l+i}return n},pathdata_Offset=function(e,i,s){for(var r=0,n=s.length-1;r<n;r+=2)s[r]+=e,s[r+1]+=i;return s};let r$=Phaser.Math.DegToRad,rZ=Phaser.Math.RotateAround;var array_Copy=function(e,i,s,r){void 0===s&&(s=0),void 0===r&&(r=i.length),e.length=r-s;for(var n=0,a=e.length;n<a;n++)e[n]=i[n+s];return e};let rK=Phaser.Math.Distance.Between,rJ=Phaser.Math.Wrap,rq=Phaser.Math.Linear;var AppendFromPathSegment=function(e,i,s,r,n){if(void 0===r&&(r=s,s=0),(s=WrapT(s))!==(r=WrapT(r))){var a=i[i.length-1],o=a*s,h=a*r;s<r?AddPathSegment(e,i,o,h,n):(AddPathSegment(e,i,o,a,n),AddPathSegment(e,i,0,h,n)),pathdata_DuplicateLast(n)}},AddPathSegment=function(e,i,s,r,n){for(var a=s>0,o=0,h=i.length;o<h;o++){var l=2*o,c=i[o];if(a){if(c<s)continue;if(c==s)a=!1;else{var g=c-i[o-1],m=1-(c-s)/g;n.push(GetInterpolation(e,l-2,l,m)),n.push(GetInterpolation(e,l-1,l+1,m)),a=!1}}if(c<=r){if(n.push(e[l]),n.push(e[l+1]),c===r)break}else{var g=c-i[o-1],m=1-(c-r)/g;n.push(GetInterpolation(e,l-2,l,m)),n.push(GetInterpolation(e,l-1,l+1,m));break}}},GetInterpolation=function(e,i,s,r){return rq(e[i],e[s],r)},WrapT=function(e){return 0===e?0:e%1==0?1:rJ(e,0,1)},pathdata_ToPoints=function(e,i){void 0===i&&(i=[]);for(var s=0,r=e.length-1;s<r;s+=2)i.push({x:e[s],y:e[s+1]});return i};let rQ=Phaser.Geom.Polygon;let PathDataBuilder=class PathDataBuilder{constructor(e){void 0===e&&(e=[]),this.pathData=e,this.closePath=!1,this.setIterations(32),this.firstPointX=void 0,this.firstPointY=void 0,this.lastPointX=void 0,this.lastPointY=void 0,this.accumulationLengths=void 0}setIterations(e){return this.iterations=e,this}toPoints(){return pathdata_ToPoints(this.pathData)}toPolygon(e){var i,s;return i=this.pathData,void 0===(s=e)&&(s=new rQ),s.setTo(i),s}};Object.assign(PathDataBuilder.prototype,{clear(){return this.start(),this},start(){return this.startAt(),this},startAt(e,i){var s;return this.restorePathData(),this.accumulationLengths=void 0,(s=this.pathData).length=0,null!=e&&s.push(e,i),this.firstPointX=e,this.firstPointY=i,this.lastPointX=e,this.lastPointY=i,this},lineTo(e,i,s){return void 0===s&&(s=!1),s&&(e+=this.lastPointX,i+=this.lastPointY),(0,rX.Z)(e,i,this.pathData),this.lastPointX=e,this.lastPointY=i,this},verticalLineTo(e,i){return this.lineTo(e,this.lastPointY,i),this},horizontalLineTo(e,i){return this.lineTo(this.lastPointX,e,i),this},ellipticalArc(e,i,s,r,n,a,o){return void 0===o&&(o=!1),(0,rj.Z)(e,i,s,r,n,a,o,this.iterations,this.pathData),this.lastPointX=this.pathData[this.pathData.length-2],this.lastPointY=this.pathData[this.pathData.length-1],this},arc(e,i,s,r,n,a){return this.ellipticalArc(e,i,s,s,r,n,a),this},quadraticBezierTo(e,i,s,r){return pathdata_QuadraticBezierTo(e,i,s,r,this.iterations,this.pathData),this.lastPointX=s,this.lastPointY=r,this.lastCX=e,this.lastCY=i,this},smoothQuadraticBezierTo(e,i){var s=2*this.lastPointX-this.lastCX,r=2*this.lastPointY-this.lastCY;return this.quadraticBezierTo(s,r,e,i),this},cubicBezierCurveTo(e,i,s,r,n,a){return pathdata_CubicBezierCurveTo(e,i,s,r,n,a,this.iterations,this.pathData),this.lastPointX=n,this.lastPointY=a,this.lastCX=s,this.lastCY=r,this},smoothCubicBezierCurveTo(e,i,s,r){var n=2*this.lastPointX-this.lastCX,a=2*this.lastPointY-this.lastCY;return this.cubicBezierCurveTo(n,a,e,i,s,r),this},close(){var e=this.pathData[0],i=this.pathData[1];return(e!==this.lastPointX||i!==this.lastPointY)&&this.lineTo(e,i),this.closePath=!0,this},end(){return pathdata_DuplicateLast(this.pathData),this}},{rotateAround(e,i,s){if(0===this.pathData.length)return this;pathdata_RotateAround(e,i,s=r$(s),this.pathData);var r=this.pathData.length;if(this.lastPointX=this.pathData[r-2],this.lastPointY=this.pathData[r-1],void 0!==this.lastCX){var n={x:this.lastCX,y:this.lastCY};rZ(n,e,i,s),this.lastCX=n.x,this.lastCY=n.y}return this},scale(e,i,s,r){if(0===this.pathData.length)return this;if(pathdata_Scale(e,i,s,r,this.pathData),this.lastPointX=this.pathData[pathDataCnt-2],this.lastPointY=this.pathData[pathDataCnt-1],void 0!==this.lastCX){var n=this.lastCX-e,a=this.lastCY-i;n*=s,a*=r,this.lastCX=n+e,this.lastCY=a+i}return this},offset(e,i){return pathdata_Offset(e,i,this.pathData),this}},{savePathData(){return this.pathDataSaved||(this.pathDataSave=[...this.pathData],this.pathData.length=0,this.pathDataSaved=!0),this},restorePathData(){return this.pathDataSaved&&(array_Copy(this.pathData,this.pathDataSave),this.pathDataSave=void 0,this.pathDataSaved=!1),this}},{updateAccumulationLengths(){if(null==this.accumulationLengths)this.accumulationLengths=[];else if(this.accumulationLengths.length===this.pathData.length/2)return this;for(var e,i,s,r,n=this.accumulationLengths,a=this.pathData,o=0,h=0,l=a.length;h<l;h+=2)s=a[h],r=a[h+1],o+=void 0===e?0:rK(e,i,s,r),n.push(o),e=s,i=r;return this.totalPathLength=o,this},setDisplayPathSegment(e,i){return this.pathDataSaved||(this.updateAccumulationLengths(),this.savePathData()),this.pathData.length=0,AppendFromPathSegment(this.pathDataSave,this.accumulationLengths,e,i,this.pathData),this},appendFromPathSegment(e,i,s){return void 0===i?this.pathData.push(...e.pathData):(e.updateAccumulationLengths(),AppendFromPathSegment(e.pathData,e.accumulationLengths,i,s,this.pathData)),this.firstPointX=this.pathData[0],this.firstPointY=this.pathData[1],this.lastPointX=this.pathData[this.pathData.length-2],this.lastPointY=this.pathData[this.pathData.length-1],this}},{draw(e,i,s){var r=this.toPoints();return i&&e.fillPoints(r,this.closePath,this.closePath),s&&e.strokePoints(r,this.closePath,this.closePath),this}});var r0=class extends rD{constructor(){super(),this.builder=new PathDataBuilder(this.pathData)}get iterations(){return this.builder.iterations}set iterations(e){this.dirty=this.dirty||this.builder.iterations!==e,this.builder.setIterations(e)}setIterations(e){return this.iterations=e,this}get lastPointX(){return this.builder.lastPointX}get lastPointY(){return this.builder.lastPointY}start(){return this.builder.start(),this.dirty=!0,this}startAt(e,i){return this.builder.startAt(e,i),this.dirty=!0,this}lineTo(e,i,s){return this.builder.lineTo(e,i,s),this.dirty=!0,this}verticalLineTo(e,i){return this.builder.verticalLineTo(e,i),this.dirty=!0,this}horizontalLineTo(e,i){return this.builder.horizontalLineTo(e,i),this.dirty=!0,this}ellipticalArc(e,i,s,r,n,a,o){return this.builder.ellipticalArc(e,i,s,r,n,a,o),this.dirty=!0,this}arc(e,i,s,r,n,a){return this.builder.arc(e,i,s,r,n,a),this.dirty=!0,this}quadraticBezierTo(e,i,s,r){return this.builder.quadraticBezierTo(e,i,s,r),this.dirty=!0,this}smoothQuadraticBezierTo(e,i){return this.builder.smoothQuadraticBezierTo(e,i),this.dirty=!0,this}cubicBezierCurveTo(e,i,s,r,n,a){return this.builder.cubicBezierCurveTo(e,i,s,r,n,a),this.dirty=!0,this}smoothCubicBezierCurveTo(e,i,s,r){return this.builder.smoothCubicBezierCurveTo(e,i,s,r),this.dirty=!0,this}close(){return this.builder.close(),this.closePath=this.builder.closePath,this.dirty=!0,this}end(){return this.builder.end(),this.dirty=!0,this}rotateAround(e,i,s){return this.builder.rotateAround(e,i,s),this.dirty=!0,this}scale(e,i,s,r){return this.builder.scale(e,i,s,r),this.dirty=!0,this}offset(e,i){return this.builder.offset(e,i),this.dirty=!0,this}toPolygon(e){return this.builder.toPolygon(e)}appendPathFrom(e,i,s){return this.builder.appendFromPathSegment(e.builder,i,s),this}copyPathFrom(e,i,s){return this.builder.clear().appendFromPathSegment(e.builder,i,s),this}setDisplayPathSegment(e,i){return this.builder.setDisplayPathSegment(e,i),this}};let r1=Phaser.Renderer.WebGL.Utils.getTintAppendFloatAlpha;var r2=class extends rE{constructor(e,i,s,r){void 0===e&&(e=0),void 0===i&&(i=0),void 0===s&&(s=0),void 0===r&&(r=s),super(),this.pathData=[],this.closePath=!0,this.setTopLeftPosition(e,i),this.setSize(s,r)}get x(){return this._x}set x(e){this.dirty=this.dirty||this._x!==e,this._x=e}get y(){return this._y}set y(e){this.dirty=this.dirty||this._y!==e,this._y=e}setTopLeftPosition(e,i){return this.x=e,this.y=i,this}get width(){return this._width}set width(e){this.dirty=this.dirty||this._width!==e,this._width=e}get height(){return this._height}set height(e){this.dirty=this.dirty||this._height!==e,this._height=e}setSize(e,i){return this.width=e,this.height=i,this}get centerX(){return this.x+this.width/2}set centerX(e){this.x=e-this.width/2}get centerY(){return this.y+this.height/2}set centerY(e){this.y=e-this.height/2}setCenterPosition(e,i){return this.centerX=e,this.centerY=i,this}updateData(){this.pathData.length=0;var e=this.x,i=e+this.width,s=this.y,r=s+this.height;return this.pathData.push(e,s),this.pathData.push(i,s),this.pathData.push(i,r),this.pathData.push(e,r),this.pathData.push(e,s),super.updateData(),this}webglRender(e,i,s,r,n){if(this.isFilled){var a=e.fillTint,o=r1(this.fillColor,this.fillAlpha*s);a.TL=o,a.TR=o,a.BL=o,a.BR=o,e.batchFillRect(-r+this.x,-n+this.y,this.width,this.height)}this.isStroked&&(0,rL.Z)(e,this,s,r,n)}canvasRender(e,i,s){this.isFilled&&((0,rB.Z)(e,this),e.fillRect(-i,-s,this.width,this.height)),this.isStroked&&((0,rI.Z)(e,this),e.beginPath(),e.rect(-i,-s,this.width,this.height),e.stroke())}};let r5=Phaser.Utils.Objects.GetValue;var r3=class extends rD{constructor(e,i,s,r,n,a){void 0===e&&(e=0),void 0===i&&(i=0),void 0===s&&(s=0),void 0===r&&(r=s),void 0===n&&(n=0),void 0===a&&(a=6),super(),this.setTopLeftPosition(e,i),this.setSize(s,r),this.setRadius(n),this.setIterations(a),this.closePath=!0}get x(){return this._x}set x(e){this.dirty=this.dirty||this._x!==e,this._x=e}get y(){return this._y}set y(e){this.dirty=this.dirty||this._y!==e,this._y=e}setTopLeftPosition(e,i){return this.x=e,this.y=i,this}get width(){return this._width}set width(e){this.dirty=this.dirty||this._width!==e,this._width=e}get height(){return this._height}set height(e){this.dirty=this.dirty||this._height!==e,this._height=e}setSize(e,i){return this.width=e,this.height=i,this}get centerX(){return this.x+this.width/2}set centerX(e){this.x=e-this.width/2}get centerY(){return this.y+this.height/2}set centerY(e){this.y=e-this.height/2}setCenterPosition(e,i){return this.centerX=e,this.centerY=i,this}get radiusTL(){return this._radiusTL}set radiusTL(e){var i=e>0;this.dirty=this.dirty||this._radiusTL!==e||this._convexTL!==i,this._convexTL=i,this._radiusTL=Math.abs(e)}get radiusTR(){return this._radiusTR}set radiusTR(e){var i=e>0;this.dirty=this.dirty||this._radiusTR!==e||this._convexTR!==i,this._convexTR=i,this._radiusTR=Math.abs(e)}get radiusBL(){return this._radiusBL}set radiusBL(e){var i=e>0;this.dirty=this.dirty||this._radiusBL!==e||this._convexBL!==i,this._convexBL=i,this._radiusBL=Math.abs(e)}get radiusBR(){return this._radiusBR}set radiusBR(e){var i=e>0;this.dirty=this.dirty||this._radiusBR!==e||this._convexBR!==i,this._convexBR=i,this._radiusBR=Math.abs(e)}get radius(){return Math.max(this.radiusTL,this.radiusTR,this.radiusBL,this.radiusBR)}set radius(e){"number"==typeof e?(this.radiusTL=e,this.radiusTR=e,this.radiusBL=e,this.radiusBR=e):(this.radiusTL=r5(e,"tl",0),this.radiusTR=r5(e,"tr",0),this.radiusBL=r5(e,"bl",0),this.radiusBR=r5(e,"br",0))}setRadius(e){return void 0===e&&(e=0),this.radius=e,this}get iterations(){return this._iterations}set iterations(e){this.dirty=this.dirty||this._iterations!==e,this._iterations=e}setIterations(e){return this.iterations=e,this}updateData(){var e=this.pathData;e.length=0;var i,s=this.width,r=this.height,n=this.iterations+1;if((i=this.radiusTL)>0){if(this._convexTL){var a=i,o=i;(0,rj.Z)(a,o,i,i,180,270,!1,n,e)}else{var a=0,o=0;(0,rj.Z)(a,o,i,i,90,0,!0,n,e)}}else(0,rX.Z)(0,0,e);if((i=this.radiusTR)>0){if(this._convexTR){var a=s-i,o=i;(0,rj.Z)(a,o,i,i,270,360,!1,n,e)}else{var a=s,o=0;(0,rj.Z)(a,o,i,i,180,90,!0,n,e)}}else(0,rX.Z)(s,0,e);if((i=this.radiusBR)>0){if(this._convexBR){var a=s-i,o=r-i;(0,rj.Z)(a,o,i,i,0,90,!1,n,e)}else{var a=s,o=r;(0,rj.Z)(a,o,i,i,270,180,!0,n,e)}}else(0,rX.Z)(s,r,e);if((i=this.radiusBL)>0){if(this._convexBL){var a=i,o=r-i;(0,rj.Z)(a,o,i,i,90,180,!1,n,e)}else{var a=0,o=r;(0,rj.Z)(a,o,i,i,360,270,!0,n,e)}}else(0,rX.Z)(0,r,e);return e.push(e[0],e[1]),pathdata_Offset(this.x,this.y,e),super.updateData(),this}};let r7=Phaser.Renderer.WebGL.Utils.getTintAppendFloatAlpha;var r6=class extends rE{constructor(e,i,s,r,n,a){void 0===e&&(e=0),void 0===i&&(i=0),void 0===s&&(s=0),void 0===r&&(r=0),void 0===n&&(n=0),void 0===a&&(a=0),super(),this.pathData=[],this.closePath=!0,this.setP0(e,i),this.setP1(s,r),this.setP2(n,a)}get x0(){return this._x0}set x0(e){this.dirty=this.dirty||this._x0!==e,this._x0=e}get y0(){return this._y0}set y0(e){this.dirty=this.dirty||this._y0!==e,this._y0=e}setP0(e,i){return this.x0=e,this.y0=i,this}get x1(){return this._x1}set x1(e){this.dirty=this.dirty||this._x1!==e,this._x1=e}get y1(){return this._y1}set y1(e){this.dirty=this.dirty||this._y1!==e,this._y1=e}setP1(e,i){return this.x1=e,this.y1=i,this}get x2(){return this._x2}set x2(e){this.dirty=this.dirty||this._x2!==e,this._x2=e}get y2(){return this._y2}set y2(e){this.dirty=this.dirty||this._y2!==e,this._y2=e}setP2(e,i){return this.dirty=this.dirty||this.x2!==e||this.y2!==i,this.x2=e,this.y2=i,this}updateData(){return this.pathData.length=0,this.pathData.push(this.x0,this.y0),this.pathData.push(this.x1,this.y1),this.pathData.push(this.x2,this.y2),this.pathData.push(this.x0,this.y0),super.updateData(),this}webglRender(e,i,s,r,n){if(this.isFilled){var a=r7(this.fillColor,this.fillAlpha*s),o=this.x0-r,h=this.y0-n,l=this.x1-r,c=this.y1-n,g=this.x2-r,m=this.y2-n,x=i.getX(o,h),S=i.getY(o,h),_=i.getX(l,c),k=i.getY(l,c),E=i.getX(g,m),R=i.getY(g,m);e.batchTri(x,S,_,k,E,R,a,a,a)}this.isStroked&&(0,rL.Z)(e,this,s,r,n)}canvasRender(e,i,s){var r=this.x1-i,n=this.y1-s,a=this.x2-i,o=this.y2-s,h=this.x3-i,l=this.y3-s;e.beginPath(),e.moveTo(r,n),e.lineTo(a,o),e.lineTo(h,l),e.closePath(),this.isFilled&&((0,rB.Z)(e,this),e.fill()),this.isStroked&&((0,rI.Z)(e,this),e.stroke())}};let r4=Phaser.Utils.Objects.GetValue,r8=Phaser.Math.Linear;var r9=class extends ss{constructor(e,i){super(e,i),this.resetFromJSON(),this.boot()}start(e){if(this.timer.isRunning)return this;var i=this.target;this.propertyKey=r4(e,"key","value");var s=i[this.propertyKey];return this.fromValue=r4(e,"from",s),this.toValue=r4(e,"to",s),this.setEase(r4(e,"ease",this.ease)),this.setDuration(r4(e,"duration",this.duration)),this.setRepeat(r4(e,"repeat",0)),this.setDelay(r4(e,"delay",0)),this.setRepeatDelay(r4(e,"repeatDelay",0)),this.timer.setDuration(this.duration).setRepeat(this.repeat).setDelay(this.delay).setRepeatDelay(this.repeatDelay),i[this.propertyKey]=this.fromValue,super.start(),this}updateGameObject(e,i){var s=i.t;s=this.easeFn(s),e[this.propertyKey]=r8(this.fromValue,this.toValue,s)}},nt={};Object.assign(nt,{setBoxFillStyle(e,i){return void 0===i&&(i=1),this.dirty=this.dirty||this.boxFillColor!==e||this.boxFillAlpha!==i,this.boxFillColor=e,this.boxFillAlpha=i,this},setUncheckedBoxFillStyle(e,i){return void 0===i&&(i=1),this.dirty=this.dirty||this.uncheckedBoxFillColor!==e||this.uncheckedBoxFillAlpha!==i,this.uncheckedBoxFillColor=e,this.uncheckedBoxFillAlpha=i,this},setBoxStrokeStyle(e,i,s){return void 0===s&&(s=1),this.dirty=this.dirty||this.boxLineWidth!==e||this.boxStrokeColor!==i||this.boxStrokeAlpha!==s,this.boxLineWidth=e,this.boxStrokeColor=i,this.boxStrokeAlpha=s,this},setUncheckedBoxStrokeStyle(e,i,s){return void 0===s&&(s=1),this.dirty=this.dirty||this.uncheckedBoxLineWidth!==e||this.uncheckedBoxStrokeColor!==i||this.uncheckedBoxStrokeAlpha!==s,this.uncheckedBoxLineWidth=e,this.uncheckedBoxStrokeColor=i,this.uncheckedBoxStrokeAlpha=s,this},setCheckerStyle(e,i){return void 0===i&&(i=1),this.dirty=this.dirty||this.checkerColor!==e||this.checkAlpha!==i,this.checkerColor=e,this.checkAlpha=i,this},setBoxShape(e){return void 0===e&&(e=!1),this.isCircleShape===e||(this.isCircleShape=e,this.isSizeChanged=!0,this.dirty=!0),this}},{setBoxSize(e){return this.dirty=this.dirty||this.boxSize!==e,this.boxSize=e,this},setCheckerSize(e){return this.dirty=this.dirty||this.checkerSize!==e,this.checkerSize=e,this}},{buildShapes(){this.addShape(new r3().setName("box")).addShape(new r0().setName("checker"))},updateShapes(){var e=this.width/2,i=this.height/2,s=Math.min(e,i),r=2*s,n=e-s,a=i-s,o=this.boxLineWidth,h=this.getShape("box"),l=this.getShape("checker");if(this.isSizeChanged){var c=r*(1-this.boxSize)/2,g=o/2,m=r*this.boxSize-o;h.setTopLeftPosition(n+g+c,a+g+c).setSize(m,m),this.isCircleShape?h.setRadius(m/2):h.setRadius(0);var c=r*(1-this.checkerSize)/2,x=r*this.checkerSize/4,S=1*x,_=2*x,k=3*x;l.startAt(S,_).lineTo(_,k).lineTo(k,S).offset(n+c,a+c).end()}this.checked?(h.fillStyle(this.boxFillColor,this.boxFillAlpha).lineStyle(o,this.boxStrokeColor,this.boxStrokeAlpha),l.lineStyle(Math.max(r/10,2),this.checkerColor)):(h.fillStyle(this.uncheckedBoxFillColor,this.uncheckedBoxFillAlpha).lineStyle(o,this.uncheckedBoxStrokeColor,this.uncheckedBoxStrokeAlpha),l.lineStyle()),this.checked&&l.setDisplayPathSegment(this.checkerAnimProgress)}},{setCheckerAnimationDuration(e){return void 0===e&&(e=0),this.checkerAnimDuration=e,this},playCheckerAnimation(){return void 0===this.checkerAnimProgressTask&&(this.checkerAnimProgressTask=new r9(this,{eventEmitter:null})),this.checkerAnimProgressTask.restart({key:"checkerAnimProgress",from:0,to:1,duration:this.checkerAnimDuration}),this},stopCheckerAnimation(){return void 0===this.checkerAnimProgressTask||this.checkerAnimProgressTask.stop(),this}});let ne=Phaser.Utils.Objects.GetValue,ni=Phaser.Utils.Objects.IsPlainObject;let CheckboxShape=class CheckboxShape extends rM{constructor(e,i,s,r,n,a,o){ni(i)?(i=ne(o=i,"x",0),s=ne(o,"y",0),r=ne(o,"width",2),n=ne(o,"height",2),a=ne(o,"color",23730)):ni(a)&&(a=ne(o=a,"color",23730)),super(e,i,s,r,n),this.type="rexCheckbox",void 0===a&&(a=23730),this.setBoxShape(ne(o,"circleBox",!1)),this.setBoxFillStyle(a,ne(o,"boxFillAlpha",1)),this.setUncheckedBoxFillStyle(ne(o,"uncheckedColor",null),ne(o,"uncheckedBoxFillAlpha",1)),this.setBoxStrokeStyle(ne(o,"boxLineWidth",4),ne(o,"boxStrokeColor",a),ne(o,"boxStrokeAlpha",1)),this.setUncheckedBoxStrokeStyle(this.boxLineWidth,ne(o,"uncheckedBoxStrokeColor",this.boxStrokeColor),ne(o,"uncheckedBoxStrokeAlpha",this.boxStrokeAlpha)),this.setCheckerStyle(ne(o,"checkerColor",16777215),ne(o,"checkerAlpha",1)),this.setBoxSize(ne(o,"boxSize",1)),this.setCheckerSize(ne(o,"checkerSize",1)),this.setCheckerAnimationDuration(ne(o,"animationDuration",150)),this.buildShapes();var h=ne(o,"checked");void 0===h&&(h=ne(o,"value",!1)),this.setValue(h)}get value(){return this._value}set value(e){e=!!e,this._value!==e&&(this.dirty=!0,this._value=e,e?this.playCheckerAnimation():this.stopCheckerAnimation(),this.emit("valuechange",e))}setValue(e){return this.value=e,this}toggleValue(){return this.setValue(!this.value),this}get checked(){return this.value}set checked(e){this.value=e}setChecked(e){return void 0===e&&(e=!0),this.setValue(e),this}toggleChecked(){return this.toggleValue(),this}get checkerAnimProgress(){return this._checkerAnimProgress}set checkerAnimProgress(e){this._checkerAnimProgress!==e&&(this._checkerAnimProgress=e,this.dirty=!0)}};Object.assign(CheckboxShape.prototype,nt);var ns=CheckboxShape;let nr=Phaser.Utils.Objects.GetValue,nn={press:0,pointerdown:0,release:1,pointerup:1};var no=class extends i0{constructor(e,i){super(e,i),this._enable=void 0,e.setInteractive(nr(i,"inputConfig",void 0)),this.resetFromJSON(i),this.boot()}resetFromJSON(e){return this.pointer=void 0,this.lastClickTime=void 0,this.isDown=!1,this.isOver=!1,this.setEnable(nr(e,"enable",!0)),this.setMode(nr(e,"mode",1)),this.setClickInterval(nr(e,"clickInterval",100)),this.setDragThreshold(nr(e,"threshold",void 0)),this}boot(){var e=this.parent;e.on("pointerdown",this.onPress,this),e.on("pointerup",this.onRelease,this),e.on("pointerout",this.onPointOut,this),e.on("pointermove",this.onMove,this),e.on("pointerover",this.onOver,this),e.on("pointerout",this.onOut,this)}shutdown(e){this.isShutdown||(this.pointer=null,super.shutdown(e))}get enable(){return this._enable}set enable(e){this._enable!==e&&(e||this.cancel(),this._enable=e,this.emit(e?"enable":"disable",this,this.parent))}setEnable(e){return void 0===e&&(e=!0),this.enable=e,this}toggleEnable(){return this.setEnable(!this.enable),this}setMode(e){return"string"==typeof e&&(e=nn[e]),this.mode=e,this}setClickInterval(e){return this.clickInterval=e,this}setDragThreshold(e){return this.dragThreshold=e,this}onPress(e,i,s,r){void 0===this.pointer&&(this.pointer=e,this.isDown=!0,this.emit("down",this,this.parent,e,r),0===this.mode&&this.click(e.downTime,e,r))}onRelease(e,i,s,r){this.pointer===e&&(this.isDown=!1,this.emit("up",this,this.parent,e,r),1===this.mode&&this.click(e.upTime,e,r),this.pointer=void 0)}onPointOut(e,i){this.pointer===e&&this.cancel()}onMove(e,i,s,r){this.pointer===e&&void 0!==this.dragThreshold&&1===this.mode&&e.getDistance()>=this.dragThreshold&&this.cancel()}onOver(e,i,s,r){return this.enable&&(this.isOver=!0,this.emit("over",this,this.parent,e,r)),this}onOut(e,i){return this.enable&&(this.isOver=!1,this.emit("out",this,this.parent,e,i)),this}click(e,i,s){if(!this.enable)return this;if(void 0===e)return this.emit("click",this,this.parent,i,s),this;this.pointer=void 0;var r=this.lastClickTime;return void 0!==r&&e-r<=this.clickInterval||(this.lastClickTime=e,this.emit("click",this,this.parent,i,s)),this}cancel(){return this.pointer=void 0,this}};let nh=Phaser.Utils.Objects.GetValue;var nl=class extends ns{constructor(e,i,s,r,n,a,o){super(e,i,s,r,n,a,o),this._click=new no(this,nh(o,"click")),this._click.on("click",function(){this.toggleValue()},this),this.setReadOnly(nh(o,"readOnly",!1))}get readOnly(){return!this._click.enable}set readOnly(e){this._click.enable=!e}setReadOnly(e){return void 0===e&&(e=!0),this.readOnly=e,this}};ObjectFactory.register("checkbox",function(e,i,s,r,n,a){var o=new nl(this.scene,e,i,s,r,n,a);return this.scene.add.existing(o),o}),(0,k.Z)(window,"RexPlugins.UI.Checkbox",nl);var math_Linear=function(e,i,s){return(i-e)*s+e};let nd=Phaser.Math.Linear;var nc={};Object.assign(nc,{setTrackFillStyle(e,i){return void 0===i&&(i=1),this.dirty=this.dirty||this.trackFillColor!==e||this.trackFillAlpha!==i,this.trackFillColor=e,this.trackFillAlpha=i,this},setFalseValueTrackFillStyle(e,i){return void 0===i&&(i=1),this.dirty=this.dirty||this.falseValueTrackColor!==e||this.uncheckedTrackFillAlpha!==i,this.falseValueTrackColor=e,this.falseValueTrackFillAlpha=i,this},setThumbStyle(e,i){return void 0===i&&(i=1),this.dirty=this.dirty||this.thumbColor!==e||this.checkAlpha!==i,this.thumbColor=e,this.thumbAlpha=i,this}},{setTrackSize(e,i){return this.dirty=this.dirty||this.trackWidth!==e||this.trackHeight!==i,this.trackWidth=e,this.trackHeight=i,this},setTrackRadius(e){return this.dirty=this.dirty||this.trackRadius!==e,this.trackRadius=e,this},setThumbSize(e,i){return void 0===i&&(i=e),this.dirty=this.dirty||this.thumbWidth!==e||this.thumbHeight!==i,this.thumbWidth=e,this.thumbHeight=i,this},setThumbRadius(e){return this.dirty=this.dirty||this.thumbRadius!==e,this.thumbRadius=e,this}},{setThumbPosition(e,i){return void 0===i&&(i=1-e),this.thumbLeftX=e,this.thumbRightX=i,this},setRTL(e){return void 0===e&&(e=!0),this.rtl=e,this}},{buildShapes(){this.addShape(new r3().setName("track")).addShape(new r3().setName("thumb"))},updateShapes(){var e,i,s=this.width,r=this.height,n=this.value?this.toggleAnimProgress:1-this.toggleAnimProgress,a=this.getShape("track");if(this.isSizeChanged){var o=s*this.trackWidth,h=r*this.trackHeight,l=(s-o)/2,c=(r-h)/2,g=r*this.trackRadius;a.setTopLeftPosition(l,c).setSize(o,h).setRadius(g)}var m=(e=this.falseValueTrackColor,i=this.trackFillColor,(255&math_Linear(GetR(e),GetR(i),n))<<16|(255&math_Linear(GetG(e),GetG(i),n))<<8|255&math_Linear(GetB(e),GetB(i),n)),x=nd(this.falseValueTrackFillAlpha,this.trackFillAlpha,n);a.fillStyle(m,x);var S=this.getShape("thumb");if(this.isSizeChanged){var _=s*this.thumbWidth,k=r*this.thumbHeight,E=r*this.thumbRadius;S.setSize(_,k).setRadius(E)}var R=nd(this.thumbLeftX,this.thumbRightX,n)*s;this.rtl&&(R=s-R),S.setCenterPosition(R,r/2),S.fillStyle(this.thumbColor,this.thumbAlpha)}},{setToggleAnimationDuration(e){return void 0===e&&(e=0),this.toggleAnimDuration=e,this},playToggleAnimation(){return void 0===this.toggleAnimProgressTask&&(this.toggleAnimProgressTask=new r9(this,{eventEmitter:null})),this.toggleAnimProgressTask.restart({key:"toggleAnimProgress",from:0,to:1,duration:this.toggleAnimDuration}),this},stopToggleAnimation(){return void 0===this.toggleAnimProgressTask||this.toggleAnimProgressTask.stop(),this}});var color_GrayScale=function(e){var i=.3*GetR(e)+.59*GetG(e)+.11*GetB(e);return(255&i)<<16|(255&i)<<8|255&i};let nu=Phaser.Utils.Objects.GetValue,np=Phaser.Utils.Objects.IsPlainObject;let ToggleSwitchShape=class ToggleSwitchShape extends rM{constructor(e,i,s,r,n,a,o){np(i)?(i=nu(o=i,"x",0),s=nu(o,"y",0),r=nu(o,"width",2),n=nu(o,"height",2),a=nu(o,"color",23730)):np(a)&&(a=nu(o=a,"color",23730)),super(e,i,s,r,n),this.type="rexToggleSwitch",void 0===a&&(a=23730),this.setTrackFillStyle(a,nu(o,"trackFillAlpha",1)),this.setFalseValueTrackFillStyle(nu(o,"falseValueTrackColor",color_GrayScale(a)),nu(o,"falseValueTrackFillAlpha",1)),this.setThumbStyle(nu(o,"thumbColor",16777215),nu(o,"thumbAlpha",1)),this.setTrackSize(nu(o,"trackWidth",.9),nu(o,"trackHeight",.5)),this.setTrackRadius(nu(o,"trackRadius",.5*this.trackHeight));var h=nu(o,"thumbHeight",void 0),l=nu(o,"thumbWidth",h);void 0===l&&(l=.9*this.trackHeight),this.setThumbSize(l,h),this.setThumbRadius(nu(o,"thumbRadius",.5*this.thumbHeight)),this.setThumbPosition(nu(o,"thumbLeft",.3),nu(o,"thumbRight",void 0)),this.setRTL(nu(o,"rtl",!1)),this.setToggleAnimationDuration(nu(o,"animationDuration",150)),this.buildShapes(),this.setValue(nu(o,"value",!1),0)}get value(){return this._value}set value(e){e=!!e,this._value!==e&&(this.dirty=!0,this._value=e,this.playToggleAnimation(),this.emit("valuechange",e))}setValue(e,i){void 0===i&&(i=this.toggleAnimDuration);var s=this.toggleAnimDuration;return this.toggleAnimDuration=i,this.value=e,this.toggleAnimDuration=s,this}toggleValue(e){return this.setValue(!this.value,e),this}get toggleAnimProgress(){return this._toggleAnimProgress}set toggleAnimProgress(e){this._toggleAnimProgress!==e&&(this._toggleAnimProgress=e,this.dirty=!0)}};Object.assign(ToggleSwitchShape.prototype,nc);var ng=ToggleSwitchShape;let nv=Phaser.Utils.Objects.GetValue;var nf=class extends ng{constructor(e,i,s,r,n,a,o){super(e,i,s,r,n,a,o),this._click=new no(this,nv(o,"click")),this._click.on("click",function(){this.toggleValue()},this),this.setReadOnly(nv(o,"readOnly",!1))}get readOnly(){return!this._click.enable}set readOnly(e){this._click.enable=!e}setReadOnly(e){return void 0===e&&(e=!0),this.readOnly=e,this}};ObjectFactory.register("toggleSwitch",function(e,i,s,r,n,a){var o=new nf(this.scene,e,i,s,r,n,a);return this.scene.add.existing(o),o}),(0,k.Z)(window,"RexPlugins.UI.ToggleSwitch",nf);let canvas_Canvas_Canvas=class canvas_Canvas_Canvas extends tT{};Object.assign(canvas_Canvas_Canvas.prototype,{loadFromURL(e,i){var s=this,r=new Image;return r.onload=function(){s.width!==r.width||s.height!==r.height?s.resize(r.width,r.height):s.clear(),s.context.drawImage(r,0,0),s.updateTexture(),i&&i(),r.onload=null,r.src="",r.remove()},r.src=e,this},loadFromURLPromise(e){var i=this;return new Promise(function(s,r){i.loadFromURL(e,s)})},loadFromFile(e,i){var s=URL.createObjectURL(e);return this.loadFromURL(s,function(){URL.revokeObjectURL(s),i&&i()}),this},loadFromFilePromise(e){var i=this;return new Promise(function(s,r){i.loadFromFile(e,s)})}});var nm=canvas_Canvas_Canvas;ObjectFactory.register("canvas",function(e,i,s,r){var n=new nm(this.scene,e,i,s,r);return this.scene.add.existing(n),n}),(0,k.Z)(window,"RexPlugins.UI.Canvas",nm);let nb=Phaser.Utils.Objects.GetValue,ny={circle:0,ellipse:1,roundRectangle:2};var nC=class extends tT{constructor(e,i,s,r,n,a){super(e,i,s),this.type="rexCircleMaskImage",this.setTexture(r,n,a)}setTexture(e,i,s){"object"==typeof i&&(s=i,i=void 0),"string"==typeof s&&(s={maskType:s});var r=nb(s,"maskType",0),n=nb(s,"backgroundColor",void 0),a=nb(s,"strokeColor",void 0),o=nb(s,"strokeWidth",null!=a?10:0);if(void 0===r?r=0:"string"==typeof r&&(r=ny[r]),this._textureKey=e,this._frameName=i,null===r)return this.loadTexture(e,i),this.dirty=!0,this;var h=this.scene.sys.textures.getFrame(e,i);if(!h)return this;h.cutWidth!==this.width||h.cutHeight!==this.height?this.setCanvasSize(h.cutWidth,h.cutHeight):this.clear();var l=this.canvas,c=this.context,g=l.width,m=l.height;null!=n&&(c.fillStyle=n,c.fillRect(0,0,g,m)),c.save(),c.beginPath();var x=o/2;switch(r){case 1:var S=Math.floor(g/2),_=Math.floor(m/2),k=S-x,E=_-x;c.ellipse(S,_,k,E,0,0,2*Math.PI);break;case 2:canvas_AddRoundRectanglePath(c,x,x,g-o,m-o,nb(s,"radius",0),nb(s,"iteration",void 0));break;default:var S=Math.floor(g/2),_=Math.floor(m/2),R=Math.min(S,_)-x;c.arc(S,_,R,0,2*Math.PI)}return null!=a&&(c.strokeStyle=a,c.lineWidth=o,c.stroke()),c.clip(),this.loadTexture(e,i),c.restore(),this.dirty=!0,this}resize(e,i){return this.setDisplaySize(e,i),this}};ObjectFactory.register("circleMaskImage",function(e,i,s,r,n){var a=new nC(this.scene,e,i,s,r,n);return this.scene.add.existing(a),a}),(0,k.Z)(window,"RexPlugins.UI.CircleMaskImage",nC);let nx=Phaser.Utils.Objects.GetValue;var nS=class extends tT{constructor(e,i,s,r,n,a){super(e,i,s),this.type="rexAlphaMaskImage",this.maskFrame=null,this.setTexture(r,n,a)}setTexture(e,i,s){"object"==typeof i&&(s=i,i=void 0),"string"==typeof s&&(s={mask:{key:s}});var r,n,a=nx(s,"mask.key"),o=nx(s,"mask.frame"),h=nx(s,"mask.invertAlpha",!1),l=nx(s,"mask.scale"),c=nx(s,"backgroundColor");if(a){this._maskKey=a,this._maskFrame=o,this._maskScale=l;var g=a?this.scene.sys.textures.get(a):null;this.maskFrame=g?g.get(o):null}this._textureKey=e,this._frameName=i;var m=this.maskFrame;if(null===m)return this.loadTexture(e,i),this.dirty=!0,this;this.loadTexture(e,i);var x=this.canvas,S=this.context,_=x.width,k=x.height;S.save(),S.globalCompositeOperation=h?"destination-out":"destination-in",null!=this._maskScale?(r=m.cutWidth*this._maskScale,n=m.cutHeight*this._maskScale):(r=_,n=k);var E=(_-r)/2,R=(k-n)/2;return this.drawFrame(this._maskKey,this._maskFrame,E,R,r,n),S.restore(),null!=c&&(S.save(),S.globalCompositeOperation="destination-over",S.fillStyle=c,S.fillRect(0,0,_,k),S.restore()),this.dirty=!0,this}resize(e,i){return this.setDisplaySize(e,i),this}};ObjectFactory.register("alphaMaskImage",function(e,i,s,r,n){var a=new nS(this.scene,e,i,s,r,n);return this.scene.add.existing(a),a}),(0,k.Z)(window,"RexPlugins.UI.AlphaMaskImage",nS);let n_=Phaser.Math.Linear,nw=Phaser.Math.Percent;var nP={setValue(e,i,s){return null==e||(void 0!==i&&(e=nw(e,i,s)),this.value=e),this},addValue(e,i,s){return void 0!==i&&(e=nw(e,i,s)),this.value+=e,this},getValue(e,i){var s=this.value;return void 0!==e&&(s=n_(e,i,s)),s}};let nk=Phaser.Math.Percent;var nT={setEaseValuePropName:function(e){return this.easeValuePropName=e,this},setEaseValueDuration:function(e){return this.easeValueDuration=e,this},setEaseValueFunction:function(e){return this.easeFunction=e,this},stopEaseValue:function(){return this.easeValueTask&&this.easeValueTask.stop(),this},easeValueTo:function(e,i,s){return null==e||(void 0!==i&&(e=nk(e,i,s)),void 0===this.easeValueTask&&(this.easeValueTask=new r9(this,{eventEmitter:null})),this.easeValueTask.restart({key:this.easeValuePropName,to:e,duration:this.easeValueDuration,ease:this.easeFunction})),this},easeValueRepeat:function(e,i,s,r){return void 0===s&&(s=-1),void 0===r&&(r=0),void 0===this.easeValueTask&&(this.easeValueTask=new r9(this,{eventEmitter:null})),this.easeValueTask.restart({key:this.easeValuePropName,from:e,to:i,duration:this.easeValueDuration,ease:this.easeFunction,repeat:s,repeatDelay:r}),this}};let nO=Phaser.Utils.Objects.GetValue,nM=Phaser.Math.Clamp;function ProgressBase(e){let ProgressBase=class ProgressBase extends e{bootProgressBase(e){this.eventEmitter=nO(e,"eventEmitter",this);var i=nO(e,"valuechangeCallback",null);if(null!==i){var s=nO(e,"valuechangeCallbackScope",void 0);this.eventEmitter.on("valuechange",i,s)}return this.setEaseValuePropName("value").setEaseValueDuration(nO(e,"easeValue.duration",0)).setEaseValueFunction(nO(e,"easeValue.ease","Linear")),this}get value(){return this._value}set value(e){e=nM(e,0,1);var i=this._value,s=i!=e;this.dirty=this.dirty||s,this._value=e,s&&this.eventEmitter.emit("valuechange",this._value,i,this.eventEmitter)}};return Object.assign(ProgressBase.prototype,nP,nT),ProgressBase}let nE=Phaser.Math.RadToDeg,nR=Phaser.Math.DegToRad;var FillArc=function(e,i,s,r,n,a,o,h){var l=360===Math.abs(o-a),c=nR(a),g=nR(o),m=Math.cos(c),x=Math.sin(c);return e.startAt(i+m*r,s+x*r),e.arc(i,s,r,a,o,h),l&&0===n||(e.lineTo(i+Math.cos(g)*n,s+Math.sin(g)*n),n>0&&e.arc(i,s,n,o,a,!h)),e.close(),e};let nL=Phaser.Utils.Objects.GetValue,nB=Phaser.Utils.Objects.IsPlainObject,nI=Phaser.Math.Clamp,nG=Phaser.Math.DegToRad(270);let CircularProgress_CircularProgress=class CircularProgress_CircularProgress extends ProgressBase(rM){constructor(e,i,s,r,n,a,o){nB(i)&&(i=nL(o=i,"x",0),s=nL(o,"y",0),r=nL(o,"radius",1),n=nL(o,"barColor",void 0),a=nL(o,"value",0)),void 0===r&&(r=1);var h=2*r;super(e,i,s,h,h),this.type="rexCircularProgress",this.bootProgressBase(o),this.setRadius(r),this.setTrackColor(nL(o,"trackColor",void 0)),this.setBarColor(n),this.setCenterColor(nL(o,"centerColor",void 0)),this.setThickness(nL(o,"thickness",.2)),this.setStartAngle(nL(o,"startAngle",nG)),this.setAnticlockwise(nL(o,"anticlockwise",!1)),this.buildShapes(),this.setValue(a)}resize(e,i){return(e=Math.floor(Math.min(e,i)))===this.width||(super.resize(e,e),this.setRadius(e/2)),this}get radius(){return this._radius}set radius(e){this.dirty=this.dirty||this._radius!=e,this._radius=e;var i=2*e;this.resize(i,i)}setRadius(e){return this.radius=e,this}get trackColor(){return this._trackColor}set trackColor(e){this.dirty=this.dirty||this._trackColor!=e,this._trackColor=e}setTrackColor(e){return this.trackColor=e,this}get barColor(){return this._barColor}set barColor(e){this.dirty=this.dirty||this._barColor!=e,this._barColor=e}setBarColor(e){return this.barColor=e,this}get startAngle(){return this._startAngle}set startAngle(e){this.dirty=this.dirty||this._startAngle!=e,this._startAngle=e}setStartAngle(e){return this.startAngle=e,this}get anticlockwise(){return this._anticlockwise}set anticlockwise(e){this.dirty=this.dirty||this._anticlockwise!=e,this._anticlockwise=e}setAnticlockwise(e){return void 0===e&&(e=!0),this.anticlockwise=e,this}get thickness(){return this._thickness}set thickness(e){e=nI(e,0,1),this.dirty=this.dirty||this._thickness!=e,this._thickness=e}setThickness(e){return this.thickness=e,this}get centerColor(){return this._centerColor}set centerColor(e){this.dirty=this.dirty||this._centerColor!=e,this._centerColor=e}setCenterColor(e){return this.centerColor=e,this}};Object.assign(CircularProgress_CircularProgress.prototype,{buildShapes(){this.addShape(new r0().setName("track")).addShape(new r0().setName("bar")).addShape(new rz().setName("center"))},updateShapes(){var e,i,s,r=this.radius,n=this.thickness*this.radius,a=this.radius,o=a-n,h=this.getShape("track");null!=this.trackColor&&this.thickness>0?(h.fillStyle(this.trackColor),FillArc(h,r,r,a,o,0,360,!1)):h.reset();var l=this.getShape("bar");null!=this.barColor&&this.thickness>0?(1===this.value?(e=!1,i=0,s=360):(e=this.anticlockwise,i=nE(this.startAngle),s=360*(e?1-this.value:this.value)+i),l.fillStyle(this.barColor),FillArc(l,r,r,a,o,i,s,!1)):l.reset();var c=this.getShape("center");this.centerColor&&o>0?c.setCenterPosition(r,r).setRadius(o).fillStyle(this.centerColor):c.reset()}}),ObjectFactory.register("circularProgress",function(e,i,s,r,n,a){var o=new CircularProgress_CircularProgress(this.scene,e,i,s,r,n,a);return this.scene.add.existing(o),o}),(0,k.Z)(window,"RexPlugins.UI.CircularProgress",CircularProgress_CircularProgress);var canvas_DrawCircle=function(e,i,s,r,n,a,o,h,l,c,g,m){void 0===c&&(c=0),void 0===g&&(g=2*Math.PI),void 0===m&&(m=!1),i.beginPath(),i.ellipse(s,r,n,a,0,c,g,m),null!=o&&(i.fillStyle=o,i.fill()),null!=h&&(i.strokeStyle=h,i.lineWidth=l,i.stroke())},canvas_DrawText=function(e,i,s,r,n,a,o,h,l,c,g){void 0===l&&null!=h&&(l=2),void 0===c&&(c="start"),void 0===g&&(g="alphabetic"),i.font=a,i.textAlign=c,i.textBaseline=g,i.fillStyle=o,i.strokeStyle=h,i.lineWidth=l,i.lineCap="round",i.lineJoin="round",null!=h&&"none"!==h&&l>0&&i.strokeText(n,s,r),null!=o&&"none"!==o&&i.fillText(n,s,r)};let nD=Phaser.Math.PI2;var circularprogress_DrawContent=function(){var e,i=this.radius,s=this.thickness*this.radius,r=this.radius-s/2,n=this.radius-s,a=this.canvas,o=this.context,h=this.anticlockwise,l=this.startAngle,c=this.endAngle,g=this._deltaAngle;if(this.trackColor&&s>0&&(o.save(),canvas_DrawCircle(a,o,i,i,r,r,void 0,this.trackColor,s,l,c,h),o.restore()),this.barColor&&r>0){if(m=h?(l-g*this.value+nD)%nD:(l+g*this.value)%nD,o.save(),this.barColor2){var m,x,S=i+r*Math.cos(l),_=i+r*Math.sin(l),k=i+r*Math.cos(m),E=i+r*Math.sin(m),R=o.createLinearGradient(S,_,k,E);R.addColorStop(0,this.barColor2),R.addColorStop(1,this.barColor),x=R}else x=this.barColor;canvas_DrawCircle(a,o,i,i,r,r,void 0,x,s,l,m,h),o.restore()}this.centerColor&&n>0&&(this.centerColor2?((e=this.context.createRadialGradient(i,i,0,i,i,n)).addColorStop(0,this.centerColor),e.addColorStop(1,this.centerColor2)):e=this.centerColor,o.save(),canvas_DrawCircle(a,o,i,i,n,n,e),o.restore()),this.textFormatCallback&&(this.textColor||this.textStrokeColor)&&(o.save(),canvas_DrawText(a,o,i,i,this.getFormatText(),this.textFont,this.textColor,this.textStrokeColor,this.textStrokeThickness,"center","middle"),o.restore())};let nj=Phaser.Utils.Objects.GetValue,nA=Phaser.Utils.Objects.IsPlainObject,nF=Phaser.Math.Angle.Normalize,nz=Phaser.Math.Clamp,nW=Phaser.Math.DegToRad(270),nV=Phaser.Math.PI2;let circularprogress_CircularProgress_CircularProgress=class circularprogress_CircularProgress_CircularProgress extends ProgressBase(tT){constructor(e,i,s,r,n,a,o){nA(i)&&(i=nj(o=i,"x",0),s=nj(o,"y",0),r=nj(o,"radius",1),n=nj(o,"barColor",void 0),a=nj(o,"value",0));var h=2*r;super(e,i,s,h,h),this.type="rexCircularProgressCanvas",this.bootProgressBase(o),this.setRadius(r),this.setTrackColor(nj(o,"trackColor",void 0)),this.setBarColor(n),this.setBarColor2(nj(o,"barColor2",void 0)),this.setCenterColor(nj(o,"centerColor",void 0)),this.setThickness(nj(o,"thickness",.2)),this.setStartAngle(nj(o,"startAngle",nW)),this.setEndAngle(nj(o,"endAngle",this.startAngle+nV)),this.setAnticlockwise(nj(o,"anticlockwise",!1)),this.setTextColor(nj(o,"textColor",void 0)),this.setTextStrokeColor(nj(o,"textStrokeColor",void 0),nj(o,"textStrokeThickness",void 0));var l=nj(o,"textFont",void 0);l?this.setTextFont(l):this.setTextFont(nj(o,"textSize","16px"),nj(o,"textFamily","Courier"),nj(o,"textStyle","")),this.setTextFormatCallback(nj(o,"textFormatCallback",void 0),nj(o,"textFormatCallbackScope",void 0)),this.setValue(a)}resize(e,i){return(e=Math.floor(Math.min(e,i)))===this.width||(super.resize(e,e),this.setRadius(e/2)),this}get radius(){return this._radius}set radius(e){this.dirty=this.dirty||this._radius!=e,this._radius=e;var i=2*e;this.resize(i,i)}setRadius(e){return this.radius=e,this}get trackColor(){return this._trackColor}set trackColor(e){e=canvas_GetStyle(e,this.canvas,this.context),this.dirty=this.dirty||this._trackColor!=e,this._trackColor=e}setTrackColor(e){return this.trackColor=e,this}get barColor(){return this._barColor}set barColor(e){e=canvas_GetStyle(e,this.canvas,this.context),this.dirty=this.dirty||this._barColor!=e,this._barColor=e}setBarColor(e){return this.barColor=e,this}get barColor2(){return this._barColor2}set barColor2(e){e=canvas_GetStyle(e,this.canvas,this.context),this.dirty=this.dirty||this._barColor2!=e,this._barColor2=e}setBarColor2(e){return this.barColor2=e,this}get startAngle(){return this._startAngle}set startAngle(e){e=nF(e),this.dirty=this.dirty||this._startAngle!=e,this._startAngle=e,this._deltaAngle=GetDeltaAngle(this._startAngle,this._endAngle,this._anticlockwise)}setStartAngle(e){return this.startAngle=e,this}get endAngle(){return this._endAngle}set endAngle(e){e=nF(e),this.dirty=this.dirty||this._endAngle!=e,this._endAngle=e,this._deltaAngle=GetDeltaAngle(this._startAngle,this._endAngle,this._anticlockwise)}setEndAngle(e){return this.endAngle=e,this}get anticlockwise(){return this._anticlockwise}set anticlockwise(e){this.dirty=this.dirty||this._anticlockwise!=e,this._anticlockwise=e,this._deltaAngle=GetDeltaAngle(this._startAngle,this._endAngle,this._anticlockwise)}setAnticlockwise(e){return void 0===e&&(e=!0),this.anticlockwise=e,this}get thickness(){return this._thickness}set thickness(e){e=nz(e,0,1),this.dirty=this.dirty||this._thickness!=e,this._thickness=e}setThickness(e){return this.thickness=e,this}get centerColor(){return this._centerColor}set centerColor(e){e=canvas_GetStyle(e,this.canvas,this.context),this.dirty=this.dirty||this._centerColor!=e,this._centerColor=e}get centerColor2(){return this._centerColor2}set centerColor2(e){e=canvas_GetStyle(e,this.canvas,this.context),this.dirty=this.dirty||this._centerColor2!=e,this._centerColor2=e}setCenterColor(e,i){return this.centerColor=e,this.centerColor2=i,this}get textColor(){return this._textColor}set textColor(e){e=canvas_GetStyle(e,this.canvas,this.context),this.dirty=this.dirty||this._textColor!=e,this._textColor=e}setTextColor(e){return this.textColor=e,this}get textStrokeColor(){return this._textStrokeColor}set textStrokeColor(e){e=canvas_GetStyle(e,this.canvas,this.context),this.dirty=this.dirty||this._textStrokeColor!=e,this._textStrokeColor=e}get textStrokeThickness(){return this._textStrokeThickness}set textStrokeThickness(e){this.dirty=this.dirty||this._textStrokeThickness!=e,this._textStrokeThickness=e}setTextStrokeColor(e,i){return void 0===i&&(i=2),this.textStrokeColor=e,this.textStrokeThickness=i,this}get textFont(){return this._textFont}set textFont(e){this.dirty=this.dirty||this._textFont!=e,this._textFont=e}setTextFont(e,i,s){return this.textFont=void 0===i?e:s+" "+e+" "+i,this}setTextFormatCallback(e,i){return this.textFormatCallback=e,this.textFormatCallbackScope=i,this}updateTexture(){return this.clear(),circularprogress_DrawContent.call(this),super.updateTexture(),this}getFormatText(e){return void 0===e&&(e=this.value),this.textFormatCallbackScope?this.textFormatCallback(e):this.textFormatCallback.call(this.textFormatCallbackScope,e)}};var GetDeltaAngle=function(e,i,s){return s?e<=i?nV+e-i:e-i:e>=i?nV+i-e:i-e};ObjectFactory.register("circularProgressCanvas",function(e,i,s,r,n,a){var o=new circularprogress_CircularProgress_CircularProgress(this.scene,e,i,s,r,n,a);return this.scene.add.existing(o),o}),(0,k.Z)(window,"RexPlugins.UI.CircularProgressCanvas",circularprogress_CircularProgress_CircularProgress);var BuildRectangle=function(e,i,s,r,n,a){var o=(i+r)/2;return a>=0?e.startAt(o+a,s).lineTo(r+a,s).lineTo(r,n).lineTo(i,n).lineTo(i+a,s).lineTo(o+a,s):e.startAt(o,s).lineTo(r,s).lineTo(r-a,n).lineTo(i-a,n).lineTo(i,s).lineTo(o,s),e};let nY=Phaser.Utils.Objects.GetValue,nX=Phaser.Utils.Objects.IsPlainObject;let LineProgress_LineProgress=class LineProgress_LineProgress extends ProgressBase(rM){constructor(e,i,s,r,n,a,o,h){nX(i)?(i=nY(h=i,"x",0),s=nY(h,"y",0),r=nY(h,"width",2),n=nY(h,"height",2),a=nY(h,"barColor",void 0),o=nY(h,"value",0)):nX(r)?(r=nY(h=r,"width",2),n=nY(h,"height",2),a=nY(h,"barColor",void 0),o=nY(h,"value",0)):nX(a)&&(a=nY(h=a,"barColor",void 0),o=nY(h,"value",0)),super(e,i,s,r,n,h),this.type="rexLineProgress",this.bootProgressBase(h),this.addShape(new r0().setName("trackFill")).addShape(new r0().setName("bar")).addShape(new r0().setName("trackStroke")),this.setTrackColor(nY(h,"trackColor",void 0)),this.setBarColor(a),this.setTrackStroke(nY(h,"trackStrokeThickness",2),nY(h,"trackStrokeColor",void 0)),this.setSkewX(nY(h,"skewX",0)),this.setRTL(nY(h,"rtl",!1)),this.setValue(o)}get trackColor(){return this._trackColor}set trackColor(e){this.dirty=this.dirty||this._trackColor!=e,this._trackColor=e}setTrackColor(e){return this.trackColor=e,this}get trackStrokeColor(){return this._trackStrokeColor}set trackStrokeColor(e){this.dirty=this.dirty||this._trackStrokeColor!=e,this._trackStrokeColor=e}get trackStrokeThickness(){return this._trackStrokeThickness}set trackStrokeThickness(e){this.dirty=this.dirty||this._trackStrokeThickness!=e,this._trackStrokeThickness=e}setTrackStroke(e,i){return this.trackStrokeThickness=e,this.trackStrokeColor=i,this}get barColor(){return this._barColor}set barColor(e){this.dirty=this.dirty||this._barColor!=e,this._barColor=e}setBarColor(e){return this.barColor=e,this}get skewX(){return this._skewX}set skewX(e){this.dirty=this.dirty||this._skewX!=e,this._skewX=e}setSkewX(e){return this.skewX=e,this}get rtl(){return this._rtl}set rtl(e){e=!!e,this.dirty=this.dirty||this._rtl!=e,this._rtl=e}setRTL(e){return void 0===e&&(e=!0),this.rtl=e,this}};Object.assign(LineProgress_LineProgress.prototype,{updateShapes:function(){var e,i,s=this.skewX,r=this.width-Math.abs(s),n=this.height,a=this.getShape("trackFill");a.fillStyle(this.trackColor),a.isFilled&&BuildRectangle(a,0,0,r,n,s).close();var o=this.getShape("bar");o.fillStyle(this.barColor),o.isFilled&&(this.rtl?(e=r*(1-this.value),i=r):(e=0,i=r*this.value),BuildRectangle(o,e,0,i,n,s).close());var h=this.getShape("trackStroke");h.lineStyle(this.trackStrokeThickness,this.trackStrokeColor),h.isStroked&&BuildRectangle(h,0,0,r,n,s).end()}}),ObjectFactory.register("lineProgress",function(e,i,s,r,n,a,o){var h=new LineProgress_LineProgress(this.scene,e,i,s,r,n,a,o);return this.scene.add.existing(h),h}),(0,k.Z)(window,"RexPlugins.UI.LineProgress",LineProgress_LineProgress);var canvas_AddPolygonPath=function(e,i){e.save(),e.beginPath();var s=i[0];e.moveTo(s.x,s.y);for(var r=1,n=i.length;r<n;r++)s=i[r],e.lineTo(s.x,s.y);e.closePath(),e.restore()},canvas_DrawPolygon=function(e,i,s,r,n,a,o){void 0===o&&(o="round"),canvas_AddPolygonPath(i,s),i.lineJoin=o,null!=r&&(i.fillStyle=r,i.fill()),null!=n&&(i.strokeStyle=n,i.lineWidth=a,i.stroke())},BuildPolygon=function(e,i,s,r,n,a){void 0===a&&(a=[]),a.length=4;for(var o,h=0;h<4;h++)a[h]||(a[h]={});return n>=0?((o=a[0]).x=e+n,o.y=i,(o=a[1]).x=s+n,o.y=i,(o=a[2]).x=s,o.y=r,(o=a[3]).x=e):((o=a[0]).x=e,o.y=i,(o=a[1]).x=s,o.y=i,(o=a[2]).x=s-n,o.y=r,(o=a[3]).x=e-n),o.y=r,a},lineprogress_DrawContent=function(){var e=this.skewX,i=this.width-Math.abs(e),s=this.height,r=this.canvas,n=this.context;if((this.trackColor||this.trackStrokeColor)&&BuildPolygon(0,0,i,s,e,this.trackPoints),this.barColor&&(this.rtl?(a=i*(1-this.value),o=i):(a=0,o=i*this.value),BuildPolygon(a,0,o,s,e,this.barPoints)),this.trackColor&&(n.save(),canvas_DrawPolygon(r,n,this.trackPoints,this.trackColor),n.restore()),this.barColor){if(n.save(),this.barColor2){if(this.isHorizontalGradient){var a,o,h,l,c=s/2;l=n.createLinearGradient(a,c,o,c)}else{var g=i/2;l=n.createLinearGradient(g,0,g,s)}l.addColorStop(0,this.rtl?this.barColor:this.barColor2),l.addColorStop(1,this.rtl?this.barColor2:this.barColor),h=l}else h=this.barColor;canvas_DrawPolygon(r,n,this.barPoints,h),n.restore()}this.trackStrokeColor&&this.trackStrokeThickness>0&&(n.save(),canvas_DrawPolygon(r,n,this.trackPoints,void 0,this.trackStrokeColor,this.trackStrokeThickness),n.restore())};let nH=Phaser.Utils.Objects.GetValue,nU=Phaser.Utils.Objects.IsPlainObject;let lineprogress_LineProgress_LineProgress=class lineprogress_LineProgress_LineProgress extends ProgressBase(tT){constructor(e,i,s,r,n,a,o,h){nU(i)?(i=nH(h=i,"x",0),s=nH(h,"y",0),r=nH(h,"width",2),n=nH(h,"height",2),a=nH(h,"barColor",void 0),o=nH(h,"value",0)):nU(r)?(r=nH(h=r,"width",2),n=nH(h,"height",2),a=nH(h,"barColor",void 0),o=nH(h,"value",0)):nU(a)&&(a=nH(h=a,"barColor",void 0),o=nH(h,"value",0)),super(e,i,s,r,n),this.type="rexLineProgressCanvas",this.trackPoints=[],this.barPoints=[],this.bootProgressBase(h),this.setTrackColor(nH(h,"trackColor",void 0)),this.setBarColor(a,nH(h,"barColor2",void 0),nH(h,"isHorizontalGradient",void 0)),this.setTrackStroke(nH(h,"trackStrokeThickness",2),nH(h,"trackStrokeColor",void 0)),this.setSkewX(nH(h,"skewX",0)),this.setRTL(nH(h,"rtl",!1)),this.setValue(o)}get trackColor(){return this._trackColor}set trackColor(e){e=canvas_GetStyle(e,this.canvas,this.context),this.dirty=this.dirty||this._trackColor!=e,this._trackColor=e}setTrackColor(e){return this.trackColor=e,this}get trackStrokeColor(){return this._trackStrokeColor}set trackStrokeColor(e){e=canvas_GetStyle(e,this.canvas,this.context),this.dirty=this.dirty||this._trackStrokeColor!=e,this._trackStrokeColor=e}get trackStrokeThickness(){return this._trackStrokeThickness}set trackStrokeThickness(e){this.dirty=this.dirty||this._trackStrokeThickness!=e,this._trackStrokeThickness=e}setTrackStroke(e,i){return this.trackStrokeThickness=e,this.trackStrokeColor=i,this}get barColor(){return this._barColor}set barColor(e){e=canvas_GetStyle(e,this.canvas,this.context),this.dirty=this.dirty||this._barColor!=e,this._barColor=e}get barColor2(){return this._barColor2}set barColor2(e){e=canvas_GetStyle(e,this.canvas,this.context),this.dirty=this.dirty||this._barColor2!=e,this._barColor2=e}get isHorizontalGradient(){return this._isHorizontalGradient}set isHorizontalGradient(e){this.dirty|=this._isHorizontalGradient!=e,this._isHorizontalGradient=e}setBarColor(e,i,s){return void 0===s&&(s=!0),this.barColor=e,this.barColor2=i,this.isHorizontalGradient=s,this}get skewX(){return this._skewX}set skewX(e){this.dirty=this.dirty||this._skewX!=e,this._skewX=e}setSkewX(e){return this.skewX=e,this}get rtl(){return this._rtl}set rtl(e){e=!!e,this.dirty=this.dirty||this._rtl!=e,this._rtl=e}setRTL(e){return void 0===e&&(e=!0),this.rtl=e,this}updateTexture(){return this.clear(),lineprogress_DrawContent.call(this),super.updateTexture(),this}};ObjectFactory.register("circularProgressCanvas",function(e,i,s,r,n,a,o){var h=new lineprogress_LineProgress_LineProgress(this.scene,e,i,s,r,n,a,o);return this.scene.add.existing(h),h}),(0,k.Z)(window,"RexPlugins.UI.LineProgressCanvas",lineprogress_LineProgress_LineProgress),Phaser.Math.Wrap;let nN=Phaser.Math.Linear;var methods_DrawFitTriangle=function(){var e,i,s,r,n,a,o=this.getShape("triangle"),h=this.padding,l=this.width-h.right,c=0+h.left,g=this.height-h.bottom,m=0+h.top,x=(c+l)/2,S=(m+g)/2,_={0:{a:{x:c,y:m},b:{x:l,y:S},c:{x:c,y:g}},1:{a:{x:c,y:m},b:{x:x,y:g},c:{x:l,y:m}},2:{a:{x:l,y:m},b:{x:c,y:S},c:{x:l,y:g}},3:{a:{x:c,y:g},b:{x:x,y:m},c:{x:l,y:g}}};if(void 0===this.previousDirection){var k=_[this.direction],E=k.a,R=k.b,j=k.c;e=E.x,i=E.y,s=R.x,r=R.y,n=j.x,a=j.y}else{var Y=_[this.previousDirection],X=_[this.direction],$=this.easeDirectionProgress;e=nN(Y.a.x,X.a.x,$),i=nN(Y.a.y,X.a.y,$),s=nN(Y.b.x,X.b.x,$),r=nN(Y.b.y,X.b.y,$),n=nN(Y.c.x,X.c.x,$),a=nN(Y.c.y,X.c.y,$)}o.startAt(e,i).lineTo(s,r).lineTo(n,a),this.arrowOnly?o.end():o.close()};let n$=Phaser.Math.DegToRad,nZ=n$(120);var methods_DrawCircleVerticesTriangle=function(e){var e=this.getShape("triangle"),i=this.width/2,s=this.height/2,r=Math.min(i,s)*this.radius,n=this.verticeRotation;e.startAt(i+r*Math.cos(n+nZ),s+r*Math.sin(n+nZ)).lineTo(i+r*Math.cos(n),s+r*Math.sin(n)).lineTo(i+r*Math.cos(n-nZ),s+r*Math.sin(n-nZ)),this.arrowOnly?e.end():e.close()};let nK=Phaser.Utils.Objects.GetValue,nJ=Phaser.Utils.Objects.IsPlainObject,nq=Phaser.Math.DegToRad,nQ=Phaser.Math.RadToDeg;let triangle_Triangle_Triangle=class triangle_Triangle_Triangle extends rM{constructor(e,i,s,r,n,a,o){if(nJ(i)){var h,l,c,g,m,x,S,_,k=i;i=k.x,s=k.y,r=k.width,n=k.height,a=k.color,o=k.alpha,h=k.strokeColor,l=k.strokeAlpha,c=k.strokeWidth,g=k.arrowOnly,m=k.direction,x=k.easeDuration,S=k.padding,_=k.radius}void 0===i&&(i=0),void 0===s&&(s=0),void 0===r&&(r=1),void 0===n&&(n=r),void 0===g&&(g=!1),void 0===m&&(m=0),void 0===x&&(x=0),void 0===S&&(S=0),void 0===_&&(_=void 0),super(e,i,s,r,n),this.type="rexTriangle",this.setFillStyle(a,o),void 0!==h&&void 0===c&&(c=2),this.setStrokeStyle(c,h,l),this.setArrowOnly(g),this.setDirection(m,x),this.setPadding(S),this.setRadius(_),this.buildShapes()}get arrowOnly(){return this._arrowOnly}set arrowOnly(e){this.dirty=this.dirty||this._arrowOnly!=e,this._arrowOnly=e}setArrowOnly(e){return void 0===e&&(e=!0),this.arrowOnly=e,this}get direction(){return this._direction}set direction(e){e=ParseDirection(e),this._direction!==e&&(this.easeDuration>0&&void 0!==this._direction?this.previousDirection=this._direction:this.previousDirection=void 0,this._direction=e,this.verticeAngle=90*e,this.dirty=!0,void 0!==this.previousDirection?this.playEaseDirectionation():this.stopEaseDirection())}setDirection(e,i){return void 0!==i&&this.setEaseDuration(i),this.direction=e,this}toggleDirection(e){return this.setDirection(this.direction+2,e),this}get easeDirectionProgress(){return this._easeDirectionProgress}set easeDirectionProgress(e){this._easeDirectionProgress!==e&&(this._easeDirectionProgress=e,this.dirty=!0)}setPadding(e,i,s,r){if("object"==typeof e){var n=e,a=nK(n,"x",null);null!==a?(e=a,s=a):(e=nK(n,"left",0),s=nK(n,"right",e));var o=nK(n,"y",null);null!==o?(i=o,r=o):(i=nK(n,"top",0),r=nK(n,"bottom",i))}else void 0===e&&(e=0),void 0===i&&(i=e),void 0===s&&(s=e),void 0===r&&(r=i);return void 0===this.padding&&(this.padding={}),this.dirty=this.dirty||this.padding.left!=e||this.padding.top!=i||this.padding.right!=s||this.padding.bottom!=r,this.padding.left=e,this.padding.top=i,this.padding.right=s,this.padding.bottom=r,this.setRadius(),this}get radius(){return this._radius}set radius(e){this.dirty=this.dirty||this._radius!=e,this._radius=e}setRadius(e){return this.radius=e,this.shapeMode=null==e?0:1,this}get verticeRotation(){return this._verticeRotation}set verticeRotation(e){this.dirty=this.dirty||this._verticeRotation!=e,this._verticeRotation=e}setVerticeRotation(e){return this.verticeRotation=e,this}get verticeAngle(){return nQ(this.verticeRotation)}set verticeAngle(e){this.verticeRotation=nq(e)}setVerticeAngle(e){return this.verticeAngle=e,this}};let n0={right:0,down:1,left:2,up:3};var ParseDirection=function(e){return"string"==typeof e&&(e=n0[e]),e%=4};Object.assign(triangle_Triangle_Triangle.prototype,{buildShapes(){this.addShape(new r0().setName("triangle"))},updateShapes(){var e=this.getShape("triangle");this.arrowOnly?e.fillStyle().lineStyle(this.lineWidth,this.strokeColor,this.strokeAlpha):e.fillStyle(this.fillColor,this.fillAlpha).lineStyle(this.lineWidth,this.strokeColor,this.strokeAlpha),0===this.shapeMode?methods_DrawFitTriangle.call(this):methods_DrawCircleVerticesTriangle.call(this)}},{setEaseDuration(e){return void 0===e&&(e=0),this.easeDuration=e,this},playEaseDirectionation(){return void 0===this.easeDirectionProgressTask&&(this.easeDirectionProgressTask=new r9(this,{eventEmitter:null})),this.easeDirectionProgressTask.restart({key:"easeDirectionProgress",from:0,to:1,duration:this.easeDuration}),this},stopEaseDirection(){return void 0===this.easeDirectionProgressTask||this.easeDirectionProgressTask.stop(),this}}),ObjectFactory.register("triangle",function(e,i,s,r,n,a){var o=new triangle_Triangle_Triangle(this.scene,e,i,s,r,n,a);return this.scene.add.existing(o),o}),(0,k.Z)(window,"RexPlugins.UI.Triangle",triangle_Triangle_Triangle),system_CheckP3Version();let n1=Phaser.GameObjects.Zone,n2=Phaser.Utils.Array.Add,n5=Phaser.Utils.Array.Remove;let containerlite_Base_Base=class containerlite_Base_Base extends n1{constructor(e,i,s,r,n){void 0===i&&(i=0),void 0===s&&(s=0),void 0===r&&(r=1),void 0===n&&(n=1),super(e,i,s,r,n),this.children=[]}destroy(e){if(this.scene&&!this.ignoreDestroy){if(e)for(var i,s=this.children.length-1;s>=0;s--)(i=this.children[s]).parentContainer||i.displayList||i.destroy(e);this.clear(!e),super.destroy(e)}}contains(e){return -1!==this.children.indexOf(e)}add(e){var i=this;return n2(this.children,e,0,function(e){e.once("destroy",i.onChildDestroy,i)},this),this}remove(e,i){var s=this;return n5(this.children,e,function(e){e.off("destroy",s.onChildDestroy,s),i&&e.destroy()}),this}onChildDestroy(e,i){this.remove(e,!1)}clear(e){for(var i,s=0,r=this.children.length;s<r;s++)(i=this.children[s]).off("destroy",this.onChildDestroy,this),e&&i.destroy();return this.children.length=0,this}};let n3=Phaser.GameObjects.Components;Phaser.Class.mixin(containerlite_Base_Base,[n3.Alpha,n3.Flip]);var n7=containerlite_Base_Base,GetParent=function(e,i){var s;if(void 0===i)e.hasOwnProperty("rexContainer")&&(s=e.rexContainer.parent);else for(s=GetParent(e);s&&s.name!==i;)s=GetParent(s);return s},GetTopmostParent=function(e){for(var i=GetParent(e);i;)e=i,i=GetParent(i);return e};let n6=Phaser.Math.DegToRad,n4=Phaser.Math.RadToDeg;var utils_GetLocalState=function(e){if(!e.hasOwnProperty("rexContainer")){var i={parent:null,self:null,layer:null,x:0,y:0,syncPosition:!0,rotation:0,syncRotation:!0,scaleX:0,scaleY:0,syncScale:!0,alpha:0,syncAlpha:!0,syncScrollFactor:!0,syncCameraFilter:!0,syncDisplayList:!0,visible:!0,active:!0};Object.defineProperty(i,"angle",{get:function(){return n4(this.rotation)},set:function(e){this.rotation=n6(e)}}),Object.defineProperty(i,"displayWidth",{get:function(){return e.width*this.scaleX},set:function(i){this.scaleX=i/e.width}}),Object.defineProperty(i,"displayHeight",{get:function(){return e.height*this.scaleY},set:function(i){this.scaleY=i/e.height}}),e.rexContainer=i}return e.rexContainer};let n8=Phaser.Utils.Objects.GetValue,n9=n7.prototype.add;var Add=function(e,i){this.setParent(e);var s=utils_GetLocalState(e);return SetupSyncFlags(s,i),this.resetChildState(e).updateChildVisible(e).updateChildActive(e).updateChildScrollFactor(e).updateChildMask(e).updateCameraFilter(e),n9.call(this,e),SyncDisplayList.call(this,e,s),this},AddLocal=function(e,i){this.setParent(e);var s=utils_GetLocalState(e);return SetupSyncFlags(s,i),s.x=e.x,s.y=e.y,s.rotation=e.rotation,s.scaleX=e.scaleX,s.scaleY=e.scaleY,s.alpha=e.alpha,s.visible=e.visible,s.active=e.active,this.updateChildPosition(e).updateChildAlpha(e).updateChildVisible(e).updateChildActive(e).updateChildScrollFactor(e).updateChildMask(e),n9.call(this,e),SyncDisplayList.call(this,e,s),this},SetupSyncFlags=function(e,i){void 0===i&&(i=!0),"boolean"==typeof i?(e.syncPosition=i,e.syncRotation=i,e.syncScale=i,e.syncAlpha=i,e.syncScrollFactor=i,e.syncCameraFilter=i,e.syncDisplayList=i):(e.syncPosition=n8(i,"syncPosition",!0),e.syncRotation=n8(i,"syncRotation",!0),e.syncScale=n8(i,"syncScale",!0),e.syncAlpha=n8(i,"syncAlpha",!0),e.syncScrollFactor=n8(i,"syncScrollFactor",!0),e.syncCameraFilter=n8(i,"syncCameraFilter",!0),e.syncDisplayList=n8(i,"syncDisplayList",!0))},SyncDisplayList=function(e,i){this.addToParentContainer(e),i.syncDisplayList&&this.addToPatentLayer(e),this.addToRenderLayer(e)};let at=n7.prototype.remove,ae=n7.prototype.clear,ai=Phaser.Math.RotateAround;var utils_GetScale=function(e,i){return e===i?1:e/i};let as=Phaser.Math.DegToRad;var system_FilterDisplayGameObjects=function(e){return e.filter(function(e){return!!e.displayList||!!e.parentContainer||void 0})},DepthFirstSearch=function(e,i){if(!i(e)&&e.isRexContainerLite)for(var s=e.children,r=0,n=s.length;r<n;r++)DepthFirstSearch(s[r],i)},BreadthFirstSearch=function(e,i){for(var s=[e];s.length>0;){var r=s.shift();!i(r)&&r.isRexContainerLite&&s.push(...r.children)}};let ar=Phaser.Utils.Array;var GetLocalStates=function(e){for(var i=[],s=0,r=e.length;s<r;s++){var n=e[s];n.hasOwnProperty("rexContainer")&&i.push(n.rexContainer)}return i},GetScene=function(e){for(var i=0,s=e.length;i<s;i++){var r=e[i].scene;if(r)return r}return null},UpdateChild=function(e,i,s){if(!s.parent){e.remove();return}var r=s.parent,n=s.self;switch(i){case"x":case"y":r.updateChildPosition(n);break;case"angle":case"rotation":r.updateChildRotation(n);break;case"scaleX":case"scaleY":case"displayWidth":case"displayHeight":r.updateChildScale(n);break;case"alpha":r.updateChildAlpha(n);break;default:r.updateChildPosition(n),r.updateChildRotation(n),r.updateChildScale(n),r.updateChildAlpha(n)}};let an=Phaser.GameObjects.Container,ao=Phaser.GameObjects.Layer;var system_IsLayerGameObject=function(e){return e instanceof ao},GetValidChildren=function(e){return e.getAllChildren([e]).filter(function(e){return!!e.displayList||!!e.parentContainer})},AddToContainer=function(e){var i=GetValidChildren(this);-1===i.indexOf(this)&&i.push(this),system_SortGameObjectsByDepth(i),e.add(i)},RemoveFromContainer=function(e,i,s){if(this.scene){var r=GetValidChildren(this);system_SortGameObjectsByDepth(r,i),e.remove(r),s&&r.forEach(function(e){e.addToDisplayList()})}};let ah=Phaser.Geom.Rectangle,al=Phaser.Geom.Rectangle.Union;var bounds_GetBoundsOfGameObjects=function(e,i){void 0===i?i=new ah:!0===i&&(void 0===gW&&(gW=new ah),i=gW),i.setTo(0,0,0,0);for(var s,r=!0,n=0,a=e.length;n<a;n++)if((s=e[n]).getBounds){var o=GetBounds(s,!0);r?(i.setTo(o.x,o.y,o.width,o.height),r=!1):al(o,i,i)}return i};let ad=Phaser.GameObjects.GameObject;var system_IsGameObject=function(e){return e instanceof ad},ac=Phaser.Utils.Objects.GetValue,rendertexture_Snapshot=function(e){if(e){var i,s,r=e.gameObjects,n=e.renderTexture,a=e.saveTexture,o=ac(e,"x",void 0),h=ac(e,"y",void 0),l=ac(e,"width",void 0),c=ac(e,"height",void 0),g=ac(e,"originX",0),m=ac(e,"originY",0),x=ac(e,"padding",0);if(void 0===l||void 0===c||void 0===o||void 0===h){var S=bounds_GetBoundsOfGameObjects(r,!0);void 0!==o&&void 0!==h?(l=2*Math.max(o-S.left,S.right-o),c=2*Math.max(h-S.top,S.bottom-h),g=.5,m=.5):(o=S.x,h=S.y,l=S.width,c=S.height,g=0,m=0),i=S.x,s=S.y}else i=o+(0-g)*l,s=h+(0-m)*c;i-=x,s-=x,l+=2*x,c+=2*x;var _=r[0].scene,k=_.sys.textures;return a&&!n&&(n=k.addDynamicTexture(a,l,c)),n||(n=_.add.renderTexture(0,0,l,c)),n.setPosition&&n.setPosition(o,h),(n.width!==l||n.height!==c)&&n.setSize(l,c),n.setOrigin&&n.setOrigin(g,m),n.camera.setScroll(i,s),r=system_SortGameObjectsByDepth(object_Clone(r)),n.draw(r),a&&(system_IsGameObject(n)?n.saveTexture(a):n.key!==a&&k.renameTexture(n.key,key)),n}};let au=Phaser.Utils.Objects.GetValue,ap=Phaser.Math.RotateAround;var origin_ChangeOrigin=function(e,i,s){void 0===s&&(s=i);var r={x:(i-e.originX)*e.displayWidth,y:(s-e.originY)*e.displayHeight};return ap(r,0,0,e.rotation),e.originX=i,e.originY=s,e.x=e.x+r.x,e.y=e.y+r.y,e},ag={changeOrigin:function(e,i){this.syncChildrenEnable=!1,origin_ChangeOrigin(this,e,i),this.syncChildrenEnable=!0;for(var s=this.getAllChildren(),r=0,n=s.length;r<n;r++)this.resetChildPositionState(s[r]);return this},drawBounds:function(e,i){var s=au(i,"drawContainer",!0),r=au(i,"children");return void 0===r&&(r=this.getAllVisibleChildren([this])),s||(r=r.filter(function(e){return!e.isRexContainerLite})),bounds_DrawBounds(r,e,i),this}};Object.assign(ag,{setParent(e,i){void 0===i&&(i=this);var s=utils_GetLocalState(e);return i?(s.parent=i,s.self=e):(s.parent=null,s.self=null),this},getParent(e,i){return"string"==typeof e&&(i=e,e=void 0),void 0===e&&(e=this),GetParent(e,i)},getTopmostParent(e){return void 0===e&&(e=this),GetTopmostParent(e)}},{add(e){return Array.isArray(e)?this.addMultiple(e):Add.call(this,e),this},pin(e,i){return Array.isArray(e)?this.addMultiple(e,i):Add.call(this,e,i),this},addMultiple(e){for(var i=0,s=e.length;i<s;i++)Add.call(this,e[i]);return this},addLocal(e){return Array.isArray(e)?this.addMultiple(e):AddLocal.call(this,e),this},pinLocal(e,i){return Array.isArray(e)?this.addMultiple(e,i):AddLocal.call(this,e,i),this},addLocalMultiple(e){for(var i=0,s=e.length;i<s;i++)AddLocal.call(this,e[i]);return this}},{remove(e,i){return GetParent(e)!==this||(this.setParent(e,null),i||this.removeFromRenderLayer(e),at.call(this,e,i)),this},unpin(e,i){return GetParent(e)!==this||(this.setParent(e,null),i||this.removeFromRenderLayer(e),at.call(this,e,i)),this},clear(e){for(var i=this.children,s=0,r=i.length;s<r;s++){var n=i[s];this.setParent(n,null),e||this.removeFromRenderLayer(n)}return ae.call(this,e),this}},{getLocalState:e=>utils_GetLocalState(e),resetChildState(e){return this.resetChildPositionState(e).resetChildVisibleState(e).resetChildAlphaState(e).resetChildActiveState(e),this},resetChildrenState(e){for(var i=0,s=e.length;i<s;i++)this.resetChildState(e[i]);return this},syncProperties(){return this.syncPosition().syncVisible().syncAlpha().syncActive().syncScrollFactor().syncMask(),this}},{worldToLocal(e){return e.x-=this.x,e.y-=this.y,ai(e,0,0,-this.rotation),e.x/=this.scaleX,e.y/=this.scaleY,e},localToWorld(e){return e.x*=this.scaleX,e.y*=this.scaleY,ai(e,0,0,this.rotation),e.x+=this.x,e.y+=this.y,e}},{updateChildPosition(e){e.isRexContainerLite&&(e.syncChildrenEnable=!1);var i=utils_GetLocalState(e),s=i.parent;return i.syncPosition&&(e.x=i.x,e.y=i.y,s.localToWorld(e)),i.syncRotation&&(e.rotation=i.rotation+s.rotation),i.syncScale&&(e.scaleX=i.scaleX*s.scaleX,e.scaleY=i.scaleY*s.scaleY),e.isRexContainerLite&&(e.syncChildrenEnable=!0,e.syncPosition()),this},syncPosition(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildPosition,this),this},resetChildPositionState(e){var i=utils_GetLocalState(e),s=i.parent;return i.x=e.x,i.y=e.y,s.worldToLocal(i),i.scaleX=utils_GetScale(e.scaleX,s.scaleX),i.scaleY=utils_GetScale(e.scaleY,s.scaleY),i.rotation=e.rotation-s.rotation,this},setChildPosition(e,i,s){return e.x=i,e.y=s,this.resetChildPositionState(e),this},setChildLocalPosition(e,i,s){var r=utils_GetLocalState(e);return r.x=i,r.y=s,this.updateChildPosition(e),this},resetLocalPositionState(){var e=utils_GetLocalState(this).parent;return e&&e.resetChildPositionState(this),this},getChildLocalX:e=>utils_GetLocalState(e).x,getChildLocalY:e=>utils_GetLocalState(e).y},{updateChildRotation(e){var i=utils_GetLocalState(e),s=i.parent;return i.syncRotation&&(e.rotation=s.rotation+i.rotation),this},syncRotation(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildRotation,this),this},resetChildRotationState(e){var i=utils_GetLocalState(e),s=i.parent;return i.rotation=e.rotation-s.rotation,this},setChildRotation(e,i){return e.rotation=i,this.resetChildRotationState(e),this},setChildAngle(e,i){return e.angle=i,this.resetChildRotationState(e),this},setChildLocalRotation(e,i){return utils_GetLocalState(e).rotation=i,this.updateChildRotation(e),this},setChildLocalAngle(e,i){return utils_GetLocalState(e).rotation=as(i),this.updateChildRotation(e),this},resetLocalRotationState(){var e=utils_GetLocalState(this).parent;return e&&e.resetChildRotationState(this),this},getChildLocalRotation:e=>utils_GetLocalState(e).rotation},{updateChildScale(e){var i=utils_GetLocalState(e),s=i.parent;return i.syncScale&&(e.scaleX=s.scaleX*i.scaleX,e.scaleY=s.scaleY*i.scaleY),this},syncScale(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildScale,this),this},resetChildScaleState(e){var i=utils_GetLocalState(e),s=i.parent;return i.scaleX=utils_GetScale(e.scaleX,s.scaleX),i.scaleY=utils_GetScale(e.scaleY,s.scaleY),this},setChildScale(e,i,s){return void 0===s&&(s=i),e.scaleX=i,e.scaleY=s,this.resetChildScaleState(e),this},setChildLocalScale(e,i,s){void 0===s&&(s=i);var r=utils_GetLocalState(e);return r.scaleX=i,r.scaleY=s,this.updateChildScale(e),this},setChildDisplaySize(e,i,s){return e.setDisplaySize(i,s),this.resetChildScaleState(e),this},resetLocalScaleState(){var e=utils_GetLocalState(this).parent;return e&&e.resetChildScaleState(this),this},getChildLocalScaleX:e=>utils_GetLocalState(e).scaleX,getChildLocalScaleY:e=>utils_GetLocalState(e).scaleY},{updateChildVisible(e){var i=utils_GetLocalState(e),s=i.parent,r=!i.hasOwnProperty("maskVisible")||i.maskVisible,n=!s||s.visible;return e.visible=n&&i.visible&&r,this},syncVisible(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildVisible,this),this},resetChildVisibleState(e){var i=utils_GetLocalState(e);return i.hasOwnProperty("maskVisible")&&delete i.maskVisible,i.visible=e.visible,this},setChildVisible(e,i){return this.setChildLocalVisible(e,i),this},setChildLocalVisible(e,i){return void 0===i&&(i=!0),utils_GetLocalState(e).visible=i,this.updateChildVisible(e),this},setChildMaskVisible(e,i){return void 0===i&&(i=!0),utils_GetLocalState(e).maskVisible=i,this.updateChildVisible(e),this},resetLocalVisibleState(){var e=utils_GetLocalState(this).parent;return e&&e.resetChildVisibleState(this),this},getChildLocalVisible:e=>utils_GetLocalState(e).visible},{updateChildAlpha(e){var i=utils_GetLocalState(e),s=i.parent;return i.syncAlpha&&(e.alpha=s.alpha*i.alpha),this},syncAlpha(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildAlpha,this),this},resetChildAlphaState(e){var i=utils_GetLocalState(e),s=i.parent;return i.alpha=utils_GetScale(e.alpha,s.alpha),this},setChildAlpha(e,i){return e.alpha=i,this.resetChildAlphaState(e),this},setChildLocalAlpha(e,i){return utils_GetLocalState(e).alpha=i,this.updateChildAlpha(e),this},resetLocalAlphaState(){var e=utils_GetLocalState(this).parent;return e&&e.resetChildAlphaState(this),this},getChildLocalAlpha:e=>utils_GetLocalState(e).alpha},{updateChildActive(e){var i=utils_GetLocalState(e),s=i.parent;return e.active=s.active&&i.active,this},syncActive(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildActive,this),this},resetChildActiveState(e){return utils_GetLocalState(e).active=e.active,this},setChildActive(e,i){return e.active=i,this.resetChildActiveState(e),this},setChildLocalActive(e,i){return void 0===i&&(i=!0),utils_GetLocalState(e).active=i,this.updateChildActive(e),this},resetLocalActiveState(){var e=utils_GetLocalState(this).parent;return e&&e.resetChildActiveState(this),this},getChildLocalActive:e=>utils_GetLocalState(e).active},{updateChildScrollFactor(e){var i=utils_GetLocalState(e),s=i.parent;return i.syncScrollFactor&&(e.scrollFactorX=s.scrollFactorX,e.scrollFactorY=s.scrollFactorY),this},syncScrollFactor(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildScrollFactor,this),this}},{updateCameraFilter(e){var i=utils_GetLocalState(e),s=i.parent;return i.syncCameraFilter&&(e.cameraFilter=s.cameraFilter),this},syncCameraFilter(){return this.syncChildrenEnable&&this.children.forEach(this.updateCameraFilter,this),this}},{updateChildMask(e){return null==this.mask||(this.mask.hasOwnProperty("geometryMask")?this.mask.geometryMask:this.mask.bitmapMask)!==e&&(e.mask=this.mask),this},syncMask(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildMask,this),this},setMask(e){return this.mask=e,this},clearMask(e){void 0===e&&(e=!1);var i=this;return this._mask=null,this.setChildMaskVisible(this),this.children.forEach(function(e){e.clearMask&&e.clearMask(!1),e.hasOwnProperty("isRexContainerLite")||i.setChildMaskVisible(e)}),e&&this.mask&&this.mask.destroy(),this}},{setDepth(e,i){if(this.depth=e,!i&&this.children)for(var s=this.getAllChildren(),r=0,n=s.length;r<n;r++)s[r].depth=e;return this},swapDepth(e){var i=this.depth,s=e.depth;return this.setDepth(s),e.setDepth(i),this},incDepth(e){if(this.depth+=e,this.children)for(var i=this.getAllChildren(),s=0,r=i.length;s<r;s++)i[s].depth+=e;return this},bringToTop(){var e=this.displayList;if(!e)return this;var i=this.getAllChildren([this]);system_SortGameObjectsByDepth(i,!1);for(var s=0,r=i.length;s<r;s++){var n=i[s];e.exists(n)&&e.bringToTop(n)}return this},bringMeToTop(){return this.bringToTop()},sendToBack(){var e=this.displayList;if(!e)return this;var i=this.getAllChildren([this]);system_SortGameObjectsByDepth(i,!0);for(var s=0,r=i.length;s<r;s++){var n=i[s];e.exists(n)&&e.sendToBack(n)}return this},sendMeToBack(){return this.sendToBack()},moveDepthBelow(e){var i=this.displayList;if(!i||e.displayList!==i)return this;var s=this.getAllChildren([this]);system_SortGameObjectsByDepth(s,!1);for(var r=0,n=s.length;r<n;r++){var a=s[r];if(i.exists(a)){i.moveBelow(e,a);break}}return this},moveMyDepthBelow(e){return this.moveDepthBelow(e)},moveDepthAbove(e){var i=this.displayList;if(!i||e.displayList!==i)return this;var s=this.getAllChildren([this]);system_SortGameObjectsByDepth(s,!0);for(var r=0,n=s.length;r<n;r++){var a=s[r];if(i.exists(a)){i.moveAbove(e,a);break}}return this},moveMyDepthAbove(e){return this.moveDepthAbove(e)},bringChildToTop(e){i=e.isRexContainerLite?system_SortGameObjectsByDepth(i=system_FilterDisplayGameObjects(i=e.getAllChildren([e])),!1):[e];for(var i,s=this.getAllChildren([this]),r=(s=system_SortGameObjectsByDepth(s=system_FilterDisplayGameObjects(s),!1))[s.length-1],n=0,a=i.length;n<a;n++){var o=i[n];r!==o&&r.displayList===o.displayList&&(r.displayList.moveAbove(o,r),r=o)}return this},sendChildToBack(e){i=e.isRexContainerLite?system_SortGameObjectsByDepth(i=system_FilterDisplayGameObjects(i=e.getAllChildren([e])),!1):[e];for(var i,s=this.getAllChildren([this]),r=(s=system_SortGameObjectsByDepth(s=system_FilterDisplayGameObjects(s),!1))[0],n=i.length-1;n>=0;n--){var a=i[n];r!==a&&r.displayList===a.displayList&&(r.displayList.moveBelow(a,r),r=a)}return this}},{getChildren(e){if(e)for(var i=0,s=this.children.length;i<s;i++)e.push(this.children[i]);else e=this.children;return e},getAllChildren(e){void 0===e&&(e=[]);var i=this;return BreadthFirstSearch(i,function(s){s!==i&&e.push(s)}),e},getAllVisibleChildren(e){void 0===e&&(e=[]);var i=this;return BreadthFirstSearch(i,function(s){if(s!==i){if(!s.visible)return!0;e.push(s)}}),e},bfs(e,i){return void 0===i&&(i=this),BreadthFirstSearch(i,e),this},dfs(e,i){return void 0===i&&(i=this),DepthFirstSearch(i,e),this},contains(e){var i=GetParent(e);return!!i&&(i===this||this.contains(i))},getByName(e,i){if(!i)return ar.GetFirst(this.children,"name",e);for(var s,r,n=[this];n.length;){s=n.shift();for(var a=0,o=s.children.length;a<o;a++){if((r=s.children[a]).name===e)return r;r.isRexContainerLite&&n.push(r)}}return null},getRandom(e,i){return ar.GetRandom(this.children,e,i)},getFirst(e,i,s,r){return ar.GetFirstElement(this.children,e,i,s,r)},getAll(e,i,s,r){return ar.GetAll(this.children,e,i,s,r)},count(e,i,s,r){return ar.CountAllMatching(this.children,e,i,s,r)},swap(e,i){return ar.Swap(this.children,e,i),this},setAll(e,i,s,r){return ar.SetAll(this.children,e,i,s,r),this}},{tweenChild(e){var i=e.targets;Array.isArray(i)||(i=[i]);var s=this.scene||GetScene(i);if(s){e.targets=GetLocalStates(i);var r=s.tweens.add(e);return r.on("update",UpdateChild),r}},tweenSelf(e){return e.targets=[this],this.tweenChild(e)},createTweenChildConfig(e){var i=e.targets;i&&(Array.isArray(i)||(i=[i]),e.targets=GetLocalStates(i));var s=e.onUpdate;return e.onUpdate=function(e,i){s&&s(e,i),UpdateChild(e,void 0,i)},e},tween(e){var i=this.scene;return e.targets||(e.targets=this),i.tweens.add(e)}},{addToContainer(e){return e instanceof an&&(this._setParentContainerFlag=!0,AddToContainer.call(this,e),this._setParentContainerFlag=!1),this},addToLayer(e){return system_IsLayerGameObject(e)&&AddToContainer.call(this,e),this},removeFromContainer(){return this.parentContainer&&(this._setParentContainerFlag=!0,RemoveFromContainer.call(this,this.parentContainer,!0,!1),this._setParentContainerFlag=!1),this},removeFromLayer(e){return void 0===e&&(e=!0),system_IsLayerGameObject(this.displayList)&&RemoveFromContainer.call(this,this.displayList,!1,e),this},getParentContainer(){if(this.parentContainer)return this.parentContainer;for(var e=this.getParent();e;){var i=e.parentContainer;if(i)return i;e=e.getParent()}return null},addToParentContainer(e){if(!e.displayList)return this;var i=this.getParentContainer();return i&&(e.isRexContainerLite?e.addToContainer(i):i.add(e)),this},addToPatentLayer(e){if(!e.displayList)return this;var i=this.displayList;return i===e.displayList||system_IsLayerGameObject(i)&&(e.isRexContainerLite?e.addToLayer(i):i.add(e)),this}},{hasLayer(){return!!this.privateRenderLayer},enableLayer(){if(this.hasLayer())return this;var e=this.scene.add.layer();return this.moveDepthBelow(e),this.addToLayer(e),this.privateRenderLayer=e,this},getLayer(){return this.hasLayer()||this.enableLayer(),this.privateRenderLayer},getRenderLayer(){if(this.hasLayer())return this.privateRenderLayer;for(var e=this.getParent();e;){var i=e.privateRenderLayer;if(i)return i;e=e.getParent()}return null},addToRenderLayer(e){if(!e.displayList)return this;var i=this.getRenderLayer();return i&&i!==e.displayList&&(e.isRexContainerLite?e.addToLayer(i):i.add(e),utils_GetLocalState(e).layer=i),this},removeFromRenderLayer(e){var i=utils_GetLocalState(e),s=i.layer;return s&&(e.isRexContainerLite?e.removeFromLayer(!0):s.remove(e),i.layer=null),this}},{snapshot(e){var i=this.scaleX,s=this.scaleY,r=1===i&&1===s;r||this.setScale(1),void 0===e&&(e={}),e.gameObjects=this.getAllVisibleChildren(),e.x=this.x,e.y=this.y,e.originX=this.originX,e.originY=this.originY;var n=rendertexture_Snapshot(e),a=!!n.scene;return!r&&(this.setScale(i,s),a&&n.setScale(i,s)),a?n:this}});let ContainerLite=class ContainerLite extends n7{constructor(e,i,s,r,n,a){Array.isArray(r)&&(a=r,r=void 0,n=void 0),super(e,i,s,r,n),this.type="rexContainerLite",this.isRexContainerLite=!0,this.syncChildrenEnable=!0,this._active=!0,this._mask=null,this._scrollFactorX=1,this._scrollFactorY=1,this._cameraFilter=0,this.privateRenderLayer=void 0,a&&this.add(a)}destroy(e){this.scene&&!this.ignoreDestroy&&(this.syncChildrenEnable=!1,super.destroy(e),this.privateRenderLayer&&(this.privateRenderLayer.list.length=0,this.privateRenderLayer.destroy()))}resize(e,i){return this.setSize(e,i),this}get x(){return this._x}set x(e){this._x!==e&&(this._x=e,this.syncPosition())}get y(){return this._y}set y(e){this._y!==e&&(this._y=e,this.syncPosition())}get rotation(){return super.rotation}set rotation(e){this.rotation!==e&&(super.rotation=e,this.syncPosition())}get scaleX(){return super.scaleX}set scaleX(e){this.scaleX!==e&&(super.scaleX=e,this.syncPosition())}get scaleY(){return super.scaleY}set scaleY(e){this.scaleY!==e&&(super.scaleY=e,this.syncPosition())}get scale(){return super.scale}set scale(e){this.scale!==e&&(super.scale=e,this.syncPosition())}get visible(){return super.visible}set visible(e){super.visible!==e&&(super.visible=e,this.syncVisible())}get alpha(){return super.alpha}set alpha(e){super.alpha!==e&&(super.alpha=e,this.syncAlpha())}get active(){return this._active}set active(e){this._active!==e&&(this._active=e,this.syncActive())}get mask(){return this._mask}set mask(e){this._mask!==e&&(this._mask=e,this.syncMask())}get scrollFactorX(){return this._scrollFactorX}set scrollFactorX(e){this._scrollFactorX!==e&&(this._scrollFactorX=e,this.syncScrollFactor())}get scrollFactorY(){return this._scrollFactorY}set scrollFactorY(e){this._scrollFactorY!==e&&(this._scrollFactorY=e,this.syncScrollFactor())}get cameraFilter(){return this._cameraFilter}set cameraFilter(e){this._cameraFilter!==e&&(this._cameraFilter=e,this.syncCameraFilter())}get list(){return this.children}static GetParent(e){return GetParent(e)}get parentContainer(){return this._parentContainer}set parentContainer(e){if(!this._parentContainer&&!e||this.setParentContainerFlag){this._parentContainer=e;return}this._parentContainer&&!e?(this.removeFromContainer(),this._parentContainer=e):e?(this._parentContainer=e,this.addToContainer(e)):this._parentContainer=e}get setParentContainerFlag(){if(this._setParentContainerFlag)return!0;var e=GetParent(this);return!!e&&e.setParentContainerFlag}};Object.assign(ContainerLite.prototype,ag);var av=ContainerLite,af=av,utils_GetSizerConfig=function(e){return e.hasOwnProperty("rexSizer")||(e.rexSizer={}),e.rexSizer};let am=Phaser.Display.Align;var ab={center:am.CENTER,left:am.LEFT_CENTER,right:am.RIGHT_CENTER,top:am.TOP_CENTER,bottom:am.BOTTOM_CENTER,"left-top":am.TOP_LEFT,"top-left":am.TOP_LEFT,"left-center":am.LEFT_CENTER,"center-left":am.LEFT_CENTER,"left-bottom":am.BOTTOM_LEFT,"bottom-left":am.BOTTOM_LEFT,"center-top":am.TOP_CENTER,"top-center":am.TOP_CENTER,"center-center":am.CENTER,"center-bottom":am.BOTTOM_CENTER,"bottom-center":am.BOTTOM_CENTER,"right-top":am.TOP_RIGHT,"top-right":am.TOP_RIGHT,"right-center":am.RIGHT_CENTER,"center-right":am.RIGHT_CENTER,"right-bottom":am.BOTTOM_RIGHT,"bottom-right":am.BOTTOM_RIGHT},ay=new Phaser.GameObjects.Zone({sys:{queueDepthSort:object_NOOP,events:{once:object_NOOP}}},0,0,1,1);ay.setOrigin(0);var aC={TOP_LEFT:0,TOP_CENTER:1,TOP_RIGHT:2,LEFT_CENTER:4,CENTER:6,RIGHT_CENTER:8,BOTTOM_LEFT:10,BOTTOM_CENTER:11,BOTTOM_RIGHT:12},bounds_GetBottom=function(e){var i=GetDisplayHeight(e);return e.y+i-i*e.originY},bounds_GetCenterX=function(e){var i=GetDisplayWidth(e);return e.x-i*e.originX+.5*i},bounds_SetBottom=function(e,i){var s=GetDisplayHeight(e);return e.y=i-s+s*e.originY,e},bounds_SetCenterX=function(e,i){var s=GetDisplayWidth(e),r=s*e.originX;return e.x=i+r-.5*s,e},bounds_GetLeft=function(e){var i=GetDisplayWidth(e);return e.x-i*e.originX},bounds_SetLeft=function(e,i){var s=GetDisplayWidth(e);return e.x=i+s*e.originX,e},bounds_GetRight=function(e){var i=GetDisplayWidth(e);return e.x+i-i*e.originX},bounds_SetRight=function(e,i){var s=GetDisplayWidth(e);return e.x=i-s+s*e.originX,e},bounds_SetCenterY=function(e,i){var s=GetDisplayHeight(e),r=s*e.originY;return e.y=i+r-.5*s,e},bounds_GetCenterY=function(e){var i=GetDisplayHeight(e);return e.y-i*e.originY+.5*i},bounds_GetTop=function(e){var i=GetDisplayHeight(e);return e.y-i*e.originY},bounds_SetTop=function(e,i){var s=GetDisplayHeight(e);return e.y=i+s*e.originY,e},ax=[];ax[aC.BOTTOM_CENTER]=function(e,i,s,r){return void 0===s&&(s=0),void 0===r&&(r=0),bounds_SetCenterX(e,bounds_GetCenterX(i)+s),bounds_SetBottom(e,bounds_GetBottom(i)+r),e},ax[aC.BOTTOM_LEFT]=function(e,i,s,r){return void 0===s&&(s=0),void 0===r&&(r=0),bounds_SetLeft(e,bounds_GetLeft(i)-s),bounds_SetBottom(e,bounds_GetBottom(i)+r),e},ax[aC.BOTTOM_RIGHT]=function(e,i,s,r){return void 0===s&&(s=0),void 0===r&&(r=0),bounds_SetRight(e,bounds_GetRight(i)+s),bounds_SetBottom(e,bounds_GetBottom(i)+r),e},ax[aC.CENTER]=function(e,i,s,r){var n,a;return void 0===s&&(s=0),void 0===r&&(r=0),n=bounds_GetCenterX(i)+s,a=bounds_GetCenterY(i)+r,bounds_SetCenterX(e,n),bounds_SetCenterY(e,a),e},ax[aC.LEFT_CENTER]=function(e,i,s,r){return void 0===s&&(s=0),void 0===r&&(r=0),bounds_SetLeft(e,bounds_GetLeft(i)-s),bounds_SetCenterY(e,bounds_GetCenterY(i)+r),e},ax[aC.RIGHT_CENTER]=function(e,i,s,r){return void 0===s&&(s=0),void 0===r&&(r=0),bounds_SetRight(e,bounds_GetRight(i)+s),bounds_SetCenterY(e,bounds_GetCenterY(i)+r),e},ax[aC.TOP_CENTER]=function(e,i,s,r){return void 0===s&&(s=0),void 0===r&&(r=0),bounds_SetCenterX(e,bounds_GetCenterX(i)+s),bounds_SetTop(e,bounds_GetTop(i)-r),e},ax[aC.TOP_LEFT]=function(e,i,s,r){return void 0===s&&(s=0),void 0===r&&(r=0),bounds_SetLeft(e,bounds_GetLeft(i)-s),bounds_SetTop(e,bounds_GetTop(i)-r),e},ax[aC.TOP_RIGHT]=function(e,i,s,r){return void 0===s&&(s=0),void 0===r&&(r=0),bounds_SetRight(e,bounds_GetRight(i)+s),bounds_SetTop(e,bounds_GetTop(i)-r),e};var in_QuickSet=function(e,i,s,r,n){return ax[s](e,i,r,n)},actions_AlignIn=function(e,i,s,r,n,a){ay.setPosition(i,s).setSize(r,n),in_QuickSet(e,ay,a)};let aS=Phaser.Utils.Objects.GetValue,a_=Phaser.GameObjects.Group;var DefaultCreateTextCallback=function(e,i,s){return e.add.text(0,0,"")},aw=void 0;let aP=Phaser.Utils.Objects.GetValue;var bounds_GetBoundsConfig=function(e,i){return void 0===e&&(e=0),void 0===i&&(i={}),"number"==typeof e?(i.left=e,i.right=e,i.top=e,i.bottom=e):(i.left=aP(e,"left",0),i.right=aP(e,"right",0),i.top=aP(e,"top",0),i.bottom=aP(e,"bottom",0)),i};let ak=af.prototype.add;var utils_AddChild=function(e){return ak.call(this,e),this.sizerEventsEnable&&(e.emit("sizer.add",e,this),this.emit("add",e,this)),this},GetParentSizerMethods_GetParent=function(e,i){var s=null;if(void 0===i)e.hasOwnProperty("rexContainer")&&((s=e.rexContainer.parent)?s.isRexSizer||(s=GetParentSizerMethods_GetParent(s)):s=null);else for(s=GetParentSizerMethods_GetParent(e);s&&s.name!==i;)s=GetParentSizerMethods_GetParent(s);return s},GetParentSizerMethods_GetTopmostParent=function(e){for(var i=GetParentSizerMethods_GetParent(e);i;)e=i,i=GetParentSizerMethods_GetParent(i);return e},aT={getParentSizer(e,i){return"string"==typeof e&&(i=e,e=void 0),void 0===e&&(e=this),GetParentSizerMethods_GetParent(e,i)},getTopmostSizer(e){return void 0===e&&(e=this),GetParentSizerMethods_GetTopmostParent(e)},hasParentSizer(e,i){void 0===i&&(i=this);for(var s=GetParentSizerMethods_GetParent(i);s;){if(s===e)return!0;s=GetParentSizerMethods_GetParent(s)}return!1},hasChild(e,i){return void 0===i&&(i=this),this.hasParentSizer(i,e)}};let aO=Phaser.Utils.Array.Remove,aM=af.prototype.remove,aE=aT.getParentSizer;var utils_RemoveChild=function(e,i){for(var s=aE(e);s;)s.removeChildCallback&&s.removeChildCallback(e,i),s=aE(s);return this.isBackground(e)&&aO(this.backgroundChildren,e),aM.call(this,e,i),!i&&this.sizerEventsEnable&&(e.emit("sizer.remove",e,this),this.emit("remove",e,this)),this};let aR=Phaser.Utils.Array.Remove,aL=aT.getParentSizer;var basesizer_AddChildrenMap=function(e,i){if("string"==typeof e)this.childrenMap[e]=i;else{var s=e;for(e in s)this.childrenMap[e]=s[e]}return this};let aB=/(\S+)\[(\d+)\]/i;var basesizer_ResolveWidth=function(e){var i=this.childrenWidth;if(void 0!==i){var s=void 0!==this.minWidth?this.minWidth:0;return void 0===e?(e=Math.max(s,i),this.layoutWarnEnable&&s>0&&i>s&&console.warn(`Layout width warn: ${this.constructor.name}'s minWidth (${s}) < childrenWidth (${i})`)):this.layoutWarnEnable&&(s>e||i>e)&&console.warn(`Layout width warn: ${this.constructor.name}'s minWidth (${s}) or childrenWidth (${i} > targetWidth ${e})`),e}},basesizer_HasWidthWrap=function(){var e;for(var i in this.sizerChildren)if((e=this.sizerChildren[i])&&(!e.isRexSizer||!e.ignoreLayout)&&e.runWidthWrap&&(!e.hasWidthWrap||e.hasWidthWrap()))return!0;return!1},basesizer_RunWidthWrap=function(e){var i,s,r;for(var n in this.sizerChildren)(i=this.sizerChildren[n])&&(!i.isRexSizer||!i.ignoreLayout)&&i.runWidthWrap&&(s=this.getExpandedChildWidth(i,e),i.isRexSizer?void 0===(r=i.resolveWidth(s))&&(r=s):r=s,i.runWidthWrap(r));return this},basesizer_ResolveHeight=function(e){var i=this.childrenHeight;if(void 0!==i){var s=void 0!==this.minHeight?this.minHeight:0;return void 0===e?(e=Math.max(s,i),this.layoutWarnEnable&&s>0&&i>s&&console.warn(`Layout height warn: ${this.constructor.name}'s minHeight (${s}) < childrenHeight (${i})`)):this.layoutWarnEnable&&(s>e||i>e)&&console.warn(`Layout height warn: ${this.constructor.name}'s minHeight (${s}) or childrenHeight (${i}) > targetHeight (${e})`),e}},basesizer_HasHeightWrap=function(){var e;for(var i in this.sizerChildren)if((e=this.sizerChildren[i])&&(!e.isRexSizer||!e.ignoreLayout)&&e.runHeightWrap&&(!e.hasHeightWrap||e.hasHeightWrap()))return!0;return!1},basesizer_RunHeightWrap=function(e){var i,s,r;for(var n in this.sizerChildren)(i=this.sizerChildren[n])&&(!i.isRexSizer||!i.ignoreLayout)&&i.runHeightWrap&&(s=this.getExpandedChildHeight(i,e),i.isRexSizer?void 0===(r=i.resolveHeight(s))&&(r=s):r=s,i.runHeightWrap(r));return this},basesizer_PreLayout=function(){this._childrenWidth=void 0,this._childrenHeight=void 0;for(var e,i=this.getChildrenSizers(),s=0,r=i.length;s<r;s++)(e=i[s]).ignoreLayout||e.preLayout()},ResolveSize=function(e,i,s,r,n){var a=RunLayout_ResolveWidth(e,i,r),o=RunLayout_ResolveHeight(e,s,n);return void 0===a&&(a=RunLayout_ResolveWidth(e,i,r)),void 0!==a&&void 0!==o&&{width:a,height:o}},RunLayout_ResolveWidth=function(e,i,s){var i=e.resolveWidth(i);return void 0!==i&&s&&(e.resolveChildrenWidth(i),e.runWidthWrap(i)),i},RunLayout_ResolveHeight=function(e,i,s){var i=e.resolveHeight(i);return void 0!==i&&s&&(e.resolveChildrenHeight(i),e.runHeightWrap(i)),i},aI=[Phaser.GameObjects.Image,Phaser.GameObjects.Sprite,Phaser.GameObjects.Mesh,Phaser.GameObjects.Shader,Phaser.GameObjects.Video],size_HasResizeMethod=function(e){if(e.resize)return!0;if(!e.setSize)return!1;for(var i=0,s=aI.length;i<s;i++){var r=aI[i];if(r&&e instanceof r)return!1}return!0},aG=[Phaser.GameObjects.BitmapText],size_CanSetDisplaySize=function(e){if(void 0===e.displayWidth)return!1;for(var i=0,s=aG.length;i<s;i++){var r=aG[i];if(r&&e instanceof r)return!1}return!0},size_ResizeGameObject=function(e,i,s){if(e&&(void 0!==i||void 0!==s)){if(size_HasResizeMethod(e))void 0===i&&(i=e.width),void 0===s&&(s=e.height),e.resize?e.resize(i,s):e.setSize(i,s);else{var r=size_CanSetDisplaySize(e);void 0!==i&&(r?e.displayWidth=i:e.scaleX=i/e.width),void 0!==s&&(r?e.displayHeight=s:e.scaleY=s/e.height)}}},anchor_DefaultResizeCallback=function(e,i,s,r){size_ResizeGameObject(s,e,i)};let aD=Phaser.Utils.Objects.GetValue;var aj=class extends i0{constructor(e,i){super(e,{eventEmitter:!1}),this.viewport=void 0,this.resetFromJSON(i)}shutdown(e){this.isShutdown||(this.autoAnchor(!1),this.viewport=void 0,this.onUpdateViewportCallback=void 0,this.onUpdateViewportCallbackScope=void 0,this.onResizeCallback=void 0,this.onResizeCallbackScope=void 0,super.shutdown(e))}resetFromJSON(e){void 0===e&&(e={}),void 0!==e.x?(i=null,s=e.x):void 0!==e.left?(i=0,s=e.left):void 0!==e.right?(i=1,s=e.right):void 0!==e.centerX&&(i=.5,s=e.centerX),void 0!==e.y?(r=null,n=e.y):void 0!==e.top?(r=0,n=e.top):void 0!==e.bottom?(r=1,n=e.bottom):void 0!==e.centerY&&(r=.5,n=e.centerY),void 0!==s&&(a=parseFloat((s=s.replace("left","0%").replace("right","100%").replace("center","50%").split("%"))[0])/100,o=""===s[1]?0:parseFloat(s[1])),void 0!==n&&(h=parseFloat((n=n.replace("top","0%").replace("bottom","100%").replace("center","50%").split("%"))[0])/100,l=""===n[1]?0:parseFloat(n[1]));var i,s,r,n,a,o,h,l,c,g,m,x,S=e.width;void 0!==S&&(c=parseFloat((S=S.split("%"))[0])/100,g=""===S[1]?0:parseFloat(S[1]));var _=e.height;void 0!==_&&(m=parseFloat((_=_.split("%"))[0])/100,x=""===_[1]?0:parseFloat(_[1])),this.setAlign(i,r),this.setPercentage(a,h),this.setOffset(o,l),this.setSizePercentage(c,m),this.setSizePadding(g,x);var k=aD(e,"onResizeCallback",anchor_DefaultResizeCallback),E=aD(e,"onResizeCallbackScope");this.setResizeCallback(k,E);var R=aD(e,"onUpdateViewportCallback"),j=aD(e,"onUpdateViewportCallbackScope");return this.setUpdateViewportCallback(R,j),this.autoAnchor(e.enable),this}autoAnchor(e){return void 0===e&&(e=!0),e=!!e,this.autoAnchorEnable===e||(e?(this.scene.sys.scale.on("resize",this.anchor,this),this.anchor()):this.scene.sys.scale.off("resize",this.anchor,this),this.autoAnchorEnable=e),this}setAlign(e,i){return this.alignX=e,this.alignY=i,this}setPercentage(e,i){return this.percentageX=e,this.percentageY=i,this}setOffset(e,i){return this.offsetX=e,this.offsetY=i,this}setSizePercentage(e,i){return this.percentageWidth=e,this.percentageHeight=i,this}setSizePadding(e,i){return this.paddingWidth=e,this.paddingHeight=i,this}setResizeCallback(e,i){return this.onResizeCallback=e,this.onResizeCallbackScope=i,this}setUpdateViewportCallback(e,i){return this.onUpdateViewportCallback=e,this.onUpdateViewportCallbackScope=i,this}anchor(){return this.updateViewport(),this.updateSize(),this.updatePosition(),this}updateSize(){var e=this.onResizeCallback,i=this.onResizeCallbackScope,s=this.anchorWidth,r=this.anchorHeight;if((void 0!==s||void 0!==r)&&e){var n=this.parent;void 0===s&&(s=n.width),void 0===r&&(r=n.height),i?e.call(i,s,r,n,this):e(s,r,n,this)}}updatePosition(){var e=this.parent;return null===this.alignX?e.x=this.anchorX:void 0!==this.alignX&&(e.x=this.anchorX+e.displayWidth*(e.originX-this.alignX)),null===this.alignY?e.y=this.anchorY:void 0!==this.alignY&&(e.y=this.anchorY+e.displayHeight*(e.originY-this.alignY)),this}get anchorX(){return this.viewport.x+this.viewport.width*this.percentageX+this.offsetX}get anchorY(){return this.viewport.y+this.viewport.height*this.percentageY+this.offsetY}get anchorWidth(){if(void 0!==this.percentageWidth)return this.viewport.width*this.percentageWidth+this.paddingWidth}get anchorHeight(){if(void 0!==this.percentageHeight)return this.viewport.height*this.percentageHeight+this.paddingHeight}updateViewport(){var e=this.parent.scene.cameras.main;this.viewport=system_GetViewport(this.scene,e,this.viewport);var i=this.viewport,s=this.onUpdateViewportCallback,r=this.onUpdateViewportCallbackScope;s&&(r?s.call(r,i,this.parent,this):s(i,this.parent,this))}};let aA=Phaser.Utils.Objects.GetValue,aF=Phaser.Utils.Objects.GetAdvancedValue,az=Phaser.Math.Linear,aW={stop:0,destroy:1,yoyo:2};var aV=class extends ss{constructor(e,i){super(e,i),this.scaleStart={},this.scaleEnd={},this.resetFromJSON(i),this.boot()}resetFromJSON(e){return super.resetFromJSON(e),this.setMode(aA(e,"mode",0)),this.setScaleRange(aF(e,"start",void 0),aF(e,"end",0)),this}setMode(e){return"string"==typeof e&&(e=aW[e]),this.mode=e,this}setScaleRange(e,i){return"number"==typeof e?(this.startX=e,this.startY=e):(this.startX=aF(e,"x",this.parent.scaleX),this.startY=aF(e,"y",this.parent.scaleY)),"number"==typeof i?(this.endX=i,this.endY=i):(this.endX=aF(i,"x",void 0),this.endY=aF(i,"y",void 0)),this.hasScaleX=void 0!==this.startX&&void 0!==this.endX,this.hasScaleY=void 0!==this.startY&&void 0!==this.endY,this}start(){if(this.timer.isRunning)return this;var e=this.parent;this.hasScaleX&&(e.scaleX=this.startX),this.hasScaleY&&(e.scaleY=this.startY);var i=this.repeat;return 2===this.mode&&-1!==i&&(i=(i+1)*2-1),this.timer.setDelay(this.delay).setDuration(this.duration).setRepeat(i),super.start(),this}updateGameObject(e,i){var s=i.t;i.isOddIteration&&(s=1-s),s=this.easeFn(s),this.hasScaleX&&(e.scaleX=az(this.startX,this.endX,s)),this.hasScaleY&&(e.scaleY=az(this.startY,this.endY,s))}complete(){return super.complete(),1===this.mode&&this.parent.destroy(),this}},popup=function(e,i,s,r,n){switch(void 0===r&&(r="Cubic"),s){case 0:case"x":a={x:0},o={x:e.scaleX};break;case 1:case"y":a={y:0},o={y:e.scaleY};break;default:a=0,o=e.scale}var a,o,h={mode:0,start:a,end:o,duration:i,ease:r};return void 0===n?n=new aV(e,h):n.resetFromJSON(h),n.restart(),n},scale_down_destroy=function(e,i,s,r,n,a){void 0===r&&(r="Linear"),n instanceof aV&&(a=n,n=void 0),void 0===n&&(n=!0);var o={};switch(o.mode=n?1:0,s){case 0:case"x":o.end={x:0};break;case 1:case"y":o.end={y:0};break;default:o.end=0}return o.duration=i,o.ease=r,void 0===a?a=new aV(e,o):a.resetFromJSON(o),a.restart(),a},scale_Yoyo=function(e,i,s,r,n,a,o){switch(void 0===s&&(s=1.2),void 0===r&&(r=0),void 0===a&&(a="Cubic"),n){case 0:case"x":h={x:e.scaleX},l={x:s};break;case 1:case"y":h={y:e.scaleX},l={y:s};break;default:h=e.scaleX,l=s}var h,l,c={mode:2,start:h,end:l,duration:i/2,ease:a,repeat:r};return void 0===o?o=new aV(e,c):o.resetFromJSON(c),o.restart(),o};let aY=Phaser.Utils.Objects.IsPlainObject;var OnInitScale=function(e,i){i.completeEventName=void 0,i.on("complete",function(){i.completeEventName&&(e.emit(i.completeEventName,e),i.completeEventName=void 0)}),i.on("update",function(){var i=aT.getParentSizer(e);i&&i.resetChildPositionState(e)})},aX={popUp(e,i,s){if(aY(e)){var r=e;e=r.duration,i=r.orientation,s=r.ease}var n=void 0===this._scaleBehavior;return this._scaleBehavior=popup(this,e,i,s,this._scaleBehavior),n&&OnInitScale(this,this._scaleBehavior),this._scaleBehavior.completeEventName="popup.complete",this},popUpPromise(e,i,s){return this.popUp(e,i,s),WaitComplete(this._scaleBehavior)},scaleDownDestroy(e,i,s,r){if(aY(e)){var n=e;e=n.duration,i=n.orientation,s=n.ease,r=n.destroy}var a=void 0===this._scaleBehavior;return this._scaleBehavior=scale_down_destroy(this,e,i,s,r,this._scaleBehavior),a&&OnInitScale(this,this._scaleBehavior),this._scaleBehavior.completeEventName="scaledown.complete",this},scaleDownDestroyPromise(e,i,s,r){return this.scaleDownDestroy(e,i,s,r),WaitComplete(this._scaleBehavior)},scaleDown(e,i,s){return this.scaleDownDestroy(e,i,s,!1),this},scaleDownPromise(e,i,s){return this.scaleDown(e,i,s),WaitComplete(this._scaleBehavior)},scaleYoyo(e,i,s,r,n){if(aY(e)){var a=e;e=a.duration,i=a.peakValue,s=a.repeat,r=a.orientation,n=a.ease}var o=void 0===this._scaleBehavior;return this._scaleBehavior=scale_Yoyo(this,e,i,s,r,n,this._scaleBehavior),o&&OnInitScale(this,this._scaleBehavior),this._scaleBehavior.completeEventName="scaleyoyo.complete",this},scaleYoyoPromise(e,i,s,r,n){return this.scaleYoyo(e,i,s,r,n),WaitComplete(this._scaleBehavior)}};let aH=Phaser.Utils.Objects.GetValue,aU=Phaser.Utils.Objects.GetAdvancedValue,aN=Phaser.Math.Linear,a$={stop:0,destroy:1,yoyo:2};var aZ=class extends ss{constructor(e,i){super(e,i),this.resetFromJSON(i),this.boot()}resetFromJSON(e){return super.resetFromJSON(e),this.setMode(aH(e,"mode",0)),this.setAlphaRange(aU(e,"start",this.parent.alpha),aU(e,"end",0)),this}setMode(e){return"string"==typeof e&&(e=a$[e]),this.mode=e,this}setAlphaRange(e,i){return this.alphaStart=e,this.alphaEnd=i,this}start(){return this.timer.isRunning||(this.parent.setAlpha(this.alphaStart),this.timer.setDelay(this.delay).setDuration(this.duration).setRepeat(2===this.mode?-1:0),super.start()),this}updateGameObject(e,i){var s=i.t;i.isOddIteration&&(s=1-s),e.alpha=aN(this.alphaStart,this.alphaEnd,s)}complete(){return super.complete(),1===this.mode&&this.parent.destroy(),this}};let aK=Phaser.Utils.Objects.IsPlainObject;var fade_in=function(e,i,s,r){aK(s)?(n=s.start,a=s.end):a=s,void 0===n&&(n=0),void 0===a&&(a=1);var n,a,o={mode:0,start:n,end:a,duration:i};return void 0===r?r=new aZ(e,o):r.resetFromJSON(o),r.restart(),r},fade_out_destroy=function(e,i,s,r){s instanceof aZ&&(r=s,s=void 0),void 0===s&&(s=!0);var n={mode:s?1:0,end:0,duration:i};return void 0===r?r=new aZ(e,n):r.resetFromJSON(n),r.restart(),r};let aJ=Phaser.Utils.Objects.IsPlainObject;var OnInitFade=function(e,i){i.completeEventName=void 0,i.on("complete",function(){i.completeEventName&&(e.emit(i.completeEventName,e),i.completeEventName=void 0)}),i.on("update",function(){var i=aT.getParentSizer(e);i&&i.resetChildAlphaState(e)})};let aq=Phaser.Utils.Objects.GetValue,aQ=Phaser.Utils.Objects.GetAdvancedValue,a0=Phaser.Math.Linear,a1={stop:0,destroy:1,yoyo:2};var a2=class extends ss{constructor(e,i){super(e,i),this.resetFromJSON(i),this.boot()}resetFromJSON(e){if(super.resetFromJSON(e),this.setMode(aq(e,"mode",0)),e&&(e.hasOwnProperty("x")||e.hasOwnProperty("y"))){var i=aQ(e,"x",void 0),s=aQ(e,"y",void 0);this.setTargetPosition(i,s)}else this.setTargetPosition(e);return this}setMode(e){return"string"==typeof e&&(e=a1[e]),this.mode=e,this}setTargetPosition(e,i){return"number"==typeof e||"number"==typeof i?(this.startX=this.parent.x,this.startY=this.parent.y,this.endX=e,this.endY=i):(this.startX=aQ(e,"startX",void 0),this.startY=aQ(e,"startY",void 0),this.endX=aQ(e,"endX",void 0),this.endY=aQ(e,"endY",void 0)),this.hasMoveX=void 0!==this.startX&&void 0!==this.endX,this.hasMoveY=void 0!==this.startY&&void 0!==this.endY,this}start(){if(this.timer.isRunning)return this;var e=this.parent;return this.hasMoveX&&(e.x=this.startX),this.hasMoveY&&(e.y=this.startY),this.timer.setDelay(this.delay).setDuration(this.duration).setRepeat(2===this.mode?-1:0),super.start(),this}updateGameObject(e,i){var s=i.t;i.isOddIteration&&(s=1-s),s=this.easeFn(s),this.hasMoveX&&(e.x=a0(this.startX,this.endX,s)),this.hasMoveY&&(e.y=a0(this.startY,this.endY,s))}complete(){return super.complete(),1===this.mode&&this.parent.destroy(),this}},easemove_ParseValue=function(e,i){if("number"==typeof e)return e;var s=e[0],r=parseFloat(e.substr(2));switch(s){case"+":return i+r;case"-":return i-r;case"*":return i*r;case"/":return i/r}},easemove_EaseMoveTo=function(e,i,s,r,n,a,o){a instanceof a2&&(o=a,a=void 0),void 0===a&&(a=!1);var h={};return h.mode=a?1:0,void 0!==s&&(h.startX=e.x,h.endX=easemove_ParseValue(s,e.x)),void 0!==r&&(h.startY=e.y,h.endY=easemove_ParseValue(r,e.y)),h.duration=i,h.ease=void 0===n?"Linear":n,void 0===o?o=new a2(e,h):o.resetFromJSON(h),o.restart(),o},easemove_EaseMoveFrom=function(e,i,s,r,n,a,o){a instanceof a2&&(o=a,a=void 0),void 0===a&&(a=!1);var h={};return h.mode=a?1:0,void 0!==s&&(h.startX=easemove_ParseValue(s,e.x),h.endX=e.x),void 0!==r&&(h.startY=easemove_ParseValue(r,e.y),h.endY=e.y),h.duration=i,h.ease=void 0===n?"Linear":n,void 0===o?o=new a2(e,h):o.resetFromJSON(h),o.restart(),o};let a5=Phaser.Utils.Objects.IsPlainObject,a3=Phaser.Math.Distance.Between;var OnInitEaseMove=function(e,i){i.completeEventName=void 0,i.on("complete",function(){i.completeEventName&&(e.emit(i.completeEventName,e),i.completeEventName=void 0)}),i.on("update",function(){var i=aT.getParentSizer(e);i&&i.resetChildPositionState(e)})};let a7=Phaser.Utils.Objects.GetValue,a6={effect:0,behavior:1},a4={both:0,"h&v":0,"x&y":0,horizontal:1,h:1,x:1,vertical:2,v:2,y:2},a8={constant:0,decay:1};var a9=class extends i5{constructor(e,i){super(e,i),this.timer=new i8,this.resetFromJSON(i),this.boot()}resetFromJSON(e){return this.timer.resetFromJSON(a7(e,"timer")),this.setEnable(a7(e,"enable",!0)),this.setMode(a7(e,"mode",1)),this.isRunning=a7(e,"isRunning",!1),this.setMagnitudeMode(a7(e,"magnitudeMode",1)),this.setAxisMode(a7(e,"axis",0)),this.setDuration(a7(e,"duration",500)),this.setMagnitude(a7(e,"magnitude",10)),this.ox=a7(e,"ox",void 0),this.oy=a7(e,"oy",void 0),this}toJSON(){return{timer:this.timer.toJSON(),enable:this.enable,mode:this.mode,isRunning:this.isRunning,magnitudeMode:magnitudeMode,duration:this.duration,magnitude:this.magnitude,ox:this.ox,oy:this.oy}}shutdown(e){this.isShutdown||(super.shutdown(e),this.timer.destroy(),this.timer=void 0)}startTicking(){super.startTicking(),0===this.mode?(this.scene.game.events.on("poststep",this.update,this),this.scene.game.events.on("prestep",this.backToOrigin,this)):this.scene.sys.events.on("preupdate",this.update,this)}stopTicking(){super.stopTicking(),this.scene&&(0===this.mode?(this.scene.game.events.off("poststep",this.update,this),this.scene.game.events.off("prestep",this.backToOrigin,this)):this.scene.sys.events.off("preupdate",this.update,this))}setEnable(e){return void 0==e&&(e=!0),this.enable=e,this}setMode(e){return"string"==typeof e&&(e=a6[e]),this.mode=e,this}setMagnitudeMode(e){return"string"==typeof e&&(e=a8[e]),this.magnitudeMode=e,this}setAxisMode(e){return"string"==typeof e&&(e=a4[e]),this.axisMode=e,this}setDuration(e){return this.duration=e,this}setMagnitude(e){return this.magnitude=e,this}start(e,i){if("number"!=typeof e){var s=e;i=a7(s,"magnitude",void 0),e=a7(s,"duration",void 0)}return void 0!==i&&this.setMagnitude(i),void 0!==e&&this.setDuration(e),this.timer.setDuration(this.duration).start(),super.start(),this}shake(e,i){return this.start(e,i),this}update(e,i){if(!this.isRunning||!this.enable)return this;var s=this.parent;if(!s.active)return this;if(this.timer.update(e,i),this.timer.isDone)this.backToOrigin(),this.complete();else{void 0===this.ox&&(this.ox=s.x,this.oy=s.y);var r=this.magnitude;1===this.magnitudeMode&&(r*=1-this.timer.t);var n=Math.random()*Math.PI*2,a=this.ox+Math.cos(n)*r,o=this.oy+Math.sin(n)*r;switch(this.axisMode){case 1:s.x=a;break;case 2:s.y=o;break;default:s.x=a,s.y=o}}return this}backToOrigin(){if(!this.isRunning||!this.enable||void 0===this.ox)return this;var e=this.parent;switch(this.axisMode){case 1:e.x=this.ox;break;case 2:e.y=this.oy;break;default:e.x=this.ox,e.y=this.oy}return this.ox=void 0,this.oy=void 0,this}};let ot=Phaser.Utils.Objects.IsPlainObject;var OnInitShake=function(e,i){i.on("complete",function(){e.emit("shake.complete",e)})};let oe=Phaser.Utils.Objects.IsPlainObject;var oi=class extends i0{constructor(e,i){super(e,i),this.parent.setDataEnabled(),this.easeTasks={}}complete(e){this.emit(`complete-${e}`,this.parent,this),this.emit("complete",e,this.parent,this)}getEaseTask(e){var i=this.easeTasks[e];return void 0===i&&(i=new r9(this.parent),this.easeTasks[e]=i,i.setTarget(this.parent.data.values).on("complete",function(){this.complete(e)},this)),i}easeTo(e,i,s,r){if(oe(e)){var n=e;e=n.key,i=n.value,s=n.duration,r=n.ease;var a=n.speed;void 0===s&&void 0!==a&&(s=Math.abs(i-this.parent.data.values[e])/a*1e3)}return void 0===s&&(s=1e3),void 0===r&&(r="Linear"),this.getEaseTask(e).restart({key:e,to:i,duration:s,ease:r}),this}easeFrom(e,i,s,r){if(oe(e)){var n=e;e=n.key,i=n.value,s=n.duration,r=n.ease;var a=n.speed;void 0===s&&void 0!==a&&(s=Math.abs(i-this.parent.data.values[e])/a*1e3)}return void 0===s&&(s=1e3),void 0===r&&(r="Linear"),this.getEaseTask(e).restart({key:e,from:i,duration:s,ease:r}),this}stopEase(e,i){void 0===i&&(i=!0);var s=this.easeTasks[e];return s&&s.stop(i),this}stopAll(e){for(var i in void 0===e&&(e=!0),this.easeTasks)this.stopEase(i,e);return this}},OnInitEaseData=function(e,i){i.on("complete",function(i){e.emit(`easedata.${i}.complete`,e),e.emit("easedata.complete",i,e)})},Show=function(e){_hide(e,!1)},Hide=function(e){_hide(e,!0)},IsShown=function(e){return!!e&&!utils_GetSizerConfig(e).hidden},_hide=function(e,i){if(e){utils_GetSizerConfig(e).hidden=i;var s=GetParent(e);s?s.setChildVisible(e,!i):e.setVisible(!i)}};let os=["next","exit","enter"];let FSM=class FSM{constructor(e){var i=object_GetValue(e,"states",void 0);i&&this.addStates(i);var s=object_GetValue(e,"extend",void 0);if(s)for(var r in s)this.hasOwnProperty(r)&&void 0!==this[r]||(this[r]=s[r]);var n=object_GetValue(e,"eventEmitter",void 0),a=object_GetValue(e,"EventEmitterClass",void 0);this.setEventEmitter(n,a),this._stateLock=!1,this.resetFromJSON(e)}shutdown(){this.destroyEventEmitter()}destroy(){this.shutdown()}resetFromJSON(e){this.setEnable(object_GetValue(e,"enable",!0)),this.start(object_GetValue(e,"start",void 0));var i=object_GetValue(e,"init",void 0);return i&&i.call(this),this}toJSON(){return{curState:this.state,prevState:this.prevState,enable:this.enable,start:this._start}}setEnable(e){return void 0===e&&(e=!0),this.enable=e,this}toggleEnable(){return this.setEnable(!this.enable),this}set state(e){if(this.enable&&!this._stateLock&&this._state!==e){if(this._prevState=this._state,this._state=e,this._stateLock=!0,this.emit("statechange",this),null!=this._prevState){var i="exit_"+this._prevState,s=this[i];s&&s.call(this),this.emit(i,this)}if(this._stateLock=!1,null!=this._state){var r="enter_"+this._state,n=this[r];n&&n.call(this),this.emit(r,this)}}}get state(){return this._state}get prevState(){return this._prevState}start(e){return this._start=e,this._prevState=void 0,this._state=e,this}goto(e){return null!=e&&(this.state=e),this}next(){var e,i=this["next_"+this.state];return i&&(e="string"==typeof i?i:i.call(this)),this.goto(e),this}get stateProperties(){return os}addState(e,i){"string"!=typeof e&&(e=(i=e).name);for(var s=this.stateProperties,r=0,n=s.length;r<n;r++){var a=s[r],o=i[a];o&&(this[`${a}_${e}`]=o)}return this}addStates(e){if(Array.isArray(e))for(var i=0,s=e.length;i<s;i++)this.addState(e[i]);else for(var r in e)this.addState(r,e[r]);return this}runMethod(e,i,s,r,n,a){var o=this[e+"_"+this.state];if(o){var h=arguments.length;switch(h){case 1:return o.call(this);case 2:return o.call(this,i);case 3:return o.call(this,i,s);case 4:return o.call(this,i,s,r);case 5:return o.call(this,i,s,r,n);case 6:return o.call(this,i,s,r,n,a)}for(var l=Array(h-1),c=1;c<h;c++)l[c-1]=arguments[c];return o.apply(this,l)}}};Object.assign(FSM.prototype,sG);var or=FSM,eventemitter_HasListener=function(e,i,s,r,n){void 0===n&&(n=!1);var a=e._events[i];if(!a)return!1;for(var o=0,h=a.length;o<h;o++){var l=a[o];if(l.fn===s&&l.context===r&&l.once===n)return!0}return!1};let on=["next","exit","enter","update","preupdate","postupdate"];var oo=class extends or{shutdown(){this.stopUpdate(),this.stopPreUpdate(),this.stopPostUpdate(),this._scene=void 0,super.shutdown()}resetFromJSON(e){return super.resetFromJSON(e),this._scene=object_GetValue(e,"scene",void 0),this}get stateProperties(){return on}update(e,i){this.runMethod("update",e,i)}preupdate(e,i){this.runMethod("preupdate",e,i)}postupdate(e,i){this.runMethod("postupdate",e,i)}startUpdate(e){e||(e=this._scene);var i=e.sys.events;return eventemitter_HasListener(i,"update",this.update,this)||(this._scene=e,i.on("update",this.update,this)),this}stopUpdate(){return this._scene&&this._scene.sys.events.off("update",this.update,this),this}startPreUpdate(e){e||(e=this._scene);var i=e.sys.events;return eventemitter_HasListener(i,"preupdate",this.preupdate,this)||(this._scene=e,i.on("preupdate",this.preupdate,this)),this}stopPreUpdate(){return this._scene&&this._scene.sys.events.off("preupdate",this.preupdate,this),this}startPostUpdate(e){e||(e=this._scene);var i=e.sys.events;return eventemitter_HasListener(i,"postupdate",this.postupdate,this)||(this._scene=e,i.on("postupdate",this.postupdate,this)),this}stopPostUpdate(){return this._scene&&this._scene.sys.events.off("postupdate",this.postupdate,this),this}},oh=oo,ol=class extends oh{constructor(e,i){super(i),this.parent=e;var s=i.initState||"IDLE";this.start(s)}init(){this.start("IDLE")}next_IDLE(){return"TRANS_OPNE"}next_TRANS_OPNE(){return"OPEN"}enter_TRANS_OPNE(){var e=this.parent;if(e.transitInTime>0){var i=e.runTransitionInCallback();e.delayCall(i,this.next,this)}else this.next()}exit_TRANS_OPNE(){this.parent.removeDelayCall()}next_OPEN(){return"TRANS_CLOSE"}enter_OPEN(){this.parent.onOpen()}exit_OPEN(){this.parent.removeDelayCall()}next_TRANS_CLOSE(){return"CLOSE"}enter_TRANS_CLOSE(){var e=this.parent;if(e.transitOutTime>0){var i=e.runTransitionOutCallback();e.delayCall(i,this.next,this)}else this.next()}exit_TRANS_CLOSE(){this.parent.removeDelayCall()}next_CLOSE(){return"TRANS_OPNE"}enter_CLOSE(){this.parent.onClose()}exit_CLOSE(){}canOpen(){return"IDLE"===this.state||"CLOSE"===this.state}canClose(){return"IDLE"===this.state||"OPEN"===this.state}},time_PostStepDelayCall=function(e,i,s,r,n){var a=system_GetSceneObject(e);return a.time.delayedCall(i,function(){a.game.events.once("poststep",function(){s.call(r,n)})})},od={};Object.assign(od,{delayCall(e,i,s){return this.delayCallTimer=time_PostStepDelayCall(this,e,i,s),this},removeDelayCall(){return this.delayCallTimer&&(this.delayCallTimer.remove(!1),this.delayCallTimer=void 0),this}},{setTransitInTime(e){return this.transitInTime=e,this},setTransitOutTime(e){return this.transitOutTime=e,this},setTransitInCallback(e){return e||(e=object_NOOP),this.transitInCallback=e,this},setTransitOutCallback(e){return e||(e=object_NOOP),this.transitOutCallback=e,this}},{runTransitionInCallback(){return this.transitInCallback(this.parent,this.transitInTime),this.transitInTime},onOpen(){},requestOpen(e,i){if(!this._state.canOpen())return this;this.openEventData=arguments.length>0?e:this.parent;var s=this.transitInTime;return void 0!==i&&(this.transitInTime=i),this._state.goto("TRANS_OPNE"),this.transitInTime=s,this}},{runTransitionOutCallback(){return this.transitOutCallback(this.parent,this.transitOutTime),this.transitOutTime},onClose(){this.oneShotMode&&this.parent.destroy()},requestClose(e,i){if(!this._state.canClose)return this;this.closeEventData=arguments.length>0?e:this.parent;var s=this.transitOutTime;return void 0!==i&&(this.transitOutTime=i),this._state.goto("TRANS_CLOSE"),this.transitOutTime=s,this}});let oc=Phaser.Utils.Objects.GetValue;let OpenCloseTransition=class OpenCloseTransition extends i0{constructor(e,i){super(e,i),this.setTransitInTime(oc(i,"duration.in",200)),this.setTransitOutTime(oc(i,"duration.out",200)),this.setTransitInCallback(oc(i,"transitIn")),this.setTransitOutCallback(oc(i,"transitOut")),this.oneShotMode=oc(i,"destroy",!1),this.delayCallTimer=void 0,this._state=new ol(this,{eventEmitter:!1,initState:oc(i,"initState","IDLE")}),this.openEventData=void 0,this.closeEventData=void 0}get state(){return this._state.state}shutdown(e){this.isShutdown||(this.transitInCallback=void 0,this.transitOutCallback=void 0,this.openEventData=void 0,this.closeEventData=void 0,this.removeDelayCall(),super.shutdown(e))}};Object.assign(OpenCloseTransition.prototype,od);var ou=OpenCloseTransition,camera_GetFirstRenderCamera=function(e,i){for(var s,r,n=e.sys.cameras.cameras,a=0,o=n.length;a<o;a++)if(s=n[a],!(0!==(r=i.cameraFilter)&&r&s.id))return s;return null},op=class extends i0{constructor(e,i){super(e),e.setOrigin(.5).setScrollFactor(0),this.targetCamera=void 0,this.boot()}boot(){this.scene.sys.events.on("prerender",this.resize,this)}destroy(){this.scene&&(this.scene.sys.events.off("prerender",this.resize,this),super.destroy())}getTargetCamera(){var e=this.parent;return this.targetCamera&&0!==e.cameraFilter&&e.cameraFilter&this.targetCamera.id&&(this.targetCamera=void 0),this.targetCamera||(this.targetCamera=camera_GetFirstRenderCamera(this.scene,e)),this.targetCamera}resize(){var e=this.getTargetCamera();if(e){var i=this.scene,s=this.parent,r=i.sys.scale.gameSize,n=r.width,a=r.height,o=1/e.zoom,h=n/2,l=a/2,c=n*o,g=a*o;(s.x!==h||s.y!==l)&&s.setPosition(h,l),(s.width!==c||s.height!==g)&&s.setSize(c,g)}}};let og=Phaser.GameObjects.Rectangle;var ov=class extends og{constructor(e,i,s){super(e,0,0,2,2,i,1),this.fullWindow=new op(this),this.setAlpha(s)}get tint(){return this.fillColor}set tint(e){this.setFillStyle(e,this.fillAlpha)}};let of=Phaser.Utils.Objects.GetValue;var om={default:0,fullWindow:1},ob=class extends i0{constructor(e,i){super(e,{eventEmitter:!1}),this.resetFromJSON(i),this.boot()}resetFromJSON(e){return this.setHitAreaMode(of(e,"hitAreaMode",0)),this.setEnable(of(e,"enable",!0)),this.setStopMode(of(e,"stopAllLevels",!0)),this}boot(){this.parent.on("pointerdown",function(e,i,s,r){this.stopAllLevels&&r.stopPropagation()},this).on("pointerup",function(e,i,s,r){this.stopAllLevels&&r.stopPropagation()},this).on("pointermove",function(e,i,s,r){this.stopAllLevels&&r.stopPropagation()},this).on("pointerover",function(e,i,s,r){this.stopAllLevels&&r.stopPropagation()},this).on("pointerout",function(e,i){this.stopAllLevels&&i.stopPropagation()},this)}setHitAreaMode(e){"string"==typeof e&&(e=om[e]);var i=this.parent;return i.input&&i.removeInteractive(),0===e?i.setInteractive():i.setInteractive({hitArea:{},hitAreaCallback:function(){return!0}}),this}setEnable(e){return void 0===e&&(e=!0),e?this.parent.setInteractive():this.parent.disableInteractive(),this.enable=e,this}setStopMode(e){return void 0===e&&(e=!0),this.stopAllLevels=e,this}toggleEnable(){return this.setEnable(!this.enable),this}};let oy=Phaser.Utils.Objects.GetValue;var oC=class extends ov{constructor(e,i){super(e,oy(i,"color",0),oy(i,"alpha",.8)),this.touchEventStop=new ob(this,{hitAreaMode:1})}},modal_CreateCover=function(e,i){var s=e.scene,r=new oC(s,i);return s.add.existing(r),e.isRexContainerLite?(e.pin(r,{syncPosition:!1,syncRotation:!1,syncScale:!1,syncAlpha:!1,syncScrollFactor:!1}),e.moveDepthBelow(r)):s.children.moveBelow(r,e),r},ox={popUp(e,i){void 0!==e._modalScaleSave?(e.scaleX=e._modalScaleSave,e.scaleY=e._modalScaleSave):e._modalScaleSave=e.scaleX,popup(e,i)},scaleDown(e,i){scale_down_destroy(e,i,void 0,void 0,!1)},fadeIn(e,i){void 0!==e._modalAlphaSave?e.alpha=e._modalAlphaSave:e._modalAlphaSave=e.alpha,fade_in(e,i)},fadeOut(e,i){fade_out_destroy(e,i,!1)}},DefaultCoverTransitInCallback=function(e,i){void 0!==e._modalAlphaSave?e.alpha=e._modalAlphaSave:e._modalAlphaSave=e.alpha,fade_in(e,i,e.alpha)},DefaultCoverTransitOutCallback=function(e,i){fade_out_destroy(e,i,!1)},bounds_IsPointInBounds=function(e,i,s,r,n){return!!(e&&(!r||r(e,i,s))&&GetBounds(e,!0).contains(i,s)&&(!n||n(e,i,s)))};let oS=Phaser.Utils.Objects.GetValue,o_={popUp:0,fadeIn:1,scaleDown:0,fadeOut:1};var ow=class extends ou{constructor(e,i){void 0===i&&(i={}),null==i.transitIn&&(i.transitIn=o_.popUp),null==i.transitOut&&(i.transitOut=o_.scaleDown),i.destroy=oS(i,"destroy",!0),super(e,i);var s=oS(i,"cover");this.cover=!1!==s?modal_CreateCover(e,s):void 0,this.cover&&(this.setCoverTransitInCallback(oS(s,"transitIn",DefaultCoverTransitInCallback)),this.setCoverTransitOutCallback(oS(s,"transitOut",DefaultCoverTransitOutCallback)));var r=oS(i,"touchOutsideClose",!1),n=oS(i,"duration.hold",-1),a=oS(i,"timeOutClose",n>=0),o=oS(i,"anyTouchClose",!1);oS(i,"manualClose",!1)&&(r=!1,o=!1,a=!1),o&&(r=!1),a?this.setDisplayTime(n):this.setDisplayTime(-1),o?this.once("open",this.anyTouchClose,this):r&&this.once("open",this.touchOutsideClose,this),oS(i,"openOnStart",!0)&&this.delayCall(0,this.requestOpen,this)}shutdown(e){this.isShutdown||(this.cover||this.scene.input.off("pointerup",this.touchCloseCallback,this),this.cover&&!e&&(this.cover.destroy(),this.cover=void 0),super.shutdown(e))}touchOutsideClose(){return this.cover?this.cover.on("pointerup",this.touchCloseCallback,this):this.scene.input.on("pointerup",this.touchCloseCallback,this),this.clickOutsideTest=!0,this}anyTouchClose(){return this.cover?this.cover.once("pointerup",this.touchCloseCallback,this):this.scene.input.once("pointerup",this.touchCloseCallback,this),this}touchCloseCallback(e){this.clickOutsideTest&&bounds_IsPointInBounds(this.parent,e.worldX,e.worldY)||this.requestClose()}runTransitionInCallback(){var e=super.runTransitionInCallback(),i=this.cover;return i&&this.coverTransitInCallback&&this.coverTransitInCallback(i,e),e}runTransitionOutCallback(){var e=super.runTransitionOutCallback(),i=this.cover;return i&&this.coverTransitOutCallback&&this.coverTransitOutCallback(i,e),e}onOpen(){var e=this.displayTime;e>=0&&this.delayCall(e,this.requestClose,this),this.emit("open",this.parent,this),super.onOpen()}onClose(){this.emit("close",this.closeEventData),super.onClose()}setDisplayTime(e){return this.displayTime=e,this}setTransitInCallback(e){switch("string"==typeof e&&(e=o_[e]),e){case o_.popUp:e=ox.popUp;break;case o_.fadeIn:e=ox.fadeIn}return super.setTransitInCallback(e),this}setTransitOutCallback(e){switch("string"==typeof e&&(e=o_[e]),e){case o_.scaleDown:e=ox.scaleDown;break;case o_.fadeOut:e=ox.fadeOut}return super.setTransitOutCallback(e),this}setCoverTransitInCallback(e){return this.coverTransitInCallback=e,this}setCoverTransitOutCallback(e){return this.coverTransitOutCallback=e,this}},ModalPromise_Modal=function(e,i){var s=new ow(e,i);return s.on("open",function(){e.emit("modal.open",s)}),s.on("close",function(i){e.emit("modal.close",i,s)}),e.on("modal.requestClose",s.requestClose,s),s},ModalClose=function(e,i){e.emit("modal.requestClose",i)},object_IsFunction=function(e){return e&&"function"==typeof e},oP={modal(e,i){return object_IsFunction(e)&&(i=e,e=void 0),void 0===this._modalBehavior&&(this.onCreateModalBehavior&&this.onCreateModalBehavior(this,e),this._modalBehavior=ModalPromise_Modal(this,e)),i&&this._modalBehavior.once("close",i),this._modalBehavior.requestOpen(),this},modalPromise(e){var i=this;return new Promise(function(s,r){i.modal(e,s)})},modalClose(e){return ModalClose(this,e),this}},ok=s(27306),input_IsPointerInBounds=function(e,i,s,r){var n,a=e.scene.sys.cameras.main,o=0===e.scrollFactorX&&0===e.scrollFactorY;if(i)return o?bounds_IsPointInBounds(e,i.x,i.y,s,r):!!(n=(0,ok.Z)(i,a,!0))&&bounds_IsPointInBounds(e,n.x,n.y,s,r);for(var h=e.scene.input.manager,l=h.pointersTotal,c=h.pointers,g=0;g<l;g++)if(i=c[g],o){if(bounds_IsPointInBounds(e,i.x,i.y,s,r))return!0}else{if(!(n=(0,ok.Z)(i,a,!0)))continue;if(bounds_IsPointInBounds(e,n.x,n.y,s,r))return!0}return!1},object_IsArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)},IsNotHiddenSizer=function(e){return!(e.rexSizer&&e.rexSizer.hidden)},utils_ContainsPoint=function(e,i,s,r,n){return bounds_IsPointInBounds(e,i,s,r?function(e,i,s){return!!IsNotHiddenSizer(e)&&(r(e,i,s),!0)}:IsNotHiddenSizer,n)},oT={},utils_PreLayoutChild=function(e){if(this.sizerEventsEnable){var i;void 0===(i=this.getChildPrevState(e))?i={}:!0===i&&(i=oT),i.x=e.x,i.y=e.y,i.scaleX=e.scaleX,i.scaleY=e.scaleY,i.width=e.width,i.height=e.height,i.displayWidth=e.displayWidth,i.displayHeight=e.displayHeight,this.layoutedChildren.push(e)}},utils_LayoutChild=function(e,i,s,r,n,a,o,h){actions_AlignIn(e,i,s,r,n,a),void 0!==o&&(e.x+=o),void 0!==h&&(e.y+=h),this.resetChildPositionState(e),this.sizerEventsEnable&&e.emit("sizer.postlayout",e,this)};let oO=Phaser.Display.Align.CENTER,oM=Phaser.Utils.Objects.IsPlainObject;var oE={onClick(e,i,s,r){return e&&("function"==typeof e&&(r=s,s=i,i=e,e=this),void 0===e._click&&(e._click=new no(e,r)),e._click.on("click",i,s)),this},offClick(e,i,s){return"function"==typeof e&&(s=i,i=e,e=this),void 0===e._click||e._click.off("click",i,s),this},enableClick(e,i){return"boolean"==typeof e&&(i=e,e=void 0),void 0===e&&(e=this),void 0===e._click||e._click.setEnable(i),this},disableClick(e){return void 0===e&&(e=this),void 0===e._click||e._click.setEnable(!1),this}};let oR=Phaser.Utils.Objects.GetValue,oL={press:0,pointerdown:0,release:1,pointerup:1};var oB=class extends i0{constructor(e,i){super(e,i),this._enable=void 0;var s=oR(i,"inputConfig",void 0);s&&e.setInteractive(s),this.resetFromJSON(i),this.boot()}resetFromJSON(e){return this.pointer=void 0,this.lastClickTime=void 0,this.setEnable(oR(e,"enable",!0)),this.setMode(oR(e,"mode",1)),this.setClickInterval(oR(e,"clickInterval",100)),this.setDragThreshold(oR(e,"threshold",void 0)),this}boot(){var e=this.parent.scene;e.input.on("pointerdown",this.onPress,this),e.input.on("pointerup",this.onRelease,this),e.input.on("pointermove",this.onMove,this)}shutdown(e){if(!this.isShutdown){var i=this.parent.scene;i.input.off("pointerdown",this.onPress,this),i.input.off("pointerup",this.onRelease,this),i.input.off("pointermove",this.onMove,this),this.pointer=null,super.shutdown(e)}}get enable(){return this._enable}set enable(e){this._enable!==e&&(e||this.cancel(),this._enable=e,this.emit(e?"enable":"disable",this,this.parent))}setEnable(e){return void 0===e&&(e=!0),this.enable=e,this}toggleEnable(){return this.setEnable(!this.enable),this}setMode(e){return"string"==typeof e&&(e=oL[e]),this.mode=e,this}setClickInterval(e){return this.clickInterval=e,this}setDragThreshold(e){return this.dragThreshold=e,this}isPointerInside(e){var i=this.parent;return(i.input?input_IsPointerInHitArea:input_IsPointerInBounds)(i,e)}onPress(e){this.parent.willRender(e.camera)&&void 0===this.pointer&&(this.pointer=e,0!==this.mode||this.isPointerInside(e)||this.click(e.downTime,e))}onRelease(e){this.parent.willRender(e.camera)&&this.pointer===e&&(1!==this.mode||this.isPointerInside(e)||this.click(e.upTime,e),this.pointer=void 0)}onMove(e,i,s,r){this.pointer===e&&void 0!==this.dragThreshold&&1===this.mode&&(e.getDistance()>=this.dragThreshold||this.isPointerInside(e))&&this.cancel()}click(e,i){if(!this.enable)return this;if(void 0===e)return this.emit("clickoutside",this,this.parent,i),this;this.pointer=void 0;var s=this.lastClickTime;return void 0!==s&&e-s<=this.clickInterval||(this.lastClickTime=e,this.emit("clickoutside",this,this.parent,i)),this}cancel(){return this.pointer=void 0,this}},oI=class extends oo{constructor(){super({eventEmitter:!1}),this.goto("IDLE")}setCooldownTime(e){return this.cooldownTime=e,this.cooldownMode=void 0!==e,this}request(){return this.runMethod("request")}update_IDLE(){this.compensationTime=0}request_IDLE(){return this.next(),!0}next_IDLE(){if(this.cooldownMode)return"COOLDOWN"}enter_COOLDOWN(){this.remainderTime=this.cooldownTime+this.compensationTime}update_COOLDOWN(e,i){this.remainderTime-=i,this.remainderTime<0&&(this.compensationTime=this.cooldownTime>i?-this.remainderTime:0,this.goto("IDLE"))}request_COOLDOWN(){return!1}};let oG=Phaser.Utils.Objects.GetValue;var oD=class extends i0{constructor(e,i){super(e,i),this._enable=void 0,this.cooldown=new oI,this.parent.setInteractive(oG(i,"inputConfig",void 0)),this.resetFromJSON(i),this.boot()}resetFromJSON(e){return this.pointer=void 0,this.prevIsInTouch=!1,this.isInTouching=!1,this.setEnable(oG(e,"enable",!0)),this.setCooldown(oG(e,"cooldown",void 0)),this}boot(){var e=this.parent;e.on("pointerdown",this.onPointIn,this),e.on("pointerover",this.onPointIn,this),e.on("pointerup",this.onPointOut,this),e.on("pointerout",this.onPointOut,this),this.scene.sys.events.on("preupdate",this.preupdate,this)}shutdown(e){this.isShutdown||(this.scene.sys.events.off("preupdate",this.preupdate,this),this.pointer=void 0,super.shutdown(e))}get enable(){return this._enable}set enable(e){if(this._enable!==e)return e||(this.prevIsInTouch=!1,this.isInTouching=!1,this.pointer=void 0),this._enable=e,this}setEnable(e){return void 0===e&&(e=!0),this.enable=e,this}get cooldownTime(){return this.cooldown.cooldownTime}set cooldownTime(e){this.cooldown.setCooldownTime(e)}setCooldown(e){return this.cooldownTime=e,this}toggleEnable(){return this.setEnable(!this.enable),this}onPointIn(e,i,s){this.enable&&e.isDown&&void 0===this.pointer&&(this.pointer=e,this.isInTouching=!0)}onPointOut(e){this.enable&&this.pointer===e&&(this.pointer=void 0,this.isInTouching=!1)}preupdate(e,i){this.cooldown.update(e,i),!this.prevIsInTouch&&this.isInTouching&&this.emit("touchstart",this,this.parent),this.isInTouching&&this.cooldown.request()&&this.emit("intouch",this,this.parent,this.pointer),this.prevIsInTouch&&!this.isInTouching&&this.emit("touchend",this,this.parent),this.prevIsInTouch=this.isInTouching}},setchildreninteractive_PointToChild=function(e,i,s){for(var r,n=0,a=e.length;n<a;n++)if(utils_ContainsPoint(r=e[n],i,s))return r.pointToChild(i,s);return null},setchildreninteractive_EmitChildEvent=function(e,i,s,r,n,a,o,h){var l;if(void 0===a)l=n;else if("parent"===r)l=setchildreninteractive_PointToChild(s,n,a);else for(var c=0,g=s.length;c<g;c++){var m=s[c];if(utils_ContainsPoint(m,n,a)){l=m;break}}l&&e.emit(i,l,o,h)};let oj=Phaser.Utils.Objects.GetValue;var OnDown=function(e,i,s,r){var n=this._childrenInteractive;setchildreninteractive_EmitChildEvent(n.eventEmitter,`${n.eventNamePrefix}down`,n.targetSizers,n.targetMode,e.worldX,e.worldY,e,r)},setchildreninteractive_DownChild=function(e){var i=oj(e,"down",void 0);!1!==i&&(!0===i&&(i=void 0),this.on("pointerdown",OnDown,this))};let oA=Phaser.Utils.Objects.GetValue;var OnUp=function(e,i,s,r){var n=this._childrenInteractive;setchildreninteractive_EmitChildEvent(n.eventEmitter,`${n.eventNamePrefix}up`,n.targetSizers,n.targetMode,e.worldX,e.worldY,e,r)},setchildreninteractive_UpChild=function(e){var i=oA(e,"up",void 0);!1!==i&&(!0===i&&(i=void 0),this.on("pointerup",OnUp,this))};let oF=Phaser.Utils.Objects.GetValue;var OnMove=function(e,i,s,r){var n=this._childrenInteractive,a=setchildreninteractive_PointToChild(n.targetSizers,e.worldX,e.worldY),o=n.lastOverChild;a&&o&&a===o||(n.lastOverChild=a,setchildreninteractive_EmitChildEvent(n.eventEmitter,`${n.eventNamePrefix}out`,n.targetSizers,n.targetMode,o,void 0,e,r),setchildreninteractive_EmitChildEvent(n.eventEmitter,`${n.eventNamePrefix}over`,n.targetSizers,n.targetMode,a,void 0,e,r))},OnOut=function(e,i){var s=this._childrenInteractive,r=s.lastOverChild;s.lastOverChild=null,setchildreninteractive_EmitChildEvent(s.eventEmitter,`${s.eventNamePrefix}out`,s.targetSizers,s.targetMode,r,void 0,e,i)},setchildreninteractive_OverChild=function(e){var i=oF(e,"over",void 0);!1!==i&&(!0===i&&(i=void 0),this.on("pointermove",OnMove,this).on("pointerover",OnMove,this).on("pointerout",OnOut,this))};let oz=Phaser.Utils.Objects.GetValue;var setchildreninteractive_ClickChild=function(e){var i=oz(e,"click",void 0);if(!1!==i){!0===i&&(i=void 0),void 0===i&&(i={}),i.hasOwnProperty("threshold")||(i.threshold=10);var s=this._childrenInteractive;this._click=new no(this,i),this._click.on("click",function(e,i,r,n){setchildreninteractive_EmitChildEvent(s.eventEmitter,`${s.eventNamePrefix}click`,s.targetSizers,s.targetMode,r.worldX,r.worldY,r,n)},this)}};let oW=Phaser.Utils.Objects.GetValue;var oV=class extends i5{constructor(e,i){var s=system_GetSceneObject(e);s===e&&(e=void 0),super(s,i),this.gameObject=e,e&&e.setInteractive(oW(i,"inputConfig",void 0)),this._enable=void 0,this.resetFromJSON(i),this.boot()}resetFromJSON(e){return this.setEnable(oW(e,"enable",!0)),this.setDetectBounds(),void 0===this.gameObject?this.setDetectBounds(oW(e,"bounds",void 0)):this.setDetectBounds(),this.tracerState=0,this.pointer=void 0,this.lastPointer=void 0,this.movedState=!1,this.isTouchingAnyObject=!1,this}boot(){super.boot(),this.gameObject?this.gameObject.on("pointerdown",this.onPointerDown,this):this.scene.input.on("pointerdown",this.onPointerDown,this),this.scene.input.on("pointerup",this.onPointerUp,this),this.scene.input.on("gameout",this.dragCancel,this),this.scene.input.on("pointermove",this.onPointerMove,this),this.scene.sys.events.once("shutdown",this.destroy,this)}shutdown(e){this.scene&&(this.gameObject||this.scene.input.off("pointerdown",this.onPointerDown,this),this.scene.input.off("pointerup",this.onPointerUp,this),this.scene.input.off("gameout",this.dragCancel,this),this.scene.input.off("pointermove",this.onPointerMove,this),this.scene.sys.events.off("shutdown",this.destroy,this),this.gameObject=void 0,this.bounds=void 0,this.pointer=void 0,this.lastPointer=void 0,this.movedState=!1,super.shutdown(e))}get enable(){return this._enable}set enable(e){if(this._enable!==e)return e||this.dragCancel(),this._enable=e,this}setEnable(e){return void 0===e&&(e=!0),this.enable=e,this}setDetectBounds(e){return this.bounds=e,this}toggleEnable(){return this.setEnable(!this.enable),this}onPointerDown(e,i){this.enable&&void 0===this.pointer&&(!this.bounds||this.bounds.contains(e.x,e.y))&&this.pointer!==e&&(this.pointer=e,this.lastPointer=e,this.movedState=!1,this.tracerState=1,void 0===this.gameObject&&(this.isTouchingAnyObject=i.length>0),this.onDragStart())}onPointerUp(e){this.enable&&(!this.bounds||this.bounds.contains(e.x,e.y))&&this.pointer===e&&(this.pointer=void 0,this.movedState=!1,this.tracerState=0,this.onDragEnd())}onPointerMove(e){if(this.enable&&e.isDown){var i=!this.bounds||this.bounds.contains(e.x,e.y),s=this.pointer===e;!s&&i||(s&&!i?this.onPointerUp(e):(this.movedState||(this.movedState=e.x!==e.downX||e.y!==e.downY),this.movedState&&this.onDrag()))}}dragCancel(){return 1===this.tracerState&&this.onDragEnd(),this.pointer=void 0,this.tracerState=0,this}onDragStart(){this.emit("dragstart",this)}onDragEnd(){this.emit("dragend",this)}onDrag(){this.emit("drag",this)}preUpdate(e,i){}postUpdate(e,i){}startTicking(){super.startTicking(),this.scene.sys.events.on("preupdate",this.preUpdate,this),this.scene.sys.events.on("postupdate",this.postUpdate,this)}stopTicking(){super.stopTicking(),this.scene&&(this.scene.sys.events.off("preupdate",this.preUpdate,this),this.scene.sys.events.off("postupdate",this.postUpdate,this))}setRecongizedStateObject(e){return this.recongizedState=e,this}get state(){return this.recongizedState.state}set state(e){this.recongizedState.state=e}cancel(){return this.state="IDLE",this}isPointerInGameObject(e,i,s){var r=this.pointer;return!!r&&input_IsPointerInBounds(e,r,i,s)}};let oY=Phaser.Utils.Objects.GetValue,oX=Phaser.Math.Distance.Between,oH="IDLE",oU="BEGIN",oN="RECOGNIZED";var o$=class extends oV{constructor(e,i){super(e,i);var s=this;this.setRecongizedStateObject(new oh({states:{IDLE:{enter:function(){s.stop(),s.tapsCount=0,s.x=0,s.y=0,s.worldX=0,s.worldY=0},exit:function(){var e=s.lastPointer;s.x=e.x,s.y=e.y,s.worldX=e.worldX,s.worldY=e.worldY}},BEGIN:{enter:function(){s.start(),s.tapsCount=0,s.emit("tappingstart",s,s.gameObject,s.lastPointer)}},RECOGNIZED:{enter:function(){s.start(),s.emit("tap",s,s.gameObject,s.lastPointer),s.emit(`${s.tapsCount}tap`,s,s.gameObject,s.lastPointer)}}},init:function(){this.state=oH},eventEmitter:!1}))}resetFromJSON(e){super.resetFromJSON(e),this.setHoldTime(oY(e,"time",250)),this.setTapInterval(oY(e,"tapInterval",200)),this.setDragThreshold(oY(e,"threshold",9)),this.setTapOffset(oY(e,"tapOffset",10));var i=oY(e,"taps",void 0);return void 0!==i?this.setTaps(i):(this.setMaxTaps(oY(e,"maxTaps",void 0)),this.setMinTaps(oY(e,"minTaps",void 0))),this}onDragStart(){switch(this.state){case oH:this.state=oU;break;case oU:var e=this.lastPointer;oX(e.upX,e.upY,e.x,e.y)>this.tapOffset&&(this.state=oN,this.state=oU);break;case oN:this.state=oU}}onDragEnd(){this.state===oU&&(this.tapsCount++,this.emit("tapping",this,this.gameObject,this.lastPointer),void 0!==this.maxTaps&&this.tapsCount===this.maxTaps&&(this.state=oN))}onDrag(){this.state!==oH&&this.pointer.getDistance()>this.dragThreshold&&(this.state=oH)}preUpdate(e,i){if(this.isRunning&&this.enable&&this.state===oU){var s=this.lastPointer;s.isDown?e-s.downTime>this.holdTime&&(this.state=oH):e-s.upTime>this.tapInterval&&(void 0===this.minTaps||this.tapsCount>=this.minTaps?this.state=oN:this.state=oH)}}postUpdate(e,i){this.isRunning&&this.enable&&this.state===oN&&(this.state=oH)}get isTapped(){return this.state===oN}setHoldTime(e){return this.holdTime=e,this}setTapInterval(e){return this.tapInterval=e,this}setDragThreshold(e){return this.dragThreshold=e,this}setTapOffset(e){return this.tapOffset=e,this}setMaxTaps(e){return this.maxTaps=e,this}setMinTaps(e){return this.minTaps=e,this}setTaps(e,i){return void 0===i&&(i=e),this.setMinTaps(e).setMaxTaps(i),this}};let oZ=Phaser.Utils.Objects.GetValue,oK="IDLE",oJ="BEGIN",oq="RECOGNIZED";var oQ=class extends oV{constructor(e,i){super(e,i);var s=this;this.setRecongizedStateObject(new oh({states:{IDLE:{enter:function(){s.x=0,s.y=0,s.worldX=0,s.worldY=0},exit:function(){var e=s.lastPointer;s.x=e.x,s.y=e.y,s.worldX=e.worldX,s.worldY=e.worldY}},BEGIN:{enter:function(){s.start()},exit:function(){s.stop()}},RECOGNIZED:{enter:function(){s.emit("pressstart",s,s.gameObject,s.lastPointer)},exit:function(){s.emit("pressend",s,s.gameObject,s.lastPointer)}}},init:function(){this.state=oK},eventEmitter:!1}))}resetFromJSON(e){return super.resetFromJSON(e),this.setDragThreshold(oZ(e,"threshold",9)),this.setHoldTime(oZ(e,"time",251)),this}onDragStart(){this.state=oJ,0===this.holdTime&&(this.state=oq)}onDragEnd(){this.state=oK}onDrag(){this.state!==oK&&this.pointer.getDistance()>this.dragThreshold&&(this.state=oK)}preUpdate(e,i){this.isRunning&&this.enable&&this.state===oJ&&e-this.pointer.downTime>=this.holdTime&&(this.state=oq)}get isPressed(){return this.state===oq}setHoldTime(e){return this.holdTime=e,this}setDragThreshold(e){return this.dragThreshold=e,this}};let o0=Phaser.Utils.Objects.GetValue,o1="IDLE",o2="BEGIN",o5="RECOGNIZED";var o3=class extends oV{constructor(e,i){super(e,i);var s=this;this.setRecongizedStateObject(new oh({states:{IDLE:{},BEGIN:{enter:function(){var e=s.pointer;s.startX=e.x,s.startY=e.y,s.startWorldX=e.worldX,s.startWorldY=e.worldY}},RECOGNIZED:{enter:function(){s.emit("panstart",s,s.gameObject,s.lastPointer)},exit:function(){var e=s.lastPointer;s.endX=e.x,s.endY=e.y,s.endWorldX=e.worldX,s.endWorldY=e.worldY,s.emit("panend",s,s.gameObject,s.lastPointer)}}},init:function(){this.state=o1},eventEmitter:!1}))}resetFromJSON(e){return super.resetFromJSON(e),this.setDragThreshold(o0(e,"threshold",10)),this}onDragStart(){this.state=o2,0===this.dragThreshold&&(this.state=o5)}onDragEnd(){this.state=o1}onDrag(){switch(this.state){case o2:this.pointer.getDistance()>=this.dragThreshold&&(this.state=o5);break;case o5:var e=this.pointer.position,i=this.pointer.prevPosition;this.dx=e.x-i.x,this.dy=e.y-i.y;var s=this.pointer;this.x=s.x,this.y=s.y,this.worldX=s.worldX,this.worldY=s.worldY,this.emit("pan",this,this.gameObject,this.lastPointer)}}get isPanned(){return this.state===o5}setDragThreshold(e){return this.dragThreshold=e,this}};let o7=Phaser.Math.Distance.Between,o6=Phaser.Math.Angle.Between;var o4=s(57731),o8=s(3074);let o9=Phaser.Utils.Objects.GetValue,ht=Phaser.Math.RadToDeg;let Swipe_Swipe=class Swipe_Swipe extends oV{constructor(e,i){super(e,i);var s=this;this.setRecongizedStateObject(new oh({states:{IDLE:{enter:function(){s.x=0,s.y=0,s.worldX=0,s.worldY=0},exit:function(){var e=s.lastPointer;s.x=e.x,s.y=e.y,s.worldX=e.worldX,s.worldY=e.worldY}},BEGIN:{enter:function(){s.validDrag=!1}},RECOGNIZED:{enter:function(){s.start(),s.updateDirectionStates(),s.emit("swipe",s,s.gameObject,s.lastPointer)},exit:function(){s.stop(),s.clearDirectionStates()}}},init:function(){this.state=he},eventEmitter:!1})),this.clearDirectionStates()}resetFromJSON(e){return super.resetFromJSON(e),this.setDragThreshold(o9(e,"threshold",10)),this.setVelocityThreshold(o9(e,"velocityThreshold",1e3)),this.setDirectionMode(o9(e,"dir","8dir")),this}onDragStart(){this.state=hi}onDragEnd(){this.state=he}onDrag(){this.state===hi&&(this.validDrag||(this.validDrag=0===this.dragThreshold||this.pointer.getDistance()>=this.dragThreshold),this.validDrag&&this.dragVelocity>this.velocityThreshold&&(this.state=hs))}postUpdate(e,i){this.isRunning&&this.enable&&this.state===hs&&(this.state=he)}get isSwiped(){return this.state===hs}get dragVelocity(){var e;switch(this.dirMode){case 0:e=this.getVelocityY();break;case 1:e=this.getVelocityX();break;default:e=this.getVelocity()}return e}setDragThreshold(e){return this.dragThreshold=e,this}setVelocityThreshold(e){return this.velocityThreshold=e,this}setDirectionMode(e){return"string"==typeof e&&(e=o4.Z[e]),this.dirMode=e,this}updateDirectionStates(){var e=ht(this.getVelocityAngle());return(0,o8.Z)(e,this.dirMode,this),this}clearDirectionStates(){return this.left=!1,this.right=!1,this.up=!1,this.down=!1,this}};Object.assign(Swipe_Swipe.prototype,{getDt:function(){return system_GetTickDelta(this.scene)},getVelocity:function(){var e=this.pointer.position,i=this.pointer.prevPosition;return o7(i.x,i.y,e.x,e.y)/(.001*this.getDt())},getVelocityX:function(){var e=this.pointer.position,i=this.pointer.prevPosition;return Math.abs(e.x-i.x)/(.001*this.getDt())},getVelocityY:function(){var e=this.pointer.position,i=this.pointer.prevPosition;return Math.abs(e.y-i.y)/(.001*this.getDt())},getVelocityAngle:function(){var e=this.pointer.position,i=this.pointer.prevPosition;return o6(i.x,i.y,e.x,e.y)}});let he="IDLE",hi="BEGIN",hs="RECOGNIZED",hr=Phaser.Utils.Objects.GetValue,hn=Phaser.Utils.Array.SpliceOne,ho=Phaser.Math.Distance.Between,hh=Phaser.Math.Angle.Between;let TwoPointersTracer=class TwoPointersTracer{constructor(e,i){var s=system_GetSceneObject(e);s===e&&(e=void 0);var r=s.input.manager.pointersTotal-1;r<2&&s.input.addPointer(2-r),this.scene=s,this.gameObject=e,e&&e.setInteractive(hr(i,"inputConfig",void 0)),this.setEventEmitter(hr(i,"eventEmitter",void 0)),this._enable=void 0,this.pointers=[],this.movedState={},this.resetFromJSON(i),this.boot()}resetFromJSON(e){return this.setEnable(hr(e,"enable",!0)),this.bounds=hr(e,"bounds",void 0),this.tracerState=hd,this.pointers.length=0,object_Clear(this.movedState),this}boot(){this.gameObject?this.gameObject.on("pointerdown",this.onPointerDown,this):this.scene.input.on("pointerdown",this.onPointerDown,this),this.scene.input.on("pointerup",this.onPointerUp,this),this.scene.input.on("gameout",this.dragCancel,this),this.scene.input.on("pointermove",this.onPointerMove,this),this.scene.sys.events.once("shutdown",this.destroy,this)}shutdown(){this.scene&&(this.destroyEventEmitter(),this.pointers.length=0,object_Clear(this.movedState),this.gameObject||this.scene.input.off("pointerdown",this.onPointerDown,this),this.scene.input.off("pointerup",this.onPointerUp,this),this.scene.input.off("gameout",this.dragCancel,this),this.scene.input.off("pointermove",this.onPointerMove,this),this.scene.sys.events.off("shutdown",this.destroy,this),this.scene=void 0,this.gameObject=void 0)}destroy(){this.shutdown()}get enable(){return this._enable}set enable(e){if(this._enable!==e)return e||this.dragCancel(),this._enable=e,this}setEnable(e){return void 0===e&&(e=!0),this.enable=e,this}toggleEnable(){return this.setEnable(!this.enable),this}onPointerDown(e){if(this.enable&&2!==this.pointers.length&&(!this.bounds||this.bounds.contains(e.x,e.y))&&-1===this.pointers.indexOf(e))switch(this.movedState[e.id]=!1,this.pointers.push(e),this.tracerState){case hd:this.tracerState=hc,this.onDrag1Start();break;case hc:this.tracerState=hu,this.onDrag2Start()}}onPointerUp(e){if(this.enable&&(!this.bounds||this.bounds.contains(e.x,e.y))){var i=this.pointers.indexOf(e);if(-1!==i)switch(delete this.movedState[e.id],hn(this.pointers,i),this.tracerState){case hc:this.tracerState=hd,this.onDrag1End();break;case hu:this.tracerState=hc,this.onDrag2End(),this.onDrag1Start()}}}onPointerMove(e){if(this.enable&&e.isDown){var i=!this.bounds||this.bounds.contains(e.x,e.y),s=-1!==this.pointers.indexOf(e);if(!s&&i);else if(s&&!i)this.onPointerUp(e);else if(this.movedState[e.id]||(this.movedState[e.id]=e.x!==e.downX||e.y!==e.downY),this.movedState[e.id])switch(this.tracerState){case hc:this.onDrag1();break;case hu:this.onDrag2()}}}dragCancel(){return this.tracerState===hu&&this.onDrag2End(),this.pointers.length=0,object_Clear(this.movedState),this.tracerState=hd,this}onDrag1Start(){this.emit("drag1start",this)}onDrag1End(){this.emit("drag1end",this)}onDrag1(){this.emit("drag1",this)}onDrag2Start(){this.emit("drag2start",this)}onDrag2End(){this.emit("drag2end",this)}onDrag2(){this.emit("drag2",this)}get distanceBetween(){if(this.tracerState!==hu)return 0;var e=this.pointers[0],i=this.pointers[1];return ho(e.x,e.y,i.x,i.y)}get angleBetween(){if(this.tracerState!==hu)return 0;var e=this.pointers[0],i=this.pointers[1];return hh(e.x,e.y,i.x,i.y)}get drag1Vector(){var e=this.pointers[0];if(e&&this.movedState[e.id]){var i=e.position,s=e.prevPosition;hl.x=i.x-s.x,hl.y=i.y-s.y}else hl.x=0,hl.y=0;return hl}get centerX(){if(this.tracerState!==hu)return 0;var e=this.pointers[0].position,i=this.pointers[1].position;return(e.x+i.x)/2}get centerY(){if(this.tracerState!==hu)return 0;var e=this.pointers[0].position,i=this.pointers[1].position;return(e.y+i.y)/2}get prevCenterX(){if(this.tracerState!==hu)return 0;var e=this.movedState[this.pointers[0].id]?this.pointers[0].prevPosition:this.pointers[0].position,i=this.movedState[this.pointers[1].id]?this.pointers[1].prevPosition:this.pointers[1].position;return(e.x+i.x)/2}get prevCenterY(){if(this.tracerState!==hu)return 0;var e=this.movedState[this.pointers[0].id]?this.pointers[0].prevPosition:this.pointers[0].position,i=this.movedState[this.pointers[1].id]?this.pointers[1].prevPosition:this.pointers[1].position;return(e.y+i.y)/2}get movementCenterX(){return this.centerX-this.prevCenterX}get movementCenterY(){return this.centerY-this.prevCenterY}setRecongizedStateObject(e){return this.recongizedState=e,this}get state(){return this.recongizedState.state}set state(e){this.recongizedState.state=e}cancel(){return this.state=hp,this}isPointer0InGameObject(e,i,s){var r=this.pointers[0];return!!r&&input_IsPointerInBounds(e,r,i,s)}isPointer1InGameObject(e,i,s){var r=this.pointers[1];return!!r&&input_IsPointerInBounds(e,r,i,s)}};Object.assign(TwoPointersTracer.prototype,iM.Z);var hl={};let hd=0,hc=1,hu=2,hp="IDLE";var hg=TwoPointersTracer;let hv=Phaser.Utils.Objects.GetValue,hf="IDLE",hm="BEGIN",hb="RECOGNIZED";var hy=class extends hg{constructor(e,i){super(e,i);var s=this;this.setRecongizedStateObject(new oh({states:{IDLE:{enter:function(){s.prevDistance=void 0,s.scaleFactor=1}},BEGIN:{},RECOGNIZED:{enter:function(){s.emit("pinchstart",s)},exit:function(){s.emit("pinchend",s)}}},init:function(){this.state=hf},eventEmitter:!1}))}resetFromJSON(e){return super.resetFromJSON(e),this.setDragThreshold(hv(e,"threshold",0)),this}onDrag2Start(){this.scaleFactor=1,this.prevDistance=this.distanceBetween,this.state=hm,0===this.dragThreshold&&(this.state=hb)}onDrag2End(){this.state=hf}onDrag2(){switch(this.state){case hm:if(this.pointers[0].getDistance()>=this.dragThreshold&&this.pointers[1].getDistance()>=this.dragThreshold){var e=this.distanceBetween;this.scaleFactor=e/this.prevDistance,this.prevDistance=e,this.state=hb}break;case hb:var e=this.distanceBetween;this.scaleFactor=e/this.prevDistance,this.emit("pinch",this),this.prevDistance=e}}get isPinched(){return this.state===hb}setDragThreshold(e){return this.dragThreshold=e,this}};let hC=Phaser.Math.RotateAround;var actions_RotateObjectAround=function(e,i,s,r){return hC(e,i,s,r),e.rotation+=r,e},hx={};let hS=Phaser.Utils.Objects.GetValue,h_=Phaser.Math.Angle.WrapDegrees,hw=Phaser.Math.Angle.ShortestBetween,hP=Phaser.Math.RadToDeg,hk=Phaser.Math.DegToRad;let Rotate_Rotate=class Rotate_Rotate extends hg{constructor(e,i){super(e,i);var s=this;this.setRecongizedStateObject(new oh({states:{IDLE:{enter:function(){s.prevAngle=void 0,s.angle=0}},BEGIN:{},RECOGNIZED:{enter:function(){s.emit("rotatestart",s)},exit:function(){s.emit("rotateend",s)}}},init:function(){this.state=hT},eventEmitter:!1}))}resetFromJSON(e){return super.resetFromJSON(e),this.setDragThreshold(hS(e,"threshold",0)),this}onDrag2Start(){this.prevAngle=h_(hP(this.angleBetween)),this.state=hO,0===this.dragThreshold&&(this.state=hM)}onDrag2End(){this.state=hT}onDrag2(){switch(this.state){case hO:if(this.pointers[0].getDistance()>=this.dragThreshold&&this.pointers[1].getDistance()>=this.dragThreshold){var e=h_(hP(this.angleBetween));this.angle=hw(this.prevAngle,e),this.prevAngle=e,this.state=hM}break;case hM:var e=h_(hP(this.angleBetween));this.angle=hw(this.prevAngle,e),this.prevAngle=e,this.emit("rotate",this)}}get isRotated(){return this.state===hM}get rotation(){return hk(this.angle)}setDragThreshold(e){return this.dragThreshold=e,this}};Object.assign(Rotate_Rotate.prototype,{spinObject:function(e,i){if(!this.isRotation)return this;void 0===i&&(i=this.pointers[0].camera);var s,r,n,a,o=this.movementCenterX,h=this.movementCenterY,l=(s=this.centerX,r=this.centerY,n=i,!0==(a=!0)&&(a=hx),n.getWorldPoint(s,r,a),a),c=l.x,g=l.y,m=this.rotation;if(Array.isArray(e))for(var x=e,S=0,_=x.length;S<_;S++)e=x[S],e.x+=o,e.y+=h,actions_RotateObjectAround(e,c,g,m);else e.x+=o,e.y+=h,actions_RotateObjectAround(e,c,g,m);return this}});let hT="IDLE",hO="BEGIN",hM="RECOGNIZED",hE=Phaser.Utils.Objects.GetValue;var setchildreninteractive_TapChild=function(e){var i=hE(e,"tap",void 0);if(!1!==i){!0===i&&(i=void 0);var s=this._childrenInteractive;this._tap=new o$(this,i),this._tap.on("tap",function(e,i,r){setchildreninteractive_EmitChildEvent(s.eventEmitter,`${s.eventNamePrefix}${e.tapsCount}tap`,s.targetSizers,s.targetMode,e.worldX,e.worldY,r)},this)}};let hR=Phaser.Utils.Objects.GetValue;var setchildreninteractive_PressChild=function(e){var i=hR(e,"press",void 0);if(!1!==i){!0===i&&(i=void 0);var s=this._childrenInteractive;this._press=new oQ(this,i),this._press.on("pressstart",function(e,i,r){setchildreninteractive_EmitChildEvent(s.eventEmitter,`${s.eventNamePrefix}pressstart`,s.targetSizers,s.targetMode,e.worldX,e.worldY,r)},this).on("pressend",function(e,i,r){setchildreninteractive_EmitChildEvent(s.eventEmitter,`${s.eventNamePrefix}pressend`,s.targetSizers,s.targetMode,e.worldX,e.worldY,r)},this)}};let hL=Phaser.Utils.Objects.GetValue;var setchildreninteractive_SwipeChild=function(e){var i=hL(e,"swipe",void 0);if(!1!==i){!0===i&&(i=void 0),void 0===i&&(i={}),i.hasOwnProperty("dir")||(i.dir="4dir");var s=this._childrenInteractive;this._swipe=new Swipe_Swipe(this,i),this._swipe.on("swipe",function(e,i,r){var n=e.left?"left":e.right?"right":e.up?"up":"down";setchildreninteractive_EmitChildEvent(s.eventEmitter,`${s.eventNamePrefix}swipe${n}`,s.targetSizers,s.targetMode,e.worldX,e.worldY,r)},this)}};let hB=Phaser.Utils.Objects.GetValue;var setchildreninteractive_SetChildrenInteractive=function(e,i){return e.setInteractive(),hB(i,"dropZone",!1)&&(e.input.dropZone=!0),e._childrenInteractive={targetSizers:hB(i,"targets",[e]),targetMode:hB(i,"targetMode","parent"),eventEmitter:hB(i,"eventEmitter",e),eventNamePrefix:hB(i,"inputEventPrefix","child.")},setchildreninteractive_DownChild.call(e,i),setchildreninteractive_UpChild.call(e,i),setchildreninteractive_OverChild.call(e,i),setchildreninteractive_ClickChild.call(e,i),setchildreninteractive_TapChild.call(e,i),setchildreninteractive_PressChild.call(e,i),setchildreninteractive_SwipeChild.call(e,i),e},hI={getSizerConfig:function(e){return void 0===e&&(e=this),utils_GetSizerConfig(e)},getChildPrevState:function(e){var i=utils_GetSizerConfig(e);return i.hasOwnProperty("prevState")||(i.prevState={}),i.prevState},pushIntoBounds:function(e){return void 0===e&&(e=system_GetViewport(this.scene)),this.left=Math.max(this.left,e.left),this.right=Math.min(this.right,e.right),this.top=Math.max(this.top,e.top),this.bottom=Math.min(this.bottom,e.bottom),this},drawBounds:function(e,i){var s,r=e.scene;if("number"==typeof i)o=i;else{o=aS(i,"color"),h=aS(i,"lineWidth");var n=aS(i,"name",!1);n&&(l=aS(n,"createTextCallback",DefaultCreateTextCallback),c=aS(n,"createTextCallbackScope",void 0),"string"==typeof(g=aS(n,"align","left-top"))&&(g=ab[g]))}if(void 0===o&&(o=16777215),void 0===h&&(h=1),l&&!e.children){e.children=new a_(r),e.once("destroy",function(e,i){e.children.destroy(!i),e.children=void 0});var a=e.clear.bind(e);e.clear=function(){a(),e.children.clear(!1,!0)}}for(var o,h,l,c,g,m,x=this.getAllShownChildren([this]),S=0,_=x.length;S<_;S++)((m=x[S]).getBounds||void 0!==m.width&&void 0!==m.height)&&(aw=GetBounds(m,aw),null!=o&&e.lineStyle(h,o).strokeRectShape(aw),m.name&&l&&(s=c?l.call(c,r):l(r))&&(s.setText(m.name),e.children.add(s),actions_AlignIn(s,aw.x,aw.y,aw.width,aw.height,g)));return this},resolveWidth:basesizer_ResolveWidth,hasWidthWrap:basesizer_HasWidthWrap,resolveChildrenWidth:function(e){var i,s,r;for(var n in this.sizerChildren)(i=this.sizerChildren[n])&&i.isRexSizer&&!i.ignoreLayout&&(s=this.getExpandedChildWidth(i,e),void 0===(r=i.resolveWidth(s))&&(r=s),i.resolveChildrenWidth(r))},runWidthWrap:basesizer_RunWidthWrap,resolveHeight:basesizer_ResolveHeight,hasHeightWrap:basesizer_HasHeightWrap,resolveChildrenHeight:function(e){var i,s,r;for(var n in this.sizerChildren)(i=this.sizerChildren[n])&&i.isRexSizer&&!i.ignoreLayout&&(s=this.getExpandedChildHeight(i,e),void 0===(r=i.resolveHeight(s))&&(r=s),i.resolveChildrenHeight(r))},runHeightWrap:basesizer_RunHeightWrap,getChildWidth:function(e){var i;if(e.isRexSizer){var s=e.childrenWidth;if(void 0==s)return;i=Math.max(e.minWidth,s)}else i=void 0!==e.minWidth?e.minWidth:GetDisplayWidth(e);return i},getChildHeight:function(e){var i;if(e.isRexSizer){var s=e.childrenHeight;if(void 0===s)return;i=Math.max(e.minHeight,s)}else i=void 0!==e.minHeight?e.minHeight:GetDisplayHeight(e);return i},getExpandedChildWidth:function(e,i){return i},getExpandedChildHeight:function(e,i){return i},getChildrenWidth:function(){return 0},getChildrenHeight:function(){return 0},addChildrenMap:basesizer_AddChildrenMap,addElement:basesizer_AddChildrenMap,removeChildrenMap:function(e){if("object"==typeof e){for(var e in this.childrenMap)if(this.childrenMap[e]===e)break}return delete this.childrenMap[e],this},getElement:function(e,i){if("string"==typeof e&&(e=e.split(".")),0!==e.length){void 0===i&&(i=!1);var s=e.shift(),r=null;if("#"===s.charAt(0))s=s.substring(1),r=this.getByName(s,i);else if(0===e.length&&i){var n=this.childrenMap;if(n)for(var a,o=[n];o.length;){for(var h in n=o.shift()){if(a=n[h],h===s){r=a;break}a&&"object"==typeof a&&a.childrenMap&&o.push(a.childrenMap)}if(r)break}}else if(-1===s.indexOf("["))this.childrenMap&&(r=this.childrenMap[s]);else{var l=s.match(aB);if(null!=l&&this.childrenMap){var c=this.childrenMap[l[1]];c&&(r=c[l[2]])}}return 0===e.length?r:r&&r.childrenMap?r.getElement(e):null}},getChildIndex:function(e){if(Array.isArray(this.sizerChildren)){var i=this.sizerChildren.indexOf(e);return -1===i&&(i=null),i}if(this.getParentSizer(e)!==this)return null;for(var s in this.sizerChildren)if(this.sizerChildre[s]===e)return s;return null},getAllChildrenSizers:function(e){void 0===e&&(e=[]);for(var i=e.length,s=this.getChildrenSizers(e),r=e.length,n=i;n<r;n++)s[n].getAllChildrenSizers(e);return e},getChildrenSizers:function(e){return void 0===e&&(e=[]),e},preLayout:basesizer_PreLayout,layout:function(){if(this.ignoreLayout)return this;var e=this.scaleX,i=this.scaleY,s=1===e&&1===i;return s||this.setScale(1),this.runLayout(),s||this.setScale(e,i),this},runLayout:function(e,i,s){if(this.ignoreLayout)return this;var r,n,a,o=!e;return o&&this.preLayout(),(r=ResolveSize(this,i,s,o&&this.hasWidthWrap(),o&&this.hasHeightWrap()))||console.error("Can't resolve size of ",this),n=r.width,a=r.height,this.resize(n,a),this.sizerEventsEnable&&void 0===this.layoutedChildren&&(this.layoutedChildren=[]),this.layoutChildren(),this.layoutBackgrounds(),this.sizerEventsEnable&&(this.emit("postlayout",this.layoutedChildren,this),this.layoutedChildren.length=0),this.postLayout(),o&&this._postLayout(),this},layoutChildren:function(){},layoutBackgrounds:function(){if(void 0!==this.backgroundChildren)for(var e,i,s,r,n,a,o,h=this.backgroundChildren,l=this.left,c=this.top,g=this.width,m=this.height,x=0,S=h.length;x<S;x++)(i=(e=h[x]).rexSizer).hidden||(s=i.padding,utils_PreLayoutChild.call(this,e),r=l+s.left,n=c+s.top,size_ResizeGameObject(e,a=g-s.left-s.right,o=m-s.top-s.bottom),utils_LayoutChild.call(this,e,r,n,a,o,oO))},postLayout:function(e,i,s){return this},_postLayout:function(e,i,s){return this._anchor&&this._anchor.updatePosition(),this},setAnchor:function(e){void 0===e&&(e={});var i=e.hasOwnProperty("width"),s=e.hasOwnProperty("height"),r=e.hasOwnProperty("onResizeCallback");return(i||s)&&!r&&(e.onResizeCallback=function(e,r,n){i&&n.setMinWidth(e),s&&n.setMinHeight(r),n.layout()}),void 0===this._anchor?this._anchor=new aj(this,e):this._anchor.resetFromJSON(e),this},isInTouching:function(e,i){return(system_IsGameObject(e)||"string"==typeof e)&&(i=e,e=void 0),void 0===i?i=this:"string"==typeof i&&(i=this.getElement(i)),input_IsPointerInBounds(i,e)},pointToChild:function(e,i,s,r,n){if(object_IsFunction(s)||(n=s,s=void 0,r=void 0),void 0===n&&(n=this.sizerChildren?this.sizerChildren:this.children),object_IsArray(n)){for(var a,o=0,h=n.length;o<h;o++)if(utils_ContainsPoint(a=n[o],e,i,s,r))return a}else for(var l in n)if(utils_ContainsPoint(a=n[l],e,i,s,r))return a;return null},setDraggable:function(e,i,s){if(oM(e)){var r=e;e=r.sensor,s=r.target,i=r.draggable}else"boolean"!=typeof i&&(s=i,i=void 0);var n=typeof e;if("string"===n){var a=e;if(!(e=this.getElement(a)))return console.error(`Can get element '${a}'`),this}else(void 0===e||"object"!=n)&&(i=e,e=this);return void 0===i&&(i=!0),e.input&&e.input._rexUIDragSizer?e.input.draggable=i:i&&(e.setInteractive(),e.scene.input.setDraggable(e),e.on("drag",function(i,r,n){var a=void 0===s?this.getTopmostSizer():s;a.x+=r-e.x,a.y+=n-e.y,a.emit("sizer.drag",i,r,n)},this).on("dragstart",function(e,i,r){(void 0===s?this.getTopmostSizer():s).emit("sizer.dragstart",e,i,r)},this).on("dragend",function(e,i,r,n){(void 0===s?this.getTopmostSizer():s).emit("sizer.dragend",e,i,r,n)},this).on("drop",function(e,i){(void 0===s?this.getTopmostSizer():s).emit("sizer.drop",e,i)}),e.input._rexUIDragSizer=!0),this},setChildrenInteractive:function(e){return setchildreninteractive_SetChildrenInteractive(this,e),this},broadcastEvent:function(){for(var e=this.getAllChildren([this]),i=0,s=e.length;i<s;i++){var r=e[i];r.emit.apply(r,arguments)}return this}};Object.assign(hI,{getInnerPadding(e){return GetPadding(this.space,e)},setInnerPadding(e,i){return SetPadding(this.space,e,i),this},getOuterPadding(e){return GetPadding(this.getSizerConfig(this).padding,e)},setOuterPadding(e,i){return SetPadding(this.getSizerConfig(this).padding,e,i),this},getChildOuterPadding(e,i){return"string"==typeof e&&(e=this.getElement(e)),GetPadding(this.getSizerConfig(e).padding,i)},setChildOuterPadding(e,i,s){return"string"==typeof e&&(e=this.getElement(e)),SetPadding(this.getSizerConfig(e).padding,i,s),this}},{addBackground(e,i,s){return void 0===this.backgroundChildren&&(this.backgroundChildren=[]),"string"==typeof i&&(s=i,i=void 0),void 0===i&&(i=0),utils_AddChild.call(this,e),this.backgroundChildren.push(e),this.getSizerConfig(e).padding=bounds_GetBoundsConfig(i),void 0!==s&&this.addChildrenMap(s,e),this},isBackground(e){return void 0!==this.backgroundChildren&&-1!==this.backgroundChildren.indexOf(e)}},{removeFromParentSizer(){var e=aL(gameObject);return e&&e.remove(this),this},removeBackground(e,i){return void 0===this.backgroundChildren||this.getParentSizer(e)!==this||(aR(this.backgroundChildren,e),utils_RemoveChild.call(this,e,i)),this},removeAllBackgrounds(e){if(void 0===this.backgroundChildren)return this;for(var i=this.backgroundChildren.length-1;i>=0;i--)this.remove(this.backgroundChildren[i],e);return this}},aT,aX,{fadeIn(e,i){if(aJ(e)){var s=e;e=s.duration,i=s.alpha}var r=void 0===this._fade;return this._fade=fade_in(this,e,i,this._fade),r&&OnInitFade(this,this._fade),this._fade.completeEventName="fadein.complete",this},fadeInPromise(e,i){return this.fadeIn(e,i),WaitComplete(this._fade)},fadeOutDestroy(e,i){if(aJ(e)){var s=e;e=s.duration,i=s.destroy}var r=void 0===this._fade;return this._fade=fade_out_destroy(this,e,i,this._fade),r&&OnInitFade(this,this._fade),this._fade.completeEventName="fadeout.complete",this},fadeOutDestroyPromise(e,i){return this.fadeOutDestroy(e,i),WaitComplete(this._fade)},fadeOut(e){return this.fadeOutDestroy(e,!1),this},fadeOutPromise(e){return this.fadeOut(e),WaitComplete(this._fade)}},{moveFrom(e,i,s,r,n){if(a5(e)){var a=e;i=a.x,s=a.y,e=a.hasOwnProperty("speed")?1e3*a3(i,s,this.x,this.y)/a.speed:a.duration,r=a.ease}var o=void 0===this._easeMove;return this._easeMove=easemove_EaseMoveFrom(this,e,i,s,r,n,this._easeMove),o&&OnInitEaseMove(this,this._easeMove),this._easeMove.completeEventName="movefrom.complete",this},moveFromPromise(e,i,s,r,n){return this.moveFrom(e,i,s,r,n),WaitComplete(this._easeMove)},moveFromDestroy(e,i,s,r){return this.moveFrom(e,i,s,r,!0),this},moveFromDestroyPromise(e,i,s,r){return this.moveFromDestroy(e,i,s,r),WaitComplete(this._easeMove)},moveTo(e,i,s,r,n){if(a5(e)){var a=e;i=a.x,s=a.y,e=a.hasOwnProperty("speed")?1e3*a3(i,s,this.x,this.y)/a.speed:a.duration,r=a.ease}var o=void 0===this._easeMove;return this._easeMove=easemove_EaseMoveTo(this,e,i,s,r,n,this._easeMove),o&&OnInitEaseMove(this,this._easeMove),this._easeMove.completeEventName="moveto.complete",this},moveToPromise(e,i,s,r,n){return this.moveTo(e,i,s,r,n),WaitComplete(this._easeMove)},moveToDestroy(e,i,s,r){return this.moveTo(e,i,s,r,!0),this},moveToDestroyPromise(e,i,s,r){return this.moveToDestroy(e,i,s,r,!0),WaitComplete(this._easeMove)},moveStop(e){return this._easeMove&&this._easeMove.stop(e),this}},{shake(e,i,s){if(ot(e)){var r=e;e=r.duration,i=r.magnitude,s=r.magnitudeMode}return void 0===this._shake&&(this._shake=new a9(this,{mode:0,magnitudeMode:1}),OnInitShake(this,this._shake)),void 0!==e&&this._shake.setDuration(e),void 0!==i&&this._shake.setMagnitude(i),void 0!==s&&this._shake.setMagnitudeMode(s),this._shake.shake(),this},shakePromise(e,i){return this.shake(e,i),WaitComplete(this._shake)}},{easeDataTo(e,i,s,r){return this._easeData||(this._easeData=new oi(this),OnInitEaseData(this,this._easeData)),this._easeData.easeTo(e,i,s,r),this},easeDataToPromise(e,i,s,r){return this.easeDataTo(e,i,s,r),WaitEvent_WaitEvent(this._easeData,`complete-${e}`)},stopEaseData(e,i){return this._easeData&&this._easeData.stopEase(e,i),this},stopAllEaseData(e){return this._easeData&&this._easeData.stopAll(e),this}},oE,{onClickOutside(e,i,s,r){return e&&("function"==typeof e&&(r=s,s=i,i=e,e=this),void 0===e._clickOutside&&(e._clickOutside=new oB(e,r)),e._clickOutside.on("clickoutside",i,s)),this},offClickOutside(e,i,s){return"function"==typeof e&&(s=i,i=e,e=this),void 0===e._clickOutside||e._clickOutside.off("clickoutside",i,s),this},enableClickOutside(e,i){return"boolean"==typeof e&&(i=e,e=void 0),void 0===e&&(e=this),void 0===e._clickOutside||e._clickOutside.setEnable(i),this},disableClickOutside(e){return void 0===e&&(e=this),void 0===e._clickOutside||e._clickOutside.setEnable(!1),this}},{isPointerInBounds(e){return void 0===e?e=this:"string"==typeof e&&(e=this.getElement(e)),!!e&&input_IsPointerInBounds(e)},onTouching(e,i,s,r){return e&&("function"==typeof e&&(r=s,s=i,i=e,e=this),void 0===e._inTouching&&(e._inTouching=new oD(e,r)),e._inTouching.on("intouch",i,s)),this},offTouching(e,i,s){return"function"==typeof e&&(s=i,i=e,e=this),void 0===e._inTouching||e._inTouching.off("intouch",i,s),this},onTouchingEnd(e,i,s,r){return e&&("function"==typeof e&&(r=s,s=i,i=e,e=this),void 0===e._inTouching&&(e._inTouching=new oD(e,r)),e._inTouching.on("touchend",i,s)),this},offTouchingEnd(e,i,s){return"function"==typeof e&&(s=i,i=e,e=this),void 0===e._inTouching||e._inTouching.off("touchend",i,s),this},enableTouching(e,i){return"boolean"==typeof e&&(i=e,e=void 0),void 0===e&&(e=this),void 0===e._inTouching||e._inTouching.setEnable(i),this},disableTouching(e){return void 0===e&&(e=this),void 0===e._inTouching||e._inTouching.setEnable(!1),this}},{show(e){return void 0===e&&(e=this),Show(e,!1),this},hide(e){return void 0===e&&(e=this),Hide(e,!0),this},isShow(e){return void 0===e&&(e=this),IsShown(e)}},oP,{getShownChildren(e){void 0===e&&(e=[]);for(var i,s=this.children,r=0,n=s.length;r<n;r++)(i=s[r]).rexSizer&&i.rexSizer.hidden||e.push(i);return e},getAllShownChildren(e){void 0===e&&(e=[]);for(var i=[this];i.length>0;){var s=i.shift();s.rexSizer&&s.rexSizer.hidden||(s!==this&&e.push(s),s.isRexContainerLite&&i.push(...s.children))}return e}});let hG=Phaser.Utils.Objects.GetValue;let BaseSizer_Base=class BaseSizer_Base extends af{constructor(e,i,s,r,n,a){super(e,i,s,1,1),this.isRexSizer=!0,this.setMinSize(r,n),this.setName(hG(a,"name","")),this.rexSizer={},this.space={},this.backgroundChildren=void 0,this.sizerChildren=void 0,this.childrenMap={},this.layoutedChildren=void 0,this.enableLayoutWarn(!1);var o=hG(a,"anchor",void 0);o&&this.setAnchor(o),this.setInnerPadding(hG(a,"space",0));var h=hG(a,"draggable",!1);h&&this.setDraggable(h),this.setSizerEventsEnable(hG(a,"sizerEvents",!1)),this.setDirty(!0),hG(a,"enableLayer",!1)&&this.enableLayer()}destroy(e){if(this.scene&&!this.ignoreDestroy){if(e)for(var i=this.getAllChildrenSizers([this]),s=0,r=i.length;s<r;s++)i[s].sizerEventsEnable=!1;super.destroy(e),object_Clear(this.backgroundChildren),object_Clear(this.sizerChildren),this.childrenMap=void 0,this.space=void 0,this.rexSizer=void 0,this.layoutedChildren=void 0}}setMinSize(e,i){return this.setMinWidth(e).setMinHeight(i),this}setMinWidth(e){return null==e&&(e=0),this.minWidth=e,this}setMinHeight(e){return null==e&&(e=0),this.minHeight=e,this}setDirty(e){return void 0===e&&(e=!0),this.dirty=e,this}setSizerEventsEnable(e){return void 0===e&&(e=!0),this.sizerEventsEnable=e,this}enableLayoutWarn(e){return void 0===e&&(e=!0),this.layoutWarnEnable=e,this}get ignoreLayout(){return this.rexSizer.hidden||!this.dirty}get childrenWidth(){return void 0===this._childrenWidth&&(this._childrenWidth=this.getChildrenWidth()),this._childrenWidth}get childrenHeight(){return void 0===this._childrenHeight&&(this._childrenHeight=this.getChildrenHeight()),this._childrenHeight}get left(){return this.x-GetDisplayWidth(this)*this.originX}set left(e){this.x+=e-this.left}alignLeft(e){return this.left=e,this}get right(){return this.left+GetDisplayWidth(this)}set right(e){this.x+=e-this.right}alignRight(e){return this.right=e,this}get centerX(){return this.left+GetDisplayWidth(this)/2}set centerX(e){this.x+=e-this.centerX}alignCenterX(e){return this.centerX=e,this}get top(){return this.y-GetDisplayHeight(this)*this.originY}set top(e){this.y+=e-this.top}alignTop(e){return this.top=e,this}get bottom(){return this.top+GetDisplayHeight(this)}set bottom(e){this.y+=e-this.bottom}alignBottom(e){return this.bottom=e,this}get centerY(){return this.top+GetDisplayHeight(this)/2}set centerY(e){this.y+=e-this.centerY}alignCenterY(e){return this.centerY=e,this}get innerLeft(){return this.left+this.space.left*this.scaleX}get innerRight(){return this.right-this.space.right*this.scaleX}get innerTop(){return this.top+this.space.top*this.scaleY}get innerBottom(){return this.bottom-this.space.bottom*this.scaleY}get innerWidth(){return(this.width-this.space.left-this.space.right)*this.scaleX}get innerHeight(){return(this.height-this.space.top-this.space.bottom)*this.scaleY}get minInnerWidth(){return Math.max((this.minWidth-this.space.left-this.space.right)*this.scaleX,0)}get minInnerHeight(){return Math.max((this.minHeight-this.space.top-this.space.bottom)*this.scaleY,0)}};Object.assign(BaseSizer_Base.prototype,hI);var hD=BaseSizer_Base,hj={},size_FitTo=function(e,i,s,r){void 0===s&&(s=!0),void 0===r?r={}:!0===r&&(r=hj);var n=e.width,a=e.height,o=i.width,h=i.height;if(n<=o&&a<=h){if(s){var l=n/a,c=o/h;c<l?(r.width=o,r.height=o/l):(c>l?r.width=h*l:r.width=o,r.height=h)}else r.width=n,r.height=a}else{var l=n/a;r.width=Math.min(n,o),r.height=Math.min(a,h);var g=r.width/r.height;g<l?r.height=r.width/l:g>l&&(r.width=r.height*l)}return r},utils_CheckSize=function(e,i){e.layoutWarnEnable&&(e.width<e.childrenWidth&&console.warn(`Layout width error: Parent=${i.constructor.name}, Child=${e.constructor.name}`),e.height<e.childrenHeight&&console.warn(`Layout height error: Parent=${i.constructor.name}, Child=${e.constructor.name}`))},hA={},hF={};let hz=Phaser.Utils.Objects.IsPlainObject,hW=Phaser.Utils.Objects.GetValue,hV=Phaser.Display.Align.CENTER,hY=Phaser.Utils.String.UUID,hX=af.prototype.clear;var utils_ClearChildren=function(e){this.backgroundChildren&&(this.backgroundChildren.length=0);var i,s,r=!e&&this.sizerEventsEnable;if(r&&(i=this.getChildren([])),hX.call(this,e),r)for(var n=0,a=i.length;n<a;n++)(s=i[n]).emit("sizer.remove",s,this),this.emit("remove",s,this);return this},hH={getChildrenWidth:function(){if(this.rexSizer.hidden)return 0;var e,i,s,r=0,n=this.sizerChildren,a=!1;for(var o in n)e=n[o],void 0===(s=this.getChildWidth(e))&&(a=!0),a||(s+=(i=e.rexSizer.padding).left+i.right,r=Math.max(s,r));if(!a)return r+this.space.left+this.space.right},getChildrenHeight:function(){if(this.rexSizer.hidden)return 0;var e,i,s,r=0,n=this.sizerChildren,a=!1;for(var o in n)e=n[o],void 0===(s=this.getChildHeight(e))&&(a=!0),a||(s+=(i=e.rexSizer.padding).top+i.bottom,r=Math.max(s,r));if(!a)return r+this.space.top+this.space.bottom},getExpandedChildWidth:function(e,i){void 0===i&&(i=this.width);var s,r=e.rexSizer;if(r.expandWidth){var n=this.space,a=i-n.left-n.right,o=r.padding;s=a-o.left-o.right}return s},getExpandedChildHeight:function(e,i){void 0===i&&(i=this.height);var s,r=e.rexSizer;if(r.expandHeight){var n=this.space,a=i-n.top-n.bottom,o=r.padding;s=a-o.top-o.bottom}return s},getChildrenSizers:function(e){void 0===e&&(e=[]);var i,s=this.sizerChildren;for(var r in s)(i=s[r]).isRexSizer&&e.push(i);return e},layoutChildren:function(){var e,i,s,r,n,a,o,h,l,c,g=this.innerLeft,m=this.innerTop,x=this.innerWidth,S=this.innerHeight,_=this.sizerChildren;for(var k in _)(e=_[k]).rexSizer.hidden||(s=(i=e.rexSizer).padding,utils_PreLayoutChild.call(this,e),h=this.getExpandedChildWidth(e),l=this.getExpandedChildHeight(e),i.aspectRatio>0&&(hA.width=i.aspectRatio,hA.height=1,hF.width=h,hF.height=l,h=(c=size_FitTo(hA,hF,!0,!0)).width,l=c.height),e.isRexSizer?(e.runLayout(this,h,l),utils_CheckSize(e,this)):size_ResizeGameObject(e,h,l),r=g+s.left,a=x-s.left-s.right,n=m+s.top,o=S-s.top-s.bottom,utils_LayoutChild.call(this,e,r,n,a,o,i.align,i.alignOffsetX,i.alignOffsetY))}};Object.assign(hH,{add:function(e,i,s,r,n,a,o,h,l,c){if(utils_AddChild.call(this,e),hz(i)){var g=i;i=hW(g,"key",void 0),s=hW(g,"align",hV),r=hW(g,"padding",0),n=hW(g,"expand",!0),e.isRexSizer||(a=hW(g,"minWidth",e._minWidth),o=hW(g,"minHeight",e._minHeighted)),h=hW(g,"offsetX",0),l=hW(g,"offsetY",0),c=hW(g,"aspectRatio",0)}var m=void 0!==i;m||(i=hY()),"string"==typeof s&&(s=ab[s]),void 0===s&&(s=hV),void 0===r&&(r=0),void 0===n&&(n=!0),e.isRexSizer||(void 0===a&&(a=e._minWidth),void 0!==o||(o=e._minHeight)),void 0===h&&(h=0),void 0===l&&(l=0),void 0===c?c=0:!0===c&&(c=GetDisplayWidth(e)/GetDisplayHeight(e)),c>0&&(n=!0,void 0===a&&(a=0),void 0===o&&(o=0));var g=this.getSizerConfig(e);return g.align=s,g.padding=bounds_GetBoundsConfig(r),hz(n)?(g.expandWidth=hW(n,"width",!1),g.expandHeight=hW(n,"height",!1)):(g.expandWidth=n,g.expandHeight=n),!e.isRexSizer&&(g.expandWidth&&(e.minWidth=void 0===a?GetDisplayWidth(e):a),g.expandHeight&&(e.minHeight=void 0===o?GetDisplayHeight(e):o)),g.alignOffsetX=h,g.alignOffsetY=l,g.aspectRatio=c,this.sizerChildren.hasOwnProperty(i)&&this.sizerChildren[i].destroy(),this.sizerChildren[i]=e,m&&this.addChildrenMap(i,e),this}},{remove(e,i){var s;if("string"==typeof e){if(s=e,!(e=this.sizerChildren[s]))return this}else{if(this.getParentSizer(e)!==this)return this;s=this.childToKey(e)}return s&&(delete this.sizerChildren[s],this.childrenMap.hasOwnProperty(s)&&delete this.childrenMap[s]),utils_RemoveChild.call(this,e,i),this},removeAll(e){for(var i in this.sizerChildren)this.remove(i,e);return this},clear(e){for(var i in this.sizerChildren)delete this.sizerChildren[i],this.childrenMap.hasOwnProperty(i)&&delete this.childrenMap[i];return utils_ClearChildren.call(this,e),this}});var object_IndexOf=function(e,i){if(Array.isArray(e))return e.indexOf(i);for(var s in e)if(e[s]===i)return s;return null};let hU=Phaser.Utils.Objects.IsPlainObject,hN=Phaser.Utils.Objects.GetValue;let OverlapSizer_OverlapSizer=class OverlapSizer_OverlapSizer extends hD{constructor(e,i,s,r,n,a){hU(i)?(i=hN(a=i,"x",0),s=hN(a,"y",0),r=hN(a,"width",void 0),n=hN(a,"height",void 0)):hU(r)&&(r=hN(a=r,"width",void 0),n=hN(a,"height",void 0)),super(e,i,s,r,n,a),this.type="rexOverlapSizer",this.sizerChildren={},this.addChildrenMap("items",this.sizerChildren)}childToKey(e){return"string"!=typeof e?object_IndexOf(this.sizerChildren,e):this.sizerChildren.hasOwnPropery(e)?e:null}};Object.assign(OverlapSizer_OverlapSizer.prototype,hH);var h$=OverlapSizer_OverlapSizer,hZ=Phaser.Math.Distance.Between,input_IsLocalPointInKnob=function(e,i,s){var r=e.width/2;return hZ(r,r,i,s)<=r};let hK=Phaser.Math.Angle.Between,hJ=Phaser.Math.Angle.Normalize;var OnTouchPad=function(e,i,s){if(this.enable&&e.isDown){var r=this.sizerChildren.knob;if(input_IsLocalPointInKnob(r,i,s)){var n=r.width/2,a=r.startAngle,o=hK(n,n,i,s),h=hJ(r.anticlockwise?a-o:o-a)/(2*Math.PI);this.stopEaseValue(),0===this.easeValueDuration||.1>Math.abs(this.value-h)?this.value=h:this.easeValueTo(h)}}},input_OnTouchPad=function(){this.sizerChildren.knob.on("pointerdown",OnTouchPad,this).on("pointermove",OnTouchPad,this).setInteractive()};let hq=Phaser.Math.Angle.Between,hQ=Phaser.Math.Angle.Wrap;var OnPanPad_OnPointerDown=function(e,i,s){this.enable&&!this.panPointer&&input_IsLocalPointInKnob(this.sizerChildren.knob,i,s)&&OnPanStart.call(this,e)},OnPointerMove=function(e,i,s){if(this.enable&&e.isDown){var r=this.sizerChildren.knob;switch(this.panState){case h0:input_IsLocalPointInKnob(r,i,s)&&OnPanStart.call(this,e);break;case h1:input_IsLocalPointInKnob(r,i,s)?OnPan.call(this):OnPanEnd.call(this)}}},OnPanPad_OnPointerUp=function(e,i,s){this.enable&&this.panPointer===e&&OnPanEnd.call(this)},OnPanStart=function(e){this.panPointer=e,this.panState=h1},OnPanEnd=function(){this.panPointer=void 0,this.panState=h0},OnPan=function(){var e=this.panPointer.prevPosition,i=this.panPointer.position,s=this.sizerChildren.knob,r=hq(s.x,s.y,e.x,e.y),n=hq(s.x,s.y,i.x,i.y),a=hQ(s.anticlockwise?r-n:n-r)/(2*Math.PI);this.stopEaseValue(),this.value+=a};let h0=0,h1=1;var OnPanPad=function(){this.sizerChildren.knob.on("pointerdown",OnPanPad_OnPointerDown,this).on("pointermove",OnPointerMove,this).on("pointerup",OnPanPad_OnPointerUp,this).setInteractive(),this.panPointer=void 0,this.panState=h0},GetFormatText=function(e){return void 0===e&&(e=this.value),this.textFormatCallbackScope?this.textFormatCallback(e):this.textFormatCallback.call(this.textFormatCallbackScope,e)};let h2=Phaser.Utils.Objects.GetValue,h5=Phaser.Math.Snap.To;let Knob_Knob=class Knob_Knob extends ProgressBase(h$){constructor(e,i){void 0===i&&(i={}),super(e,i),this.type="rexKnob",this.bootProgressBase(i);var s=h2(i,"background",void 0),r=h2(i,"text",void 0);s&&this.addBackground(s),r&&(i.textColor=void 0,i.textStrokeColor=void 0,this.setTextFormatCallback(h2(i,"textFormatCallback",void 0),h2(i,"textFormatCallbackScope",void 0)));var n=new CircularProgress_CircularProgress(e,i);n.setDepth(h2(i,"knobDepth",0)),n._value=-1,e.add.existing(n),this.add(n,"knob"),r&&(this.add(r,"text","center",0,!1),e.children.moveBelow(n,r)),this.addChildrenMap("background",s),this.addChildrenMap("knob",n),this.addChildrenMap("text",r),this.setEnable(h2(i,"enable",void 0)),this.setGap(h2(i,"gap",void 0)),this.setValue(h2(i,"value",0),h2(i,"min",void 0),h2(i,"max",void 0));var a=h2(i,"input",0);switch("string"==typeof a&&(a=h3[a]),a){case 0:OnPanPad.call(this);break;case 1:input_OnTouchPad.call(this)}}setEnable(e){return void 0===e&&(e=!0),this.enable=e,this}setGap(e){return this.gap=e,this}get value(){return this.sizerChildren.knob.value}set value(e){void 0!==this.gap&&(e=h5(e,this.gap));var i=this.value;this.sizerChildren.knob.value=e;var s=this.value;i!==s&&(this.updateText(),this.eventEmitter.emit("valuechange",s,i,this.eventEmitter))}};let h3={pan:0,drag:0,click:1,none:-1};Object.assign(Knob_Knob.prototype,{setTextFormatCallback:function(e,i){return this.textFormatCallback=e,this.textFormatCallbackScope=i,this},getFormatText:GetFormatText,updateText:function(e){var i=this.sizerChildren.text;return i&&this.textFormatCallback&&(i.setText(GetFormatText.call(this,e)),i.layout&&i.layout()),this}}),ObjectFactory.register("knob",function(e){var i=new Knob_Knob(this.scene,e);return this.scene.add.existing(i),i}),(0,k.Z)(window,"RexPlugins.UI.Knob",Knob_Knob);let h7={arc:rF,circle:rz,curve:rW,ellipse:rV,line:rY,lines:r0,rectangle:r2,roundRectangle:r3,triangle:r6},h6=Phaser.Utils.Objects.GetValue,h4=Phaser.Utils.Objects.IsPlainObject,ClearAll=function(){for(var e=this.getShapes(),i=0,s=e.length;i<s;i++)e[i].lineStyle().fillStyle()},h8=Phaser.GameObjects.Components.TransformMatrix,h9=Phaser.Math.TransformXY;var lt={},position_WorldXYToGameObjectLocalXY=function(e,i,s,r,n){void 0===r&&(r=e.scene.cameras.main),void 0===n?n={}:!0===n&&(n=lt);var a=r.scrollX,o=r.scrollY,h=i+a*e.scrollFactorX-a,l=s+o*e.scrollFactorY-o;return e.parentContainer?(void 0===gV&&(gV=new h8,gY=new h8),e.getWorldTransformMatrix(gV,gY),gV.applyInverse(h,l,n)):h9(h,l,e.x,e.y,e.rotation,e.scaleX,e.scaleY,n),n.x+=e.displayOriginX,n.y+=e.displayOriginY,n};let le=Phaser.Utils.Objects.GetValue,li=Phaser.Utils.Objects.IsPlainObject;let CustomShapes_CustomShapes=class CustomShapes_CustomShapes extends rM{constructor(e,i,s,r,n,a){li(i)&&(i=le(a=i,"x",0),s=le(a,"y",0),r=le(a,"width",2),n=le(a,"height",2)),super(e,i,s,r,n),this.type=le(a,"type","rexCustomShapes"),this.buildShapes(a)}get centerX(){return this.width/2}get centerY(){return this.height/2}worldToLocalXY(e,i,s,r){return"boolean"==typeof s&&(r=s,s=void 0),position_WorldXYToGameObjectLocalXY(this,e,i,s,r)}};Object.assign(CustomShapes_CustomShapes.prototype,{createShape(e,i){var s=new h7[e];return i&&s.setName(i),s},buildShapes(e){var i=h6(e,"create",void 0);if(h4(i)){var s=i;for(var r in s){var n=s[r];switch(typeof n){case"number":for(var a=0;a<n;a++)this.addShape(this.createShape(r));break;case"string":this.addShape(this.createShape(r,n));break;default:for(var a=0,o=n.length;a<o;a++)this.addShape(this.createShape(r,n[a]))}}}else if(Array.isArray(i))for(var s=i,a=0,o=s.length;a<o;a++){var h=s[a];this.addShape(this.createShape(h.type,h.name))}else"function"==typeof i&&i.call(this);this.setUpdateShapesCallback(h6(e,"update"))},setUpdateShapesCallback(e){return void 0===e&&(e=ClearAll),this.dirty=this.dirty||this.updateCallback!==e,this.updateCallback=e,this},updateShapes(){this.updateCallback.call(this)}});var ls=CustomShapes_CustomShapes;ObjectFactory.register("customShapes",function(e,i,s,r,n){var a=new ls(this.scene,e,i,s,r,n);return this.scene.add.existing(a),a}),(0,k.Z)(window,"RexPlugins.UI.CustomShapes",ls);let lr=Phaser.Utils.Objects.GetValue,ln=Phaser.Utils.Objects.IsPlainObject;let CustomProgress_CustomProgress=class CustomProgress_CustomProgress extends ProgressBase(ls){constructor(e,i,s,r,n,a){ln(i)&&(i=lr(a=i,"x",0),s=lr(a,"y",0),r=lr(a,"width",2),n=lr(a,"height",2)),void 0===a&&(a={}),a.type||(a.type="rexCustomProgress"),super(e,i,s,r,n,a),this.bootProgressBase(a),this.setValue(lr(a,"value",0))}get centerX(){return this.width/2}get centerY(){return this.height/2}get radius(){return Math.min(this.centerX,this.centerY)}};ObjectFactory.register("customProgress",function(e,i,s,r,n){var a=new CustomProgress_CustomProgress(this.scene,e,i,s,r,n);return this.scene.add.existing(a),a}),(0,k.Z)(window,"RexPlugins.UI.CustomProgress",CustomProgress_CustomProgress);var methods_FitImages=function(){for(var e=0,i=this.images.length;e<i;e++){var s=this.images[e],r=size_FitTo(s,this,!0,!0).width/s.width;this.setChildLocalScale(s,r),s.biasScale=r}},methods_OnTextureChange=function(e){this.fixedSizeMode?methods_FitImages.call(this):this.resize(e.width,e.height)};let lo=Phaser.Utils.Objects.IsPlainObject,lh=Phaser.Utils.Objects.GetValue,ll=Phaser.Utils.Array.GetRandom;var ld={out:0,in:1},GetValueFromConfigs=function(e,i,...s){for(var r=0,n=s.length;r<n;r++){var a=s[r];if(a&&a.hasOwnProperty(e))return a[e]}return i},defaultmaskgraphics_DrawShape=function(e,i,s,r,n){if(this.clear().fillStyle(16777215),1===this.shapeType){s=s.left;var a=Math.min(e,i)/2;this.fillCircle(-e*(r-.5),-i*(n-.5),a+s)}else this.fillRect(-(e*r)-s.left,-(i*n)-s.top,e+s.left+s.right,i+s.top+s.bottom)};let lc=Phaser.GameObjects.Graphics,lu={rectangle:0,circle:1};var lp=class extends lc{constructor(e,i,s){void 0===i&&(i=0),"string"==typeof i&&(i=lu[i]),super(e.scene),this.parent=e,this.shapeType=i,this.padding=bounds_GetBoundsConfig(s),this.setPosition().resize().setVisible(!1)}destroy(){return this.parent=void 0,super.destroy(),this}setPosition(e,i){var s=this.parent;return void 0===e&&(e=s.x),void 0===i&&(i=s.y),super.setPosition(e,i),this}resize(e,i,s){var r=this.parent;void 0===e&&(e=r.width),void 0===i&&(i=r.height),void 0===s?s=this.padding:"number"==typeof s&&(s=bounds_GetBoundsConfig(s));var n=this.width!==e||this.height!==i,a=this.padding!==s&&!object_IsKeyValueEqual(this.padding,s);return(n||a)&&(this.width=e,this.height=i,a&&object_Clone(s,this.padding),this.originX=r.originX,this.originY=r.originY,defaultmaskgraphics_DrawShape.call(this,e,i,s,r.originX,r.originY)),this}setOrigin(e,i){void 0===i&&(i=e);var s=this.parent;return void 0===e&&(e=s.originX),void 0===i&&(i=s.originY),this.originX===e&&this.originY===i||(this.originX=e,this.originY=i,defaultmaskgraphics_DrawShape.call(this,this.width,this.height,this.padding,e,i)),this}},gridcut_GenerateFrames=function(e,i,s,r,n,a){var o,h;null==s&&(s="__BASE"),a||(o=s,h=a,"object"==typeof o&&(o=o.name),void 0===h&&(h=","),a="__BASE"===o?function(e,i){return`${e}${h}${i}`}:function(e,i){return`${o}_${e}${h}${i}`});for(var l,c,g,m=e.sys.textures.get(i),x="object"==typeof s?s:m.get(s),S=x.width,_=x.height,k=S/r,E=_/n,R=x.cutX,j=x.cutY,Y=0,X=0,$=0;$<n;$++){Y=0;for(var Z=0;Z<r;Z++)g=a(Z,$),l=Y+R,c=X+j,m.add(g,0,l,c,k,E),Y+=k;X+=E}return{getFrameNameCallback:a,cellWidth:k,cellHeight:E,columns:r,rows:n}};let lg=Phaser.Utils.Objects.GetValue,lv=Phaser.GameObjects.Image,lf=Phaser.Utils.Objects.IsPlainObject,lm=Phaser.Math.RotateAround;var actions_GridCutImage=function(e,i,s,r){lf(i)&&(i=lg(r=i,"columns",1),s=lg(r,"rows",1));var n=lg(r,"createImageCallback");if(!n){var a=lg(r,"ImageClass",lv);n=function(e,i,s){return new a(e,0,0,i,s)}}for(var o=lg(r,"originX",.5),h=lg(r,"originY",.5),l=lg(r,"add",!0),c=lg(r,"align",l),g=lg(r,"objectPool",void 0),m=e.scene,x=e.texture,S=gridcut_GenerateFrames(m,x,e.frame,i,s),_=S.getFrameNameCallback,k=e.scaleX,E=e.scaleY,R=e.rotation,j=e.getTopLeft(),Y=j.x,X=j.y,$=[],Z=S.cellWidth*k,q=S.cellHeight*E,tt=0;tt<s;tt++)for(var te=0;te<i;te++){var ti,ts=_(te,tt);if(ti=g&&g.length>0?g.pop().setTexture(x,ts):n(m,x,ts),l&&m.add.existing(ti),c){var tr=Y+Z*te+o*Z,tn=X+q*tt+h*q;ti.setOrigin(o,h).setPosition(tr,tn).setScale(k,E).setRotation(R),lm(ti,Y,X,R)}$.push(ti)}return $},lb={setFlipX(e){return this.flipX=e,this},setFlipY(e){return this.flipY=e,this},toggleFlipX(){return this.flipX=!this.flipX,this},toggleFlipY(){return this.flipY=!this.flipY,this},setFlip(e,i){return this.flipX=e,this.flipY=i,this},resetFlip(){return this.flipX=!1,this.flipY=!1,this}},ly={};Object.assign(ly,{setTransitionStartCallback(e,i){return this.onStartCallback=e,this.onStartCallbackScope=i,this},setTransitionProgressCallback(e,i){return this.onProgressCallback=e,this.onProgressCallbackScope=i,this},setTransitionCompleteCallback(e,i){return this.onCompleteCallback=e,this.onCompleteCallbackScope=i,this}},{setTransitionDirection(e){return"string"==typeof e&&(e=ld[e]),this.dir=e,this},setDuration(e){return this.duration=e,this},setEaseFunction(e){return this.easeFunction=e,this},setNextTexture(e,i){return this.nextImage.setTexture(e,i),methods_OnTextureChange.call(this,this.nextImage),this},transit(e,i,s){if(this.isRunning&&(this.ignoreCompleteEvent=!0,this.stop(),this.ignoreCompleteEvent=!1),void 0!==s&&(e={key:e,frame:i,mode:s}),this.currentTransitionMode=void 0,lo(e)){var r,n=e;e=lh(n,"key",void 0),i=lh(n,"frame",void 0),Array.isArray(s=lh(n,"mode"))&&(s=ll(s)),this.transitionModes&&this.transitionModes.hasOwnProperty(s)&&(r=this.transitionModes[s],this.currentTransitionMode=s),this.setDuration(GetValueFromConfigs("duration",this.duration,n,r)).setEaseFunction(GetValueFromConfigs("ease",this.easeFunction,n,r)).setTransitionDirection(GetValueFromConfigs("dir",this.dir,n,r));var a=GetValueFromConfigs("mask",void 0,n,r);a&&this.setMaskGameObject(a),this.setMaskEnable(!0===a);var o=GetValueFromConfigs("onStart",void 0,n,r),h=GetValueFromConfigs("onProgress",void 0,n,r),l=GetValueFromConfigs("onComplete",void 0,n,r);(void 0!==o||void 0!==h||void 0!==l)&&this.setTransitionStartCallback(o,GetValueFromConfigs("onStartScope",void 0,n,r)).setTransitionProgressCallback(h,GetValueFromConfigs("onProgressScope",void 0,n,r)).setTransitionCompleteCallback(l,GetValueFromConfigs("onCompleteScope",void 0,n,r))}return this.setNextTexture(e,i),this.start(),this},addTransitionMode(e,i){return void 0===this.transitionModes&&(this.transitionModes={}),lo(e)&&(e=(i=e).name,delete i.name),this.transitionModes[e]=i,this},start(){return void 0===this.easeValueTask&&(this.easeValueTask=new r9(this,{eventEmitter:null})),this.easeValueTask.restart({key:"t",from:0,to:1,duration:this.duration,ease:this.easeFunction}),this},pause(){return this.easeValueTask&&this.easeValueTask.pause(),this},resume(){return this.easeValueTask&&this.easeValueTask.resume(),this},stop(){return this.easeValueTask&&this.easeValueTask.stop(),this.setT(1),this}},{setMaskGameObject(e){if(!e)return this.removeMaskGameObject(),this;if(this.maskGameObject){if(!0===e&&this.maskGameObject instanceof lp||this.maskGameObject===e)return this;this.removeMaskGameObject()}return!0===e&&(e=new lp(this)),e.resize(this.width,this.height).setOrigin(this.originX,this.originY).setPosition(0,0).setScale(1).setVisible(!1),this.addLocal(e),this.maskGameObject=e,e._maskObject||(e._maskObject=e.createGeometryMask(),e.once("destroy",function(){e._maskObject.destroy(),e._maskObject=void 0})),this.childrenMask=e._maskObject,this},removeMaskGameObject(e){return void 0===e&&(e=!0),this.backImage.clearMask(),this.frontImage.clearMask(),this.childrenMask=void 0,this.remove(this.maskGameObject,e),this.maskGameObject=void 0,this},setImageMaskEnable(e,i,s){return void 0===i&&(i=!0),void 0===s&&(s=!1),i?(this.childrenMask||this.setMaskGameObject(!0),e.setMask(this.childrenMask),this.childrenMask.setInvertAlpha(s)):e.clearMask(),this},setCurrentImageMaskEnable(e,i){return this.setImageMaskEnable(this.currentImage,e,i),this},setNextImageMaskEnable(e,i){return this.setImageMaskEnable(this.nextImage,e,i),this},setCellImagesMaskEnable(e,i){for(var s=this.getCellImages(),r=0,n=s.length;r<n;r++)this.setImageMaskEnable(s[r],e,i);return this},setMaskEnable(e,i){return this.setImageMaskEnable(this.backImage,e,i),this.setImageMaskEnable(this.frontImage,e,i),this.setCellImagesMaskEnable(e,i),this}},{gridCutImage(e,i,s,r){void 0===r&&(r={}),r.objectPool=this.imagesPool;for(var n,a=actions_GridCutImage(e,i,s,r),o=0,h=a.length;o<h;o++)(n=a[o]).setVisible(!0),this.add(n);return this.cellImages=a,this.setChildLocalVisible(e,!1),a},gridCutCurrentImage(e,i,s){return this.gridCutImage(this.currentImage,e,i,s)},gridCutNextImage(e,i,s){return this.gridCutImage(this.nextImage,e,i,s)},getCellImages(){return this.cellImages},freeCellImages(){if(0===this.cellImages.length)return this;for(var e,i,s=this.cellImages[0].texture,r=this.cellImages,n=0,a=r.length;n<a;n++)e=r[n],this.setChildLocalAlpha(e,1).setChildLocalScale(e,1).setChildLocalVisible(e,!1),e.clearMask(),i=e.frame.name,e.setTexture(),s.remove(i);return this.imagesPool.push(...r),r.length=0,this}},lb);var OnStart=function(e,i,s,r){},OnProgress=function(e,i,s,r){e.setChildLocalAlpha(i,1-r).setChildLocalAlpha(s,r)},OnComplete=function(e,i,s,r){e.setChildLocalAlpha(i,1)};let lC=Phaser.Utils.Objects.IsPlainObject,lx=Phaser.Utils.Objects.GetValue,lS=Phaser.Math.Clamp;let TransitionImage_TransitionImage=class TransitionImage_TransitionImage extends av{constructor(e,i,s,r,n,a){lC(i)?(i=lx(a=i,"x",0),s=lx(a,"y",0),r=lx(a,"key",void 0),n=lx(a,"frame",void 0)):lC(n)&&(a=n,n=void 0);var o=lx(a,"back",void 0),h=lx(a,"front",void 0);o||(o=e.add.image(i,s,r,n)),h||(h=e.add.image(i,s,r,n));var l=lx(a,"width",void 0),c=lx(a,"height",void 0),g=void 0!==l&&void 0!==c;void 0===l&&(l=h.width),void 0===c&&(c=h.height),super(e,i,s,l,c),this.type="rexTransitionImage",this._flipX=!1,this._flipY=!1,this.fixedSizeMode=lx(a,"fixedSize",g),o.setVisible(!1),this.addMultiple([o,h]),this.backImage=o,this.frontImage=h,this.images=[this.backImage,this.frontImage],this.maskGameObject=void 0,this.cellImages=[],this.imagesPool=[],this.transitionModes=void 0,this.currentTransitionMode=void 0;var m=lx(a,"onStart",void 0),x=lx(a,"onProgress",void 0),S=lx(a,"onComplete",void 0),_=lx(a,"dir",0);void 0===m&&void 0===x&&void 0===S&&(m=OnStart,x=OnProgress,S=OnComplete,_=0),this.setTransitionStartCallback(m,lx(a,"onStartScope",void 0)).setTransitionProgressCallback(x,lx(a,"onProgressScope",void 0)).setTransitionCompleteCallback(S,lx(a,"onCompleteScope",void 0)).setTransitionDirection(_).setDuration(lx(a,"duration",1e3)).setEaseFunction(lx(a,"ease","Linear"));var k=lx(a,"mask",void 0);k&&this.setMaskGameObject(k),this.setMaskEnable(!1),this.ignoreCompleteEvent=!1,methods_OnTextureChange.call(this,this.frontImage)}destroy(e){this.scene&&!this.ignoreDestroy&&(this.childrenMask&&(this.childrenMask.destroy(),this.childrenMask=void 0),this.backImage=void 0,this.frontImage=void 0,this.images.length=0,this.maskGameObject=void 0,this.cellImages.length=0,this.imagesPool.length=0,this.transitionModes=void 0,super.destroy(e),this.onStartCallback=void 0,this.onStartCallbackScope=void 0,this.onProgressCallback=void 0,this.onProgressCallbackScope=void 0,this.onCompleteCallback=void 0,this.onCompleteCallbackScope=void 0,this.easeValueTask=void 0)}get currentImage(){return 0===this.dir?this.frontImage:this.backImage}get nextImage(){return 0===this.dir?this.backImage:this.frontImage}get texture(){return this.nextImage.texture}get frame(){return this.nextImage.frame}get tint(){return this._tint}set tint(e){this._tint!==e&&(this._tint=e,this.backImage.setTint(e),this.frontImage.setTint(e))}setTint(e){return this.tint=e,this}get flipX(){return this._flipX}set flipX(e){this._flipX!==e&&(this._flipX=e,this.backImage.setFlipX(e),this.frontImage.setFlipX(e))}setFlipX(e){return this.flipX=e,this}toggleFlipX(){return this.flipX=!this.flipX,this}get flipY(){return this._flipY}set flipY(e){this._flipY!==e&&(this._flipY=e,this.backImage.setFlipY(e),this.frontImage.setFlipY(e))}setFlipY(e){return this.flipY=e,this}toggleFlipY(){return this.flipY=!this.flipY,this}setFlip(e,i){return this.flipX=e,this.flipY=i,this}get t(){return this._t}set t(e){if(e=lS(e,0,1),this._t!==e){this._t=e;var i=this.currentImage,s=this.nextImage;if(0===e&&(this.setChildVisible(this.frontImage,!0).setChildVisible(this.backImage,!0),RunCallback.call(this,this.onStartCallback,this.onStartCallbackScope,this,i,s,e)),RunCallback.call(this,this.onProgressCallback,this.onProgressCallbackScope,this,i,s,e),1===e){RunCallback.call(this,this.onCompleteCallback,this.onCompleteCallbackScope,this,i,s,e);var r=s.texture.key,n=s.frame.name;this.frontImage.setTexture(r,n),this.backImage.setTexture(r,n),methods_OnTextureChange.call(this,s),this.setChildVisible(this.frontImage,!0).setChildVisible(this.backImage,!1).setMaskEnable(!1).freeCellImages()}1!==e||this.ignoreCompleteEvent||this.emit("complete")}}setT(e){return this.t=e,this}get isRunning(){return!!this.easeValueTask&&this.easeValueTask.isRunning}setOrigin(e,i){return super.setOrigin(e,i),this.backImage.setOrigin(e,i),this.frontImage.setOrigin(e,i),this.maskGameObject&&this.maskGameObject.setOrigin(e,i),this}setTexture(e,i){return this.frontImage.setTexture(e,i),this.backImage.setTexture(e,i).setVisible(!1),methods_OnTextureChange.call(this,this.frontImage),this}setSize(e,i){return super.setSize(e,i),this.fixedSizeMode&&FitImages.call(this),this}};var RunCallback=function(e,i,s,r,n,a){var o;e&&(this.fixedSizeMode&&(r.biasScale>0&&(o=this.getChildLocalScaleX(r)/r.biasScale,this.setChildLocalScale(r,o)),n.biasScale&&(o=this.getChildLocalScaleX(n)/n.biasScale,this.setChildLocalScale(n,o))),i?e.call(i,s,r,n,a):e(s,r,n,a),this.fixedSizeMode&&(r.biasScale>0&&(o=this.getChildLocalScaleX(r)*r.biasScale,this.setChildLocalScale(r,o)),n.biasScale&&(o=this.getChildLocalScaleX(n)*n.biasScale,this.setChildLocalScale(n,o))))};Object.assign(TransitionImage_TransitionImage.prototype,ly);var l_=TransitionImage_TransitionImage;ObjectFactory.register("transitionImage",function(e,i,s,r,n){var a=new l_(this.scene,e,i,s,r,n);return this.scene.add.existing(a),a}),(0,k.Z)(window,"RexPlugins.UI.TransitionImage",l_);let lw=`\
vec3 mod289(vec3 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }
vec4 mod289(vec4 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }
vec4 permute(vec4 x) { return mod289(((x*34.0)+1.0)*x); }
vec4 taylorInvSqrt(vec4 r) { return 1.79284291400159 - 0.85373472095314 * r; }
vec3 fade(vec3 t) { return t*t*t*(t*(t*6.0-15.0)+10.0); }
float Perlin(vec3 P) {
    vec3 i0 = mod289(floor(P)), i1 = mod289(i0 + vec3(1.0));
    vec3 f0 = fract(P), f1 = f0 - vec3(1.0), f = fade(f0);
    vec4 ix = vec4(i0.x, i1.x, i0.x, i1.x), iy = vec4(i0.yy, i1.yy);
    vec4 iz0 = i0.zzzz, iz1 = i1.zzzz;
    vec4 ixy = permute(permute(ix) + iy), ixy0 = permute(ixy + iz0), ixy1 = permute(ixy + iz1);
    vec4 gx0 = ixy0 * (1.0 / 7.0), gy0 = fract(floor(gx0) * (1.0 / 7.0)) - 0.5;
    vec4 gx1 = ixy1 * (1.0 / 7.0), gy1 = fract(floor(gx1) * (1.0 / 7.0)) - 0.5;
    gx0 = fract(gx0); gx1 = fract(gx1);
    vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0), sz0 = step(gz0, vec4(0.0));
    vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1), sz1 = step(gz1, vec4(0.0));
    gx0 -= sz0 * (step(0.0, gx0) - 0.5); gy0 -= sz0 * (step(0.0, gy0) - 0.5);
    gx1 -= sz1 * (step(0.0, gx1) - 0.5); gy1 -= sz1 * (step(0.0, gy1) - 0.5);
    vec3 g0 = vec3(gx0.x,gy0.x,gz0.x), g1 = vec3(gx0.y,gy0.y,gz0.y),
        g2 = vec3(gx0.z,gy0.z,gz0.z), g3 = vec3(gx0.w,gy0.w,gz0.w),
        g4 = vec3(gx1.x,gy1.x,gz1.x), g5 = vec3(gx1.y,gy1.y,gz1.y),
        g6 = vec3(gx1.z,gy1.z,gz1.z), g7 = vec3(gx1.w,gy1.w,gz1.w);
    vec4 norm0 = taylorInvSqrt(vec4(dot(g0,g0), dot(g2,g2), dot(g1,g1), dot(g3,g3)));
    vec4 norm1 = taylorInvSqrt(vec4(dot(g4,g4), dot(g6,g6), dot(g5,g5), dot(g7,g7)));
    g0 *= norm0.x; g2 *= norm0.y; g1 *= norm0.z; g3 *= norm0.w;
    g4 *= norm1.x; g6 *= norm1.y; g5 *= norm1.z; g7 *= norm1.w;
    vec4 nz = mix(vec4(dot(g0, vec3(f0.x, f0.y, f0.z)), dot(g1, vec3(f1.x, f0.y, f0.z)),
        dot(g2, vec3(f0.x, f1.y, f0.z)), dot(g3, vec3(f1.x, f1.y, f0.z))),
        vec4(dot(g4, vec3(f0.x, f0.y, f1.z)), dot(g5, vec3(f1.x, f0.y, f1.z)),
            dot(g6, vec3(f0.x, f1.y, f1.z)), dot(g7, vec3(f1.x, f1.y, f1.z))), f.z);
    return 2.2 * mix(mix(nz.x,nz.z,f.y), mix(nz.y,nz.w,f.y), f.x);
}
float Perlin(vec2 P) { return Perlin(vec3(P, 0.0)); }
`,lP=`\
#ifdef GL_FRAGMENT_PRECISION_HIGH
#define highmedp highp
#else
#define highmedp mediump
#endif
precision highmedp float;
// Scene buffer
uniform sampler2D uMainSampler;
uniform sampler2D uMainSampler2;

uniform int resizeMode;
uniform float progress;
uniform float fromRatio;
uniform float toRatio;
varying vec2 outFragCoord;
// Effect parameters
uniform float noiseX;
uniform float noiseY;
uniform float noiseZ;
uniform float fromEdgeStart;
uniform float fromEdgeWidth;
uniform float toEdgeStart;
uniform float toEdgeWidth;

${lw}

vec4 getFromColor (vec2 uv) {
  return texture2D(uMainSampler, uv);
}

vec4 getToColor (vec2 uv) {
  if (resizeMode == 2) {
    //  cover
    return texture2D(uMainSampler2, 0.5 + (vec2(uv.x, 1.0 - uv.y) - 0.5) * vec2(min(fromRatio / toRatio, 1.0), min((toRatio / fromRatio), 1.0)));
  } else if (resizeMode == 1) {
    //  contain
    return texture2D(uMainSampler2, 0.5 + (vec2(uv.x, 1.0 - uv.y) - 0.5) * vec2(max(fromRatio / toRatio, 1.0), max((toRatio / fromRatio), 1.0)));
  } else {
    //  stretch
    return texture2D(uMainSampler2, vec2(uv.x, 1.0 - uv.y));
  }
}

vec4 transition (vec2 uv) {    
  vec4 colorFront = getFromColor(uv);
  vec4 colorTo = getToColor(uv);

  float noise = (Perlin(vec3(uv.x * noiseX, uv.y * noiseY, noiseZ)) + 1.0) / 2.0
    * (1.0 - (fromEdgeStart + fromEdgeWidth + toEdgeStart + toEdgeWidth))
    + (fromEdgeStart + fromEdgeWidth + toEdgeStart + toEdgeWidth) * 0.5;
  vec4 colorResult = colorFront * smoothstep(progress - (fromEdgeStart + fromEdgeWidth), progress - fromEdgeStart, noise)
    + colorTo * smoothstep((1.0 - progress) - (toEdgeStart + toEdgeWidth), (1.0 - progress) - toEdgeStart, (1.0 - noise));
  return colorResult;
}

void main () {
  vec2 uv = outFragCoord;
  gl_FragColor = transition(uv);
}
`,lk=Phaser.Renderer.WebGL.Pipelines.PostFXPipeline,lT=Phaser.Utils.Objects.GetValue,lO=Phaser.Math.Clamp;var lM={stretch:0,contain:1,cover:2},lE=class extends lk{constructor(e){super({name:"rexDissolvePostFx",game:e,renderTarget:!0,fragShader:lP}),this._progress=0,this.toFrame=null,this.targetTexture=null,this.resizeMode=1,this.toRatio=1,this.noiseX=0,this.noiseY=0,this.noiseZ=0,this.fromEdgeStart=.01,this.fromEdgeWidth=.05,this.toEdgeStart=.01,this.toEdgeWidth=.05}resetFromJSON(e){return this.setProgress(lT(e,"progress",0)),this.setTransitionTargetTexture(lT(e,"toTexture","__DEFAULT"),lT(e,"toFrame",void 0),lT(e,"resizeMode",1)),this.setNoise(lT(e,"noiseX",void 0),lT(e,"noiseY",void 0),lT(e,"noiseZ",void 0)),this.setFromEdge(lT(e,"fromEdgeStart",.01),lT(e,"fromEdgeWidth",.05)),this.setToEdge(lT(e,"toEdgeStart",.01),lT(e,"toEdgeWidth",.05)),this}onBoot(){}onPreRender(){this.set1f("progress",this.progress),this.set1i("resizeMode",this.resizeMode),this.set1f("noiseX",this.noiseX),this.set1f("noiseY",this.noiseY),this.set1f("noiseZ",this.noiseZ),this.set1f("fromEdgeStart",this.fromEdgeStart),this.set1f("fromEdgeWidth",this.fromEdgeWidth),this.set1f("toEdgeStart",this.toEdgeStart),this.set1f("toEdgeWidth",this.toEdgeWidth)}onDraw(e){this.set1f("fromRatio",e.width/e.height),this.set1f("toRatio",this.toRatio),this.set1i("uMainSampler2",1),this.bindTexture(this.targetTexture,1),this.bindAndDraw(e)}get progress(){return this._progress}set progress(e){this._progress=lO(e,0,1)}setProgress(e){return this.progress=e,this}setTransitionTargetTexture(e,i,s){void 0===e&&(e="__DEFAULT");var r=this.game.textures.getFrame(e,i);return r||(r=this.game.textures.getFrame("__DEFAULT")),this.toRatio=r.width/r.height,this.toFrame=r,this.targetTexture=r.glTexture,void 0!==s&&(this.resizeMode=s),this}setResizeMode(e){return"string"==typeof e&&(e=lM[e]),this.resizeMode=e,this}setNoise(e,i,s){return void 0===e&&(e=4+6*Math.random()),void 0===i&&(i=4+6*Math.random()),void 0===s&&(s=10*Math.random()),this.noiseX=e,this.noiseY=i,this.noiseZ=s,this}setFromEdge(e,i){return this.fromEdgeStart=e,this.fromEdgeWidth=i,this}setToEdge(e,i){return this.toEdgeStart=e,this.toEdgeWidth=i,this}},postfxpipeline_RegisterPostPipeline=function(e,i,s){system_GetGame(e).renderer.pipelines.addPostPipeline(i,s)},postfxpipeline_AddPostFxPipelineInstance=function(e,i,s){void 0===s&&(s={}),e.setPostPipeline(i);var r=e.postPipelines[e.postPipelines.length-1];return r.resetFromJSON(s),s.name&&(r.name=s.name),r};let lR=Phaser.Utils.Array.SpliceOne;var postfxpipeline_RemovePostFxPipelineInstance=function(e,i,s){if(void 0===s)for(var r=e.postPipelines,n=r.length-1;n>=0;n--){var a=r[n];a instanceof i&&(a.destroy(),lR(r,n))}else for(var r=e.postPipelines,n=0,o=r.length;n<o;n++){var a=r[n];a instanceof i&&a.name===s&&(a.destroy(),lR(r,n))}};let lL=[function(e){e.addTransitionMode("slideAwayRight",{ease:"Linear",dir:"out",mask:!0,onStart:function(e,i,s,r){},onProgress:function(e,i,s,r){var n=i.width*r;e.setChildLocalPosition(i,n,0)},onComplete:function(e,i,s,r){e.setChildLocalPosition(i,0,0)}}).addTransitionMode("slideAwayLeft",{ease:"Linear",dir:"out",mask:!0,onStart:function(e,i,s,r){},onProgress:function(e,i,s,r){var n=-(i.width*r);e.setChildLocalPosition(i,n,0)},onComplete:function(e,i,s,r){e.setChildLocalPosition(i,0,0)}}).addTransitionMode("slideAwayDown",{ease:"Linear",dir:"out",mask:!0,onStart:function(e,i,s,r){},onProgress:function(e,i,s,r){var n=i.height*r;e.setChildLocalPosition(i,0,n)},onComplete:function(e,i,s,r){e.setChildLocalPosition(i,0,0)}}).addTransitionMode("slideAwayUp",{ease:"Linear",dir:"out",mask:!0,onStart:function(e,i,s,r){},onProgress:function(e,i,s,r){var n=-(i.height*r);e.setChildLocalPosition(i,0,n)},onComplete:function(e,i,s,r){e.setChildLocalPosition(i,0,0)}})},function(e){e.addTransitionMode("slideRight",{ease:"Linear",dir:"in",mask:!0,onStart:function(e,i,s,r){},onProgress:function(e,i,s,r){var n=s.width*(r-1);e.setChildLocalPosition(s,n,0)},onComplete:function(e,i,s,r){e.setChildLocalPosition(s,0,0)}}).addTransitionMode("slideLeft",{ease:"Linear",dir:"in",mask:!0,onStart:function(e,i,s,r){},onProgress:function(e,i,s,r){var n=s.width*(1-r);e.setChildLocalPosition(s,n,0)},onComplete:function(e,i,s,r){e.setChildLocalPosition(s,0,0)}}).addTransitionMode("slideDown",{ease:"Linear",dir:"in",mask:!0,onStart:function(e,i,s,r){},onProgress:function(e,i,s,r){var n=s.height*(r-1);e.setChildLocalPosition(s,0,n)},onComplete:function(e,i,s,r){e.setChildLocalPosition(s,0,0)}}).addTransitionMode("slideUp",{ease:"Linear",dir:"in",mask:!0,onStart:function(e,i,s,r){},onProgress:function(e,i,s,r){var n=s.height*(1-r);e.setChildLocalPosition(s,0,n)},onComplete:function(e,i,s,r){e.setChildLocalPosition(s,0,0)}})},function(e){e.addTransitionMode("pushRight",{ease:"Linear",dir:"out",mask:!0,onStart:function(e,i,s,r){},onProgress:function(e,i,s,r){var n=i.width*r;e.setChildLocalPosition(i,n,0);var n=s.width*(r-1);e.setChildLocalPosition(s,n,0)},onComplete:function(e,i,s,r){e.setChildLocalPosition(i,0,0),e.setChildLocalPosition(s,0,0)}}).addTransitionMode("pushLeft",{ease:"Linear",dir:"out",mask:!0,onStart:function(e,i,s,r){},onProgress:function(e,i,s,r){var n=-(i.width*r);e.setChildLocalPosition(i,n,0);var n=s.width*(1-r);e.setChildLocalPosition(s,n,0)},onComplete:function(e,i,s,r){e.setChildLocalPosition(i,0,0),e.setChildLocalPosition(s,0,0)}}).addTransitionMode("pushDown",{ease:"Linear",dir:"out",mask:!0,onStart:function(e,i,s,r){},onProgress:function(e,i,s,r){var n=i.height*r;e.setChildLocalPosition(i,0,n);var n=s.height*(r-1);e.setChildLocalPosition(s,0,n)},onComplete:function(e,i,s,r){e.setChildLocalPosition(i,0,0),e.setChildLocalPosition(s,0,0)}}).addTransitionMode("pushUp",{ease:"Linear",dir:"out",mask:!0,onStart:function(e,i,s,r){},onProgress:function(e,i,s,r){var n=-(i.height*r);e.setChildLocalPosition(i,0,n);var n=s.height*(1-r);e.setChildLocalPosition(s,0,n)},onComplete:function(e,i,s,r){e.setChildLocalPosition(i,0,0),e.setChildLocalPosition(s,0,0)}})},function(e){e.addTransitionMode("zoomOut",{ease:"Linear",dir:"out",mask:!1,onStart:function(e,i,s,r){},onProgress:function(e,i,s,r){var n=1-r;e.setChildLocalScale(i,n,n)},onComplete:function(e,i,s,r){e.setChildLocalScale(i,1,1)}}).addTransitionMode("zoomIn",{ease:"Linear",dir:"in",mask:!1,onStart:function(e,i,s,r){},onProgress:function(e,i,s,r){e.setChildLocalScale(s,r,r)},onComplete:function(e,i,s,r){e.setChildLocalScale(s,1,1)}}).addTransitionMode("zoomInOut",{ease:"Linear",dir:"out",mask:!1,onStart:function(e,i,s,r){s.tint=0},onProgress:function(e,i,s,r){var n;r<.5?(n=1-math_Yoyo(r),e.setChildLocalScale(i,n,n)):(i.visible&&e.setChildVisible(i,!1),n=1-math_Yoyo(r),e.setChildLocalScale(s,n,n))},onComplete:function(e,i,s,r){e.setChildLocalScale(i,1,1),e.setChildVisible(i,!0),i.tint=16777215,e.setChildLocalScale(s,1,1),e.setChildVisible(s,!0),s.tint=16777215}})},function(e){e.addTransitionMode("fade",{ease:"Linear",dir:"out",mask:!1,onStart:function(e,i,s,r){s.tint=0},onProgress:function(e,i,s,r){var n;r<.5?(n=Math.floor(255*(1-(r=math_Yoyo(r)))),i.tint=(n<<16)+(n<<8)+n):(i.visible&&e.setChildVisible(i,!1),n=Math.floor(255*(1-(r=math_Yoyo(r)))),s.tint=(n<<16)+(n<<8)+n)},onComplete:function(e,i,s,r){e.setChildVisible(i,!0),i.tint=16777215,e.setChildVisible(s,!0),s.tint=16777215}}).addTransitionMode("crossFade",{ease:"Linear",dir:"out",mask:!1,onStart:function(e,i,s,r){},onProgress:function(e,i,s,r){e.setChildLocalAlpha(i,1-r),e.setChildLocalAlpha(s,r)},onComplete:function(e,i,s,r){e.setChildLocalAlpha(i,1)}})},function(e){var i,s=(i=e.scene,new CustomProgress_CustomProgress(i,{type:"Graphics",create:[{name:"rect",type:"rectangle"}],update:function(){this.getShape("rect").fillStyle(16777215).setSize(this.width*this.value,this.height*this.value).setCenterPosition(this.centerX,this.centerY)}}));e.once("destroy",function(){s.destroy()}).addTransitionMode("irisOut",{ease:"Linear",dir:"out",mask:s,onStart:function(e,i,s,r){e.setCurrentImageMaskEnable(!0,!0)},onProgress:function(e,i,s,r){e.maskGameObject.setValue(r)},onComplete:function(e,i,s,r){e.removeMaskGameObject(!1)}}).addTransitionMode("irisIn",{ease:"Linear",dir:"in",mask:s,onStart:function(e,i,s,r){e.setNextImageMaskEnable(!0,!0)},onProgress:function(e,i,s,r){e.maskGameObject.setValue(1-r)},onComplete:function(e,i,s,r){e.removeMaskGameObject(!1)}}).addTransitionMode("irisInOut",{ease:"Linear",dir:"out",mask:s,onStart:function(e,i,s,r){s.tint=0,e.setCurrentImageMaskEnable(!0),e.setNextImageMaskEnable(!0)},onProgress:function(e,i,s,r){var n;r<.5?(n=Math.floor(255*(1-(r=math_Yoyo(r)))),e.maskGameObject.setValue(1-r),i.tint=(n<<16)+(n<<8)+n):(i.visible&&e.setChildVisible(i,!1),n=Math.floor(255*(1-(r=math_Yoyo(r)))),e.maskGameObject.setValue(1-r),s.tint=(n<<16)+(n<<8)+n)},onComplete:function(e,i,s,r){e.removeMaskGameObject(!1),e.setChildVisible(i,!0),i.tint=16777215,e.setChildVisible(s,!0),s.tint=16777215}})},function(e){var i,s=(i=e.scene,new CustomProgress_CustomProgress(i,{type:"Graphics",create:[{name:"pie",type:"arc"}],update:function(){var e=2*Math.max(this.width,this.height),i=90*this.value;this.getShape("pie").fillStyle(16777215).setCenterPosition(this.centerX,0).setRadius(e).setAngle(90-i,90+i).setPie()}}));e.once("destroy",function(){s.destroy()}).addTransitionMode("pieOut",{ease:"Linear",dir:"out",mask:s,onStart:function(e,i,s,r){e.setCurrentImageMaskEnable(!0,!0)},onProgress:function(e,i,s,r){e.maskGameObject.setValue(r)},onComplete:function(e,i,s,r){e.removeMaskGameObject(!1)}}).addTransitionMode("pieIn",{ease:"Linear",dir:"in",mask:s,onStart:function(e,i,s,r){e.setNextImageMaskEnable(!0,!0)},onProgress:function(e,i,s,r){e.maskGameObject.setValue(1-r)},onComplete:function(e,i,s,r){e.removeMaskGameObject(!1)}}).addTransitionMode("pieInOut",{ease:"Linear",dir:"out",mask:s,onStart:function(e,i,s,r){s.tint=0,e.setCurrentImageMaskEnable(!0),e.setNextImageMaskEnable(!0)},onProgress:function(e,i,s,r){var n;r<.5?(n=Math.floor(255*(1-(r=math_Yoyo(r)))),e.maskGameObject.setValue(1-r),i.tint=(n<<16)+(n<<8)+n):(i.visible&&e.setChildVisible(i,!1),n=Math.floor(255*(1-(r=math_Yoyo(r)))),e.maskGameObject.setValue(1-r),s.tint=(n<<16)+(n<<8)+n)},onComplete:function(e,i,s,r){e.removeMaskGameObject(!1),e.setChildVisible(i,!0),i.tint=16777215,e.setChildVisible(s,!0),s.tint=16777215}})},function(e){var i,s=(i=e.scene,new CustomProgress_CustomProgress(i,{type:"Graphics",create:[{name:"rect",type:"rectangle"}],update:function(){var e=this.getShape("rect").fillStyle(16777215),i=1-this.value;switch(this.wipeMode){case"right":e.setSize(this.width*i,this.height).setTopLeftPosition(this.width-e.width,0);break;case"left":e.setSize(this.width*i,this.height).setTopLeftPosition(0,0);break;case"down":e.setSize(this.width,this.height*i).setTopLeftPosition(0,this.height-e.height);break;case"up":e.setSize(this.width,this.height*i).setTopLeftPosition(0,0)}}}));e.once("destroy",function(){s.destroy()}).addTransitionMode("wipeRight",{ease:"Linear",dir:"out",mask:s,onStart:function(e,i,s,r){e.setCurrentImageMaskEnable(!0),e.maskGameObject.wipeMode="right"},onProgress:function(e,i,s,r){e.maskGameObject.setValue(r)},onComplete:function(e,i,s,r){e.removeMaskGameObject(!1)}}).addTransitionMode("wipeLeft",{ease:"Linear",dir:"out",mask:s,onStart:function(e,i,s,r){e.setCurrentImageMaskEnable(!0),e.maskGameObject.wipeMode="left"},onProgress:function(e,i,s,r){e.maskGameObject.setValue(r)},onComplete:function(e,i,s,r){e.removeMaskGameObject(!1)}}).addTransitionMode("wipeDown",{ease:"Linear",dir:"out",mask:s,onStart:function(e,i,s,r){e.setCurrentImageMaskEnable(!0),e.maskGameObject.wipeMode="down"},onProgress:function(e,i,s,r){e.maskGameObject.setValue(r)},onComplete:function(e,i,s,r){e.removeMaskGameObject(!1)}}).addTransitionMode("wipeUp",{ease:"Linear",dir:"out",mask:s,onStart:function(e,i,s,r){e.setCurrentImageMaskEnable(!0),e.maskGameObject.wipeMode="up"},onProgress:function(e,i,s,r){e.maskGameObject.setValue(r)},onComplete:function(e,i,s,r){e.removeMaskGameObject(!1)}})},function(e){var i,s=(i=e.scene,new CustomProgress_CustomProgress(i,{type:"Graphics",create:{rectangle:10},update:function(){for(var e=this.getShapes(),i=this.width/10,s=0;s<10;s++)e[s].fillStyle(16777215).setSize(i*this.value,this.height).setTopLeftPosition(i*s,0)}}));e.once("destroy",function(){s.destroy()}).addTransitionMode("blinds",{ease:"Linear",dir:"out",mask:s,onStart:function(e,i,s,r){e.setCurrentImageMaskEnable(!0,!0)},onProgress:function(e,i,s,r){e.maskGameObject.setValue(r)},onComplete:function(e,i,s,r){e.removeMaskGameObject(!1)}})},function(e){var i,s,r,n=(i=e.scene,s=Math.ceil(e.width/40),r=Math.ceil(e.height/40),new CustomProgress_CustomProgress(i,{type:"Graphics",create:{rectangle:s*r},update:function(){for(var e=this.getShapes(),i=this.width/s,n=this.height/r,a=0;a<r;a++)for(var o=0;o<s;o++)e[o*r+a].fillStyle(16777215).setSize(i*this.value,n*this.value).setCenterPosition(i*(o+.5),n*(a+.5))}}));e.once("destroy",function(){n.destroy()}).addTransitionMode("squares",{ease:"Linear",dir:"out",mask:n,onStart:function(e,i,s,r){e.setCurrentImageMaskEnable(!0,!0)},onProgress:function(e,i,s,r){e.maskGameObject.setValue(r)},onComplete:function(e,i,s,r){e.removeMaskGameObject(!1)}})},function(e){var i,s,r,n=(i=e.scene,s=Math.ceil(e.width/60),r=Math.ceil(e.height/60),new CustomProgress_CustomProgress(i,{type:"Graphics",create:{lines:s*r},update:function(){for(var e=this.getShapes(),i=this.width/(s-1),n=this.height/r,a=2*n,o=i*this.value,h=n*this.value,l=0;l<r;l++)for(var c=0;c<s;c++){var g=c*i,m=l*a+c%2*n;e[c*r+l].fillStyle(16777215).start(g+o,m).lineTo(g,m+h).lineTo(g-o,m).lineTo(g,m-h).lineTo(g+o,m).close()}}}));e.once("destroy",function(){n.destroy()}).addTransitionMode("diamonds",{ease:"Linear",dir:"out",mask:n,onStart:function(e,i,s,r){e.setCurrentImageMaskEnable(!0,!0)},onProgress:function(e,i,s,r){e.maskGameObject.setValue(r)},onComplete:function(e,i,s,r){e.removeMaskGameObject(!1)}})},function(e){var i,s,r,n=(i=e.scene,s=Math.ceil(e.width/60),r=Math.ceil(e.height/60),new CustomProgress_CustomProgress(i,{type:"Graphics",create:{circle:s*r},update:function(){for(var e=this.getShapes(),i=this.width/(s-1),n=this.height/r,a=2*n,o=Math.max(i,n)*this.value,h=0;h<r;h++)for(var l=0;l<s;l++){var c=l*i,g=h*a+l%2*n;e[l*r+h].fillStyle(16777215).setCenterPosition(c,g).setRadius(o)}}}));e.once("destroy",function(){n.destroy()}).addTransitionMode("circles",{ease:"Linear",dir:"out",mask:n,onStart:function(e,i,s,r){e.setCurrentImageMaskEnable(!0,!0)},onProgress:function(e,i,s,r){e.maskGameObject.setValue(r)},onComplete:function(e,i,s,r){e.removeMaskGameObject(!1)}})},function(e){var i,s=(i=e.scene,new CustomProgress_CustomProgress(i,{type:"Graphics",create:{lines:10},update:function(){for(var e=this.getShapes(),i=this.width/10,s=i/2,r=0;r<10;r++){var n=i*r,a=this.height*this.value,o=n+s;e[r].fillStyle(16777215).start(n,0).horizontalLineTo(a).arc(o,a,s,180,0,!0).horizontalLineTo(-a).lineTo(n,0).close()}}}));e.once("destroy",function(){s.destroy()}).addTransitionMode("curtain",{ease:"Linear",dir:"out",mask:s,onStart:function(e,i,s,r){s.tint=0,e.setCurrentImageMaskEnable(!0,!0),e.setNextImageMaskEnable(!0,!0)},onProgress:function(e,i,s,r){var n;r<.5?(n=Math.floor(255*(1-(r=math_Yoyo(r)))),e.maskGameObject.setValue(r),i.tint=(n<<16)+(n<<8)+n):(i.visible&&e.setChildVisible(i,!1),n=Math.floor(255*(1-(r=math_Yoyo(r)))),e.maskGameObject.setValue(r),s.tint=(n<<16)+(n<<8)+n)},onComplete:function(e,i,s,r){e.removeMaskGameObject(!1),e.setChildVisible(i,!0),i.tint=16777215,e.setChildVisible(s,!0),s.tint=16777215}})},function(e){e.addTransitionMode("pixellate",{ease:"Linear",dir:"out",mask:!0,onStart:function(e,i,s,r){e.setChildVisible(s,!1),i.effect=i.preFX.addPixelate(0),s.effect=s.preFX.addPixelate(0)},onProgress:function(e,i,s,r){if(r<.5){r=math_Yoyo(r);var n=Math.min(i.width,i.height)/5;i.effect.amount=Math.ceil(n*r)}else{i.visible&&e.setChildVisible(i,!1),s.visible||e.setChildVisible(s,!0),r=math_Yoyo(r);var n=Math.min(s.width,s.height)/5;s.effect.amount=Math.ceil(n*r)}},onComplete:function(e,i,s,r){i.preFX.remove(i.effect),delete i.effect,e.setChildVisible(i,!0),s.preFX.remove(s.effect),delete s.effect}})},function(e){postfxpipeline_RegisterPostPipeline(e.scene.game,"rexDissolvePostFx",lE),e.addTransitionMode("dissolve",{ease:"Linear",dir:"out",mask:!1,onStart:function(e,i,s,r){i.effect=postfxpipeline_AddPostFxPipelineInstance(i,lE)},onProgress:function(e,i,s,r){i.effect.setProgress(r)},onComplete:function(e,i,s,r){postfxpipeline_RemovePostFxPipelineInstance(i,lE),delete i.effect}})},function(e){e.addTransitionMode("revealRight",{ease:"Linear",dir:"in",mask:!1,onStart:function(e,i,s,r){s.effect=s.preFX.addReveal(.1,0,0)},onProgress:function(e,i,s,r){s.effect.progress=r},onComplete:function(e,i,s,r){s.preFX.remove(s.effect),delete s.effect}}).addTransitionMode("revealLeft",{ease:"Linear",dir:"in",mask:!1,onStart:function(e,i,s,r){s.effect=s.preFX.addReveal(.1,1,0)},onProgress:function(e,i,s,r){s.effect.progress=r},onComplete:function(e,i,s,r){s.preFX.remove(s.effect),delete s.effect}}).addTransitionMode("revealDown",{ease:"Linear",dir:"in",mask:!1,onStart:function(e,i,s,r){s.effect=s.preFX.addReveal(.1,0,1)},onProgress:function(e,i,s,r){s.effect.progress=r},onComplete:function(e,i,s,r){s.preFX.remove(s.effect),delete s.effect}}).addTransitionMode("revealUp",{ease:"Linear",dir:"in",mask:!1,onStart:function(e,i,s,r){s.effect=s.preFX.addReveal(.1,1,1)},onProgress:function(e,i,s,r){s.effect.progress=r},onComplete:function(e,i,s,r){s.preFX.remove(s.effect),delete s.effect}})}];var lB=class extends l_{constructor(e,i,s,r,n,a){super(e,i,s,r,n,a);for(var o=0,h=lL.length;o<h;o++)lL[o](this)}};ObjectFactory.register("transitionImagePack",function(e,i,s,r,n){var a=new lB(this.scene,e,i,s,r,n);return this.scene.add.existing(a),a}),(0,k.Z)(window,"RexPlugins.UI.TransitionImagePack",lB);var lI={scaleImage:function(){var e=this.image,i=size_FitTo(e,this,this.scaleUp,!0);return e.setDisplaySize(i.width,i.height),this.resetChildScaleState(e),this}};Object.assign(lI,lb);var methods_ResizeBackground=function(){var e=this.background;return e&&(e.setOrigin(this.originX,this.originY),e.setPosition(this.x,this.y),size_ResizeGameObject(e,this.displayWidth,this.displayHeight),this.resetChildScaleState(e)),this};let lG=Phaser.Utils.Objects.IsPlainObject,lD=Phaser.Utils.Objects.GetValue;let ImageBox_ImageBox=class ImageBox_ImageBox extends av{constructor(e,i,s,r,n,a){lG(i)?(i=lD(a=i,"x",0),s=lD(a,"y",0),r=lD(a,"key",void 0),n=lD(a,"frame",void 0)):lG(n)&&(a=n,n=void 0);var o=lD(a,"image");o?o.setPosition(i,s).setOrigin(.5):(o=e.add.image(i,s,r,n),void 0===r&&o.setVisible(!1)),super(e,i,s,1,1),this.type="rexImageBox";var h=lD(a,"background");h&&this.add(h),this.background=h,this.add(o),this.image=o,this.scaleUp=lD(a,"scaleUp",!1);var l=lD(a,"width",o.width),c=lD(a,"height",o.height);this.resize(l,c)}get texture(){return this.image.texture}get frame(){return this.image.frame}get flipX(){return this._flipX}set flipX(e){this._flipX!==e&&(this._flipX=e,this.image.setFlipX(e))}get flipY(){return this._flipY}set flipY(e){this._flipY!==e&&(this._flipY=e,this.image.setFlipY(e))}resize(e,i){return super.resize(e,i),methods_ResizeBackground.call(this),this.scaleImage(),this}setTexture(e,i){var s=this.image;return s.setTexture(e,i),null!==e?(this.setChildVisible(s,!0),this.scaleImage()):this.setChildVisible(s,!1),this}};Object.assign(ImageBox_ImageBox.prototype,lI),ObjectFactory.register("imageBox",function(e,i,s,r,n){var a=new ImageBox_ImageBox(this.scene,e,i,s,r,n);return this.scene.add.existing(a),a}),(0,k.Z)(window,"RexPlugins.UI.ImageBox",ImageBox_ImageBox),ObjectFactory.register("fullWindowRectangle",function(e,i){var s=new ov(this.scene,e,i);return this.scene.add.existing(s),s}),(0,k.Z)(window,"RexPlugins.UI.FullWindowRectangle",ov),ObjectFactory.register("cover",function(e){var i=new oC(this.scene,e);return this.scene.add.existing(i),i}),(0,k.Z)(window,"RexPlugins.UI.Cover",oC);var utils_Resize=function(e,i){if(this.scene.sys.scale.autoRound&&(e=Math.floor(e),i=Math.floor(i)),this.width===e&&this.height===i)return this;var s=this.node.style;return s.width=`${e}px`,s.height=`${i}px`,this.updateSize(),this};let lj={id:["id",void 0],text:["value",void 0],maxLength:["maxLength",void 0],minLength:["minLength",void 0],placeholder:["placeholder",void 0],tooltip:["title",void 0],readOnly:["readOnly",!1],spellCheck:["spellcheck",!1],autoComplete:["autocomplete","off"]},lA={align:["textAlign",void 0],paddingLeft:["padding-left",void 0],paddingRight:["padding-right",void 0],paddingTop:["padding-top",void 0],paddingBottom:["padding-bottom",void 0],fontFamily:["fontFamily",void 0],fontSize:["font-size",void 0],color:["color","#ffffff"],backgroundColor:["backgroundColor","transparent"],border:["border",0],borderColor:["borderColor","transparent"],borderRadius:["border-radius",void 0],outline:["outline","none"],direction:["direction",void 0]},lF={input:"textchange",click:"click",dblclick:"dblclick",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup",touchstart:"pointerdown",touchmove:"pointermove",touchend:"pointerup",keydown:"keydown",keyup:"keyup",keypress:"keypress",compositionstart:"compositionStart",compositionend:"compositionEnd",compositionupdate:"compositionUpdate",focus:"focus",blur:"blur",select:"select"},lz=Phaser.Utils.Objects.GetValue;var utils_RouteEvents=function(e,i,s,r){var n=lz(r,"preventDefault",!1),a=lz(r,"preTest");for(let r in s)i.addEventListener(r,function(i){(!a||a(e,r))&&e.emit(s[r],e,i),n&&i.preventDefault()})};let lW=Phaser.GameObjects.DOMElement,lV=Phaser.Utils.Objects.IsPlainObject,lY=Phaser.Utils.Objects.GetValue;let InputText_InputText=class InputText_InputText extends lW{constructor(e,i,s,r,n,a){lV(i)?(i=lY(a=i,"x",0),s=lY(a,"y",0),r=lY(a,"width",0),n=lY(a,"height",0)):lV(r)&&(r=lY(a=r,"width",0),n=lY(a,"height",0)),void 0===a&&(a={});var o,h=lY(a,"inputType",void 0);void 0===h&&(h=lY(a,"type","text")),"textarea"===h?(o=document.createElement("textarea")).style.resize="none":(o=document.createElement("input")).type=h,utils_SetProperties(lj,a,o);var l=lY(a,"style",void 0);l=utils_SetProperties(lA,a,l);var c=o.style;for(var g in a)g in lj||g in lA||!(g in c)||(l[g]=a[g]);l["box-sizing"]="border-box",super(e,i,s,o,l),this.type="rexInputText",this.resize(r,n),utils_RouteEvents(this,o,lF),utils_StopPropagationTouchEvents(o),lY(a,"selectAll",!1)&&this.selectAll(),this._isFocused=!1,this.on("focus",function(){this._isFocused=!0},this).on("blur",function(){this._isFocused=!1},this)}get inputType(){return"textarea"===this.node.tagName.toLowerCase()?"textarea":this.node.type}get text(){return this.node.value}set text(e){this.node.value=e}setText(e){return this.text=e,this}get maxLength(){return this.node.maxLength}set maxLength(e){this.node.maxLength=e}setMaxLength(e){return this.maxLength=e,this}get minLength(){return this.node.minLength}set minLength(e){this.node.minLength=e}setMinLength(e){return this.minLength=e,this}get placeholder(){return this.node.placeholder}set placeholder(e){this.node.placeholder=e}setPlaceholder(e){return this.placeholder=e,this}selectText(e,i){return void 0===e?this.node.select():this.node.setSelectionRange(e,i),this}selectAll(){return this.selectText(),this}get selectionStart(){return this.node.selectionStart}get selectionEnd(){return this.node.selectionEnd}get selectedText(){var e=this.node;return e.value.substring(e.selectionStart,e.selectionEnd)}get cursorPosition(){return this.node.selectionStart}set cursorPosition(e){this.node.setSelectionRange(e,e)}setCursorPosition(e){return void 0===e?e=this.text.length:e<0&&(e=this.text.length+e),this.cursorPosition=e,this}get tooltip(){return this.node.title}set tooltip(e){this.node.title=e}setTooltip(e){return this.tooltip=e,this}setTextChangedCallback(e){return this.onTextChanged=e,this}get readOnly(){return this.node.readOnly}set readOnly(e){this.node.readOnly=e}setReadOnly(e){return void 0===e&&(e=!0),this.readOnly=e,this}get spellCheck(){return this.node.spellcheck}set spellCheck(e){this.node.spellcheck=e}setSpellCheck(e){return this.spellCheck=e,this}get fontColor(){return this.node.style.color}set fontColor(e){this.node.style.color=e}setFontColor(e){return this.fontColor=e,this}setStyle(e,i){return this.node.style[e]=i,this}getStyle(e){return this.node.style[e]}scrollToBottom(){return this.node.scrollTop=this.node.scrollHeight,this}setEnabled(e){return void 0===e&&(e=!0),this.node.disabled=!e,this}setBlur(){return this.node.blur(),this}setFocus(){return this.node.focus(),this}get isFocused(){return this._isFocused}};Object.assign(InputText_InputText.prototype,{resize:utils_Resize}),ObjectFactory.register("inputText",function(e){var i=new InputText_InputText(this.scene,e);return this.scene.add.existing(i),i}),(0,k.Z)(window,"RexPlugins.UI.InputText",InputText_InputText);let lX=Phaser.Utils.Objects.GetValue;var filechooser_CreateFileInput=function(e,i){var s=document.createElement("input");s.type="file";var r=lX(i,"accept",""),n=lX(i,"multiple",!1);return s.setAttribute("accept",r),n?s.setAttribute("multiple",""):s.removeAttribute("multiple"),s},promise_Delay=function(e,i){return void 0===e&&(e=0),new Promise(function(s,r){setTimeout(function(){s(i)},e)})},filechooser_ClickPromise=function({game:e,fileInput:i,closeDelay:s}){return WaitEvent_WaitEvent(system_GetGame(e).events,"focus").then(function(){return promise_Delay(s)}).then(function(){return Promise.resolve({files:i.files})})};let lH=Phaser.Utils.Objects.GetValue,lU=Phaser.DOM.RemoveFromDOM;var filechooser_Open=function(e,i){var s=lH(i,"closeDelay",200),r=filechooser_CreateFileInput(e,i);return r.click(),filechooser_ClickPromise({game:e,fileInput:r,closeDelay:s}).then(function(e){return lU(r),r.remove(),Promise.resolve(e)})},utils_SyncTo=function(e){return this.setOrigin(e.originX,e.originY),this.setPosition(e.x,e.y),this.resize(e.displayWidth,e.displayHeight),this},system_GetCache=function(e,i,s){if(void 0===s)switch(i){case"image":case"svg":s="textures";break;case"animation":s="json";break;case"tilemapTiledJSON":case"tilemapCSV":s="tilemap";break;case"glsl":s="shader";break;default:s=i}return e=system_GetGame(e),"textures"===s?e.textures:e.cache[s]},loader_FileObjectToCache=function(e,i,s,r,n,a){if(null===n||!1===n);else if(object_IsFunction(n))n();else{var o=system_GetCache(e,s,n);o.exists(r)&&o.remove(r)}var h=e.load;if(a&&h.once(`filecomplete-${s}-${r}`,function(e,i,s){a(s)}),object_IsFunction(i))i();else{var l=window.URL.createObjectURL(i);h[s](r,l)}h.start()},lN={loadFile:function(e,i,s,r,n){return loader_FileObjectToCache(this.scene,e,i,s,r,n),this},loadFilePromise:function(e,i,s,r){var n=this.scene;return new Promise(function(a,o){loader_FileObjectToCache(n,e,i,s,r,function(e){a(e)})})}};let l$=Phaser.GameObjects.DOMElement,lZ=Phaser.Utils.Objects.IsPlainObject,lK=Phaser.Utils.Objects.GetValue;let FileChooser_FileChooser=class FileChooser_FileChooser extends l${constructor(e,i,s,r,n,a){lZ(i)?(i=lK(a=i,"x",0),s=lK(a,"y",0),r=lK(a,"width",0),n=lK(a,"height",0)):lZ(r)&&(r=lK(a=r,"width",0),n=lK(a,"height",0));var o=document.createElement("input");o.type="file",o.style.display="none";var h=document.createElement("label");h.appendChild(o),super(e,i,s,h,lK(a,"style",void 0)),this.type="rexFileChooser",this.resetFromJSON(a),this.resize(r,n);var l=this;o.onchange=function(){l.emit("change",l)},this.setCloseDelay(lK(a,"closeDelay",200)),o.onclick=function(){filechooser_ClickPromise({game:e,fileInput:o,closeDelay:l.closeDelay}).then(function(){l.emit("select",l)})}}resetFromJSON(e){return this.setAccept(lK(e,"accept","")),this.setMultiple(lK(e,"multiple",!1)),this}setAccept(e){return void 0===e&&(e=""),this.fileInput.setAttribute("accept",e),this}setMultiple(e){return void 0===e&&(e=!0),e?this.fileInput.setAttribute("multiple",""):this.fileInput.removeAttribute("multiple"),this}setCloseDelay(e){return void 0===e&&(e=200),this.closeDelay=e,this}get fileInput(){return this.node.children[0]}open(){return this.fileInput.click(),this}get files(){return this.fileInput.files}setOpenEnable(e){return void 0===e&&(e=!0),this.fileInput.disabled=!e,this}};Object.assign(FileChooser_FileChooser.prototype,{resize:utils_Resize,syncTo:utils_SyncTo},lN),ObjectFactory.register("fileChooser",function(e){var i=new FileChooser_FileChooser(this.scene,e);return this.scene.add.existing(i),i}),(0,k.Z)(window,"RexPlugins.UI.FileChooser",FileChooser_FileChooser);var lJ={resize:utils_Resize,syncTo:utils_SyncTo};Object.assign(lJ,{setDropEnable(e){return void 0===e&&(e=!0),this.dropEnable=e,this},toggleDropEnable(){return this.dropEnable=!this.dropEnable,this}},{addFilter(e,i){return this.filters||(this.filters={}),this.filters[e]=i,this},addFilters(e){for(var i in this.filters||(this.filters={}),e)this.filters[i]=e[i];return this}},lN);let lq={dragenter:"dragenter",dragleave:"dragleave",dragover:"dragover",drop:"drop"},lQ=Phaser.GameObjects.DOMElement,l0=Phaser.Utils.Objects.IsPlainObject,l1=Phaser.Utils.Objects.GetValue;let FileDropZone_FileDropZone=class FileDropZone_FileDropZone extends lQ{constructor(e,i,s,r,n,a){l0(i)?(i=l1(a=i,"x",0),s=l1(a,"y",0),r=l1(a,"width",0),n=l1(a,"height",0)):l0(r)&&(r=l1(a=r,"width",0),n=l1(a,"height",0)),void 0===a&&(a={});var o=document.createElement("div");super(e,i,s,o,l1(a,"style",void 0)),this.type="rexFileDropZone",this.resize(r,n),this._files=[],this.setDropEnable(l1(a,"dropEnable",!0));var h=l1(a,"filters");h&&this.addFilters(h),utils_RouteEvents(this,o,lq,{preventDefault:!0,preTest:e=>e.dropEnable}),this.on("drop",function(e,i){this._files=i.dataTransfer.files;var s=this._files;if(s&&this.filters)for(var r in this.filters){for(var n=this.filters[r],a=[],o=0,h=s.length;o<h;o++){var l=s[o];n(l,s)&&a.push(l)}a.length>0&&this.emit(`drop.${r}`,a)}},this)}get files(){return this._files}};Object.assign(FileDropZone_FileDropZone.prototype,lJ),ObjectFactory.register("fileDropZone",function(e){var i=new FileDropZone_FileDropZone(this.scene,e);return this.scene.add.existing(i),i}),(0,k.Z)(window,"RexPlugins.UI.FileDropZone",FileDropZone_FileDropZone);let l2=Phaser.Math.Wrap;var sizer_ExpandFitRatioChildren=function(e,i){if(this.hasRatioFitChild){0===this.orientation?s=i-this.getInnerPadding("top")-this.getInnerPadding("bottom"):(this.getInnerPadding("left"),this.getInnerPadding("right"));for(var s,r,n,a,o,h=this.sizerChildren,l=0,c=h.length;l<c;l++){var r=h[l],n=r.rexSizer;if(!n.hidden){var g=n.fitRatio;g&&(0===this.orientation?a=(o=s-this.getChildOuterPadding(r,"top")-this.getChildOuterPadding(r,"bottom"))*g:o=(a=s-this.getChildOuterPadding(r,"top")-this.getChildOuterPadding(r,"bottom"))/g,size_ResizeGameObject(r,a,o),r.isRexSizer&&r.setMinSize(a,o),n.resolved=!0)}}}};let l5=Phaser.GameObjects.Zone;var l3=class extends l5{constructor(e){super(e,0,0,1,1),this.isRexSpace=!0}},sizer_GetNearestChildIndex=function(e,i){var s,r=this.sizerChildren;if(0===r.length)return -1;for(var n=-1,a=1/0,o=0,h=r.length;o<h;o++){var s,l=r[o];a>(s=0===this.orientation?Math.abs(l.left-e):Math.abs(l.top-i))&&(a=s,n=o)}var l=r[r.length-1];return a>(s=0===this.orientation?Math.abs(l.right-e):Math.abs(l.bottom-i))&&(a=s,n=o+1),n};let l7=Phaser.Utils.Objects.IsPlainObject,l6=Phaser.Utils.Objects.GetValue,l4=Phaser.Display.Align.CENTER,l8={min:0,full:-1};var sizer_AddChildMethods_Add=function(e,i,s,r,n,a,o,h,l,c){utils_AddChild.call(this,e);var g=e.isRexSpace,m=typeof i;if(null===i)return this;if("number"===m);else if("string"===m)i=l8[i];else if(l7(i)){var x=i;i=l6(x,"proportion",void 0),s=l6(x,"align",l4),r=l6(x,"padding",0),n=l6(x,"expand",!1),a=l6(x,"key",void 0),o=l6(x,"index",void 0),e.isRexSizer||(h=l6(x,"minWidth",void 0),l=l6(x,"minHeight",void 0)),c=l6(x,"fitRatio",0)}"string"==typeof s&&(s=ab[s]),void 0===i&&(i=g?1:0),void 0===s&&(s=l4),void 0===r&&(r=0),void 0===n&&(n=!1),void 0!==h||(g?h=0:e.isRexSizer||(h=e._minWidth)),void 0!==l||(g?l=0:e.isRexSizer||(l=e._minHeight)),void 0===c||!1===c?c=0:!0===c&&(c=GetDisplayWidth(e)/GetDisplayHeight(e));var x=this.getSizerConfig(e);return x.proportion=i,x.align=s,x.padding=bounds_GetBoundsConfig(r),x.expand=n,x.fitRatio=0===i?c:0,void 0===o||o>=this.sizerChildren.length?this.sizerChildren.push(e):this.sizerChildren.splice(o,0,e),!e.isRexSizer&&(i>0&&(0===this.orientation?e.minWidth=void 0===h?GetDisplayWidth(e):h:e.minHeight=void 0===l?GetDisplayHeight(e):l),n&&(0===this.orientation?e.minHeight=l:e.minWidth=h)),void 0!==a&&this.addChildrenMap(a,e),this};let l9=Phaser.Utils.Array.Remove;var dt={getChildrenWidth:function(e){if(this.rexSizer.hidden)return 0;void 0===e&&(e=!0);var i,s,r,n,a,o=0,h=this.sizerChildren,l=!1;if(this.childrenProportion,0===this.orientation)for(var c=this.space.item,g=!0,m=0,x=h.length;m<x;m++)(i=h[m]).hasOwnProperty("rexSizer")&&!(s=i.rexSizer).hidden&&(0===(r=s.proportion)||e?(a=this.getChildWidth(i),s.fitRatio>0&&!s.resolved&&(a=void 0),void 0===a&&(0===r||this.hasProportion0Child?l=!0:a=0)):a=0,l||(a+=(n=i.rexSizer.padding).left+n.right,g?g=!1:a+=c,o+=a));else for(var m=0,x=h.length;m<x;m++)(i=h[m]).hasOwnProperty("rexSizer")&&!(s=i.rexSizer).hidden&&(void 0===(a=this.getChildWidth(i))&&(l=!0),l||(a+=(n=s.padding).left+n.right,o=Math.max(a,o)));if(!l)return o+this.space.left+this.space.right},getChildrenHeight:function(e){if(this.rexSizer.hidden)return 0;void 0===e&&(e=!0);var i,s,r,n,a,o=0,h=this.sizerChildren,l=!1;if(this.childrenProportion,0===this.orientation)for(var c=0,g=h.length;c<g;c++)(i=h[c]).hasOwnProperty("rexSizer")&&!(s=i.rexSizer).hidden&&(void 0===(a=this.getChildHeight(i))&&(l=!0),l||(a+=(n=s.padding).top+n.bottom,o=Math.max(a,o)));else for(var m=this.space.item,x=!0,c=0,g=h.length;c<g;c++)(i=h[c]).hasOwnProperty("rexSizer")&&!(s=i.rexSizer).hidden&&(0===(r=s.proportion)||e?(a=this.getChildHeight(i),s.fitRatio>0&&!s.resolved&&(a=void 0),void 0===a&&(0===r||this.hasProportion0Child?l=!0:a=0)):a=0,l||(a+=(n=s.padding).top+n.bottom,x?x=!1:a+=m,o+=a));if(!l)return o+this.space.top+this.space.bottom},getExpandedChildWidth:function(e,i){void 0===i&&(i=this.width);var s,r=e.rexSizer;if(0===this.orientation)r.proportion>0&&this.proportionLength>0&&(s=r.proportion*this.proportionLength);else if(r.expand){var n=this.space,a=i-n.left-n.right,o=r.padding;s=a-o.left-o.right}return s},getExpandedChildHeight:function(e,i){void 0===i&&(i=this.height);var s,r=e.rexSizer;if(0===this.orientation){if(r.expand){var n=this.space,a=i-n.top-n.bottom,o=r.padding;s=a-o.top-o.bottom}}else r.proportion>0&&this.proportionLength>0&&(s=r.proportion*this.proportionLength);return s},getChildrenSizers:function(e){void 0===e&&(e=[]);for(var i,s=this.sizerChildren,r=0,n=s.length;r<n;r++)(i=s[r]).isRexSizer&&e.push(i);return e},preLayout:function(){this.hasRatioFitChild=!1;for(var e,i,s=this.sizerChildren,r=0,n=s.length;r<n;r++)!(i=(e=s[r]).rexSizer).hidden&&i.fitRatio>0&&(size_ResizeGameObject(e,0,0),i.resolved=!1,this.hasRatioFitChild=!0);return this._childrenProportion=void 0,this.hasProportion0Child=!1,this.proportionLength=void 0,basesizer_PreLayout.call(this),this},layoutChildren:function(){for(var e,i,s,r,n,a,o,h,l,c,g=this.sizerChildren,m=this.innerLeft,x=this.innerTop,S=this.innerWidth,_=this.innerHeight,k=m,E=x,R=this.startChildIndex,j=0,Y=g.length;j<Y;j++)c=0===R?j:l2(j+R,0,Y),this.rtl&&(c=Y-c-1),(e=g[c]).rexSizer.hidden||(s=(i=e.rexSizer).padding,utils_PreLayoutChild.call(this,e),e.isRexSpace?(h=0,l=0):(h=this.getExpandedChildWidth(e),l=this.getExpandedChildHeight(e)),e.isRexSizer?(e.runLayout(this,h,l),utils_CheckSize(e,this)):size_ResizeGameObject(e,h,l),void 0===h&&(h=GetDisplayWidth(e)),void 0===l&&(l=GetDisplayHeight(e)),0===this.orientation?(r=k+s.left,a=0===i.proportion||0===this.proportionLength?h:i.proportion*this.proportionLength,n=E+s.top,o=_-s.top-s.bottom):(r=k+s.left,a=S-s.left-s.right,n=E+s.top,o=0===i.proportion||0===this.proportionLength?l:i.proportion*this.proportionLength),utils_LayoutChild.call(this,e,r,n,a,o,i.align),0===this.orientation?k+=a+s.left+s.right+this.space.item:E+=o+s.top+s.bottom+this.space.item)},resolveWidth:function(e){var e=basesizer_ResolveWidth.call(this,e);if(void 0!==e&&0===this.orientation&&void 0===this.proportionLength){var i=e-this.childrenWidth;i>0?(i=e-this.getChildrenWidth(!1),this.proportionLength=i/this.childrenProportion):this.proportionLength=0}return e},resolveHeight:function(e){var e=basesizer_ResolveHeight.call(this,e);if(void 0!==e&&1===this.orientation&&void 0===this.proportionLength){var i=e-this.childrenHeight;i>0?(i=e-this.getChildrenHeight(!1),this.proportionLength=i/this.childrenProportion):this.proportionLength=0}return e},hasWidthWrap:function(){return!!this.hasRatioFitChild&&1===this.orientation||basesizer_HasWidthWrap.call(this)},runWidthWrap:function(e){this.wrapResult||(1===this.orientation&&sizer_ExpandFitRatioChildren.call(this,e,void 0),basesizer_RunWidthWrap.call(this,e))},hasHeightWrap:function(){return!!this.hasRatioFitChild&&0===this.orientation||basesizer_HasHeightWrap.call(this)},runHeightWrap:function(e){this.wrapResult||(0===this.orientation&&sizer_ExpandFitRatioChildren.call(this,void 0,e),basesizer_RunHeightWrap.call(this,e))},setChildrenAlignMode:function(e){void 0===e&&(e="left");var i=this.sizerChildren,s=i[0],r=s&&s.isRexSpace;"right"===e||"bottom"===e||"center"===e?r||this.insertSpace(0):r&&this.remove(s,!0);var n=i.length-1,a=i[n],o=a&&a.isRexSpace;return"center"===e?o||this.insertSpace(n+1):o&&this.remove(a,!0),this}};Object.assign(dt,{add:sizer_AddChildMethods_Add,addSpace(e){return this.insertSpace(void 0,e),this},insertSpace(e,i){return void 0===i&&(i=1),sizer_AddChildMethods_Add.call(this,new l3(this.scene),{proportion:i,minWidth:0,minHeight:0,index:e}),this},insert(e,i,s,r,n,a,o,h){return l7(s)&&(s.index=e),sizer_AddChildMethods_Add.call(this,i,s,r,n,a,o,e,h),this},insertAtPosition(e,i,s,r,n,a,o,h,l){var c=sizer_GetNearestChildIndex.call(this,e,i);return -1===c&&(c=void 0),this.insert(c,s,r,n,a,o,h,l),this}},{remove(e,i){return this.getParentSizer(e)!==this||(l9(this.sizerChildren,e),utils_RemoveChild.call(this,e,i)),this},removeAll(e){for(var i=this.sizerChildren.length-1;i>=0;i--)this.remove(this.sizerChildren[i],e);return this},clear(e){return this.sizerChildren.length=0,utils_ClearChildren.call(this,e),this}},{getChildAlign(e){return this.getSizerConfig(e).align},setChildAlign(e,i){return"string"==typeof i&&(i=ab[i]),this.getSizerConfig(e).align=i,this}},{getChildProportion(e){return this.getSizerConfig(e).proportion},setChildProportion(e,i){return this.getSizerConfig(e).proportion=i,this}},{getChildExpand(e){return this.getSizerConfig(e).expand},setChildExpand(e,i){return this.getSizerConfig(e).expand=i,this}});var sizer_GetChildrenProportion=function(){for(var e,i,s=0,r=this.sizerChildren,n=0,a=r.length;n<a;n++)(e=r[n]).rexSizer.hidden||((i=e.rexSizer.proportion)>0?s+=i:0!==i||(this.hasProportion0Child=!0));return s},de={x:0,h:0,horizontal:0,"left-to-right":0,y:1,v:1,vertical:1,"top-to-bottom":1},utils_GetOrientationMode=function(e){return"string"==typeof e&&(e=de[e]),e};let di=Phaser.Utils.Objects.IsPlainObject,ds=Phaser.Utils.Objects.GetValue;let Sizer_Sizer=class Sizer_Sizer extends hD{constructor(e,i,s,r,n,a,o){di(i)?(i=ds(o=i,"x",0),s=ds(o,"y",0),r=ds(o,"width",void 0),n=ds(o,"height",void 0),a=ds(o,"orientation",0)):di(r)?(r=ds(o=r,"width",void 0),n=ds(o,"height",void 0),a=ds(o,"orientation",0)):di(a)&&(a=ds(o=a,"orientation",0)),void 0===a&&(a=0),super(e,i,s,r,n,o),this.type="rexSizer",this.sizerChildren=[],this.setOrientation(a),this.setItemSpacing(ds(o,"space.item",0)),this.setStartChildIndex(ds(o,"startChildIndex",0)),this.setRTL(ds(o,"rtl",!1)),this.addChildrenMap("items",this.sizerChildren)}setOrientation(e){return this.orientation=utils_GetOrientationMode(e),this}setItemSpacing(e){return this.space.item=e,this}setStartChildIndex(e){return this.startChildIndex=e,this}setRTL(e){return void 0===e&&(e=!0),this.rtl=e,this}get childrenProportion(){return void 0===this._childrenProportion&&(this._childrenProportion=sizer_GetChildrenProportion.call(this)),this._childrenProportion}};Object.assign(Sizer_Sizer.prototype,dt);var dr=Sizer_Sizer,size_SetDisplaySize=function(e,i,s){if(e){var r=null==i,n=null==s;return r&&n||(r||(e.displayWidth=i),n||(e.displayHeight=s),r&&(e.scaleX=e.scaleY),n&&(e.scaleY=e.scaleX)),e}};let LabelBase=class LabelBase extends dr{get text(){var e=this.childrenMap.text;return e?e.text:""}set text(e){var i=this.childrenMap.text;i&&i.setText(e)}setText(e){return this.text=e,this}setIconTexture(e,i){var s=this.childrenMap.icon;return s&&s.setTexture&&(s.setTexture(e,i),void 0!==this.iconWidth&&void 0!==this.iconHeight&&(size_SetDisplaySize(s,this.iconWidth,this.iconHeight),this.resetChildScaleState(s))),this}setTexture(e,i){return this.setIconTexture(e,i),this}setIconSize(e,i){return void 0===i&&(i=e),this.iconWidth=e,this.iconHeight=i,this}get texture(){var e=this.childrenMap.icon;if(e)return e.texture}get frame(){var e=this.childrenMap.icon;if(e)return e.frame}setActionTexture(e,i){var s=this.childrenMap.action;return s&&s.setTexture&&(s.setTexture(e,i),void 0!==this.actionWidth&&void 0!==this.actionHeight&&(size_SetDisplaySize(s,this.actionWidth,this.actionHeight),this.resetChildScaleState(s))),this}get actionTexture(){var e=this.childrenMap.action;if(e)return e.texture}get actionFrame(){var e=this.childrenMap.action;if(e)return e.frame}setActionSize(e,i){return void 0===i&&(i=e),this.actionWidth=e,this.actionHeight=i,this}preLayout(){var e=this.childrenMap.icon;e&&void 0!==this.iconWidth&&void 0!==this.iconHeight&&size_SetDisplaySize(e,this.iconWidth,this.iconHeight);var i=this.childrenMap.action;i&&void 0!==this.actionWidth&&void 0!==this.actionHeight&&size_SetDisplaySize(i,this.actionWidth,this.actionHeight),super.preLayout()}postLayout(e,i,s){var r=this.childrenMap.iconMask;r&&(r.setPosition(),this.resetChildPositionState(r));var n=this.childrenMap.actionMask;return n&&(n.setPosition(),this.resetChildPositionState(n)),this}resize(e,i){super.resize(e,i);var s=this.childrenMap.iconMask;s&&s.resize();var r=this.childrenMap.actionMask;return r&&r.resize(),this}};Object.assign(LabelBase.prototype,{appendText:text_AppendText,resetDisplayContent:function(e){void 0===e?e={}:"string"==typeof e&&(e={text:e});var i=e.text||"";this.setText(i);var s=this.childrenMap.icon;if(s){e.icon?this.show(s):this.hide(s);var r=e.iconSize;r&&(this.setChildDisplaySize(s,r,r),void 0!==this.iconWidth&&this.setIconSize(r)),!0!==e.icon&&this.setIconTexture(e.icon,e.iconFrame)}var n=this.childrenMap.action;if(n){e.action?this.show(n):this.hide(n);var a=e.actionSize;a&&(this.setChildDisplaySize(n,a,a),void 0!==this.actionWidth&&this.setActionSize(a)),!0!==e.action&&this.setActionTexture(e.action,e.actionFrame)}return this}});var dn=LabelBase,mask_AddChildMask=function(e,i,s,r){var n=new lp(i,s,r);if(e&&!e.isRexSizer){var a=n.createGeometryMask();e.setMask(a),this.once("destroy",function(){e.setMask(),a.destroy()})}return this.pin(n),n};let da=Phaser.GameObjects.Text;var text_IsTextGameObject=function(e){return e instanceof da};let dh=Phaser.GameObjects.BitmapText;var bitmaptext_IsBitmapTextGameObject=function(e){return e instanceof dh},text_GetTextObjectType=function(e){return bitmaptext_IsBitmapTextGameObject(e)?2:text_IsTextGameObject(e)?0:1},GetTokenArray=function(e,i){var s;if(2===i)s=e.split("");else{s=[];for(var r,n=e.split(" "),a=0,o=n.length;a<o;a++)r=n[a],a<o-1?string_IsASCIIString(r)?s.push(r+" "):(s.push(...r.split("")),s.push(" ")):""!==r&&(string_IsASCIIString(r)?s.push(r):s.push(...r.split("")))}return s},WrapLine=function(e,i,s,r,n){if(i.length<=100){var a,o;if(e.measureText(i).width<=s)return n.push(i),n}for(var h=GetTokenArray(i,r),l=[],c=s,g=0,m=h.length;g<m;g++)a=h[g],(c-=o=e.measureText(a).width)<0&&(n.push(l.join("")),l.length=0,c=s-o),l.push(a);return l.length>0&&n.push(l.join("")),n},text_TextWrapByCharCallback=function(e,i){for(var s=[],r=e.split("\n"),n=i.style,a=n.wordWrapWidth,o=n.hasOwnProperty("wrapMode")?n.wrapMode:3,h=i.context,l=0,c=r.length;l<c;l++)WrapLine(h,r[l],a,o,s);return s},text_SetWrapMode=function(e,i){switch(text_GetTextObjectType(e)){case 0:switch("string"==typeof i&&(i=tW[i]||0),e.style.wrapMode=i,i){case 2:case 3:e.style.wordWrapCallback=text_TextWrapByCharCallback;break;default:e.style.wordWrapCallback=null}break;case 1:"string"==typeof i&&(i=tW[i]||0),e.style.wrapMode=i}},wrapexpandtext_WrapExpandText=function(e,i){return void 0===i&&(i=0),e._minWidth=i,e.runWidthWrap=e instanceof iO?function(i){return e.setFixedSize(i,0).runWordWrap(),e.minHeight=e.height,e}:bitmaptext_IsBitmapTextGameObject(e)?function(i){return e.setMaxWidth(i),e.minHeight=e.height,e}:function(i){var s=e.padding,r=i-s.left-s.right,n=e.style;return text_IsTextGameObject(e)?n.wordWrapWidth=r:(0===n.wrapMode&&(n.wrapMode=1),n.wrapWidth=r),n.maxLines=0,n.fixedWidth=i,n.fixedHeight=0,e.updateText(),e.minHeight=e.height,e},e};let dl=Phaser.Utils.Objects.GetValue;var dd=class extends dn{constructor(e,i){void 0===i&&(i={}),super(e,i),this.type="rexLabel";var s=dl(i,"background",void 0),r=dl(i,"icon",void 0),n=dl(i,"iconMask",void 0),a=dl(i,"text",void 0),o=dl(i,"action",void 0),h=dl(i,"actionMask",void 0),l=dl(i,"align",void 0);if(s&&this.addBackground(s),r){0===this.orientation?(a||o)&&(c={right:dl(i,"space.icon",0),top:dl(i,"space.iconTop",0),bottom:dl(i,"space.iconBottom",0),left:dl(i,"space.iconLeft",0)}):(a||o)&&(c={bottom:dl(i,"space.icon",0),left:dl(i,"space.iconLeft",0),right:dl(i,"space.iconRight",0),top:dl(i,"space.iconTop",0)});var c,g=dl(i,"squareFitIcon",!1)?1:0;if(this.add(r,{proportion:0,padding:c,fitRatio:g}),n&&(n=mask_AddChildMask.call(this,r,r,1)),!g){var m=dl(i,"iconSize",void 0);this.setIconSize(dl(i,"iconWidth",m),dl(i,"iconHeight",m))}}if(a){var x,c,S,_=dl(i,"wrapText",!1);_&&(!0===_&&(_="word"),text_SetWrapMode(a,_),i.expandTextWidth=!0,wrapexpandtext_WrapExpandText(a));var k=dl(i,"space.text",0),E=dl(i,"expandTextWidth",!1),R=dl(i,"expandTextHeight",!1);0===this.orientation?(x=E?1:0,o&&(c={right:k}),S=R):(x=R?1:0,o&&(c={bottom:k}),S=E),this.add(a,{proportion:x,expand:S,padding:c})}if(o){c=0===this.orientation?{top:dl(i,"space.actionTop",0),bottom:dl(i,"space.actionBottom",0),right:dl(i,"space.actionRight",0)}:{left:dl(i,"space.actionLeft",0),right:dl(i,"space.actionRight",0),bottom:dl(i,"space.actionBottom",0)};var c,g=dl(i,"squareFitAction",!1)?1:0;if(this.add(o,{proportion:0,padding:c,fitRatio:g}),h&&(h=mask_AddChildMask.call(this,o,o,1)),!g){var j=dl(i,"actionSize");this.setActionSize(dl(i,"actionWidth",j),dl(i,"actionHeight",j))}}this.setChildrenAlignMode(l),this.addChildrenMap("background",s),this.addChildrenMap("icon",r),this.addChildrenMap("iconMask",n),this.addChildrenMap("text",a),this.addChildrenMap("action",o),this.addChildrenMap("actionMask",h)}};let dc=Phaser.Utils.Objects.GetValue;var CreateCanvas=function(e,i){var s=dc(i,"canvas"),r=dc(s,"width",128),n=dc(s,"height",128),a=new nm(e,0,0,r,n);e.add.existing(a);var o=dc(s,"key"),h=dc(s,"frame"),l=dc(s,"fill");return void 0!==l?a.fill(l):void 0!==o&&a.loadTexture(o,h),a.setTexture=a.loadTexture.bind(a),a},methods_CreateImageBox=function(e,i){var s=new ImageBox_ImageBox(e,{scaleUp:dc(i,"scaleUpIcon",!1),background:dc(i,"iconBackground"),image:CreateCanvas(e,i)});return e.add.existing(s),s};let du=Phaser.Utils.Objects.GetValue;var methods_GetClickTarget=function(e,i){var s=du(i,"clickTarget",this);return"string"==typeof s&&(s=e.getElement(s)),s};let dp=Phaser.Utils.Objects.GetValue;var methods_CreateClickBehavior=function(e,i){var s=methods_GetClickTarget(e,i);if(s){var r=dp(i,"click"),n=new no(s,r);return n.on("click",e.open,e),n}},dg={accept:"image/*",multiple:!1},methods_OnSelectFile=function(e,i){if(0!==i.length){var s=e.childrenMap.icon,r=s.image,n=i[0];return r.loadFromFilePromise(n).then(function(){return s.scaleImage(),e.emit("select",n,e),Promise.resolve(n)})}},methods_CreateFileChooser=function(e,i){var s=e.scene,r=new FileChooser_FileChooser(s,dg);return s.add.existing(r),e.pin(r),r.on("change",function(){methods_OnSelectFile(e,r.files)}),r},dv={getFileName:function(e){if(!e)return null;var i=e.name;return i.substr(0,i.lastIndexOf("."))},saveTexture:function(e){return this.childrenMap.canvas.generateTexture(e),this}};Object.assign(dv,{async openPromise(){var e=this;return filechooser_Open(this.scene.game,dg).then(function(i){return methods_OnSelectFile(e,i.files)})},open(){return this.openPromise(),this},setClickOpenEnable(e){return void 0===e&&(e=!0),this.clickBehavior&&this.clickBehavior.setEnable(e),this.fileChooser&&this.fileChooser.setOpenEnable(e),this}});let df=Phaser.Utils.Objects.GetValue;let ImageInputLabel_ImageInputLabel=class ImageInputLabel_ImageInputLabel extends dd{constructor(e,i){var s=methods_CreateImageBox(e,i);i.icon=s,super(e,i),this.type="rexImageFileInputLabel";var r=this.iconWidth,n=this.iconWidth;void 0!==r&&void 0!==n&&s.resize(r,n),this.clickTarget=methods_GetClickTarget(this,i),this.clickTarget&&(df(i,"domButton",!0)?this.fileChooser=methods_CreateFileChooser(this,i):this.clickBehavior=methods_CreateClickBehavior(this,i)),this.addChildrenMap("canvas",s.image),this.addChildrenMap("iconBackground",s.background),this.addChildrenMap("fileChooser",this.fileChooser)}postLayout(){this.fileChooser&&(this.fileChooser.syncTo(this.clickTarget),this.resetChildState(this.fileChooser))}};Object.assign(ImageInputLabel_ImageInputLabel.prototype,dv),ObjectFactory.register("imageInputLabel",function(e){var i=new ImageInputLabel_ImageInputLabel(this.scene,e);return this.scene.add.existing(i),i}),(0,k.Z)(window,"RexPlugins.UI.ImageInputLabel",ImageInputLabel_ImageInputLabel);var dm=class extends i0{constructor(e,i){return super(e),new Proxy(this,this)}get(e,i){if(object_HasProperty(e,i))return e[i];var s=e.parent;if(object_HasProperty(s,i))return s[i]}set(e,i,s){return object_HasProperty(e,i)?e[i]=s:object_HasProperty(e.parent,i)&&(e.parent[i]=s),!0}get key(){return this.parent.texture.key}set key(e){this.parent.setTexture(e,this.frame)}get frame(){return this.parent.frame.name}set frame(e){this.parent.setFrame(e)}get scale(){return this.parent.scaleX}set scale(e){this.parent.setScale(e)}};let db=Phaser.Utils.Objects.GetValue;var ExtractStyle=function(e,i,s){var r=object_ExtractByPrefix(e,i);if(s)for(var n in r)s.hasOwnProperty(n)&&(r[s[n]]=r[n],delete r[n]);return r},SetStateEnableMethod=function(e,i){void 0===i&&(i=!0);var s=`${e}State`,r=`${e}Style`,n=`${e}StyleSave`;this[s]!==i&&(this[s]=i,i?this[n]=this.applyStyle(this[r]):(this.applyStyle(this[n]),this[n]=void 0))},dy=class extends i0{constructor(e,i){super(e,i),this.style=db(i,"style",this);var s=db(i,"propertiesMap");this.activeStyle=ExtractStyle(i,"active",s),this.hoverStyle=ExtractStyle(i,"hover",s),this.disableStyle=ExtractStyle(i,"disable",s),this.onModifyStyle=db(i,"onModifyStyle")}getStyle(e){return object_GetPartialData(this.style,e)}modifyStyle(e){for(var i in e)this.style[i]=e[i];return this.onModifyStyle&&this.onModifyStyle(this.parent,e),this}applyStyle(e){if(e){var i=this.getStyle(e);return object_IsKeyValueEqual(i,e)?void 0:(this.modifyStyle(e),i)}}setActiveState(e){return SetStateEnableMethod.call(this,"active",e),this}setHoverState(e){return SetStateEnableMethod.call(this,"hover",e),this}setDisableState(e){return SetStateEnableMethod.call(this,"disable",e),this}},dC={addStyleManager(e){return this.styleManager=new dy(this,e),this},setActiveState(e){return this.styleManager.setActiveState(e),this},setHoverState(e){return this.styleManager.setHoverState(e),this},setDisableState(e){return this.styleManager.setDisableState(e),this}};let dx=Phaser.GameObjects.Image,dS=Phaser.Utils.Objects.GetValue;let StatesImage_StatesImage=class StatesImage_StatesImage extends dx{constructor(e,i){void 0===i&&(i={}),super(e,dS(i,"x",0),dS(i,"y",0),dS(i,"key",""),dS(i,"frame",void 0)),this.type="rexStatesImage";var s=dS(i,"effects",!0);s&&effectproperties_AddEffectProperties(this,s),this.style=new dm(this,i),i.style=this.style,this.addStyleManager(i),delete i.style}};Object.assign(StatesImage_StatesImage.prototype,dC),ObjectFactory.register("statesImage",function(e){var i=new StatesImage_StatesImage(this.scene,e);return this.scene.add.existing(i),i}),(0,k.Z)(window,"RexPlugins.UI.StatesImage",StatesImage_StatesImage);let StatesRoundRectangle_StatesRoundRectangle=class StatesRoundRectangle_StatesRoundRectangle extends tC{constructor(e,i){void 0===i&&(i={}),super(e,i),this.type="rexStatesRoundRectangleShape",i.style=this,i.propertiesMap=d_,this.addStyleManager(i),delete i.style,delete i.propertiesMap}};let d_={color:"fillColor",alpha:"fillAlpha",strokeWidth:"lineWidth"};Object.assign(StatesRoundRectangle_StatesRoundRectangle.prototype,dC),ObjectFactory.register("statesRoundRectangle",function(e){var i=new StatesRoundRectangle_StatesRoundRectangle(this.scene,e);return this.scene.add.existing(i),i}),(0,k.Z)(window,"RexPlugins.UI.StatesRoundRectangle",StatesRoundRectangle_StatesRoundRectangle);var dw=class extends i0{constructor(e,i){return super(e),new Proxy(this,this)}get(e,i){if(object_HasProperty(e,i))return e[i];var s=e.parent;if(object_HasProperty(s,i))return s[i]}set(e,i,s){return object_HasProperty(e,i)?e[i]=s:object_HasProperty(e.parent,i)&&(e.parent[i]=s),!0}get key(){return this.parent.texture.key}set key(e){this.key!==e&&this.parent.setTexture(e,this.frame)}get frame(){return this.parent.frame.name}set frame(e){this.frame!==e&&this.parent.setFrame(e)}};let dP=Phaser.GameObjects.NineSlice,dk=Phaser.Utils.Objects.GetValue;let StatesNineSlice_StatesNineSlice=class StatesNineSlice_StatesNineSlice extends dP{constructor(e,i){void 0===i&&(i={}),super(e,dk(i,"x",0),dk(i,"y",0),dk(i,"key",null),dk(i,"frame",null),dk(i,"width",0),dk(i,"height",0),dk(i,"leftWidth",0),dk(i,"rightWidth",0),dk(i,"topHeight",0),dk(i,"bottomHeight",0)),this.type="rexStatesNineSlice";var s=dk(i,"effects",!0);s&&effectproperties_AddEffectProperties(this,s),this.style=new dw(this,i),i.style=this.style,this.addStyleManager(i),delete i.style}};Object.assign(StatesNineSlice_StatesNineSlice.prototype,dC),ObjectFactory.register("statesNineSlice",function(e){var i=new StatesNineSlice_StatesNineSlice(this.scene,e);return this.scene.add.existing(i),i}),(0,k.Z)(window,"RexPlugins.UI.StatesNineSlice",StatesNineSlice_StatesNineSlice);var dT=class extends i0{constructor(e,i){return super(e),new Proxy(this,this)}get(e,i){if(object_HasProperty(e,i))return e[i];var s=e.parent;if(object_HasProperty(s,i))return s[i]}set(e,i,s){return object_HasProperty(e,i)?e[i]=s:object_HasProperty(e.parent,i)&&(e.parent[i]=s),!0}get key(){return this.parent.textureKey}set key(e){this.key!==e&&this.parent.setBaseTexture(e,this.baseFrameName)}get frame(){return this.parent.baseFrameName}set frame(e){this.frame!==e&&this.parent.setBaseTexture(this.parent.textureKey,e)}};let dO=Phaser.Utils.Objects.GetValue;let StatesNinePatch_StatesNinePatch=class StatesNinePatch_StatesNinePatch extends _{constructor(e,i){void 0===i&&(i={}),super(e,i),this.type="rexStatesNinePatch";var s=dO(i,"effects",!0);s&&effectproperties_AddEffectProperties(this,s),this.style=new dT(this,i),i.style=this.style,this.addStyleManager(i),delete i.style}};Object.assign(StatesNinePatch_StatesNinePatch.prototype,dC),ObjectFactory.register("statesNinePatch",function(e){var i=new StatesNinePatch_StatesNinePatch(this.scene,e);return this.scene.add.existing(i),i}),(0,k.Z)(window,"RexPlugins.UI.StatesNinePatch",StatesNinePatch_StatesNinePatch);let dM=Phaser.GameObjects.Text,dE=Phaser.Utils.Objects.GetValue;let StatesText_StatesText=class StatesText_StatesText extends dM{constructor(e,i){void 0===i&&(i={}),super(e,dE(i,"x",0),dE(i,"y",0),dE(i,"text",""),i),this.type="rexStatesText",i.style=this.style,i.onModifyStyle=function(e,i){var s=i.hasOwnProperty("fontStyle")||i.hasOwnProperty("fontSize")||i.hasOwnProperty("fontFamily");e.style.update(s)},this.addStyleManager(i),delete i.style}};Object.assign(StatesText_StatesText.prototype,dC),ObjectFactory.register("statesText",function(e){var i=new StatesText_StatesText(this.scene,e);return this.scene.add.existing(i),i}),(0,k.Z)(window,"RexPlugins.UI.StatesText",StatesText_StatesText);var dR=class extends i0{constructor(e,i){return super(e),new Proxy(this,this)}get(e,i){if(object_HasProperty(e,i))return e[i];var s=e.parent;if(object_HasProperty(s,i))return s[i]}set(e,i,s){return object_HasProperty(e,i)?e[i]=s:object_HasProperty(e.parent,i)&&(e.parent[i]=s),!0}get key(){return this.parent.texture.key}set key(e){this.parent.setTexture(e,this.frame)}get fontSize(){return this.parent.fontSize}set fontSize(e){this.parent.setFontSize(e)}get tint(){return this.parent.tintTopLeft}set tint(e){this.parent.setTint(e)}get letterSpacing(){return this.parent.letterSpacing}set letterSpacing(e){this.parent.setLetterSpacing(e)}get lineSpacing(){return this.parent.lineSpacing}set lineSpacing(e){this.parent.setLineSpacing(e)}};let dL=Phaser.GameObjects.BitmapText,dB=Phaser.Utils.Objects.GetValue;let StatesBitmapText_StatesBitmapText=class StatesBitmapText_StatesBitmapText extends dL{constructor(e,i){void 0===i&&(i={});var s=dB(i,"x",0),r=dB(i,"y",0),n=dB(i,"font",""),a=dB(i,"fontSize",!1),o=dB(i,"align",0),h=dB(i,"tint");super(e,s,r,n,"",a,o),this.type="rexStatesBitmapText",void 0!==h&&this.setTint(h);var l=dB(i,"effects",!0);l&&effectproperties_AddEffectProperties(this,l),this.style=new dR(this,i),i.style=this.style,this.addStyleManager(i),delete i.style}};Object.assign(StatesBitmapText_StatesBitmapText.prototype,dC),ObjectFactory.register("statesBitmapText",function(e){var i=new StatesBitmapText_StatesBitmapText(this.scene,e);return this.scene.add.existing(i),i}),(0,k.Z)(window,"RexPlugins.UI.StatesBitmapText",StatesBitmapText_StatesBitmapText);var FillConfig=function(e,i){void 0===i&&(i={}),void 0===i.options&&(i.options={});var s=i.options;s.responsive=!1,s.maintainAspectRatio=!1,s.hasOwnProperty("devicePixelRatio")||(s.devicePixelRatio=1);var r=!1;void 0===s.animation?s.animation={}:!1===s.animation&&(r=!0,s.animation={});var n=s.animation;r&&(n.duration=0);var a=n.onProgress;n.onProgress=function(i){a&&a(i),e.needRedraw()};var o=n.onComplete;return n.onComplete=function(i){o&&o(i),e.needRedraw()},i};let Chart_Chart=class Chart_Chart extends nm{constructor(e,i,s,r,n,a){super(e,i,s,r,n),this.type="rexChart",this.chart=void 0,void 0!==a&&this.setChart(a)}destroy(e){this.scene&&(this.chart&&(this.chart.destroy(),this.chart=void 0),super.destroy(e))}resize(e,i){if(e===this.width&&i===this.height)return this;if(super.resize(e,i),this.chart){var s=this.chart;s.height=this.canvas.height,s.width=this.canvas.width,s.aspectRatio=s.height?s.width/s.height:null,s.update()}return this}};Object.assign(Chart_Chart.prototype,{setChart:function(e){return window.Chart?(this.chart&&this.chart.destroy(),this.chart=new Chart(this.context,FillConfig(this,e))):console.error(`Can not find chartjs! Load chartjs in preload stage.
scene.load.script('chartjs', 'https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.8.0/Chart.min.js');`),this},getChartDataset:function(e){if(void 0!==this.chart){if("string"!=typeof e)return this.chart.data.datasets[e];for(var i,s=this.chart.data.datasets,r=0,n=s.length;r<n;r++)if((i=s[r]).label===e)return i}},getChartData:function(e,i){var s=this.getChartDataset(e);if(void 0!==s&&("string"!=typeof i||-1!==(i=this.chart.data.labels.indexOf(i))))return s.data[i]},setChartData:function(e,i,s){if(void 0===this.chart)return this;var r=this.getChartDataset(e);return"string"==typeof i&&-1===(i=this.chart.data.labels.indexOf(i))||(r.data[i]=s),this},updateChart:function(){return void 0===this.chart||this.chart.update(),this}}),ObjectFactory.register("chart",function(e,i,s,r,n){var a=new Chart_Chart(this.scene,e,i,s,r,n);return this.scene.add.existing(a),a}),(0,k.Z)(window,"RexPlugins.UI.Chart",Chart_Chart),ObjectFactory.register("container",function(e,i,s,r,n){var a=new af(this.scene,e,i,s,r,n);return this.scene.add.existing(a),a}),(0,k.Z)(window,"RexPlugins.UI.Container",af),ObjectFactory.register("sizer",function(e,i,s,r,n,a){var o=new dr(this.scene,e,i,s,r,n,a);return this.scene.add.existing(o),o}),(0,k.Z)(window,"RexPlugins.UI.Sizer",dr);var Sum_Add=function(e,i){return e+i},math_Sum=function(){return Array.prototype.reduce.call(arguments,Sum_Add,0)};let dI=Phaser.Utils.Objects.IsPlainObject,dG=Phaser.Utils.Objects.GetValue,dD=Phaser.Display.Align.CENTER;var GetEmptyCellIndex=function(e,i,s,r,n){if("number"==typeof e||"number"==typeof i){if(void 0===e){for(var a,o=0;o<r;o++)if(!s[a=i*r+o])return a}else if(void 0===i){for(var o=0;o<n;o++)if(!s[a=o*r+e])return a}else{var a=i*r+e;if(!s[a])return a}}else if(!0===i){for(var o=0;o<r;o++)for(var h=0;h<n;h++)if(!s[a=h*r+o])return a}else for(var o=0,l=s.length;o<l;o++)if(!s[o])return o;return null},array_Fill=function(e,i,s,r){void 0===s&&(s=0),void 0===r&&(r=e.length-1);for(var n=s;n<=r;n++)e[n]=i;return e};let dj=Phaser.Utils.Objects.GetValue;var InseryEmptyRow=function(e,i,s){void 0===i&&(i=this.rowProportions[0]||0),void 0===s&&(s=this.space.row[0]||0),this.rowCount+=1,this.gridCount+=this.columnCount;for(var r=[e*this.columnCount,0],n=0;n<this.columnCount;n++)r.push(null);return this.sizerChildren.splice.apply(this.sizerChildren,r),this.rowProportions.push(i),this.rowHeight.length+=1,this.space.row.splice(e,0,s),this},InsertEmptyColumn=function(e,i,s){void 0===i&&(i=this.columnProportions[0]||0),void 0===s&&(s=this.space.column[0]||0),this.columnCount+=1,this.gridCount+=this.rowCount;for(var r=this.rowCount-1;r>=0;r--){var n=r*this.columnCount+e;this.sizerChildren.splice(n,0,null)}return this.columnProportions.push(i),this.columnWidth.length+=1,this.space.column.splice(e,0,s),this},dA={getChildrenWidth:function(e){if(this.rexSizer.hidden)return 0;void 0===e&&(e=!0);var i,s,r,n,a,o=0,h=this.sizerChildren,l=!1;this.totalColumnProportions;for(var c=0;c<this.columnCount;c++){if(n=this.columnProportions[c],a=0,0===n||e){for(var g=0;g<this.rowCount;g++)(i=h[g*this.columnCount+c])&&!i.rexSizer.hidden&&(void 0===(r=this.getChildWidth(i))&&(0===n||this.hasColumnProportion0Child?l=!0:r=0),l||(r+=(s=i.rexSizer.padding).left+s.right,a=Math.max(a,r)));l||(o+=a)}!l&&e&&(this.columnWidth[c]=a)}if(!l){var m=this.space,x=Math.max(m.indentLeftOdd,m.indentLeftEven);return o+math_Sum(m.left,x,...m.column,m.right)}},getChildrenHeight:function(e){if(this.rexSizer.hidden)return 0;void 0===e&&(e=!0);var i,s,r,n,a,o=0,h=this.sizerChildren,l=!1;this.totalRowProportions;for(var c=0;c<this.rowCount;c++){if(n=this.rowProportions[c],a=0,0===n||e){for(var g=0;g<this.columnCount;g++)(i=h[c*this.columnCount+g])&&!i.rexSizer.hidden&&(void 0===(r=this.getChildHeight(i))&&(0===n||this.hasRowProportion0Child?l=!0:r=0),l||(r+=(s=i.rexSizer.padding).top+s.bottom,a=Math.max(a,r)));l||(o+=a)}!l&&e&&(this.rowHeight[c]=a)}if(!l){var m=this.space,x=Math.max(m.indentTopOdd,m.indentTopEven);return o+math_Sum(m.top,x,...m.row,m.bottom)}},getExpandedChildWidth:function(e,i){var s,r=e.rexSizer;if(r.expandWidth){var n=r.padding;s=i-n.left-n.right}return s},getExpandedChildHeight:function(e,i){var s,r=e.rexSizer;if(r.expandHeight){var n=r.padding;s=i-n.top-n.bottom}return s},getChildrenSizers:function(e){void 0===e&&(e=[]);for(var i,s=this.sizerChildren,r=0,n=s.length;r<n;r++)(i=s[r])&&i.isRexSizer&&e.push(i);return e},preLayout:function(){return this._totalColumnProportions=void 0,this._totalRowProportions=void 0,this.hasColumnProportion0Child=!1,this.hasRowProportion0Child=!1,this.proportionWidthLength=void 0,this.proportionHeightLength=void 0,basesizer_PreLayout.call(this),this},layoutChildren:function(){for(var e,i,s,r,n,a,o,h,l,c,g,m,x=this.innerLeft,S=this.innerTop,_=this.space.column,k=this.space.row,E=this.space.indentLeftOdd,R=this.space.indentLeftEven,j=this.space.indentTopOdd,Y=this.space.indentTopEven,X=0;X<this.rowCount;X++){h=this.getRowHeight(X),m=x+(X%2?R:E);for(var $=0;$<this.columnCount;$++){if(o=this.getColumnWidth($),!(l=this.getChildAt($,X))||l.rexSizer.hidden){m+=o+_[$];continue}utils_PreLayoutChild.call(this,l),n=this.getExpandedChildWidth(l,o),a=this.getExpandedChildHeight(l,h),l.isRexSizer?(l.runLayout(this,n,a),utils_CheckSize(l,this)):size_ResizeGameObject(l,n,a),e=m+(g=(c=l.rexSizer).padding).left,s=o-g.left-g.right,i=S+($%2?Y:j)+g.top,r=h-g.top-g.bottom,utils_LayoutChild.call(this,l,e,i,s,r,c.align),m+=o+_[$]}S+=h+k[X]}},resolveWidth:function(e){var e=basesizer_ResolveWidth.call(this,e);if(void 0!==e&&void 0===this.proportionWidthLength){var i=this.totalColumnProportions;if(i>0){var s=e-this.getChildrenWidth(!1);s>=0&&(this.proportionWidthLength=s/i)}else this.proportionWidthLength=0}return e},resolveHeight:function(e){var e=basesizer_ResolveHeight.call(this,e);if(void 0!==e&&void 0===this.proportionHeightLength){var i=this.totalRowProportions;if(i>0){var s=e-this.getChildrenHeight(!1);s>=0&&(this.proportionHeightLength=s/i)}else this.proportionHeightLength=0}return e},resolveChildrenWidth:function(e){var i,s,r,n;for(var a in this.sizerChildren)(i=this.sizerChildren[a])&&i.isRexSizer&&!i.ignoreLayout&&(n=this.getColumnWidth(parseInt(a)%this.columnCount),s=this.getExpandedChildWidth(i,n),void 0===(r=i.resolveWidth(s))&&(r=s),i.resolveChildrenWidth(r))},resolveChildrenHeight:function(e){var i,s,r,n;for(var a in this.sizerChildren)(i=this.sizerChildren[a])&&i.isRexSizer&&!i.ignoreLayout&&(n=this.getRowHeight(Math.floor(parseInt(a)/this.rowCount)),s=this.getExpandedChildHeight(i,n),void 0===(r=i.resolveHeight(s))&&(r=s),i.resolveChildrenHeight(r))},runWidthWrap:function(e){var i,s,r,n;for(var a in this.sizerChildren)(i=this.sizerChildren[a])&&(!i.isRexSizer||!i.ignoreLayout)&&i.runWidthWrap&&(n=this.getColumnWidth(parseInt(a)%this.columnCount),s=this.getExpandedChildWidth(i,n),i.isRexSizer&&void 0===(r=i.resolveWidth(s))&&(r=s),i.runWidthWrap(r));return this},runHeightWrap:function(e){var i,s,r,n;for(var a in this.sizerChildren)(i=this.sizerChildren[a])&&(!i.isRexSizer||!i.ignoreLayout)&&i.runHeightWrap&&(n=this.getRowHeight(Math.floor(parseInt(a)/this.rowCount)),s=this.getExpandedChildHeight(i,n),i.isRexSizer&&void 0===(r=i.resolveHeight(s))&&(r=s),i.runHeightWrap(r));return this},resetGrid:function(e,i,s,r,n){if(void 0===s&&(s=0),void 0===r&&(r=0),this.columnCount=e,this.rowCount=i,this.gridCount=e*i,this.removeAll(),this.sizerChildren.length=e*i,array_Fill(this.sizerChildren,null),this.columnProportions=[],this.columnProportions.length=e,"number"==typeof s)array_Fill(this.columnProportions,s);else for(var a=0;a<e;a++)this.columnProportions[a]=s[a]||0;if(this.rowProportions=[],this.rowProportions.length=i,"number"==typeof r)array_Fill(this.rowProportions,r);else for(var a=0;a<i;a++)this.rowProportions[a]=r[a]||0;this.columnWidth=[],this.columnWidth.length=e,this.rowHeight=[],this.rowHeight.length=i,this.setColumnSpace(dj(n,"column",0)),this.setRowSpace(dj(n,"row",0));var o=this.scene,h=this.createCellContainerCallback;if(h)for(var l=0,c=this.rowCount;l<c;l++)for(var g=0,m=this.columnCount;g<m;g++){var x={column:g,row:l},S=h(o,g,l,x);S&&this.add(S,x)}return this},inseryEmptyRow:InseryEmptyRow,addEmptyRow:function(e,i){return InseryEmptyRow.call(this,this.rowCount,e,i),this},insertEmptyColumn:InsertEmptyColumn,addEmptyColumn:function(e,i){return InsertEmptyColumn.call(this,this.columnCount,e,i),this}};Object.assign(dA,{add:function(e,i,s,r,n,a,o){if(utils_AddChild.call(this,e),dI(i)){var h=i;i=dG(h,"column",void 0),s=dG(h,"row",void 0),r=dG(h,"align",dD),n=dG(h,"padding",0),a=dG(h,"expand",!1),o=dG(h,"key",void 0)}var l=GetEmptyCellIndex(i,s,this.sizerChildren,this.columnCount,this.rowCount);if(null===l){if("number"==typeof i&&"number"==typeof s)return this;!0===s||"number"==typeof s?this.addEmptyColumn():this.addEmptyRow(),l=GetEmptyCellIndex(i,s,this.sizerChildren,this.columnCount,this.rowCount)}"string"==typeof r&&(r=ab[r]),void 0===r&&(r=dD),void 0===n&&(n=0),void 0===a&&(a=!0);var h=this.getSizerConfig(e);return h.align=r,h.padding=bounds_GetBoundsConfig(n),dI(a)?(h.expandWidth=dG(a,"width",!1),h.expandHeight=dG(a,"height",!1)):(h.expandWidth=a,h.expandHeight=a),this.sizerChildren[l]=e,void 0!==o&&this.addChildrenMap(o,e),this}},{remove(e,i){if(this.getParentSizer(e)!==this)return this;var s=this.sizerChildren.indexOf(e);return -1!==s&&(this.sizerChildren[s]=null),utils_RemoveChild.call(this,e,i),this},removeAt(e,i,s){var r=this.getChildAt(e,i);return r&&this.remove(r,s),this},removeAll(e){for(var i=this.sizerChildren.length-1;i>=0;i--){var s=this.sizerChildren[i];s&&this.remove(s,e)}return this},clear(e){return array_Fill(this.sizerChildren,null),utils_ClearChildren.call(this,e),this}},{setColumnSpace(e){if(this.space.column||(this.space.column=[]),this.space.column.length=this.columnCount-1,"number"==typeof e)array_Fill(this.space.column,e);else for(var i=0,s=this.columnCount-1;i<s;i++)this.space.column[i]=e[i]||0;return this},setRowSpace(e){if(this.space.row||(this.space.row=[]),this.space.row.length=this.rowCount-1,"number"==typeof e)array_Fill(this.space.row,e);else for(var i=0,s=this.rowCount-1;i<s;i++)this.space.row[i]=e[i]||0;return this},setIndentLeft(e,i){return this.space.indentLeftOdd=e,this.space.indentLeftEven=i,this},setIndentTop(e,i){return this.space.indentTopOdd=e,this.space.indentTopEven=i,this}});var gridsizer_GetTotalColumnProportions=function(){for(var e,i=0,s=0;s<this.columnCount;s++)(e=this.columnProportions[s])>0?i+=e:0===e&&(this.hasColumnProportion0Child=!0);return i},gridsizer_GetTotalRowProportions=function(){for(var e,i=0,s=0;s<this.rowCount;s++)(e=this.rowProportions[s])>0?i+=e:0===e&&(this.hasRowProportion0Child=!0);return i};let dF=Phaser.Utils.Objects.IsPlainObject,dz=Phaser.Utils.Objects.GetValue;let GridSizer_GridSizer=class GridSizer_GridSizer extends hD{constructor(e,i,s,r,n,a,o,h,l,c){dF(i)?(i=dz(c=i,"x",0),s=dz(c,"y",0),r=dz(c,"width",void 0),n=dz(c,"height",void 0),a=dz(c,"column",c.col||0),o=dz(c,"row",0),h=dz(c,"columnProportions",0),l=dz(c,"rowProportions",0)):dF(r)?(r=dz(c=r,"width",void 0),n=dz(c,"height",void 0),a=dz(c,"column",c.col||0),o=dz(c,"row",0),h=dz(c,"columnProportions",0),l=dz(c,"rowProportions",0)):dF(a)?(a=dz(c=a,"column",c.col||0),o=dz(c,"row",0),h=dz(c,"columnProportions",0),l=dz(c,"rowProportions",0)):dF(h)&&(h=dz(c=h,"columnProportions",0),l=dz(c,"rowProportions",0)),super(e,i,s,r,n,c),this.type="rexGridSizer",this.sizerChildren=[],this.addChildrenMap("items",this.sizerChildren),this.setCreateCellContainerCallback(dz(c,"createCellContainerCallback")),this.setIndentLeft(dz(c,"space.indentLeftOdd",0),dz(c,"space.indentLeftEven",0)),this.setIndentTop(dz(c,"space.indentTopOdd",0),dz(c,"space.indentTopEven",0)),this.resetGrid(a,o,h,l,dz(c,"space",void 0))}destroy(e){this.scene&&!this.ignoreDestroy&&(super.destroy(e),this.columnProportions=void 0,this.rowProportions=void 0,this.columnWidth=void 0,this.rowHeight=void 0,this.createCellContainerCallback=void 0)}setColumnProportion(e,i){return e>=this.columnProportions.length||(this.columnProportions[e]=i),this}setRowProportion(e,i){return e>=this.rowProportions.length||(this.rowProportions[e]=i),this}get totalColumnProportions(){return void 0===this._totalColumnProportions&&(this._totalColumnProportions=gridsizer_GetTotalColumnProportions.call(this)),this._totalColumnProportions}get totalRowProportions(){return void 0===this._totalRowProportions&&(this._totalRowProportions=gridsizer_GetTotalRowProportions.call(this)),this._totalRowProportions}getChildAt(e,i){return this.sizerChildren[i*this.columnCount+e]}childToGridIndex(e,i){if(!e)return null;var s=this.sizerChildren.indexOf(e);return -1===s?null:(void 0===i&&(i={}),i.x=s%this.columnCount,i.y=Math.floor(s/this.columnCount),i)}getColumnWidth(e){var i=this.columnProportions[e];return 0===i?this.columnWidth[e]:i*this.proportionWidthLength}getRowHeight(e){var i=this.rowProportions[e];return 0===i?this.rowHeight[e]:i*this.proportionHeightLength}setCreateCellContainerCallback(e){return this.createCellContainerCallback=e,this}};Object.assign(GridSizer_GridSizer.prototype,dA);var dW=GridSizer_GridSizer;ObjectFactory.register("gridSizer",function(e,i,s,r,n,a,o,h,l){var c=new dW(this.scene,e,i,s,r,n,a,o,h,l);return this.scene.add.existing(c),c}),(0,k.Z)(window,"RexPlugins.UI.GridSizer",dW);var GetJustifySpace=function(e,i,s,r){return i/e<=s?i/(r-1):0},fixwidthsizer_RunChildrenWrap=function(e){var i,s,r,n,a,o={lines:[],width:0,height:0},h=this.sizerChildren,l=this.space.item,c=this.space.line,g=this.space.indentLeftOdd,m=this.space.indentLeftEven,x=this.space.indentTopOdd,S=this.space.indentTopEven,_=0,k=o.lines,E=void 0;if(0===this.orientation){for(var R=0,j=h.length;R<j;R++){if("\n"===(i=h[R]))i=void 0,r=0,a=!0;else{if(i.rexSizer.hidden)continue;i.isRexSizer&&i.layout(),a=_<(r=this.getChildWidth(i)+((s=i.rexSizer.padding).left+s.right))||void 0===E}a&&(E&&(E.width=e-(_+l),o.width=Math.max(o.width,E.width),o.height+=E.height+c),E={children:[],width:0,height:0},k.push(E),_=e-(k.length%2?g:m)),_-=r+l,i&&(E.children.push(i),n=this.getChildHeight(i)+((s=i.rexSizer.padding).top+s.bottom),E.height=Math.max(E.height,n))}E&&(E.width=e-(_+l),o.width=Math.max(o.width,E.width),o.height+=E.height),o.height+=Math.max(x,S)}else{for(var R=0,j=h.length;R<j;R++){if("\n"===(i=h[R]))i=void 0,r=0,a=!0;else{if(i.rexSizer.hidden)continue;i.isRexSizer&&i.layout(),a=_<(n=this.getChildHeight(i)+((s=i.rexSizer.padding).top+s.bottom))||void 0===E}a&&(E&&(E.height=e-(_+l),o.height=Math.max(o.height,E.height),o.width+=E.width+c),E={children:[],width:0,height:0},k.push(E),_=e-(k.length%2?x:S)),_-=n+l,i&&(E.children.push(i),r=this.getChildWidth(i)+((s=i.rexSizer.padding).left+s.right),E.width=Math.max(E.width,r))}E&&(E.height=e-(_+l),o.height=Math.max(o.height,E.height),o.width+=E.width),o.width+=Math.max(g,m)}return o};let dV=Phaser.Math.Distance.Between;var fixwidthsizer_GetNearestChildIndex=function(e,i){var s=this.sizerChildren;if(0===s.length)return -1;for(var r=-1,n=1/0,a=0,o=s.length;a<o;a++){var h=s[a];if(!(Math.abs(h.centerY-i)>h.height/2)){var l=dV(h.left,h.centerY,e,i);n>l&&(n=l,r=a);var c=s[a+1];if(!c||c.y!==h.y){var l=dV(h.right,h.centerY,e,i);n>l&&(n=l,r=a+1)}}}return r};let dY=Phaser.Utils.Objects.IsPlainObject,dX=Phaser.Utils.Objects.GetValue,dH=Phaser.Display.Align.CENTER;var fixwidthsizer_AddChildMethods_Add=function(e,i,s,r){if("\n"===e)return this.addNewLine(),this;if(utils_AddChild.call(this,e),dY(i)){var n=i;i=dX(n,"padding",0),s=dX(n,"key",void 0),r=dX(n,"index",void 0)}void 0===i&&(i=0);var n=this.getSizerConfig(e);return n.align=dH,n.padding=bounds_GetBoundsConfig(i),void 0===r||r>=this.sizerChildren.length?this.sizerChildren.push(e):this.sizerChildren.splice(r,0,e),void 0!==s&&this.addChildrenMap(s,e),this};let dU=Phaser.Utils.Array.Remove;var dN={getChildrenWidth:function(e){var i;return this.rexSizer.hidden?0:(void 0===e&&(e=!0),void 0!==(i=0===this.orientation&&e?this.maxChildWidth:this.rexSizer.resolved?this.wrapResult.width:void 0))?i+this.space.left+this.space.right:void 0},getChildrenHeight:function(e){var i;return this.rexSizer.hidden?0:(void 0===e&&(e=!0),void 0!==(i=1===this.orientation&&e?this.maxChildHeight:this.rexSizer.resolved?this.wrapResult.height:void 0))?i+this.space.top+this.space.bottom:void 0},getChildrenSizers:function(e){void 0===e&&(e=[]);for(var i,s=this.sizerChildren,r=0,n=s.length;r<n;r++)"\n"!==(i=s[r])&&i.isRexSizer&&e.push(i);return e},preLayout:function(){return this._maxChildWidth=void 0,this._maxChildHeight=void 0,this.wrapResult=void 0,this.rexSizer.resolved=!1,basesizer_PreLayout.call(this),this},layoutChildren:function(){for(var e,i,s,r,n,a,o,h,l,c,g,m,x=0===this.orientation,S=x?this.innerWidth:this.innerHeight,_=this.justifyPercentage,k=this.space.item,E=this.space.line,R=this.space.indentLeftOdd,j=this.space.indentLeftEven,Y=this.space.indentTopOdd,X=this.space.indentTopEven,$=0,Z=this.innerLeft,q=this.innerTop,tt=this.wrapResult.lines,te=Z,ti=q,ts=0,tr=tt.length;ts<tr;ts++){switch(a=(n=tt[ts]).children,this.rtl&&a.reverse(),x?te=Z+(g=ts%2?j:R):ti=q+(m=ts%2?X:Y),o=S-(x?n.width:n.height),this.align){case 0:break;case 1:x?te+=o:ti+=o;break;case 2:x?te+=o/2:ti+=o/2;break;case 3:$=GetJustifySpace(S,o,_,a.length);break;case 4:0===($=GetJustifySpace(S,o,_,a.length))&&(x?te+=o:ti+=o);break;case 5:0===($=GetJustifySpace(S,o,_,a.length))&&(x?te+=o/2:ti+=o/2)}for(var tn=!0,to=0,th=a.length;to<th;to++)(h=a[to]).rexSizer.hidden||(c=(l=h.rexSizer).padding,utils_PreLayoutChild.call(this,h),x?e=te+c.left:i=ti+c.top,tn?tn=!1:x?e+=k:i+=k,s=GetDisplayWidth(h),r=GetDisplayHeight(h),x?(i=ti+(m=to%2?X:Y)+c.top,te=e+s+c.right+$):(e=te+(g=to%2?j:R)+c.left,ti=i+r+c.top+$),utils_LayoutChild.call(this,h,e,i,s,r,l.align));x?ti+=n.height+E:te+=n.width+E}},hasWidthWrap:function(){return 0===this.orientation||basesizer_HasWidthWrap.call(this)},runWidthWrap:function(e){if(!this.wrapResult&&0===this.orientation){var i=e-this.space.left-this.space.right;this.wrapResult=fixwidthsizer_RunChildrenWrap.call(this,i),this.rexSizer.resolved=!0,basesizer_RunWidthWrap.call(this,e)}},hasHeightWrap:function(){return 1===this.orientation||basesizer_HasHeightWrap.call(this)},runHeightWrap:function(e){if(!this.wrapResult&&1===this.orientation){var i=e-this.space.top-this.space.bottom;this.wrapResult=fixwidthsizer_RunChildrenWrap.call(this,i),this.rexSizer.resolved=!0,basesizer_RunHeightWrap.call(this,e)}}};Object.assign(dN,{add(e,i,s){if(object_IsArray(e))for(var r=0,n=e.length;r<n;r++)fixwidthsizer_AddChildMethods_Add.call(this,e[r],i);else fixwidthsizer_AddChildMethods_Add.call(this,e,i,s);return this},addNewLine(){return this.sizerChildren.push("\n"),this},insert(e,i,s,r){return fixwidthsizer_AddChildMethods_Add.call(this,i,s,r,e),this},insertAtPosition(e,i,s,r,n){var a=fixwidthsizer_GetNearestChildIndex.call(this,e,i);return -1===a&&(a=void 0),this.insert(a,s,r,n),this}},{remove(e,i){return this.getParentSizer(e)!==this||(dU(this.sizerChildren,e),utils_RemoveChild.call(this,e,i)),this},removeAll(e){for(var i=this.sizerChildren.length-1;i>=0;i--)this.remove(this.sizerChildren[i],e);return this},clear(e){return this.sizerChildren.length=0,utils_ClearChildren.call(this,e),this}});var fixwidthsizer_GetMaxChildWidth=function(e){void 0===e&&(e=this.sizerChildren);for(var i,s,r=0,n=!1,a=0,o=e.length;a<o;a++)"\n"!==(i=e[a])&&(void 0===(s=this.getChildWidth(i))&&(n=!0),n||(r=Math.max(s,r)));if(!n)return r},fixwidthsizer_GetMaxChildHeight=function(e){void 0===e&&(e=this.sizerChildren);for(var i,s,r=0,n=!1,a=0,o=e.length;a<o;a++)"\n"!==(i=e[a])&&(void 0===(s=this.getChildHeight(i))&&(n=!0),n||(r=Math.max(s,r)));if(!n)return r};let d$=Phaser.Utils.Objects.IsPlainObject,dZ=Phaser.Utils.Objects.GetValue;let FixWidthSizer_FixWidthSizer=class FixWidthSizer_FixWidthSizer extends hD{constructor(e,i,s,r,n,a){d$(i)?(i=dZ(a=i,"x",0),s=dZ(a,"y",0),r=dZ(a,"width",void 0),n=dZ(a,"height",void 0)):d$(r)&&(r=dZ(a=r,"width",void 0),n=dZ(a,"height",void 0)),super(e,i,s,r,n,a),this.type="rexFixWidthSizer",this.sizerChildren=[],this.setOrientation(dZ(a,"orientation",0)),this.setItemSpacing(dZ(a,"space.item",0)),this.setLineSpacing(dZ(a,"space.line",0)),this.setIntentLeft(dZ(a,"space.indentLeftOdd",0),dZ(a,"space.indentLeftEven",0)),this.setIntentTop(dZ(a,"space.indentTopOdd",0),dZ(a,"space.indentTopEven",0)),this.setAlign(dZ(a,"align",0)),this.setJustifyPercentage(dZ(a,"justifyPercentage",.25)),this.setRTL(dZ(a,"rtl",!1)),this.wrapResult=void 0,this.addChildrenMap("items",this.sizerChildren)}setOrientation(e){return this.orientation=utils_GetOrientationMode(e),this}setItemSpacing(e){return this.space.item=e,this}setLineSpacing(e){return this.space.line=e,this}setIntentLeft(e,i){return this.space.indentLeftOdd=e,this.space.indentLeftEven=i,this}setIntentTop(e,i){return this.space.indentTopOdd=e,this.space.indentTopEven=i,this}setAlign(e){return"string"==typeof e&&(e=dK[e]),this.align=e,this}setJustifyPercentage(e){return this.justifyPercentage=e,this}setRTL(e){return void 0===e&&(e=!0),this.rtl=e,this}get maxChildWidth(){return void 0===this._maxChildWidth&&(this._maxChildWidth=fixwidthsizer_GetMaxChildWidth.call(this)),this._maxChildWidth}get maxChildHeight(){return void 0===this._maxChildHeight&&(this._maxChildHeight=fixwidthsizer_GetMaxChildHeight.call(this)),this._maxChildHeight}};let dK={left:0,top:0,right:1,bottom:1,center:2,justify:3,"justify-left":3,"justify-top":3,"justify-right":4,"justify-bottom":4,"justify-center":5};Object.assign(FixWidthSizer_FixWidthSizer.prototype,dN);var dJ=FixWidthSizer_FixWidthSizer;ObjectFactory.register("fixWidthSizer",function(e,i,s,r,n){var a=new dJ(this.scene,e,i,s,r,n);return this.scene.add.existing(a),a}),(0,k.Z)(window,"RexPlugins.UI.FixWidthSizer",dJ),ObjectFactory.register("overlapSizer",function(e,i,s,r,n){var a=new h$(this.scene,e,i,s,r,n);return this.scene.add.existing(a),a}),(0,k.Z)(window,"RexPlugins.UI.OverlapSizer",h$),ObjectFactory.register("space",function(){return new l3(this.scene)}),(0,k.Z)(window,"RexPlugins.UI.Space",l3),ObjectFactory.register("label",function(e){var i=new dd(this.scene,e);return this.scene.add.existing(i),i}),(0,k.Z)(window,"RexPlugins.UI.Label",dd);let dq=["alpha","tint"];var build_DecorateGameObject=function(e,i){if(!i)return e;for(var s=0,r=dq.length;s<r;s++){var n=dq[s];n in i&&n in e&&(e[n]=i[n])}return e},build_CreateBackground=function(e,i){var s,r;switch(i&&(i.hasOwnProperty("$type")?s=i.$type:i.hasOwnProperty("leftWidth")?s="nineSlice":i.hasOwnProperty("key")&&(s="image")),s){case"image":r=new StatesImage_StatesImage(e,i);break;case"nineSlice":r=i.hasOwnProperty("stretchMode")?new StatesNinePatch_StatesNinePatch(e,i):new StatesNineSlice_StatesNineSlice(e,i);break;default:r=new StatesRoundRectangle_StatesRoundRectangle(e,i)}return build_DecorateGameObject(r,i),e.add.existing(r),r},dQ={v:0,vertical:0,y:0,h:1,horizontal:1,x:1,xy:2,vh:2},GetDefaultScrollMode=function(e){var i=!!e.sliderY||!!e.scrollerY,s=!!e.sliderX||!!e.scrollerX;return i&&s?2:i?0:s?1:0},utils_GetScrollMode=function(e,i){void 0===i&&(i="scrollMode"),e.hasOwnProperty(i)||(e[i]=GetDefaultScrollMode(e));var s=e[i];return"string"==typeof s&&(s=dQ[s]),s};let d0=Phaser.Utils.Objects.GetValue;var scrollable_AddChild=function(e,i,s){var r=d0(s,"child"),n=d0(r,"gameObject",void 0);if(n){var a=d0(s,"space.child",0);e.childMargin={};var o=e.childMargin,h={};if("number"==typeof a)switch(e.scrollMode){case 0:case 1:o.top=0,o.bottom=0,o.left=0,o.right=0;break;default:o.top=a,o.bottom=a,o.left=a,o.right=a}else switch(e.scrollMode){case 0:o.top=d0(a,"top",0),o.bottom=d0(a,"bottom",0),h.left=d0(a,"left",0),h.right=d0(a,"right",0);break;case 1:o.top=d0(a,"left",0),o.bottom=d0(a,"right",0),h.top=d0(a,"top",0),h.bottom=d0(a,"bottom",0);break;default:o.top=d0(a,"top",0),o.bottom=d0(a,"bottom",0),o.left=d0(a,"left",0),o.right=d0(a,"right",0)}i.add(n,{column:1,row:1,align:d0(r,"align","center"),padding:h,expand:{width:d0(r,"expandWidth",!0),height:d0(r,"expandHeight",!0)}})}e.addChildrenMap("child",n)};let d1=Phaser.Math.Percent;var slider_PositionToPercent=function(e,i,s){var r;return e.y===i.y?r=d1(s.x,e.x,i.x):e.x===i.x&&(r=d1(s.y,e.y,i.y)),r},d2={},slider_OnDragThumb=function(e,i,s){var r,n;this.enable&&(d2.x=i,d2.y=s,this.reverseAxis?(r=this.getEndPoint(),n=this.getStartPoint()):(r=this.getStartPoint(),n=this.getEndPoint()),this.value=slider_PositionToPercent(r,n,d2))},d5={},slider_OnTouchTrack=function(e,i,s){if(this.enable&&e.isDown){d5.x=e.worldX,d5.y=e.worldY,this.reverseAxis?(r=this.getEndPoint(),n=this.getStartPoint()):(r=this.getStartPoint(),n=this.getEndPoint());var r,n,a=slider_PositionToPercent(r,n,d5);this.stopEaseValue(),0===this.easeValueDuration||.1>Math.abs(this.value-a)?this.value=a:this.easeValueTo(a)}},d3={},slider_GetThumbAlignPoint=function(e,i){void 0===i&&(i=d3);var s=this.childrenMap.thumb,r=s.x,n=s.y;return actions_AlignIn(s,this.innerLeft,this.innerTop,this.innerWidth,this.innerHeight,e),i.x=s.x,i.y=s.y,s.x=r,s.y=n,i};let d7=Phaser.Display.Align.LEFT_CENTER,d6=Phaser.Display.Align.TOP_CENTER;var d4={};let d8=Phaser.Display.Align.RIGHT_CENTER,d9=Phaser.Display.Align.BOTTOM_CENTER;var ct={};let ce=Phaser.Math.Linear;var ci={};let cs=Phaser.Display.Align.LEFT_CENTER,cr=Phaser.Display.Align.TOP_CENTER,cn=Phaser.Display.Align.RIGHT_CENTER,co=Phaser.Display.Align.BOTTOM_CENTER,ch=Phaser.Utils.Objects.GetValue,cl=Phaser.Utils.Objects.IsPlainObject,cd=Phaser.Math.Clamp,cc=Phaser.Math.Snap.To;let Slider_Slider=class Slider_Slider extends ProgressBase(dr){constructor(e,i){super(e,i),this.type="rexSlider",this.bootProgressBase(i),this.reverseAxis=ch(i,"reverseAxis",!1);var s=ch(i,"background",void 0),r=ch(i,"track",void 0),n=ch(i,"indicator",void 0),a=ch(i,"thumb",void 0);s&&(cl(s)&&(s=build_CreateBackground(e,s)),this.addBackground(s)),r&&(cl(r)&&(r=build_CreateBackground(e,r)),this.add(r,{proportion:1,expand:!0,minWidth:0===this.orientation?0:void 0,minHeight:1===this.orientation?0:void 0})),n&&(cl(n)&&(n=build_CreateBackground(e,n)),this.pin(n)),a&&(cl(a)&&(a=build_CreateBackground(e,a)),this.pin(a));var o=ch(i,"input",0);switch("string"==typeof o&&(o=cu[o]),o){case 0:a&&(a.setInteractive(),this.scene.input.setDraggable(a),a.on("drag",slider_OnDragThumb,this).on("dragstart",function(e){this.eventEmitter.emit("inputstart",e)},this).on("dragend",function(e){this.eventEmitter.emit("inputend",e)},this));break;case 1:this.on("pointerdown",slider_OnTouchTrack,this).on("pointermove",slider_OnTouchTrack,this).on("pointerdown",function(e){this.eventEmitter.emit("inputstart",e)},this).on("pointerup",function(e){this.eventEmitter.emit("inputend",e)},this).on("pointerover",function(e){e.isDown&&this.eventEmitter.emit("inputstart",e)},this).on("pointerout",function(e){e.isDown&&this.eventEmitter.emit("inputend",e)},this).setInteractive()}this.addChildrenMap("background",s),this.addChildrenMap("track",r),this.addChildrenMap("indicator",n),this.addChildrenMap("thumb",a),this.setEnable(ch(i,"enable",void 0)),this.setGap(ch(i,"gap",void 0)),this.setValue(ch(i,"value",0),ch(i,"min",void 0),ch(i,"max",void 0))}setEnable(e){return void 0===e&&(e=!0),this.enable=e,this}setGap(e,i,s){return e&&void 0!==i&&(e/=s-i),this.gap=e,this}get value(){return this._value}set value(e){void 0!==this.gap&&(e=cc(e,this.gap));var i=this._value;this._value=cd(e,0,1),i!==this._value&&(this.updateThumb(this._value),this.updateIndicator(this._value),this.eventEmitter.emit("valuechange",this._value,i,this.eventEmitter))}postLayout(e,i,s){return this.updateThumb(),this.updateIndicator(),this}};let cu={pan:0,drag:0,click:1,none:-1};Object.assign(Slider_Slider.prototype,{getStartPoint:function(e){if(void 0===e&&(e=d4),this.childrenMap.thumb){var i=0===this.orientation?d7:d6;slider_GetThumbAlignPoint.call(this,i,e)}else 0===this.orientation?(e.x=this.innerLeft+1,e.y=this.centerY):(e.x=this.centerX,e.y=this.innerTop+1);return e},getEndPoint:function(e){if(void 0===e&&(e=ct),this.childrenMap.thumb){var i=0===this.orientation?d8:d9;slider_GetThumbAlignPoint.call(this,i,e)}else 0===this.orientation?(e.x=this.innerRight-1,e.y=this.centerY):(e.x=this.centerX,e.y=this.innerBottom-1);return e},updateThumb:function(e){var i,s,r,n,a,o,h=this.childrenMap.thumb;return void 0===h||(void 0===e&&(e=this.value),this.reverseAxis?(a=this.getEndPoint(),o=this.getStartPoint()):(a=this.getStartPoint(),o=this.getEndPoint()),i=e,s=a,r=o,void 0===(n=h)&&(n=ci),n.x=ce(s.x,r.x,i),n.y=ce(s.y,r.y,i),this.resetChildPositionState(h)),this},updateIndicator:function(e){var i,s,r=this.childrenMap.indicator;if(void 0===r)return this;void 0===e&&(e=this.value);var n=this.reverseAxis,a=this.childrenMap.thumb;if(a){if(0===this.orientation){var o=GetDisplayWidth(a);if(n){var h=a.x-o*a.originX;i=this.right-h}else{var h=a.x-o*a.originX;i=h+o-this.left}}else{var l=GetDisplayHeight(a);if(n){var c=a.y-l*a.originY;s=this.bottom-c}else{var c=a.y-l*a.originY;s=c+l-this.top}}}else 0===this.orientation?i=this.width*e:s=this.height*e;size_ResizeGameObject(r,i,s),in_QuickSet(r,this,n?0===this.orientation?cn:co:0===this.orientation?cs:cr),this.resetChildPositionState(r)}});let cp=Phaser.Utils.Objects.GetValue;var cg=class extends dr{constructor(e,i){super(e,i),this.type="rexScrollBar";var s,r,n=cp(i,"background",void 0),a=cp(i,"buttons",void 0),o=cp(a,"top",cp(a,"left",void 0)),h=cp(a,"bottom",cp(a,"right",void 0)),l=cp(i,"slider",void 0);if(n&&this.addBackground(n),o){this.add(o);var c=new oD(o);c.on("intouch",function(){if(this.enable){var e=r.reverseAxis?this.scrollStep:-this.scrollStep;this.value+=e}},this)}if(l&&(l.orientation=this.orientation,l.eventEmitter=this,l.value=null,s=0===this.orientation?void 0===cp(l,"width",void 0)?1:0:void 0===cp(l,"height",void 0)?1:0,r=new Slider_Slider(e,l),e.add.existing(r),this.add(r,{proportion:s})),h){this.add(h);var c=new oD(h);c.on("intouch",function(){if(this.enable){var e=r.reverseAxis?-this.scrollStep:this.scrollStep;this.value+=e}},this)}var g=[o,h];this.addChildrenMap("background",n),this.addChildrenMap("slider",r),this.addChildrenMap("buttons",g);var m=cp(i,"valuechangeCallback",null);if(null!==m){var x=cp(i,"valuechangeCallbackScope",void 0);this.on("valuechange",m,x)}this.setEnable(cp(i,"enable",void 0)),this.setValue(cp(i,"value",0)),this.setScrollStep(cp(a,"step",.01))}setScrollStep(e){return this.scrollStep=e,this}get enable(){return!!this.childrenMap.slider&&this.childrenMap.slider.enable}set enable(e){this.childrenMap.slider&&this.childrenMap.slider.setEnable(e)}setEnable(e){return void 0===e&&(e=!0),this.enable=e,this}get value(){return this.childrenMap.slider?this.childrenMap.slider.value:0}set value(e){this.childrenMap.slider&&(this.childrenMap.slider.value=e)}setValue(e,i,s){return this.childrenMap.slider&&this.childrenMap.slider.setValue(e,i,s),this}addValue(e,i,s){return this.childrenMap.slider&&this.childrenMap.slider.addValue(e,i,s),this}getValue(e,i){return this.childrenMap.slider?this.childrenMap.slider.getValue(e,i):0}easeValueTo(e,i,s){return this.childrenMap.slider&&this.childrenMap.slider.easeValueTo(e,i,s),this}stopEaseValue(){return this.childrenMap.slider&&this.childrenMap.slider.stopEaseValue(),this}setEaseValueDuration(e){return this.childrenMap.slider&&this.childrenMap.slider.setEaseValueDuration(e),this}setEaseValueFunction(e){return this.childrenMap.slider&&this.childrenMap.slider.setEaseValueFunction(e),this}},scrollable_CreateScrollbar=function(e,i){void 0===i&&(i={});var s=object_Clone(i);(i={slider:s}).orientation=s.orientation,delete s.orientation,i.background=s.background,delete s.background,i.buttons=s.buttons,delete s.buttons,i.value=null;var r=new cg(e,i);e.add.existing(r);var n=r.childrenMap.slider;return r.addChildrenMap("track",n.childrenMap.track),r.addChildrenMap("indicator",n.childrenMap.indicator),r.addChildrenMap("thumb",n.childrenMap.thumb),r},cv=class extends oh{constructor(e,i){super(i),this.parent=e,this.init()}init(){this.start("IDLE")}next_IDLE(){var e,i=this.parent;return i.dragState.isDown&&(e=0===i.dragThreshold?"DRAG":"DRAGBEGIN"),e}update_IDLE(e,i){this.next()}next_DRAGBEGIN(){var e=this.parent,i=e.dragState;return i.isDown?i.pointer.getDistance()>=e.dragThreshold?"DRAG":"DRAGBEGIN":"IDLE"}update_DRAGBEGIN(e,i){this.next()}next_DRAG(){var e,i=this.parent;return i.dragState.isUp&&(e=i.outOfBounds?"BACK":i.slidingEnable?"SLIDE":"IDLE"),e}update_DRAG(e,i){var s=this.parent;s.dragState.justMoved&&s.dragging(),this.next()}enter_DRAG(){this.parent.onDragStart()}exit_DRAG(){this.parent.onDragEnd()}next_SLIDE(){var e,i=this.parent;return i.dragState.isDown?e="DRAG":i.isSliding||(e="IDLE"),e}enter_SLIDE(){this.parent.onSliding()}exit_SLIDE(){this.parent.stop()}update_SLIDE(e,i){this.parent.sliding(e,i),this.next()}next_BACK(){var e,i=this.parent;return i.dragState.isDown?e="DRAG":i.isPullBack||(e="IDLE"),e}enter_BACK(){this.parent.onPullBack()}exit_BACK(){this.parent.stop()}update_BACK(e,i){this.parent.pullBack(e,i),this.next()}};let cf=Phaser.Utils.Objects.GetValue,cm=Phaser.Math.Distance.Between;var cb=class extends i0{constructor(e,i){super(e,i),this._enable=void 0,e.setInteractive(cf(i,"inputConfig",void 0)),this.resetFromJSON(i),this.boot()}resetFromJSON(e){return this.pointer=void 0,this.isInTouched=!1,this.holdStartTime=void 0,this.x=void 0,this.y=void 0,this.preX=void 0,this.preY=void 0,this.localX=void 0,this.localY=void 0,this.justMoved=!1,this.setEnable(cf(e,"enable",!0)),this.holdThreshold=cf(e,"holdThreshold",50),this.pointerOutReleaseEnable=cf(e,"pointerOutRelease",!0),this}boot(){this.parent.on("pointerdown",this.onPointIn,this),this.parent.on("pointerup",this.onPointOut,this),this.pointerOutReleaseEnable&&this.parent.on("pointerout",this.onPointOut,this),this.parent.on("pointermove",this.onPointerMove,this),this.scene.sys.events.on("preupdate",this.preupdate,this)}shutdown(e){this.isShutdown||(this.scene.sys.events.off("preupdate",this.preupdate,this),this.pointer=void 0,super.shutdown(e))}get enable(){return this._enable}set enable(e){this._enable!==e&&(e||(this.isInTouched=!1,this.pointer=void 0),this._enable=e)}setEnable(e){return void 0===e&&(e=!0),this.enable=e,this}toggleEnable(){return this.setEnable(!this.enable),this}setPointerOutReleaseEnable(e){return void 0===e&&(e=!0),this.pointerOutReleaseEnable=e,this}get isDown(){return this.pointer&&this.pointer.isDown}get isUp(){return!this.isDown}get dx(){return this.x-this.preX}get dy(){return this.y-this.preY}get dt(){return system_GetTickDelta(this.scene)}get speed(){return this.x===this.preX&&this.y===this.preY?0:cm(this.preX,this.preY,this.x,this.y)/(.001*this.dt)}get speedX(){return this.dx/(.001*this.dt)}get speedY(){return this.dy/(.001*this.dt)}onPointIn(e,i,s){this.enable&&e.isDown&&void 0===this.pointer&&(this.pointer=e,this.localX=i,this.localY=s)}onPointOut(e){this.enable&&this.pointer===e&&(this.pointer=void 0)}onPointerMove(e,i,s){this.enable&&e.isDown&&this.pointer===e&&(this.localX=i,this.localY=s)}preupdate(e,i){if(this.enable){var s=this.pointer;this.justMoved=!1,s&&!this.isInTouched?(this.x=s.worldX,this.y=s.worldY,this.preX=s.worldX,this.preY=s.worldY,this.isInTouched=!0,this.holdStartTime=void 0,this.emit("touchstart",s,this.localX,this.localY)):s&&this.isInTouched?this.x===s.x&&this.y===s.y?void 0===this.holdStartTime?this.holdStartTime=e:e-this.holdStartTime>this.holdThreshold&&(this.preX=this.x,this.preY=this.y):(this.preX=this.x,this.preY=this.y,this.x=s.worldX,this.y=s.worldY,this.holdStartTime=void 0,this.justMoved=!0,this.emit("touchmove",s,this.localX,this.localY)):!s&&this.isInTouched&&(this.isInTouched=!1,this.holdStartTime=void 0,this.emit("touchend",s))}}};let cy=Phaser.Utils.Objects.GetValue;var cC=class{constructor(e){this.resetFromJSON(e)}resetFromJSON(e){return this.setValue(cy(e,"value",0)),this.setSpeed(cy(e,"speed",0)),this.setAcceleration(cy(e,"acceleration",0)),this}reset(){this.setValue(0),this.setSpeed(0),this.setAcceleration(0)}setValue(e){return this.value=e,this}setSpeed(e){return this.speed=e,this}setAcceleration(e){return this.acceleration=e,this}updateSpeed(e){return 0!==this.acceleration&&(this.speed+=this.acceleration*e,this.speed<0&&(this.speed=0)),this}getDeltaValue(e){return(this.updateSpeed(e),this.speed<=0)?0:this.speed*e}update(e){return this.updateSpeed(e),this.speed>0&&(this.value+=this.getDeltaValue(e)),this}get isMoving(){return this.speed>0}},cx=class{constructor(){this.value,this.dir,this.movement=new cC}init(e,i,s,r,n){return this.value=e,this.end=n,void 0!==n?this.dir=e<n:this.dir=i,this.movement.setSpeed(s).setAcceleration(-r),this}stop(){this.movement.reset()}update(e){var i=this.movement.getDeltaValue(e);return this.dir||(i=-i),void 0===this.end?this.value+=i:0===i?this.value=this.end:(this.value+=i,this.dir?this.value>this.end&&(this.value=this.end):this.value<this.end&&(this.value=this.end)),this}get isMoving(){return this.movement.isMoving}};let cS=Phaser.Utils.Objects.GetValue,c_=Phaser.Math.Clamp,cw={y:0,v:0,vertical:0,x:1,h:1,horizontal:1};var cP=class extends i0{constructor(e,i){super(e,i);var s=cS(i,"enable",!0);this._state=new cv(this,{enable:s,eventEmitter:!1});var r={inputConfig:cS(i,"inputConfig",void 0),enable:s,pointerOutRelease:cS(i,"pointerOutRelease",!0),eventEmitter:!1};this.dragState=new cb(e,r),this._enable=void 0,this._value=void 0,this._slowDown=new cx;var n=cS(i,"valuechangeCallback",null);if(null!==n){var a=cS(i,"valuechangeCallbackScope",void 0);this.on("valuechange",n,a)}if(null!==(n=cS(i,"overmaxCallback",null))){var a=cS(i,"overmaxCallbackScope",void 0);this.on("overmax",n,a)}if(null!==(n=cS(i,"overminCallback",null))){var a=cS(i,"overminCallbackScope",void 0);this.on("overmin",n,a)}this.resetFromJSON(i),this.boot()}resetFromJSON(e){this.setOrientationMode(cS(e,"orientation",0)),this.setDragThreshold(cS(e,"threshold",10)),this.setSlidingDeceleration(cS(e,"slidingDeceleration",5e3)),this.setBackDeceleration(cS(e,"backDeceleration",2e3));var i=cS(e,"dragRate",1);i*=cS(e,"dragReverse",!1)?-1:1,this.setDragRate(i);var s=cS(e,"bounds",void 0);return s?this.setBounds(s):this.setBounds(cS(e,"max",0),cS(e,"min",0)),this.setValue(cS(e,"value",this.maxValue||0)),this.setEnable(cS(e,"enable",!0)),this}boot(){this.scene.sys.events.on("preupdate",this._state.update,this._state)}shutdown(e){this.isShutdown||(this.scene.sys.events.off("preupdate",this._state.update,this._state),this._state.destroy(e),this.dragState.destroy(e),this._state=void 0,this.dragState=void 0,super.shutdown(e))}get enable(){return this._enable}set enable(e){if(this._enable!==e)return this._enable=e,this._state.setEnable(e),this.dragState.setEnable(e),this}setEnable(e){return void 0===e&&(e=!0),this.enable=e,this}toggleEnable(){return this.setEnable(!this.enable),this}setOrientationMode(e){return"string"==typeof e&&(e=cw[e]),this.orientationMode=e,this}setDragThreshold(e){return this.dragThreshold=e,this}setSlidingDeceleration(e){return this.slidingDeceleration=e,this}setBackDeceleration(e){return this.backDeceleration=e,this}setDragRate(e){return this.dragRate=e,this}setBounds(e,i){if(Array.isArray(e)){var s=e;e=s[0],i=s[1]}return e<i?(this.minValue=e,this.maxValue=i):(this.minValue=i,this.maxValue=e),this}get value(){return this._value}set value(e){if(e!==this._value){var i=this._value,s=this.overMax(e),r=this.overMin(e);s&&this.emit("overmax",e,i),r&&this.emit("overmin",e,i),!this.backEnable&&(s&&(e=this.maxValue),r&&(e=this.minValue)),this._value=e,this.emit("valuechange",e,i)}}setValue(e,i){return void 0===i&&(i=!1),i&&(e=c_(e,this.minValue,this.maxValue)),this.value=e,this}addValue(e,i){return this.setValue(this.value+e,i),this}get state(){return this._state.state}get isDragging(){return this.dragState.isInTouched}get outOfMaxBound(){return this.overMax(this.value)}get outOfMinBound(){return this.overMin(this.value)}get outOfBounds(){return this.outOfMinBound||this.outOfMaxBound}overMax(e){return null!=this.maxValue&&e>this.maxValue}overMin(e){return null!=this.minValue&&e<this.minValue}get backEnable(){return"number"==typeof this.backDeceleration}get isPullBack(){return this._slowDown.isMoving}get slidingEnable(){return"number"==typeof this.slidingDeceleration}get isSliding(){return this._slowDown.isMoving}get dragDelta(){return(0===this.orientationMode?this.dragState.dy:1===this.orientationMode?this.dragState.dx:0)*this.dragRate}get dragSpeed(){return(0===this.orientationMode?this.dragState.speedY:1===this.orientationMode?this.dragState.speedX:0)*this.dragRate}onDragStart(){this.emit("dragstart")}onDragEnd(){this.emit("dragend")}dragging(){this.value+=this.dragDelta}onSliding(){var e=this.value,i=this.dragSpeed;if(0===i){this._slowDown.stop(),this._state.next();return}var s=this.slidingDeceleration;this._slowDown.init(e,i>0,Math.abs(i),s)}sliding(e,i){i*=.001;var s=this._slowDown.update(i).value;this.overMax(s)?(this.value=this.maxValue,this._slowDown.stop()):this.overMin(s)?(this.value=this.minValue,this._slowDown.stop()):this.value=s}onPullBack(){var e=this.value,i=this.outOfMinBound?this.minValue:this.maxValue,s=Math.abs(i-e),r=this.backDeceleration,n=Math.sqrt(2*r*s);this._slowDown.init(e,void 0,n,r,i)}pullBack(e,i){i*=.001,this.value=this._slowDown.update(i).value,this._slowDown.isMoving||this._state.next()}stop(){this._slowDown.stop()}};let ck=Phaser.Utils.Objects.GetValue;var cT=class extends i0{constructor(e,i){if(super(e,i),this.parent!==this.scene?this.focusMode=ck(i,"focus",!0):this.focusMode=!1,this.setSpeed(ck(i,"speed",.1)),this.setEnable(ck(i,"enable",!0)),this.focusMode){var e=this.parent;e.setInteractive(ck(i,"inputConfig",void 0)).on("wheel",function(e,i,s,r,n){this.enable&&this.scroll(s)},this)}else this.scene.input.on("wheel",this.onSceneScroll,this)}destroy(){this.focusMode||this.scene.input.off("wheel",this.onSceneScroll,this)}onSceneScroll(e,i,s,r,n,a){this.enable&&this.scroll(r)}setEnable(e){return void 0===e&&(e=!0),this.enable=e,this}setSpeed(e){return this.speed=e,this}scroll(e){e*=this.speed,this.emit("scroll",e,this.parent,this)}};let cO=Phaser.Utils.Objects.GetValue,cM={right:0,left:1,bottom:0,top:1};var scrollable_AddSlider=function(e,i,s,r){var n,a,o,h,l="Y"===(s=s.toUpperCase()),c=2===e.scrollMode,g=e.childrenMap.child,m=`slider${s}`;if(x=c?cO(r,m,void 0):r.hasOwnProperty(m)?cO(r,m,void 0):cO(r,"slider",void 0)){!0===x&&(x={}),x.orientation=l?1:0,S=scrollable_CreateScrollbar(e.scene,x);var x,S,_,k,E,R,j,Y=cO(x,"position",0);"string"==typeof Y&&(Y=cM[Y]);var X=cO(r,`space.slider${s}`,void 0);void 0===X&&void 0===(X=cO(r,"space.slider",void 0))&&(c?X=0:R=cO(r,"space.child",0)),j=void 0===R?"number"==typeof X:"number"==typeof R,l?0===Y?(_=2,k=1,E=void 0===R?j?{left:X}:X:{left:cO(R,"right",R)}):(_=0,k=1,E=void 0===R?j?{right:X}:X:{right:cO(R,"left",R)}):0===Y?(_=1,k=2,E=void 0===R?j?{top:X}:X:{top:cO(R,"bottom",R)}):(_=1,k=0,E=void 0===R?j?{bottom:X}:X:{bottom:cO(R,"top",R)}),i.add(S,{column:_,row:k,align:"center",padding:E,expand:!0}),e[`hideUnscrollableSlider${s}`]=cO(x,"hideUnscrollableSlider",!1),e[`adaptThumb${s}SizeMode`]=cO(x,"adaptThumbSize",!1),e[`minThumb${s}Size`]=cO(x,"minThumbSize",void 0)}else e[`hideUnscrollableSlider${s}`]=!1,e[`adaptThumb${s}SizeMode`]=!1,e[`minThumb${s}Size`]=void 0;var $=`scroller${s}`;(Z=c?cO(r,$,!0):r.hasOwnProperty($)?cO(r,$,!0):cO(r,"scroller",!0))&&g&&(!0===Z&&(Z={}),Z.orientation=l?0:1,q=new cP(g,Z));var Z,q,tt,te=cO(r,c?`mouseWheelScroller${s}`:"mouseWheelScroller",!1);te&&g&&(tt=new cT(g,te)),e.addChildrenMap(`slider${s}`,S),e.addChildrenMap(`scroller${s}`,q),e.addChildrenMap(`mouseWheelScroller${s}`,tt),(!c||l)&&(e.hideUnscrollableSlider=e[`hideUnscrollableSlider${s}`],e.adaptThumbSizeMode=e[`adaptThumb${s}SizeMode`],e.minThumbSize=e[`minThumb${s}Size`],e.addChildrenMap("slider",S),e.addChildrenMap("scroller",q),e.addChildrenMap("mouseWheelScroller",tt)),S&&(c?(n=l?"t":"s",o=`scroll${s}`):(n="t",o="scroll"),S.on("valuechange",function(i){e[n]=i,e.emit(o,e)})),q&&(c?(a=`childO${s}`,o=`scroll${s}`):(a="childOY",o="scroll"),q.on("valuechange",function(i){e[a]=i,e.emit(o,e)})),tt&&(h=c?`addChildO${s}`:"addChildOY",tt.on("scroll",function(i){e[h](-i,!0)}))};let cE=Phaser.Utils.Objects.GetValue;var scrollable_CreateScrollableSizer=function(e,i){var s=e.scene,r=[0,1,0],n=[0,1,0],a=cE(i,"width"),o=cE(i,"height");a||cE(i,"child.expandWidth",!0)||(r[1]=0),o||cE(i,"child.expandHeight",!0)||(n[1]=0);var h=new dW(s,{column:3,row:3,columnProportions:r,rowProportions:n});switch(scrollable_AddChild(e,h,i),e.scrollMode){case 0:scrollable_AddSlider(e,h,"y",i);break;case 1:scrollable_AddSlider(e,h,"x",i);break;default:scrollable_AddSlider(e,h,"y",i),scrollable_AddSlider(e,h,"x",i)}return h},SetControllerBounds=function(e){var i,s,r,n;switch(this.scrollMode){case 0:case 1:i=this.topChildOY,s=this.bottomChildOY,r=this.childrenMap.scroller,n=this.childrenMap.slider;break;default:"Y"===(e=e.toUpperCase())?(i=this.topChildOY,s=this.bottomChildOY):(i=this.leftChildOX,s=this.rightChildOX),r=this.childrenMap[`scroller${e}`],n=this.childrenMap[`slider${e}`]}r&&r.setBounds(i,s),n&&n.setEnable(i!==s)},HideUnscrollableSlider=function(e){switch(this.scrollMode){case 0:case 1:var i=this.childrenMap.slider;i&&this.hideUnscrollableSlider&&this.setChildVisible(i,this.isOverflow);break;default:e=e.toUpperCase();var i=this.childrenMap[`slider${e}`],s=this[`hideUnscrollableSlider${e}`],r=this[`isOverflow${e}`];i&&s&&this.setChildVisible(i,r)}},AdaptThumbSize=function(e){switch(this.scrollMode){case 0:case 1:if(!this.adaptThumbSizeMode)return;var i=this.childrenMap.slider;if(!i)return;var s=Math.min(this.childVisibleHeight/this.childHeight,1),r=i.childrenMap.track,n=i.childrenMap.thumb,a=this.minThumbSize;if(0===this.scrollMode){var o=r.displayHeight*s;void 0!==a&&o<a&&(o=a),size_ResizeGameObject(n,void 0,o)}else{var h=r.displayWidth*s;void 0!==a&&h<a&&(h=a),size_ResizeGameObject(n,h,void 0)}LayoutSlider(i);break;default:if(e=e.toUpperCase(),!this[`adaptThumb${e}SizeMode`])return;var i=this.childrenMap[`slider${e}`];if(!i)return;var r=i.childrenMap.track,n=i.childrenMap.thumb,a=this[`minThumb${e}Size`];if("Y"===e){var s=Math.min(this.childVisibleHeight/this.childHeight,1),o=r.displayHeight*s;void 0!==a&&o<a&&(o=a),size_ResizeGameObject(n,void 0,o)}else{var s=Math.min(this.childVisibleWidth/this.childWidth,1),h=r.displayWidth*s;void 0!==a&&h<a&&(h=a),size_ResizeGameObject(n,h,void 0)}LayoutSlider(i)}},LayoutSlider=function(e){var i=e.minWidth,s=e.minHeight;e.minWidth=e.width,e.minHeight=e.height,e.layout(),e.minWidth=i,e.minHeight=s};let cR=Phaser.Utils.Objects.GetValue,cL=Phaser.Math.Clamp;let Scrollable=class Scrollable extends dr{constructor(e,i){void 0===i&&(i={});var s=utils_GetScrollMode(i),r=1===s;i.orientation=r?0:1,super(e,i),this.type=cR(i,"type","rexScrollable"),this.scrollMode=s;var n=cR(i,"background",void 0);n&&this.addBackground(n);var a=cR(i,"header",void 0);if(a){var o,h=cR(i,"align.header","center"),l=cR(i,"space.header",0);o=r?{right:l}:{bottom:l},this.add(a,{proportion:0,align:h,padding:o,expand:cR(i,"expand.header",!0)})}var c=scrollable_CreateScrollableSizer(this,i);c&&this.add(c,{proportion:1,align:"center",padding:0,expand:!0});var g=cR(i,"footer",void 0);if(g){var o,h=cR(i,"align.footer","center"),m=cR(i,"space.footer",0);o=r?{left:m}:{top:m},this.add(g,{proportion:0,align:h,padding:o,expand:cR(i,"expand.footer",!0)})}this.addChildrenMap("background",n),this.addChildrenMap("header",a),this.addChildrenMap("footer",g),this.runLayoutFlag=!1}postLayout(e,i,s){var r=0,n=0;return this.runLayoutFlag?(n=this.t,2===this.scrollMode&&(r=this.s)):this.runLayoutFlag=!0,this.resizeController(),this.setT(n),2===this.scrollMode&&this.setS(r),this}set t(e){var i=this.childMargin;if(0!==i.top||0!==i.bottom){var s=this.childrenMap.child,r=s.topChildOY-s.bottomChildOY,n=(r+i.top+i.bottom)*e-i.top;e=0!==r?n/r:0}this.childrenMap.child.t=e,this.updateController()}get t(){var e=this.childrenMap.child.t,i=this.childMargin;if(0!==i.top||0!==i.bottom){var s=this.childrenMap.child,r=s.topChildOY-s.bottomChildOY,n=r+i.top+i.bottom,a=r*e+i.top;e=0!==n?a/n:0}return e}set s(e){var i=this.childMargin;if(0!==i.left||0!==i.right){var s=this.childrenMap.child,r=s.leftChildOX-s.rightChildOX,n=(r+i.left+i.right)*e-i.left;e=0!==r?n/r:0}this.childrenMap.child.s=e,this.updateController()}get s(){var e=this.childrenMap.child.s,i=this.childMargin;if(0!==i.left||0!==i.right){var s=this.childrenMap.child,r=s.leftChildOX-s.rightChildOX,n=r+i.left+i.right,a=r*e+i.left;e=0!==n?a/n:0}return e}set childOY(e){this.childrenMap.child.childOY=e,this.updateController()}get childOY(){return this.childrenMap.child.childOY}set childOX(e){this.childrenMap.child.childOX=e,this.updateController()}get childOX(){return this.childrenMap.child.childOX}get topChildOY(){return this.childrenMap.child.topChildOY+this.childMargin.top}get bottomChildOY(){return this.childrenMap.child.bottomChildOY-this.childMargin.bottom}get leftChildOX(){return this.childrenMap.child.leftChildOX+this.childMargin.left}get rightChildOX(){return this.childrenMap.child.rightChildOX-this.childMargin.right}get childVisibleHeight(){return this.childrenMap.child.childVisibleHeight}get childHeight(){return this.childrenMap.child.childHeight}get childVisibleWidth(){return this.childrenMap.child.childVisibleWidth}get childWidth(){return this.childrenMap.child.childWidth}get isOverflow(){var e=this.childrenMap.child;return e.topChildOY!==e.bottomChildOY}get isOverflowY(){return this.isOverflow}get isOverflowX(){var e=this.childrenMap.child;return e.leftChildOX!==e.rightChildOX}setChildOY(e,i){return void 0===i&&(i=!1),i&&(e=cL(e,this.bottomChildOY,this.topChildOY)),this.childOY=e,this}addChildOY(e,i){return this.setChildOY(this.childOY+e,i),this}setT(e,i){return void 0===i&&(i=!1),i&&(e=cL(e,0,1)),this.t=e,this}addT(e,i){return this.setT(this.t+e,i),this}scrollToTop(){return this.t=0,this}scrollToBottom(){if(this.t=1,0===this.t)return this;do this.t=1;while(1!==this.t);return this}setChildOX(e,i){return void 0===i&&(i=!1),i&&(e=cL(e,this.leftChildOX,this.rightChildOX)),this.childOX=e,this}addChildOX(e,i){return this.setChildOX(this.childOX+e,i),this}setS(e,i){return void 0===i&&(i=!1),i&&(e=cL(e,0,1)),this.s=e,this}addS(e,i){return this.setS(this.s+e,i),this}scrollToLeft(){return this.s=0,this}scrollToRight(){if(this.s=1,0===this.s)return this;do this.s=1;while(1!==this.s);return this}get sliderEnable(){var e=this.childrenMap.slider;return!!e&&e.enable}set sliderEnable(e){var i=this.childrenMap.slider;i&&i.setEnable(e)}setSliderEnable(e){return void 0===e&&(e=!0),this.sliderEnable=e,this}get sliderYEnable(){return this.sliderEnable}set sliderYEnable(e){this.sliderEnable=e}setSliderYEnable(e){return this.setSliderEnable(e),this}get sliderXEnable(){var e=this.childrenMap.sliderX;return!!e&&e.enable}set sliderXEnable(e){var i=this.childrenMap.sliderX;i&&i.setEnable(e)}setSliderXEnable(e){return void 0===e&&(e=!0),this.sliderXEnable=e,this}get scrollerEnable(){var e=this.childrenMap.scroller;return!!e&&e.enable}set scrollerEnable(e){var i=this.childrenMap.scroller;i&&i.setEnable(e)}setScrollerEnable(e){return void 0===e&&(e=!0),this.scrollerEnable=e,this}get scrollerYEnable(){return this.scrollerEnable}set scrollerYEnable(e){this.scrollerEnable=e}setScrollerYEnable(e){return this.setScrollerEnable(e),this}get scrollerXEnable(){var e=this.childrenMap.scrollerX;return!!e&&e.enable}set scrollerXEnable(e){var i=this.childrenMap.scrollerX;i&&i.setEnable(e)}setScrollerXEnable(e){return void 0===e&&(e=!0),this.scrollerXEnable=e,this}get scrollerXEnable(){var e=this.childrenMap.scrollerX;return!!e&&e.enable}set scrollerXEnable(e){var i=this.childrenMap.scrollerX;i&&i.setEnable(e)}setScrollerXEnable(e){return void 0===e&&(e=!0),this.scrollerXEnable=e,this}get mouseWheelScrollerEnable(){var e=this.childrenMap.mouseWheelScroller;return!!e&&e.enable}set mouseWheelScrollerEnable(e){var i=this.childrenMap.mouseWheelScroller;i&&i.setEnable(e)}setMouseWheelScrollerEnable(e){return void 0===e&&(e=!0),this.mouseWheelScrollerEnable=e,this}get mouseWheelScrollerYEnable(){return this.mouseWheelScrollerEnable}set mouseWheelScrollerYEnable(e){this.mouseWheelScrollerEnable=e}setMouseWheelScrollerYEnable(e){return this.setMouseWheelScrollerEnable(e),this}get mouseWheelScrollerXEnable(){var e=this.childrenMap.mouseWheelScrollerX;return!!e&&e.enable}set mouseWheelScrollerXEnable(e){var i=this.childrenMap.mouseWheelScrollerX;i&&i.setEnable(e)}setMouseWheelScrollerXEnable(e){return void 0===e&&(e=!0),this.mouseWheelScrollerXEnable=e,this}setDropZoneEnable(e){void 0===e&&(e=!0);var i=this.childrenMap.child;return i.setInteractive(),i.input.dropZone=e,this}};Object.assign(Scrollable.prototype,{resizeController:function(){switch(this.scrollMode){case 0:case 1:SetControllerBounds.call(this),this.updateController(),HideUnscrollableSlider.call(this),AdaptThumbSize.call(this);break;default:SetControllerBounds.call(this,"y"),SetControllerBounds.call(this,"x"),this.updateController(),HideUnscrollableSlider.call(this,"y"),HideUnscrollableSlider.call(this,"x"),AdaptThumbSize.call(this,"y"),AdaptThumbSize.call(this,"x")}return this},updateController:function(){switch(this.scrollMode){case 0:case 1:var e=this.childrenMap.scroller,i=this.childrenMap.slider;e&&e.setValue(this.childOY),i&&i.setValue(this.t);break;default:var s=this.childrenMap.scrollerY,r=this.childrenMap.sliderY,n=this.childrenMap.scrollerX,a=this.childrenMap.sliderX;s&&s.setValue(this.childOY),r&&r.setValue(this.t),n&&n.setValue(this.childOX),a&&a.setValue(this.s)}}});var cB=Scrollable,text_TextToLines=function(e,i,s){switch(text_GetTextObjectType(e)){case 0:s=e.getWrappedText(i);break;case 1:s=e.getPenManager(i,s);break;case 2:s=e.maxWidth>0?e.setText(i).getTextBounds().wrappedText.split("\n"):i.split("\n")}return s},textblock_TextHeightToLinesCount=function(e){return(e-this.textLineSpacing)/(this.textLineHeight+this.textLineSpacing)},textblock_LinesCountToTextHeight=function(e){return e*(this.textLineHeight+this.textLineSpacing)-this.textLineSpacing},textblock_GetLines=function(e){var i,s=e+this.visibleLinesCount+1;switch(this.textObjectType){case 0:case 2:i=this.lines.slice(e,s).join("\n");break;case 1:var r=this.lines.getLineStartIndex(e),n=this.lines.getLineEndIndex(s-1);i=this.lines.getSliceTagText(r,n,!0)}return i},text_SetNoWrapText=function(e,i){switch(text_GetTextObjectType(e)){case 0:var s=e.style,r=s.wordWrapWidth,n=s.wordWrapCallback;s.wordWrapWidth=0,s.wordWrapCallback=void 0,e.setText(i),s.wordWrapWidth=r,s.wordWrapCallback=n;break;case 1:var s=e.style,a=s.wrapMode;s.wrapMode=0,e.setText(i),s.wrapMode=a;break;case 2:var o=e._maxWidth;e._maxWidth=0,e.setText(i),e._maxWidth=o}},CropTextObject=function(){if(this.textObject.setCrop){var e,i,s=this.textObject.rexSizer.offsetY;s<=0?(e=-s,i=this.height):(e=0,i=this.height-s),this.textObject.setCrop(0,e,this.width,i)}},textblock_ResetTextObjectPosition=function(){var e=this.textObject.rexSizer;this.textObject.y+=e.offsetY-e.preOffsetY,e.preOffsetY=e.offsetY,this.resetChildPositionState(this.textObject),this.textCropEnable&&CropTextObject.call(this)},textblock_ResizeText=function(e,i,s){if(s+=this.textLineHeight+this.textLineSpacing,this.textObjectWidth!==i||this._textObjectRealHeight!==s){switch(this.textObjectWidth=i,this._textObjectRealHeight=s,this.textObjectType){case 0:case 1:e.setFixedSize(i,s);var r=e.style,n=Math.max(i,0);0===this.textObjectType?r.wordWrapWidth=n:(0===r.wrapMode&&(r.wrapMode=1),r.wrapWidth=n);break;case 2:e.setMaxWidth(i)}this.setText()}};let cI=Phaser.Utils.Objects.IsPlainObject,cG=Phaser.Utils.Objects.GetValue,cD=Phaser.Display.Align.TOP_LEFT;let TextBlock=class TextBlock extends hD{constructor(e,i,s,r,n,a){cI(i)?(i=cG(a=i,"x",0),s=cG(a,"y",0),r=cG(a,"width",void 0),n=cG(a,"height",void 0)):cI(r)&&(r=cG(a=r,"width",void 0),n=cG(a,"height",void 0)),super(e,i,s,r,n,a),this.type="rexTextBlock",this.textObject=void 0,this.linesCount=0,this.textMask=void 0,this.textObjectType=void 0,this._textLineHeight=void 0,this._textLineSpacing=void 0,this._visibleLinesCount=void 0,this._textHeight=void 0,this._textVisibleHeight=void 0,this._textObjectRealHeight=0,this.lines=void 0,this.text=cG(a,"content",""),this._textOY=0,this.execeedTopState=!1,this.execeedBottomState=!1,this.setClampMode(cG(a,"clamplTextOY",!0)),this.alwaysScrollable=cG(a,"alwaysScrollable",!1);var o=cG(a,"background",void 0),h=cG(a,"text",void 0);void 0===h&&(h=CreateDefaultTextObject(e)),this.textCropEnable=cG(a,"textCrop",!!h.setCrop);var l=cG(a,"textMask",!this.textCropEnable);o&&this.addBackground(o),this.add(h),this.sizerChildren=[h];var c=this.getSizerConfig(h);c.align=cD,c.padding=bounds_GetBoundsConfig(0),c.expand=!0,this.textObject=h,this.textObjectType=text_GetTextObjectType(h),c.preOffsetY=0,c.offsetY=0,l&&(this.textMask=mask_AddChildMask.call(this,this.textObject,this)),this.addChildrenMap("background",o),this.addChildrenMap("text",h)}destroy(e){if(this.scene&&!this.ignoreDestroy){if(this.textObject=void 0,this.textMask=void 0,this.lines){switch(this.textObjectType){case 0:case 2:this.lines.length=0;break;case 1:this.lines.destroy()}this.lines=void 0}super.destroy(e)}}setClampMode(e){return void 0===e&&(e=!0),this.clampTextOY=e,this}get textLineHeight(){if(void 0===this._textLineHeight){var e;switch(this.textObjectType){case 0:case 1:var i=this.textObject.style;e=i.metrics.fontSize+i.strokeThickness;break;case 2:var s=this.textObject.fontSize/this.textObject.fontData.size;e=this.textObject.fontData.lineHeight*s}this._textLineHeight=e}return this._textLineHeight}get textLineSpacing(){if(void 0===this._textLineSpacing){var e;switch(this.textObjectType){case 0:case 1:e=this.textObject.lineSpacing;break;case 2:e=0}this._textLineSpacing=e}return this._textLineSpacing}get visibleLinesCount(){return void 0===this._visibleLinesCount&&(this._visibleLinesCount=Math.floor(textblock_TextHeightToLinesCount.call(this,this._textObjectRealHeight))),this._visibleLinesCount}get topTextOY(){return 0}get bottomTextOY(){return-this.textVisibleHeight}get textHeight(){return void 0===this._textHeight&&(this._textHeight=textblock_LinesCountToTextHeight.call(this,this.linesCount)),this._textHeight}get textObjectHeight(){return this._textObjectRealHeight-(this.textLineHeight+this.textLineSpacing)}get textVisibleHeight(){if(void 0===this._textVisibleHeight){var e=this.textHeight-this.textObjectHeight;!this.alwaysScrollable&&e<0&&(e=0),this._textVisibleHeight=e}return this._textVisibleHeight}textOYExceedTop(e){return void 0===e&&(e=this.textOY),e>this.topTextOY}textOYExeceedBottom(e){return void 0===e&&(e=this.textOY),e<this.bottomTextOY}get textOY(){return this._textOY}set textOY(e){var i=this.topTextOY,s=this.bottomTextOY,r=this.textOYExceedTop(e),n=this.textOYExeceedBottom(e);this.clampTextOY&&(this.visibleLinesCount>this.linesCount?e=0:r?e=i:n&&(e=s)),this._textOY!==e&&(this._textOY=e,this.updateTextObject()),r&&!this.execeedTopState&&this.emit("execeedtop",this,e,i),this.execeedTopState=r,n&&!this.execeedBottomState&&this.emit("execeedbottom",this,e,s),this.execeedBottomState=n}setTextOY(e){return this.textOY=e,this}set t(e){this.textOY=-this.textVisibleHeight*e}get t(){var e=this.textVisibleHeight;return 0===e?0:-(this.textOY/e)}setTextOYByPercentage(e){return this.t=e,this}};var CreateDefaultTextObject=function(e){return e.add.text(0,0,"")};Object.assign(TextBlock.prototype,{setText:function(e){return void 0!==e&&(this.text=e),this.lines=text_TextToLines(this.textObject,this.text,this.lines),this.linesCount=this.lines.length,this._textHeight=void 0,this._textVisibleHeight=void 0,this.updateTextObject(),this},updateTextObject:function(){var e=Math.max(Math.floor(textblock_TextHeightToLinesCount.call(this,-this.textOY)),0),i=textblock_LinesCountToTextHeight.call(this,e)+this.textOY,s=textblock_GetLines.call(this,e);return text_SetNoWrapText(this.textObject,s),this.textObject.rexSizer.offsetY=i,textblock_ResetTextObjectPosition.call(this),this},preLayout:function(){return this._textLineHeight=void 0,this._textLineSpacing=void 0,this._visibleLinesCount=void 0,this._textHeight=void 0,this._textVisibleHeight=void 0,basesizer_PreLayout.call(this),this},layoutChildren:function(){var e,i,s,r,n,a,o,h=this.left,l=this.top;!(e=this.textObject).rexSizer.hidden&&(r=h+(s=(i=e.rexSizer).padding).left,n=l+s.top,a=this.width-s.left-s.right,o=this.height-s.top-s.bottom,textblock_ResizeText.call(this,e,a,o),actions_AlignIn(e,r,n,a,o,i.align),i.preOffsetY=0,textblock_ResetTextObjectPosition.call(this),this.textMask&&(this.textMask.setPosition().resize(),this.resetChildPositionState(this.textMask)))}});var textarea_InjectProperties=function(e){Object.defineProperty(e,"childOY",{configurable:!0,get:function(){return e.textOY},set:function(i){e.textOY=i}}),Object.defineProperty(e,"topChildOY",{get:function(){return e.topTextOY}}),Object.defineProperty(e,"bottomChildOY",{get:function(){return e.bottomTextOY}}),Object.defineProperty(e,"childVisibleHeight",{get:function(){return e.textObjectHeight}}),Object.defineProperty(e,"childHeight",{get:function(){return e.textHeight}})};let cj=Phaser.Utils.Objects.GetValue;let TextArea_TextArea=class TextArea_TextArea extends cB{constructor(e,i){void 0===i&&(i={});var s=cj(i,"text",void 0),r=cj(i,"textWidth",void 0),n=cj(i,"textHeight",void 0),a=cj(i,"textCrop",!!s.setCrop),o=cj(i,"textMask",!a),h=cj(i,"content",""),l=new TextBlock(e,{width:r,height:n,text:s,textMask:o,textCrop:a&&!o,content:h,clamplTextOY:cj(i,"clamplChildOY",!1),alwaysScrollable:cj(i,"alwaysScrollable",!1)});e.add.existing(l),textarea_InjectProperties(l),i.scrollMode=0,i.type="rexTextArea",i.child={gameObject:l,expandWidth:void 0===r,expandHeight:void 0===n};var c=cj(i,"space",void 0);c&&(c.child=cj(c,"text",0)),super(e,i),this.addChildrenMap("text",s)}get text(){return this.childrenMap.child.text}get lineHeight(){var e=this.childrenMap.child;return e.textLineHeight+e.textLineSpacing}get lineIndex(){return Math.floor(-this.childOY/this.lineHeight)}get linesCount(){return this.childrenMap.child.linesCount}get contentHeight(){return this.childrenMap.child.textHeight}};Object.assign(TextArea_TextArea.prototype,{setText(e){return this.childrenMap.child.setText(e),this.resizeController(),this},appendText(e){return this.setText(this.text+e),this}},{scrollToLine(e){return this.setChildOY(-this.lineHeight*e),this},scrollToNextLine(e){void 0===e&&(e=1);var i=this.lineIndex+e;return this.scrollToLine(i),this}});let cA=Phaser.Utils.Objects.GetValue;var build_CreateTextArea=function(e,i,s){i=i?DeepClone(i):{};var r=cA(s,"background",build_CreateBackground),n=cA(s,"text",build_CreateText),a=cA(s,"track",build_CreateBackground),o=cA(s,"thumb",build_CreateBackground);r?i.background=r(e,i.background):delete i.background,n?i.text=n(e,i.text):delete i.text;var h=i.slider;!1!==h&&null!==h&&(void 0===h&&(h={}),a?h.track=a(e,h.track):delete h.track,o?h.thumb=o(e,h.thumb):delete h.thumb,i.slider=h);var l=new TextArea_TextArea(e,i);return e.add.existing(l),l},build_CreateText=function(e,i){var s,r;switch(i&&(i.hasOwnProperty("$type")?s=i.$type:i.hasOwnProperty("key")&&(s="bitmaptext")),s){case"bitmaptext":case"bitmap":r=new StatesBitmapText_StatesBitmapText(e,i);break;case"bbcodetext":case"bbcode":r=new eO(e,0,0,"",i);break;case"label":r=new cz(e,i);break;case"textarea":r=build_CreateTextArea(e,i);break;default:r=new StatesText_StatesText(e,i)}return build_DecorateGameObject(r,i),e.add.existing(r),r},build_CreateImage=function(e,i){var s,r;switch(i&&(i.hasOwnProperty("$type")?s=i.$type:i.hasOwnProperty("leftWidth")?s="nineSlice":(i.hasOwnProperty("color")||i.hasOwnProperty("strokeColor"))&&(s="roundRectangle")),s){case"nineSlice":r=i.hasOwnProperty("stretchMode")?new StatesNinePatch_StatesNinePatch(e,i):new StatesNineSlice_StatesNineSlice(e,i);break;case"roundRectangle":r=new StatesRoundRectangle_StatesRoundRectangle(e,i);break;default:r=new StatesImage_StatesImage(e,i)}return build_DecorateGameObject(r,i),e.add.existing(r),r};let cF=Phaser.Utils.Objects.GetValue;var build_BuildLabelConfig=function(e,i,s){i=i?DeepClone(i):{};var r=cF(s,"background",build_CreateBackground),n=cF(s,"text",build_CreateText),a=cF(s,"icon",build_CreateImage),o=cF(s,"action",build_CreateImage);return null!==i.background&&r?i.background=r(e,i.background):delete i.background,null!==i.text&&n?i.text=n(e,i.text):delete i.text,null!==i.icon&&a?i.icon=a(e,i.icon):delete i.icon,null!==i.action&&o?i.action=o(e,i.action):delete i.action,i},RunMethod=function(e,i,s){for(var r=0,n=e.length;r<n;r++){var a=e[r];a&&a[i]&&a[i](s)}},cz=class extends dd{constructor(e,i,s){super(e,i=build_BuildLabelConfig(e,i,s)),this.type="rexSimpleLabel"}setActiveState(e){return RunMethod(this.getChildren(),"setActiveState",e),this}setHoverState(e){return RunMethod(this.getChildren(),"setHoverState",e),this}setDisableState(e){return RunMethod(this.getChildren(),"setDisableState",e),this}};ObjectFactory.register("simpleLabel",function(e,i){var s=new cz(this.scene,e,i);return this.scene.add.existing(s),s}),(0,k.Z)(window,"RexPlugins.UI.SimpleLabel",cz);let cW=Phaser.Utils.Objects.GetValue,cV=Phaser.Utils.Objects.GetValue,cY=Phaser.Utils.Objects.GetValue,cX=[function(e){var i=this.scene,s=cW(e,"orientation",0);this.setOrientation(s);var r=cW(e,"icon",void 0),n=cW(e,"iconMask",void 0),a=cW(e,"innerBackground",void 0),o=cW(e,"title",void 0),h=cW(e,"separator",void 0),l=cW(e,"text",void 0),c=cW(e,"action",void 0),g=cW(e,"actionMask",void 0);if(r){m=0===this.orientation?{right:cW(e,"space.icon",0),top:cW(e,"space.iconTop",0),bottom:cW(e,"space.iconBottom",0),left:cW(e,"space.iconLeft",0)}:{bottom:cW(e,"space.icon",0),left:cW(e,"space.iconLeft",0),right:cW(e,"space.iconRight",0),top:cW(e,"space.iconTop",0)};var m,x=cW(e,"squareFitIcon",!1)?1:0;if(this.add(r,{proportion:0,padding:m,fitRatio:x}),n&&(n=mask_AddChildMask.call(this,r,r,1)),!x){var S=cW(e,"iconSize",void 0);this.setIconSize(cW(e,"iconWidth",S),cW(e,"iconHeight",S))}}var _=new dr(i,{orientation:1});a&&_.addBackground(a);var k=cW(e,"space.separator",0);if(o){var E,m,R,j=cW(e,"align.title","left"),Y=cW(e,"expandTitleWidth",!1);E=cW(e,"expandTitleHeight",!1)?1:0,R=Y,m={bottom:!h&&l?k:0,left:cW(e,"space.titleLeft",0),right:cW(e,"space.titleRight",0)},_.add(o,{proportion:E,expand:R,align:j,padding:m})}if(h){var m={top:o?k:0,bottom:l?k:0,left:cW(e,"space.separatorLeft",0),right:cW(e,"space.separatorRight",0)};_.add(h,{expand:!0,padding:m})}if(l){var E,m,R,j=cW(e,"align.text","left"),X=cW(e,"expandTextWidth",!1);E=cW(e,"expandTextHeight",!1)?1:0,R=X,m={left:cW(e,"space.textLeft",0),right:cW(e,"space.textRight",0)},_.add(l,{proportion:E,expand:R,align:j,padding:m})}var m=void 0;if(c&&(m={right:cW(e,"space.text",0)}),this.add(_,{proportion:1,padding:m}),c){m=0===this.orientation?{top:cW(e,"space.actionTop",0),bottom:cW(e,"space.actionBottom",0),right:cW(e,"space.actionRight",0)}:{left:cW(e,"space.actionLeft",0),right:cW(e,"space.actionRight",0),bottom:cW(e,"space.actionBottom",0)};var m,x=cW(e,"squareFitAction",!1)?1:0;if(this.add(c,{proportion:0,padding:m,fitRatio:x}),g&&(g=mask_AddChildMask.call(this,c,c,1)),!x){var $=cW(e,"actionSize");this.setActionSize(cW(e,"actionWidth",$),cW(e,"actionHeight",$))}}this.addChildrenMap("icon",r),this.addChildrenMap("iconMask",n),this.addChildrenMap("innerSizer",_),this.addChildrenMap("innerBackground",a),this.addChildrenMap("title",o),this.addChildrenMap("separator",h),this.addChildrenMap("text",l),this.addChildrenMap("action",c),this.addChildrenMap("actionMask",g)},function(e){this.setOrientation(1),this.setRTL(!1);var i=this.scene,s=cV(e,"title",void 0),r=cV(e,"separator",void 0),n=cV(e,"innerBackground",void 0),a=cV(e,"icon",void 0),o=cV(e,"iconMask",void 0),h=cV(e,"text",void 0),l=cV(e,"action",void 0),c=cV(e,"actionMask",void 0);if(s){var g,m,x,S=cV(e,"align.title","left"),_=cV(e,"expandTitleWidth",!1);g=cV(e,"expandTitleHeight",!1)?1:0,x=_,m={bottom:cV(e,"space.title",0),left:cV(e,"space.titleLeft",0),right:cV(e,"space.titleRight",0)},this.add(s,{proportion:g,expand:x,align:S,padding:m})}if(r){var k=cV(e,"space.separator",0),m={top:s?k:0,bottom:h?k:0,left:cV(e,"space.separatorLeft",0),right:cV(e,"space.separatorRight",0)};this.add(r,{proportion:0,expand:!0,padding:m})}var E=cV(e,"orientation",0),R=new dr(i,{orientation:E,rtl:cV(e,"rtl",!1),space:{left:cV(e,"space.innerLeft",0),right:cV(e,"space.innerRight",0),top:cV(e,"space.innerTop",0),bottom:cV(e,"space.innerBottom",0)}});if(n&&R.addBackground(n),this.add(R,{proportion:1,expand:!0}),a){var m=void 0;m=0===R.orientation?{right:cV(e,"space.icon",0),top:cV(e,"space.iconTop",0),bottom:cV(e,"space.iconBottom",0),left:cV(e,"space.iconLeft",0)}:{bottom:cV(e,"space.icon",0),left:cV(e,"space.iconLeft",0),right:cV(e,"space.iconRight",0),top:cV(e,"space.iconTop",0)};var j=cV(e,"squareFitIcon",!1)?1:0;if(R.add(a,{proportion:0,padding:m,fitRatio:j}),o&&(o=mask_AddChildMask.call(this,a,a,1)),!j){var Y=cV(e,"iconSize",void 0);this.setIconSize(cV(e,"iconWidth",Y),cV(e,"iconHeight",Y))}}if(h){var g,m,x,S=cV(e,"align.text","left"),X=cV(e,"space.text",0),$=cV(e,"expandTextWidth",!1),Z=cV(e,"expandTextHeight",!1);0===R.orientation?(g=$?1:0,l&&(m={right:X}),x=Z):(g=Z?1:0,l&&(m={bottom:X}),x=$),R.add(h,{proportion:g,expand:x,align:S,padding:m})}if(l){m=0===R.orientation?{top:cV(e,"space.actionTop",0),bottom:cV(e,"space.actionBottom",0),right:cV(e,"space.actionRight",0)}:{left:cV(e,"space.actionLeft",0),right:cV(e,"space.actionRight",0),bottom:cV(e,"space.actionBottom",0)};var m,j=cV(e,"squareFitAction",!1)?1:0;if(R.add(l,{proportion:0,padding:m,fitRatio:j}),c&&(c=mask_AddChildMask.call(this,l,l,1)),!j){var q=cV(e,"actionSize");this.setActionSize(cV(e,"actionWidth",q),cV(e,"actionHeight",q))}}this.addChildrenMap("title",s),this.addChildrenMap("separator",r),this.addChildrenMap("innerSizer",R),this.addChildrenMap("innerBackground",n),this.addChildrenMap("icon",a),this.addChildrenMap("iconMask",o),this.addChildrenMap("text",h),this.addChildrenMap("action",l),this.addChildrenMap("actionMask",c)}];var cH=class extends dn{constructor(e,i){void 0===i&&(i={}),super(e,i),this.type="rexTitleLabel";var s=cY(i,"background",void 0);s&&this.addBackground(s);var r=cY(i,"title",void 0),n=cY(i,"text",void 0);if(r){var a=cY(i,"wrapTitle",!1);a&&(!0===a&&(a="word"),text_SetWrapMode(r,a),i.expandTitleWidth=!0,wrapexpandtext_WrapExpandText(r))}if(n){var o=cY(i,"wrapText",!1);o&&(!0===o&&(o="word"),text_SetWrapMode(n,o),i.expandTextWidth=!0,wrapexpandtext_WrapExpandText(n))}(cX[cY(i,"layoutMode",0)]||cX[0]).call(this,i),this.addChildrenMap("background",i.background)}get title(){var e=this.childrenMap.title;return e?e.title:""}set title(e){var i=this.childrenMap.title;i&&i.setText(e)}setTitle(e){return this.title=e,this}resetDisplayContent(e){void 0===e?e={}:"string"==typeof e&&(e={text:e}),super.resetDisplayContent(e);var i=this.childrenMap.title;return i&&(void 0===e.title||(e.title?(this.show(i),this.setTitle(e.title)):this.hide(i))),this}};ObjectFactory.register("titleLabel",function(e){var i=new cH(this.scene,e);return this.scene.add.existing(i),i}),(0,k.Z)(window,"RexPlugins.UI.TitleLabel",cH);let cU=Phaser.Utils.Objects.GetValue;var build_BuildTitleLabelConfig=function(e,i,s){var r,n,a=cU(s,"innerBackground",build_CreateBackground),o=cU(s,"separator",build_CreateBackground),h=cU(s,"title",build_CreateText);null!==i.innerBackground&&a&&(r=a(e,i.innerBackground)),null!==i.separator&&o&&(n=o(e,i.separator)),i=build_BuildLabelConfig(e,i,s),r?i.innerBackground=r:delete i.innerBackground,n?i.separator=n:delete i.separator,null!==i.title&&h?i.title=h(e,i.title):delete i.title;var l=i.background;return l&&(r?e.children.moveBelow(l,r):n&&e.children.moveBelow(l,n)),i},SimpleTitleLabel_RunMethod=function(e,i,s){for(var r=0,n=e.length;r<n;r++){var a=e[r];a&&a[i]&&a[i](s)}},cN=class extends cH{constructor(e,i,s){super(e,i=build_BuildTitleLabelConfig(e,i,s)),this.type="rexSimpleTitleLabel"}setActiveState(e){return SimpleTitleLabel_RunMethod(this.getChildren(),"setActiveState",e),this}setHoverState(e){return SimpleTitleLabel_RunMethod(this.getChildren(),"setHoverState",e),this}setDisableState(e){return SimpleTitleLabel_RunMethod(this.getChildren(),"setDisableState",e),this}};ObjectFactory.register("simpleTitleLabel",function(e,i){var s=new cN(this.scene,e,i);return this.scene.add.existing(s),s}),(0,k.Z)(window,"RexPlugins.UI.SimpleTitleLabel",cN);let c$=Phaser.Utils.Objects.GetValue,cZ=Phaser.Utils.Objects.IsPlainObject;var DefaultValueTextFormatCallback=function(e,i,s){return e.toString()},methods_Build=function(e,i){var s,r=c$(i,"background",void 0),n=c$(i,"icon",void 0),a=c$(i,"iconMask",void 0),o=c$(i,"nameText",void 0),h=c$(i,"valueText",void 0),l=c$(i,"bar",void 0),c=c$(i,"action",void 0),g=c$(i,"actionMask",void 0),m="line"===c$(i,"barShape","line");cZ(l)&&(l=new(m?lineprogress_LineProgress_LineProgress:circularprogress_CircularProgress_CircularProgress)(e,l),e.add.existing(l),o&&e.children.moveBelow(l,o),h&&e.children.moveBelow(l,h));var x=o||h||l;if(r&&this.addBackground(r),n){var s=void 0;0===this.orientation?(x||c)&&(s={right:c$(i,"space.icon",0),top:c$(i,"space.iconTop",0),bottom:c$(i,"space.iconBottom",0)}):(x||c)&&(s={bottom:c$(i,"space.icon",0),left:c$(i,"space.iconLeft",0),right:c$(i,"space.iconRight",0)}),this.add(n,{proportion:0,padding:s}),a&&(a=mask_AddChildMask.call(this,n,n,1))}if(x){var S,_=new dr(e,{orientation:1});if(o||h){if(S=new dr(e,{orientation:0}),o){""===o.text&&o.setText(" "),o.setOrigin(0,o.originY);var s={left:c$(i,"space.name",0)};S.add(o,{padding:s})}if(h){""===h.text&&h.setText(" "),h.setOrigin(1,h.originY),S.addSpace();var s={right:c$(i,"space.value",0)};S.add(h,{padding:s}),this.setValueTextFormatCallback(c$(i,"valueTextFormatCallback",DefaultValueTextFormatCallback),c$(i,"valueTextFormatCallbackScope",void 0))}_.add(S,{expand:!0})}if(l){if(m){var k=S?c$(i,"space.bar"):0;void 0===k&&(k=c$(i,"space.barTop",0));var s={top:k,bottom:c$(i,"space.barBottom",0),left:c$(i,"space.barLeft",0),right:c$(i,"space.barRight",0)};_.add(l,{expand:!0,padding:s})}else{var s={top:c$(i,"space.barTop",0),bottom:c$(i,"space.barBottom",0),left:c$(i,"space.barLeft",0),right:c$(i,"space.barRight",0)};this.addBackground(l,s)}}var s=void 0;c&&(s={right:c$(i,"space.text",0)});var E=c$(i,"align.text","bottom");this.add(_,{proportion:1,align:E,padding:s})}c&&(s=0===this.orientation?{top:c$(i,"space.actionTop",0),bottom:c$(i,"space.actionBottom",0)}:{left:c$(i,"space.actionLeft",0),right:c$(i,"space.actionRight",0)},this.add(c,{proportion:0,padding:s}),g&&(g=mask_AddChildMask.call(this,c,c,1))),this.addChildrenMap("background",r),this.addChildrenMap("icon",n),this.addChildrenMap("iconMask",a),this.addChildrenMap("name",o),this.addChildrenMap("value",h),this.addChildrenMap("bar",l),this.addChildrenMap("action",c),this.addChildrenMap("actionMask",g)};let cK=Phaser.Math.Clamp;let NameValueLabel_NameValueLabel=class NameValueLabel_NameValueLabel extends dr{constructor(e,i){super(e,i),this.type="rexNameValueLabel",methods_Build.call(this,e,i),this.setEaseValueDuration(1e3)}get nameText(){var e=this.childrenMap.name;return void 0===e?"":e.text}set nameText(e){var i=this.childrenMap.name;void 0!==i&&i.setText(e)}setNameText(e){return this.nameText=e,this}get valueText(){var e=this.childrenMap.value;return void 0===e?"":e.text}set valueText(e){var i=this.childrenMap.value;void 0!==i&&i.setText(e)}setValueText(e){return this.valueText=e,this}get barValue(){var e=this.childrenMap.bar;if(void 0!==e)return e.value}set barValue(e){var i=this.childrenMap.bar;void 0!==i&&i.setValue(e)}setBarValue(e,i,s){var r=this.childrenMap.bar;return void 0===r||r.setValue(e,i,s),this}easeBarValueTo(e,i,s){var r=this.childrenMap.bar;return void 0===r||r.easeValueTo(e,i,s),this}setTexture(e,i){var s=this.childrenMap.icon;if(void 0!==s)return s.setTexture(e,i),this}get texture(){var e=this.childrenMap.icon;if(void 0!==e)return e.texture}get frame(){var e=this.childrenMap.icon;if(void 0!==e)return e.frame}postLayout(e,i,s){var r=this.childrenMap.iconMask;r&&(r.setPosition(),this.resetChildPositionState(r));var n=this.childrenMap.actionMask;return n&&(n.setPosition(),this.resetChildPositionState(n)),this}resize(e,i){super.resize(e,i);var s=this.childrenMap.iconMask;s&&s.resize();var r=this.childrenMap.actionMask;return r&&r.resize(),this}};Object.assign(NameValueLabel_NameValueLabel.prototype,{setValueTextFormatCallback(e,i){return this.valueTextFormatCallback=e,this.valueTextFormatCallbackScope=i,this},getFormatValueText(e,i,s){return void 0===e&&(e=this.value),void 0===i&&(i=this.minValue),void 0===s&&(s=this.maxValue),this.valueTextFormatCallbackScope?this.valueTextFormatCallback(e,i,s):this.valueTextFormatCallback.call(this.valueTextFormatCallbackScope,e,i,s)},updateValueText(e,i,s){var r=this.childrenMap.value;return r&&this.valueTextFormatCallback&&(r.setText(this.getFormatValueText(e,i,s)),r.layout&&r.layout()),this},setValue(e,i,s){return e=cK(e,i,s),this.value=e,this.minValue=i,this.maxValue=s,this.updateValueText(e,i,s),this.setBarValue(e,i,s),this},setEaseValueDuration(e){return this.easeValueDuration=e,this},easeValueTo(e,i,s){return this.minValue=i,this.maxValue=s,void 0===this.easeValueTask&&(this.easeValueTask=new r9(this),this.easeValueTask.on("update",function(){this.setValue(this.value,this.minValue,this.maxValue)},this)),this.easeValueTask.restart({key:"value",to:e,duration:this.easeValueDuration}),this}});var cJ=NameValueLabel_NameValueLabel;ObjectFactory.register("nameValueLabel",function(e){var i=new cJ(this.scene,e);return this.scene.add.existing(i),i}),(0,k.Z)(window,"RexPlugins.UI.NameValueLabel",cJ);var cq=class extends sI{constructor(e){super(),this.setTable(object_GetValue(e,"table")),this.setMaxLevel(object_GetValue(e,"maxLevel"));var i=object_GetValue(e,"exp",0),s=object_GetValue(e,"level",void 0);void 0===s||this.checkLevel(s,i)||(console.error(`Level ${s} and Exp ${i} are mismatch`),s=void 0),this.resetExp(i,s)}setTable(e){return this.levelTable=e,this.isLevelMapFunction=object_IsFunction(e),this}setMaxLevel(e){var i;return void 0===e&&(e=Array.isArray(this.levelTable)?this.levelTable.length-1:-1),i=-1!==e?this.getExp(e):-1,this.hasMaxLevel=-1!==e,this.maxLevel=e,this.maxExp=i,this}resetExp(e,i){return this.hasMaxLevel&&e>this.maxExp&&(e=this.maxExp),void 0===i&&(i=this.getLevel(e)),this._exp=e,this._level=i,this._requiredExp=this.getRequiredExpToNextLevel(i,e),this}get exp(){return this._exp}set exp(e){if(this.hasMaxLevel&&e>this.maxExp&&(e=this.maxExp),e<this._exp){this.resetExp(e);return}if(e!==this._exp){for(var i,s=this.getLevel(e,this._level),r=this._level,n=this._exp;;){var a=this.getExp(r),o=this.getExp(r+1);if(i=Math.min(o,e),this.emit("levelup",r,n,i,a,o),r===s&&i===e)break;r++,n=o}this.resetExp(e,s)}}get level(){return this._level}set level(e){this.hasMaxLevel&&e>this.maxLevel?this.exp=this.maxExp:this.exp=this.getExp(e)}get requiredExp(){return this._requiredExp}getExp(e){return void 0===e?this._exp:this.isLevelMapFunction?this.levelTable(e):(this.hasMaxLevel&&e>this.maxLevel&&(e=this.maxLevel),this.levelTable[e])}getLevel(e,i){if(void 0===e)return this._level;for(void 0===i&&(i=0);;){var s=this.getExp(i+1);if(s>e||(i++,this.hasMaxLevel&&s===this.maxExp))break}return i}getRequiredExpToNextLevel(e,i){return void 0===e&&(e=this.level),void 0===i&&(i=this.exp),this.getExp(e+1)-i}checkLevel(e,i){return i>=this.getExp(e)&&i<this.getExp(e+1)}gainExp(e,i,s){return i&&this.on("levelup",i,s),this.exp+=e,i&&this.off("levelup",i,s),this}setExp(e,i,s){return i&&this.on("levelup",i,s),this.exp=e,i&&this.off("levelup",i,s),this}setLevel(e,i,s){return i&&this.on("levelup",i,s),this.level=e,i&&this.off("levelup",i,s),this}},RunCommands=function(e,i,s){var r,n=object_GetValue(s,"reverse",!1);if(object_IsArray(e[0])){if(n)for(var a=e.length,o=a-1;o>=0;o--)r=RunCommands(e[o],i,s);else for(var o=0,a=e.length;o<a;o++)r=RunCommands(e[o],i,s)}else r=RunCommand(e,i,s);return r},RunCommand=function(e,i,s){var r,n=object_GetValue(s,"argsConvert",void 0),a=object_GetValue(s,"argsConvertScope",void 0),o=e[0];if(cQ=array_Copy(cQ,e,1),n){!0===n&&(n=string_TypeConvert,a=void 0);for(var h=0,l=cQ.length;h<l;h++)a?cQ[h]=n.call(a,cQ[h],e):cQ[h]=n(cQ[h],e)}return"string"==typeof o?null==(r=i[o])&&(r=object_GetValue(i,o,null)):r=o,r.apply(i,cQ)},cQ=[];let c0=Phaser.Utils.Objects.GetValue;var c1=[];let c2={ms:0,s:1,sec:1},c5={abs:0,absolute:0,inc:1,increment:1};var c3=class extends i0{constructor(e,i){super(e,i);var s=c0(i,"clock",void 0);s||(s=new sx(e)),this.clock=s,this.clock.on("update",this.update,this),this.commands=[],this.resetFromJSON(i)}resetFromJSON(e){return this.clock.resetFromJSON(c0(e,"clock",void 0)),this.state=c0(e,"state",0),this.commands=c0(e,"commands",[]),this.scope=c0(e,"scope",void 0),this.setTimeUnit(c0(e,"timeUnit",0)),this.setDtMode(c0(e,"dtMode",0)),this.index=c0(e,"index",0),this.nextTime=c0(e,"nextTime",0),this}toJSON(){return{clock:this.clock.toJSON(),state:this.state,commands:this.commands,scope:this.scope,timeUnit:this.timeUnit,dtMode:this.dtMode,index:this.index,nextTime:this.nextTime}}shutdown(e){this.isShutdown||(this.clock.shutdown(e),this.commands=void 0,super.shutdown(e))}load(e,i,s){this.stop();var r=c0(s,"timeUnit",void 0);void 0!==r&&this.setTimeUnit(r);var n=c0(s,"dtMode",void 0);return void 0!==n&&this.setDtMode(n),e=e.filter(function(e){return!isNaN(e[0])}).map(function(e){return"string"==typeof e[0]&&(e[0]=parseFloat(e[0])),e}),0===this.dtMode&&e.sort(function(e,i){var s=e[0],r=i[0];return s>r?1:s<r?-1:0}),array_Copy(this.commands,e),this.scope=i,this}clear(){return this.commands.length=0,this}append(e,i,...s){var r;return r=Array.isArray(i)?i:[i,...s],this.commands.push([e,r]),this}start(e){return void 0===e&&(e=0),this.stop(),this.index=0,this.state=1,this.nextTime=this.getNextDt(0),this.clock.start(e),this.update(e),this.emit("start",this.parent,this),this}pause(){return this.clock.pause(),this.emit("pause",this.parent,this),this}resume(){return this.clock.resume(),this.emit("resume",this.parent,this),this}stop(){return this.clock.stop(),this.state=0,this.emit("stop",this.parent,this),this}seek(e){return this.clock.seek(e),this}seekToNext(){return this.seek(this.nextTime),this}get isPlaying(){return this.clock.isRunning}get completed(){return 2===this.state}get timeScale(){return this.clock.timeScale}set timeScale(e){this.clock.timeScale=e}setTimeScale(e){return this.timeScale=e,this}get now(){return this.clock.now}update(e){if(this.nextTime>e)return this;for(var i=this.commands;;){var s=i[this.index],r=s[1];if(object_IsArray(r)||(r=array_Copy(c1,s,1)),RunCommands(r,this.scope),this.emit("runcommand",r,this.scope),this.index>=i.length-1)return this.nextTime=0,this.complete(),this;if(this.index++,this.nextTime=this.getNextDt(this.nextTime),this.nextTime>e)return this}}complete(){this.clock.stop(),this.state=2,this.emit("complete",this.parent,this)}getNextDt(e){var i=this.commands[this.index][0];return 1===this.timeUnit&&(i*=1e3),1===this.dtMode&&(i+=e),i}setDtMode(e){return"string"==typeof e&&(e=c5[e]),this.dtMode=e,this}setTimeUnit(e){return"string"==typeof e&&(e=c2[e]),this.timeUnit=e,this}},methods_OnLevelUp=function(e,i,s,r,n){var a=(s-i)/(n-r)*this.totalEaseDuration,o=s===n?e+1:e;this.player.append(0,this.setEaseValueDuration,a).append(0,this.easeValueTo,s,r,n).append(0,this.emit,"levelup.start",e,i,s,this).append(a,object_NOOP).append(0,this.emit,"levelup.end",o,i,s,this),this.player.isPlaying||this.player.start()};let c7=Phaser.Utils.Objects.GetValue;let ExpBar_ExpBar=class ExpBar_ExpBar extends cJ{constructor(e,i){super(e,i),this.type="rexExpBar",this.setTotalEaseDuration(c7(i,"easeDuration",1e3)),this.levelCounter=new cq(c7(i,"levelCounter")),this.player=new c3(this,{scope:this,dtMode:1}),this.levelCounter.on("levelup",methods_OnLevelUp,this),this.player.on("complete",function(){this.player.clear(),this.emit("levelup.complete",this.level,this)},this),this.setValue(this.exp,this.getExp(this.level),this.getExp(this.level+1))}destroy(e){this.scene&&!this.ignoreDestroy&&(this.levelCounter.destroy(),this.levelCounter=void 0,this.player.destroy(),this.player=void 0,super.destroy(e))}get exp(){return this.levelCounter.exp}set exp(e){this.levelCounter.exp=e}get level(){return this.levelCounter.level}set level(e){this.levelCounter.level=e}get requiredExp(){return this.levelCounter.requiredExp}setTotalEaseDuration(e){return this.totalEaseDuration=e,this}};Object.assign(ExpBar_ExpBar.prototype,{setExpTable(e){return this.levelCounter.setTable(e),this},resetExp(e){return this.levelCounter.resetExp(e),this.setValue(this.exp,this.getExp(this.level),this.getExp(this.level+1)),this},getExp(e){return this.levelCounter.getExp(e)},getLevel(e,i){return this.levelCounter.getLevel(e,i)},getRequiredExpToNextLevel(e,i){return this.levelCounter.getRequiredExpToNextLevel(e,i)},gainExp(e){return this.levelCounter.gainExp(e),this},setExp(e){return this.levelCounter.setExp(e),this},setLevel(e){return this.levelCounter.setLevel(e),this}}),ObjectFactory.register("expBar",function(e){var i=new ExpBar_ExpBar(this.scene,e);return this.scene.add.existing(i),i}),(0,k.Z)(window,"RexPlugins.UI.ExpBar",ExpBar_ExpBar);let c6=dr.prototype.add,c4=dr.prototype.addSpace;var buttons_AddChildMethods_Add=function(e){var i=!e.isRexSpace,s=!i||this.buttonsExpand?1:0;if(0===this.sizerChildren.length){if(i){this.buttonsExpand||"right"!==this.buttonsAlign&&"center"!==this.buttonsAlign&&"bottom"!==this.buttonsAlign||c4.call(this),c6.call(this,e,{proportion:s,expand:!0});var r=!this.buttonsExpand&&"center"===this.buttonsAlign;r&&c4.call(this),this.hasTailSpace=r}else c6.call(this,e,{proportion:s,expand:!0}),this.hasTailSpace=!1}else if(this.hasTailSpace){var n=this.sizerChildren.length-1;c6.call(this,e,{index:n,proportion:s,expand:!0})}else c6.call(this,e,{proportion:s,expand:!0});return i&&this.buttonGroup.add(e),this};let c8=dr.prototype.remove,c9=dr.prototype.clear;var Remove=function(e,i){return this.getParentSizer(e)!==this||(this.buttonGroup.remove(e),c8.call(this,e,i)),this},buttongroup_OnButtonStateChange=function(e,i,s){if(e){var r=this.setValueCallback,n=this.setValueCallbackScope;r&&(n?r.call(n,e,i,s):r(e,i,s)),this.fireEvent("button.statechange",e,i,s)}},buttongroup_InjectSelectedProperty=function(e){var i=this;e._selected=void 0,Object.defineProperty(e,"selected",{get:function(){return e._selected},set:function(s){if(e._selected!==s){var r=e._selected;e._selected=s,buttongroup_OnButtonStateChange.call(i,e,s,r)}},enumerable:!0,configurable:!0}),e.selected=!1};let ut=Phaser.Utils.Array.Remove,ue=Phaser.Utils.Objects.GetValue;var TestName=function(e,i){return e?e.hasOwnProperty("name")?e.name===i?e:null:GetElementByName(e,i):null},utils_GetGameObjectByName=function(e,i){if(!e)return null;if(object_IsArray(e)){for(var s,r=0,n=e.length;r<n;r++)if(s=TestName(e[r],i))return s}else for(var a in e)if(s=TestName(e[a],i))return s},ui={getButton(e){var i,s=this.buttons;switch(typeof e){case"number":i=s[e];break;case"string":i=utils_GetGameObjectByName(s,e);break;default:i=e,-1===s.indexOf(i)&&(i=void 0)}return i},getButtons(){return this.buttons},hasAnyButton(){return this.buttons.length>0},setButtonEnable(e,i){var s=this.buttons;if(void 0===e||"boolean"==typeof e){i=e;for(var r=0,n=s.length;r<n;r++)s[r]._click.setEnable(i)}else this.getButton(e)._click.setEnable(i);return this},toggleButtonEnable(e){var i=this.buttons;if(void 0===e||"boolean"==typeof e)for(var s=0,r=i.length;s<r;s++)i[s]._click.toggleEnable();else this.getButton(e)._click.toggleEnable();return this},getButtonEnable(e){return void 0===e&&(e=0),this.getButton(e)._click.enable},emitButtonClick(e){return(this.buttonGroup?this.buttonGroup:this).fireEvent("button.click",e),this},emitButtonOver(e){for(var i=this.buttonGroup?this.buttonGroup:this,s=this.buttons,r=0,n=s.length;r<n;r++){var a=s[r];a._click.isOver&&(a._click.isOver=!1,i.fireEvent("button.out",a))}var a=this.getButton(e);return a&&(a._click.isOver=!0,i.fireEvent("button.over",a)),this},showButton(e){return Show(this.getButton(e)),this},hideButton(e){return Hide(this.getButton(e)),this},isButtonShown(e){return IsShown(this.getButton(e)),this},forEachButtton(e,i){for(var s=this.buttons,r=0,n=s.length;r<n;r++)i?e.call(i,s[r],r,s):e(s[r],r,s);return this}};let ButtonGroup=class ButtonGroup{constructor(e){this.parent=e.parent,this.eventEmitter=e.eventEmitter,this.groupName=e.groupName,this.clickConfig=e.clickConfig,this.buttonsType=void 0,this.buttons=[]}destroy(){this.parent=void 0,this.eventEmitter=void 0,this.clickConfig=void 0,this.buttons=void 0}};Object.assign(ButtonGroup.prototype,{add(e){return this.buttons.push(e),e._click||(e._click=new no(e,this.clickConfig),e._click.on("click",function(e,i,s,r){this.fireEvent("button.click",i,s,r)},this).on("enable",function(e,i){this.fireEvent("button.enable",i)},this).on("disable",function(e,i){this.fireEvent("button.disable",i)},this).on("over",function(e,i,s,r){this.fireEvent("button.over",i,s,r)},this).on("out",function(e,i,s,r){this.fireEvent("button.out",i,s,r)},this).on("down",function(e,i,s,r){this.fireEvent("button.down",i,s,r)},this).on("up",function(e,i,s,r){this.fireEvent("button.up",i,s,r)},this)),this.buttonsType&&(void 0===e.name&&console.error(`${this.parent.constructor.name}: Option button miss value`),buttongroup_InjectSelectedProperty.call(this,e)),this},addMultiple(e){for(var i=0,s=e.length;i<s;i++)this.add(e[i]);return this}},{remove(e){return this.buttonsType&&delete e.selected,ut(this.buttons,e),this},clear(){if(this.buttonsType)for(var e=this.buttons,i=0,s=e.length;i<s;i++)delete e[i].selected;return this.buttons.length=0,this}},{setButtonsType(e){void 0===e&&(e={});var i,s,r=ue(e,"buttonsType",e.type);if(this.buttonsType=r,!this.buttonsType)return this;switch(i=ue(e,"setValueCallback",void 0),s=ue(e,"setValueCallbackScope",void 0),void 0===i&&(i=ue(e,"setButtonStateCallback",void 0),s=ue(e,"setButtonStateCallbackScope",void 0)),this.setValueCallback=i,this.setValueCallbackScope=s,r){case"radio":this.setRadioType();break;case"checkboxes":this.setCheckboxesType()}return this},setRadioType(){var e=this.parent,i=this.buttons;e._value=void 0;var s=void 0;return Object.defineProperty(e,"value",{get:function(){return e._value},set:function(r){if(e._value!==r){e._value=r;for(var n=0,a=i.length;n<a;n++){var o=i[n];o.rexSizer.hidden||(void 0===s?o.name===r?o.selected=!0:o.selected=!1:s===n?o.selected=!0:o.selected=!1)}}},enumerable:!0,configurable:!0}),e.on("button.click",function(i){s=this.buttons.indexOf(i),e.value=i.name,s=void 0},this),this},setCheckboxesType(){return this.parent.on("button.click",function(e){e.selected=!e.selected}),this},clearAllButtonsState(){for(var e=this.buttons,i=0,s=e.length;i<s;i++)e[i].selected=!1;return this},getAllButtonsState(){for(var e={},i=this.buttons,s=0,r=i.length;s<r;s++){var n=i[s];n.rexSizer.hidden||(e[n.name]=n.selected)}return e},setSelectedButtonName(e){return this.parent.value=e,this},getSelectedButtonName(){return this.parent.value},setButtonState(e,i){void 0===i&&(i=!0);for(var s=this.buttons,r=0,n=s.length;r<n;r++){var a=s[r];if(!a.rexSizer.hidden&&a.name===e){a.selected=i;break}}return this},getButtonState(e){for(var i=this.buttons,s=0,r=i.length;s<r;s++){var n=i[s];if(!n.rexSizer.hidden&&n.name===e)return n.selected}}},ui,{fireEvent:function(e,i,...s){var r;if(this.buttons){if("number"==typeof i){if(r=i,!(i=this.buttons[r]))return}else if(-1===(r=this.buttons.indexOf(i)))return;this.eventEmitter!==this.parent&&this.parent.emit(e,i,r,...s),void 0!==this.groupName?this.eventEmitter.emit(e,i,this.groupName,r,...s):this.eventEmitter.emit(e,i,r,...s)}}});var us={clearAllButtonsState(){return this.buttonGroup.clearAllButtonsState(),this},getAllButtonsState(){return this.buttonGroup.getAllButtonsState()},setSelectedButtonName(e){return this.buttonGroup.setSelectedButtonName(e),this},getSelectedButtonName(){return this.buttonGroup.getSelectedButtonName()},setButtonState(e,i){return this.buttonGroup.setButtonState(e,i),this},getButtonState(e){return this.buttonGroup.getButtonState(e)}};let ur=Phaser.Utils.Objects.GetValue;let Buttons_Buttons=class Buttons_Buttons extends dr{constructor(e,i){void 0===i&&(i={});var s=i.space;"number"==typeof s&&(i.space={item:s}),super(e,i),this.type="rexButtons",this.buttonGroup=new ButtonGroup({parent:this,eventEmitter:ur(i,"eventEmitter",this),groupName:ur(i,"groupName",void 0),clickConfig:ur(i,"click",void 0)}).setButtonsType(i);var r=ur(i,"background",void 0),n=ur(i,"buttons",void 0);this.buttonsExpand=ur(i,"expand",!1),this.buttonsAlign=ur(i,"align",void 0),r&&this.addBackground(r),n&&this.addButtons(n),this.addChildrenMap("background",r),this.addChildrenMap("buttons",this.buttonGroup.buttons)}destroy(e){this.scene&&!this.ignoreDestroy&&(super.destroy(e),this.buttonGroup.destroy(),this.buttonGroup=void 0)}get buttons(){return this.buttonGroup.buttons}get groupName(){return this.buttonGroup.groupName}set groupName(e){this.buttonGroup.groupName=e}get eventEmitter(){return this.buttonGroup.eventEmitter}};Object.assign(Buttons_Buttons.prototype,{addButton(e){if(object_IsArray(e))for(var i=0,s=e.length;i<s;i++)buttons_AddChildMethods_Add.call(this,e[i]);else buttons_AddChildMethods_Add.call(this,e);return this},addButtons(e){for(var i=0,s=e.length;i<s;i++)buttons_AddChildMethods_Add.call(this,e[i]);return this}},{remove(e,i){if(object_IsArray(e))for(var s=0,r=e.length;s<r;s++)Remove.call(this,e[s],i);else Remove.call(this,e,i);return this},clear(e){return this.buttonGroup.buttons.length=0,c9.call(this,e),this},removeButton(e,i){var e=this.getButton(e);return e&&this.remove(e,i),this},clearButtons(e){for(var i=this.buttonGroup.buttons,s=i.length-1;s>=0;s--)Remove.call(this,i[s],e);return this}},ui,us);var un=Buttons_Buttons;ObjectFactory.register("buttons",function(e){var i=new un(this.scene,e);return this.scene.add.existing(i),i}),(0,k.Z)(window,"RexPlugins.UI.Buttons",un);let ua=dW.prototype.add,uo=dW.prototype.remove,uh=dW.prototype.clear;var RemoveChildMethods_Remove=function(e,i){var e=this.getButton(e);return e&&(this.buttonGroup.remove(e),uo.call(this,e,i)),this};let ul=Phaser.Utils.Objects.GetValue;let GridButtons_GridButtons=class GridButtons_GridButtons extends dW{constructor(e,i){void 0===i&&(i={});var s,r,n=ul(i,"row",0),a=ul(i,"column",i.col||0),o=ul(i,"createCellContainerCallback"),h=ul(i,"buttons",void 0),l=ul(i,"expand",!0),c=l?1:0;if(o&&(i.createCellContainerCallback=void 0),void 0!==h){n=Math.max(n,h.length);for(var g=0,m=h.length;g<m;g++)a=Math.max(a,h[g].length)}i.row=n,i.column=a,i.columnProportions=c,i.rowProportions=c,super(e,i),this.type="rexGridButtons",this.buttonGroup=new ButtonGroup({parent:this,eventEmitter:ul(i,"eventEmitter",this),groupName:ul(i,"groupName",void 0),clickConfig:ul(i,"click",void 0)}).setButtonsType(i);var x=ul(i,"background",void 0);this.buttonsExpand=l;var S=ul(i,"space",void 0);if("number"==typeof S&&(S={itemX:S,itemY:S}),x&&this.addBackground(x),h)for(var _=0,k=h.length;_<k;_++){s=h[_];for(var E=0,R=s.length;E<R;E++)(r=s[E])&&this.addButton(r,E,_)}else if(o)for(var j=0;j<n;j++)for(var Y=0;Y<a;Y++){var r=o(e,Y,j);r&&this.addButton(r,Y,j)}this.addChildrenMap("background",x),this.addChildrenMap("buttons",this.buttonGroup.buttons)}destroy(e){this.scene&&!this.ignoreDestroy&&(super.destroy(e),this.buttonGroup.destroy(),this.buttonGroup=void 0)}get buttons(){return this.buttonGroup.buttons}get groupName(){return this.buttonGroup.groupName}set groupName(e){this.buttonGroup.groupName=e}get eventEmitter(){return this.buttonGroup.eventEmitter}};Object.assign(GridButtons_GridButtons.prototype,{addButton(e,i,s){return ua.call(this,e,i,s,void 0,0,this.buttonsExpand),this.buttonGroup.add(e),this},addButtons(e,i){for(var s=0;s<e;s++)this.addButton(e[s],void 0,i);return this}},{remove(e,i){if(object_IsArray(e))for(var s=0,r=e.length;s<r;s++)RemoveChildMethods_Remove.call(this,e[s],i);else RemoveChildMethods_Remove.call(this,e,i);return this},clear(e){return this.buttonGroup.buttons.length=0,uh.call(this,e),this},removeButton(e,i){return this.remove(e,i),this},clearButtons(e){for(var i=this.buttonGroup.buttons,s=i.length-1;s>=0;s--)RemoveChildMethods_Remove.call(this,i[s],e);return this}},ui,us),ObjectFactory.register("gridButtons",function(e){var i=new GridButtons_GridButtons(this.scene,e);return this.scene.add.existing(i),i}),(0,k.Z)(window,"RexPlugins.UI.GridButtons",GridButtons_GridButtons);let ud=dJ.prototype.add;var fixwidthbuttons_AddChildMethods_Add=function(e){return ud.call(this,e),this.buttonGroup.add(e),this};let uc=dJ.prototype.remove,uu=dJ.prototype.clear;var fixwidthbuttons_RemoveChildMethods_Remove=function(e,i){var e=this.getButton(e);return e&&(this.buttonGroup.remove(e),uc.call(this,e,i)),this};let up=Phaser.Utils.Objects.GetValue;let FixWidthButtons_Buttons=class FixWidthButtons_Buttons extends dJ{constructor(e,i){void 0===i&&(i={});var s=i.space;"number"==typeof s&&(i.space={item:s,line:s}),super(e,i),this.type="rexFixWidthButtons",this.buttonGroup=new ButtonGroup({parent:this,eventEmitter:up(i,"eventEmitter",this),groupName:up(i,"groupName",void 0),clickConfig:up(i,"click",void 0)}).setButtonsType(i);var r=up(i,"background",void 0),n=up(i,"buttons",void 0);this.buttonsAlign=up(i,"align",void 0),r&&this.addBackground(r),n&&this.addButtons(n),this.addChildrenMap("background",r),this.addChildrenMap("buttons",this.buttonGroup.buttons)}destroy(e){this.scene&&!this.ignoreDestroy&&(super.destroy(e),this.buttonGroup.destroy(),this.buttonGroup=void 0)}get buttons(){return this.buttonGroup.buttons}get groupName(){return this.buttonGroup.groupName}set groupName(e){this.buttonGroup.groupName=e}get eventEmitter(){return this.buttonGroup.eventEmitter}};Object.assign(FixWidthButtons_Buttons.prototype,{addButton(e){if(object_IsArray(e))for(var i=0,s=e.length;i<s;i++)fixwidthbuttons_AddChildMethods_Add.call(this,e[i]);else fixwidthbuttons_AddChildMethods_Add.call(this,e);return this},addButtons(e){if(object_IsArray(e[0]))for(var i,s=0,r=e.length-1;s<=r;s++){i=e[s];for(var n=0,a=i.length;n<a;n++)fixwidthbuttons_AddChildMethods_Add.call(this,i[n]);s>r&&ud.addNewLine(this)}else for(var n=0,a=e.length;n<a;n++)fixwidthbuttons_AddChildMethods_Add.call(this,e[n]);return this}},{remove(e,i){if(object_IsArray(e))for(var s=0,r=e.length;s<r;s++)fixwidthbuttons_RemoveChildMethods_Remove.call(this,e[s],i);else fixwidthbuttons_RemoveChildMethods_Remove.call(this,e,i);return this},clear(e){return this.buttonGroup.buttons.length=0,uu.call(this,e),this},removeButton(e,i){return this.remove(e,i),this},clearButtons(e){for(var i=this.buttonGroup.buttons,s=i.length-1;s>=0;s--)fixwidthbuttons_RemoveChildMethods_Remove.call(this,i[s],e);return this}},ui,us),ObjectFactory.register("fixWidthButtons",function(e){var i=new FixWidthButtons_Buttons(this.scene,e);return this.scene.add.existing(i),i}),(0,k.Z)(window,"RexPlugins.UI.FixWidthButtons",FixWidthButtons_Buttons);let ug=Phaser.Utils.Objects.GetValue;let FileSelectorButton_FileSelectorButton=class FileSelectorButton_FileSelectorButton extends dd{constructor(e,i){super(e,i),this.type="rexFileSelectorButton";var s=new FileChooser_FileChooser(e);e.add.existing(s),this.addBackground(s),this.addChildrenMap("fileChooser",s),this.setAccept(ug(i,"accept","")),this.setMultiple(ug(i,"multiple",!1)),s.on("change",function(e){var i=e.files;0!==i.length&&(i=Array.from(i),this.emit("select",i,this))},this)}get files(){return this.childrenMap.fileChooser.files}};Object.assign(FileSelectorButton_FileSelectorButton.prototype,{setAccept(e){return this.childrenMap.fileChooser.setAccept(e),this},setMultiple(e){return this.childrenMap.fileChooser.setMultiple(e),this},loadFile(e,i,s,r,n){return this.childrenMap.fileChooser.loadFile(e,i,s,r,n),this},loadFilePromise(e,i,s,r){return this.childrenMap.fileChooser.loadFilePromise(e,i,s,r)}}),ObjectFactory.register("fileSelectorButton",function(e){var i=new FileSelectorButton_FileSelectorButton(this.scene,e);return this.scene.add.existing(i),i}),(0,k.Z)(window,"RexPlugins.UI.FileSelectorButton",FileSelectorButton_FileSelectorButton);var uv={};Object.assign(uv,{getChoice(e){var i=this.childrenMap.choicesSizer;return i?i.getButton(e):void 0},getAction(e){return this.childrenMap.actionsSizer.getButton(e)},getToolbar(e){return this.childrenMap.toolbarSizer.getButton(e)},getLeftToolbar(e){return this.childrenMap.leftToolbarSizer.getButton(e)},setChoiceEnable(e,i){var s=this.childrenMap.choicesSizer;return s&&s.setButtonEnable(e,i),this},setActionEnable(e,i){return this.childrenMap.actionsSizer.setButtonEnable(e,i),this},setToolbarEnable(e,i){return this.childrenMap.toolbarSizer.setButtonEnable(e,i),this},setLeftToolbarEnable(e,i){return this.childrenMap.leftToolbarSizer.setButtonEnable(e,i),this},toggleChoiceEnable(e){var i=this.childrenMap.choicesSizer;return i&&i.toggleButtonEnable(e),this},toggleActionEnable(e){return this.childrenMap.actionsSizer.toggleButtonEnable(e),this},toggleToolbarEnable(e){return this.childrenMap.toolbarSizer.toggleButtonEnable(e),this},toggleLeftToolbarEnable(e){return this.childrenMap.leftToolbarSizer.toggleButtonEnable(e),this},getChoiceEnable(e){var i=this.childrenMap.choicesSizer;return!!i&&i.getButtonEnable(e)},getActionEnable(e){return this.childrenMap.actionsSizer.getButtonEnable(e)},getToolbarEnable(e){return this.childrenMap.toolbarSizer.getButtonEnable(e)},getLeftToolbarEnable(e){return this.childrenMap.leftToolbarSizer.getButtonEnable(e)},emitChoiceClick(e){var i=this.childrenMap.choicesSizer;return i&&i.emitButtonClick(e),this},emitActionClick(e){return this.childrenMap.actionsSizer.emitButtonClick(e),this},emitToolbarClick(e){return this.childrenMap.toolbarSizer.emitButtonClick(e),this},emitLeftToolbarClick(e){return this.childrenMap.leftToolbarSizer.emitButtonClick(e),this},showChoice(e){var i=this.childrenMap.choicesSizer;return i&&i.showButton(e),this},showAction(e){return this.childrenMap.actionsSizer.showButton(e),this},showToolbar(e){return this.childrenMap.toolbarSizer.showButton(e),this},showLeftToolbar(e){return this.childrenMap.leftToolbarSizer.showButton(e),this},hideChoice(e){var i=this.childrenMap.choicesSizer;return i&&i.hideButton(e),this},hideAction(e){return this.childrenMap.actionsSizer.hideButton(e),this},hideToolbar(e){return this.childrenMap.toolbarSizer.hideButton(e),this},hideLeftToolbar(e){return this.childrenMap.leftToolbarSizer.hideButton(e),this},addChoice(e){var i=this.childrenMap.choicesSizer;return i&&i.addButton(e),this},addAction(e){return this.childrenMap.actionsSizer.addButton(e),this},addToolbar(e){return this.childrenMap.toolbarSizer.addButton(e),this},addLeftToolbar(e){return this.childrenMap.leftToolbarSizer.addButton(e),this},removeChoice(e,i){var s=this.childrenMap.choicesSizer;return s&&s.removeButton(e,i),this},removeAction(e,i){return this.childrenMap.actionsSizer.removeButton(e,i),this},removeToolbar(e,i){return this.childrenMap.toolbarSizer.removeButton(e,i),this},removeLeftToolbar(e,i){return this.childrenMap.leftToolbarSizer.removeButton(e,i),this},clearChoices(e){var i=this.childrenMap.choicesSizer;return i&&i.clearButtons(e),this},clearActions(e){return this.childrenMap.actionsSizer.clearButtons(e),this},clearToolbar(e){return this.childrenMap.toolbarSizer.clearButtons(e),this},clearLeftToolbar(e){return this.childrenMap.leftToolbarSizer.clearButtons(e),this},forEachChoice(e,i){var s=this.childrenMap.choicesSizer;return s&&s.forEachButtton(e,i),this},forEachAction(e,i){return this.childrenMap.actionsSizer.forEachButtton(e,i),this},forEachToolbar(e,i){return this.childrenMap.toolbarSizer.forEachButtton(e,i),this},forEachLeftToolbar(e,i){return this.childrenMap.leftToolbarSizer.forEachButtton(e,i),this},setAllButtonsEnable(e){return void 0===e&&(e=!0),this.childrenMap.toolbarSizer&&this.setToolbarEnable(e),this.childrenMap.leftToolbarSizer&&this.setLeftToolbarEnable(e),this.childrenMap.actionsSizer&&this.setActionEnable(e),this.childrenMap.choicesSizer&&this.setChoiceEnable(e),this},getChoicesButtonStates(){var e=this.childrenMap.choicesSizer;return e?e.getAllButtonsState():{}},getChoicesButtonState(e){var i=this.childrenMap.choicesSizer;return void 0===e?i?i.getAllButtonsState():{}:!!i&&i.getButtonState(e)},setChoicesButtonState(e,i){var s=this.childrenMap.choicesSizer;return s&&s.setButtonState(e,i),this},clearChoicesButtonStates(){var e=this.childrenMap.choicesSizer;return e&&e.clearAllButtonsState(),this},getChoicesSelectedButtonName(){var e=this.childrenMap.choicesSizer;return e?e.getSelectedButtonName():""},setChoicesSelectedButtonName(e){var i=this.childrenMap.choicesSizer;return i&&i.setSelectedButtonName(e),this},hasAnyChoice(){var e=this.childrenMap.choicesSizer;return!!e&&e.hasAnyButton()},hasAnyAction(){var e=this.childrenMap.actionsSizer;return!!e&&e.hasAnyButton()},hasAnyToolbar(){var e=this.childrenMap.toolbarSizer;return!!e&&e.hasAnyButton()},hasAnyLeftToolbar(){var e=this.childrenMap.leftToolbarSizer;return!!e&&e.hasAnyButton()}},{onCreateModalBehavior(e){e.on("button.click",function(i,s,r,n,a){var o=!1;switch(s){case"actions":o=!0;break;case"choices":e.hasAnyAction()||(o=!0)}if(o){var h={index:r,text:i.text,button:i,dialog:e};switch(e.buttonsType){case"radio":h.value=e.getChoicesSelectedButtonName();break;case"checkboxes":h.value=e.getChoicesButtonStates();break;default:h.value=void 0}e.modalClose(h)}})},modal(e,i){return e&&!1===e.defaultBehavior?this.onCreateModalBehavior=!1:delete this.onCreateModalBehavior,oP.modal.call(this,e,i),this}});let uf=Phaser.Utils.Objects.GetValue;let Dialog_Dialog=class Dialog_Dialog extends dr{constructor(e,i){void 0===i&&(i={}),i.orientation=1,super(e,i),this.type="rexDialog",this.eventEmitter=uf(i,"eventEmitter",this);var s=uf(i,"background",void 0),r=uf(i,"title",void 0),n=uf(i,"toolbar",void 0),a=uf(i,"toolbarBackground",void 0),o=uf(i,"leftToolbar",void 0),h=uf(i,"leftToolbarBackground",void 0),l=uf(i,"content",void 0),c=uf(i,"description",void 0),g=uf(i,"choices",void 0),m=uf(i,"choicesBackground",void 0),x=uf(i,"actions",void 0),S=uf(i,"actionsBackground",void 0),_=uf(i,"click",void 0);if(s&&this.addBackground(s),n&&(R=new un(e,{groupName:"toolbar",background:a,buttons:n,orientation:0,space:{item:uf(i,"space.toolbarItem",0)},click:_,eventEmitter:this.eventEmitter}),e.add.existing(R)),o&&(j=new un(e,{groupName:"leftToolbar",background:h,buttons:o,orientation:0,space:{item:uf(i,"space.leftToolbarItem",0)},click:_,eventEmitter:this.eventEmitter}),e.add.existing(j)),r||n||o){var k,E,R,j,Y,X,$=!!r&&uf(i,"expand.title",!0),Z=uf(i,"align.title","center"),q=!(r&&!$&&"center"===Z||!r&&(n||o));Y=q?new dr(e,{orientation:0}):new h$(e),e.add.existing(Y);var tt=!!q||{height:!0};if(j&&Y.add(j,{align:"left",expand:tt}),r){q&&!$&&"right"===Z&&Y.addSpace();var X={left:uf(i,"space.titleLeft",0),right:uf(i,"space.titleRight",0)},te=$?1:0;Y.add(r,{align:Z,proportion:te,expand:tt,padding:X}),q&&!$&&"left"===Z&&Y.addSpace()}R&&(q&&!r&&Y.addSpace(),Y.add(R,{align:"right",expand:tt})),(l||c||g||x)&&(X={bottom:uf(i,"space.title",0),top:uf(i,"space.titleTop",0)});var te=uf(i,"proportion.title",0);this.add(Y,{padding:X,proportion:te,expand:!0})}if(l){var ti=uf(i,"align.content","center"),ts=uf(i,"space.content",0),X={left:uf(i,"space.contentLeft",0),right:uf(i,"space.contentRight",0),bottom:c||g||x?ts:0},te=uf(i,"proportion.content",0),tr=uf(i,"expand.content",!0);this.add(l,{align:ti,padding:X,proportion:te,expand:tr})}if(c){var ti=uf(i,"align.description","center"),tn=uf(i,"space.description",0),X={left:uf(i,"space.descriptionLeft",0),right:uf(i,"space.descriptionRight",0),bottom:g||x?tn:0},te=uf(i,"proportion.description",0),tr=uf(i,"expand.description",!0);this.add(c,{align:ti,padding:X,proportion:te,expand:tr})}if(g){var to=uf(i,"choicesType","").split("-"),th=Dialog_Contains(to,"wrap")?FixWidthButtons_Buttons:Dialog_Contains(to,"grid")?GridButtons_GridButtons:un,tl=Dialog_Contains(to,"radio")?"radio":Dialog_Contains(to,"checkboxes")?"checkboxes":void 0,td={left:uf(i,"space.choicesBackgroundLeft",0),right:uf(i,"space.choicesBackgroundRight",0),top:uf(i,"space.choicesBackgroundTop",0),bottom:uf(i,"space.choicesBackgroundBottom",0)},tc=uf(i,"space.choice",0);th===un?td.item=tc:th===FixWidthButtons_Buttons?(td.item=tc,td.line=uf(i,"space.choiceLine",tc)):(td.column=uf(i,"space.choiceColumn",tc),td.row=uf(i,"space.choiceRow",tc));var tu={width:uf(i,"choicesWidth",void 0),height:uf(i,"choicesHeight",void 0),groupName:"choices",buttonsType:tl,background:m,buttons:g,space:td,click:_,eventEmitter:this.eventEmitter,setValueCallback:uf(i,"choicesSetValueCallback",void 0),setValueCallbackScope:uf(i,"choicesSetValueCallbackScope",void 0)};th===un&&(tu.orientation=Dialog_Contains(to,"x")?0:1),k=new th(e,tu),e.add.existing(k);var tp=uf(i,"space.choices",0),X={left:uf(i,"space.choicesLeft",0),right:uf(i,"space.choicesRight",0),bottom:x?tp:0},ti=uf(i,"align.choices","center"),te=uf(i,"proportion.choices",0),tr=uf(i,"expand.choices",!0);this.add(k,{align:ti,padding:X,proportion:te,expand:tr}),this.buttonsType=tl}if(x){E=new un(e,{groupName:"actions",background:S,buttons:x,orientation:0,space:{item:uf(i,"space.action",0)},expand:uf(i,"expand.actions",!1),align:uf(i,"align.actions","center"),click:_,eventEmitter:this.eventEmitter}),e.add.existing(E);var X={left:uf(i,"space.actionsLeft",0),right:uf(i,"space.actionsRight",0),bottom:uf(i,"space.actionsBottom",0)},te=uf(i,"proportion.action",0);this.add(E,{align:"center",padding:X,proportion:te,expand:!0})}EmitButtonEvent(this,"click"),EmitButtonEvent(this,"over"),EmitButtonEvent(this,"out"),EmitButtonEvent(this,"enable"),EmitButtonEvent(this,"disable"),this.addChildrenMap("background",s),this.addChildrenMap("title",r),this.addChildrenMap("toolbar",n),this.addChildrenMap("leftToolbar",o),this.addChildrenMap("content",l),this.addChildrenMap("description",c),this.addChildrenMap("choices",k?k.buttons:void 0),this.addChildrenMap("actions",E?E.buttons:void 0),this.addChildrenMap("choicesSizer",k),this.addChildrenMap("actionsSizer",E),this.addChildrenMap("toolbarSizer",R),this.addChildrenMap("leftToolbarSizer",j)}};var Dialog_Contains=function(e,i){return -1!==e.indexOf(i)},um={actions:"action",choices:"choice",toolbar:"toolbar",leftToolbar:"leftToolbar"},EmitButtonEvent=function(e,i){e.on(`button.${i}`,function(s,r,n,a,o){um.hasOwnProperty(r)&&e.emit(`${um[r]}.${i}`,s,n,a,o)})};Object.assign(Dialog_Dialog.prototype,uv);var ub=Dialog_Dialog;ObjectFactory.register("dialog",function(e){var i=new ub(this.scene,e);return this.scene.add.existing(i),i}),(0,k.Z)(window,"RexPlugins.UI.Dialog",ub);var build_CreateLabel=function(e,i,s){var r=new cz(e,i,s);return e.add.existing(r),r},ResetTitle=function(e){var i=this.childrenMap.title;null===(e=e.title)?i.hide():(i.show(),i.resetDisplayContent(e))},ResetContent=function(e){var i=this.childrenMap.content;if(null===(e=e.content))i.hide();else if(i.show(),i.resetDisplayContent)i.resetDisplayContent(e);else{var s=e||"";i.setText(s)}},ResetActions=function(e){var i=this.childrenMap.actions;if(i){var s=e.buttons;if(s){for(var r=this.scene,n=this.defaultActionConfig,a=this.defaultActionButtonCreator,o=0,h=s.length;o<h;o++){var l=s[o],c=i[o];c||(c=build_CreateLabel(r,n,a),this.addAction(c)),c.show().resetDisplayContent(l)}this.buttonMode=s.length;for(var o=s.length,h=i.length;o<h;o++)i[o].hide()}else{var g=i[0];g&&(null===e.buttonA?g.hide():(g.show(),g.resetDisplayContent(e.buttonA)));var m=i[1];m&&(null===e.buttonB?m.hide():(m.show(),m.resetDisplayContent(e.buttonB)))}}},ResetChoices=function(e){var i=this.childrenMap.choices;if(i){var s=e.choices;s||(s=[]);for(var r=this.scene,n=this.defaultChoiceConfig,a=this.defaultActionButtonCreator,o=0,h=s.length;o<h;o++){var l,c=s[o];"string"==typeof c&&(c={text:c});var g=i[o];g||(g=build_CreateLabel(r,n,a),this.addChoice(g)),g.show().resetDisplayContent(c),l=c.hasOwnProperty("value")?c.value:c.text,g.setName(l)}for(var o=s.length,h=i.length;o<h;o++)i[o].hide()}};Phaser.Utils.Objects.GetValue;let uy=Phaser.Utils.Objects.Merge;var uC={resetDisplayContent:function(e){return void 0===e&&(e={}),ResetTitle.call(this,e),ResetContent.call(this,e),ResetActions.call(this,e),ResetChoices.call(this,e),this},modal:function(e,i){object_IsFunction(e)&&(i=e,e=void 0),void 0===e&&(e={}),e=uy(e,this.modalStyle),s=0===this.buttonMode&&!this.hasAnyChoice(),e.hasOwnProperty("anyTouchClose")||(e.anyTouchClose=s),e.hasOwnProperty("manualClose")||(e.manualClose=!s);var s,r=this;return oP.modal.call(this,e,function(e){var s=e.index;s===r.confirmButtonIndex?r.emit("confirm",e):s===r.cancelButtonIndex&&r.emit("cancel",e),i&&i(e)}),this}};Object.assign(uC,{setConfirmButtonIndex(e){return this.confirmButtonIndex=e,this},setCancelButtonIndex(e){return this.cancelButtonIndex=e,this}});var OnPointerOverCallback=function(e){e.setHoverState&&e.setHoverState(!0)},OnPointerOutCallback=function(e){e.setHoverState&&e.setHoverState(!1)},OnChoiceButtonStateChange=function(e,i,s,r){e.setActiveState&&e.setActiveState(r)},OnButtonEnable=function(e){e.setDisableState&&e.setDisableState(!1)},OnButtonDisable=function(e){e.setDisableState&&e.setDisableState(!0)},methods_RegisterEvents=function(){this.on("button.over",OnPointerOverCallback).on("button.out",OnPointerOutCallback).on("button.enable",OnButtonEnable).on("button.disable",OnButtonDisable).on("button.statechange",OnChoiceButtonStateChange)};let ux=Phaser.Utils.Objects.GetValue;var methods_CreateContent=function(e,i,s){var r,n=ux(i,"$type");return void 0===n&&i&&(i.hasOwnProperty("slider")||i.hasOwnProperty("scroller"))&&(n="textarea"),r="textarea"===n?new build_CreateTextArea(e,i,s):new build_CreateLabel(e,i,s),e.add.existing(r),r};let uS=Phaser.Utils.Objects.GetValue;let ConfirmDialog_ConfirmDialog=class ConfirmDialog_ConfirmDialog extends ub{constructor(e,i,s){i=i?DeepClone(i):{},void 0===s&&(s={});var r=uS(s,"background",build_CreateBackground);r?i.background=r(e,i.background):delete i.background,i.title=build_CreateLabel(e,i.title,s.title),i.content=methods_CreateContent(e,i.content,s.content),i.content instanceof TextArea_TextArea&&object_HasValue(i,"height")&&!object_HasValue(i,"proportion.content")&&(0,k.Z)(i,"proportion.content",1);var n=i.button,a=i.buttonA||n,o=i.buttonB||n,h=i.buttonMode;void 0===h&&(h=a&&o?2:a?1:0);var l=s.button,c=s.buttonA||l,g=s.buttonB||l;switch(h){case 2:i.actions=[build_CreateLabel(e,a,c),build_CreateLabel(e,o,g)];break;case 1:i.actions=[build_CreateLabel(e,a,c)];break;case 0:break;default:i.actions=[]}var m=i.choice;m&&(i.choices=[]),super(e,i),this.type="rexConfirmDialog",this.buttonMode=h,this.defaultActionConfig=n,this.defaultActionButtonCreator=l,this.defaultChoiceConfig=m,this.defaultChoiceCreator=s.choice;var x=this.childrenMap.actions;this.addChildrenMap("buttonA",x?x[0]:null),this.addChildrenMap("buttonB",x?x[1]:null),methods_RegisterEvents.call(this),this.setConfirmButtonIndex(uS(i,"confirmButtonIndex",0)),this.setCancelButtonIndex(uS(i,"cancelButtonIndex",1)),this.modalStyle=i.modal||{}}};Object.assign(ConfirmDialog_ConfirmDialog.prototype,uC),ObjectFactory.register("confirmDialog",function(e,i){var s=new ConfirmDialog_ConfirmDialog(this.scene,e,i);return this.scene.add.existing(s),s}),(0,k.Z)(window,"RexPlugins.UI.ConfirmDialog",ConfirmDialog_ConfirmDialog);let u_=Phaser.Utils.Objects.GetValue;var confirmdialog_ConfirmAction=function(e,i){var s=i.dialog,r=!s;if(r){var n=i.style;n.buttonMode=2,s=new ConfirmDialog_ConfirmDialog(e,n,i.creators),e.add.existing(s)}s.setConfirmButtonIndex(u_(i,"confirmButtonIndex",0)).setCancelButtonIndex(u_(i,"cancelButtonIndex",1)).resetDisplayContent(i.content).layout(),r&&i.onCreateDialog&&i.onCreateDialog(s);var a=i.modal;a&&!a.hasOwnProperty("destroy")&&(a.destroy=r);var o=i.confirm,h=i.cancel,l=i.confirmScope,c=i.cancelScope;return o&&s.once("confirm",o,l),h&&s.once("cancel",h,c),s.modal(a,function(e){s.off("confirm",o,l),s.off("cancel",h,c)}),s},uw=class extends dd{constructor(e,i){void 0===i&&(i={}),super(e,i),this.type="rexConfirmActionButton",this.setConfirmDialogEnable(),this.confirmActionConfig=object_Clone(i.confirmDialog||{}),i.confirm&&this.setConfirmCallback(i.confirm,i.confirmScope),i.cancel&&this.setCancelCallback(i.cancel,i.cancelScope),this.onClickCallback=function(){this.confirmDialogEnable?this.confirmDialog||(this.confirmDialog=confirmdialog_ConfirmAction(e,this.confirmActionConfig),this.confirmDialog.once("destroy",function(){this.confirmDialog=void 0},this)):this.runConfirmCallback()},this.onClick(this.onClickCallback,this)}destroy(e){this.scene&&!this.ignoreDestroy&&(this.confirmDialog&&this.confirmDialog.destroy(),super.destroy(e),this.confirmActionConfig=void 0,this.onClickCallback=void 0,this.confirmDialog=void 0)}setConfirmCallback(e,i){return this.confirmActionConfig.confirm=e,this.confirmActionConfig.confirmScope=i,this}setCancelCallback(e,i){return this.confirmActionConfig.cancel=e,this.confirmActionConfig.cancelScope=i,this}setConfirmDialogContent(e){return this.confirmActionConfig.content=e,this}setConfitmDialogStyle(e){return this.confirmActionConfig.style=e,this}setConfitmDialogModalConfig(e){return this.confirmActionConfig.modal=e,this}setConfirmDialogEnable(e){return void 0===e&&(e=!0),this.confirmDialogEnable=e,this}runConfirmCallback(){var e=this.confirmActionConfig.confirm,i=this.confirmActionConfig.confirmScope;return e&&e.call(i),this}};ObjectFactory.register("confirmActionButton",function(e){var i=new uw(this.scene,e);return this.scene.add.existing(i),i}),(0,k.Z)(window,"RexPlugins.UI.ConfirmActionButton",uw);var utils_RemoveFromParent=function(e,i){if(e){var s=GetParent(e);s&&s.remove(e,i)}};let uP=Phaser.Utils.Objects.GetValue;var GetAddChildConfig=function(e,i,s){var r=uP(e,`proportion.${i}`,s.proportion),n=uP(e,`align.${i}`,"center"),a=uP(e,`space.${i}`,void 0);if("number"==typeof a&&s.paddingKey){var o=a;(a={})[s.paddingKey]=o}return{proportion:r,align:n,padding:a,expand:uP(e,`expand.${i}`,!0)}},GetAddHeaderConfig=function(e){return GetAddChildConfig(e,"header",{proportion:0,paddingKey:"bottom"})},GetAddLeftSideConfig=function(e){return GetAddChildConfig(e,"leftSide",{proportion:0,paddingKey:"right"})},GetAddContentConfig=function(e){return GetAddChildConfig(e,"content",{proportion:1})},GetAddRightSideConfig=function(e){return GetAddChildConfig(e,"rightSide",{proportion:0,paddingKey:"left"})},GetAddFooterConfig=function(e){return GetAddChildConfig(e,"footer",{proportion:0,paddingKey:"top"})},GetAddContainerConfig=function(e){return{proportion:1,align:"center",padding:0,expand:!0}},methods_CreatExpandContainer=function(e,i){var s=new dr(e,{orientation:i});return e.add.existing(s),s};let uk=Phaser.Utils.Objects.GetValue,uT=[function(e){var i=this.scene,s=e.header;s&&this.add(s,GetAddHeaderConfig(e));var r=methods_CreatExpandContainer(i,0);this.add(r,GetAddContainerConfig(e));var n=e.leftSide;n&&r.add(n,GetAddLeftSideConfig(e));var a=e.content;a&&r.add(a,GetAddContentConfig(e));var o=e.rightSide;o&&r.add(o,GetAddRightSideConfig(e));var h=e.footer;h&&this.add(h,GetAddFooterConfig(e))},function(e){var i=this.scene,s=e.header;s&&this.add(s,GetAddHeaderConfig(e));var r=methods_CreatExpandContainer(i,0);this.add(r,GetAddContainerConfig(e));var n=e.leftSide;n&&r.add(n,GetAddLeftSideConfig(e));var a=methods_CreatExpandContainer(i,1);r.add(a,GetAddContainerConfig(e));var o=methods_CreatExpandContainer(i,0);a.add(o,GetAddContainerConfig(e));var h=e.content;h&&o.add(h,GetAddContentConfig(e));var l=e.rightSide;l&&o.add(l,GetAddRightSideConfig(e));var c=e.footer;c&&a.add(c,GetAddFooterConfig(e))},function(e){var i=this.scene,s=e.header;s&&this.add(s,GetAddHeaderConfig(e));var r=methods_CreatExpandContainer(i,0);this.add(r,GetAddContainerConfig(e));var n=methods_CreatExpandContainer(i,1);r.add(n,GetAddContainerConfig(e));var a=methods_CreatExpandContainer(i,0);n.add(a,GetAddContainerConfig(e));var o=e.leftSide;o&&a.add(o,GetAddLeftSideConfig(e));var h=e.content;h&&a.add(h,GetAddContentConfig(e));var l=e.footer;l&&n.add(l,GetAddFooterConfig(e));var c=e.rightSide;c&&r.add(c,GetAddRightSideConfig(e))},function(e){var i=this.scene,s=e.header;s&&this.add(s,GetAddHeaderConfig(e));var r=methods_CreatExpandContainer(i,0);this.add(r,GetAddContainerConfig(e));var n=e.leftSide;n&&r.add(n,GetAddLeftSideConfig(e));var a=methods_CreatExpandContainer(i,1);r.add(a,GetAddContainerConfig(e));var o=e.content;o&&a.add(o,GetAddContentConfig(e));var h=e.footer;h&&a.add(h,GetAddFooterConfig(e));var l=e.rightSide;l&&r.add(l,GetAddRightSideConfig(e))}],uO={FFF:0,LFF:1,FFR:2,LFR:3};let HolyGrail_HolyGrail=class HolyGrail_HolyGrail extends dr{constructor(e,i){void 0===i&&(i={}),i.orientation=1,super(e,i),this.type="rexHolyGrail",this.build(i)}};Object.assign(HolyGrail_HolyGrail.prototype,{build:function(e){void 0===e&&(e={});var i=e.background,s=e.header,r=e.leftSide,n=e.content,a=e.rightSide,o=e.footer;utils_RemoveFromParent(i),utils_RemoveFromParent(s),utils_RemoveFromParent(r),utils_RemoveFromParent(n),utils_RemoveFromParent(a),utils_RemoveFromParent(o),this.clear(!0),i&&this.addBackground(i);var h=uk(e,"layoutMode",0);return"string"==typeof h&&(h=uO[h.toUpperCase()]),(uT[h]||uT[0]).call(this,e),this.addChildrenMap("background",i),this.addChildrenMap("header",s),this.addChildrenMap("leftSide",r),this.addChildrenMap("content",n),this.addChildrenMap("rightSide",a),this.addChildrenMap("footer",o),this}}),ObjectFactory.register("holyGrail",function(e){var i=new HolyGrail_HolyGrail(this.scene,e);return this.scene.add.existing(i),i}),(0,k.Z)(window,"RexPlugins.UI.HolyGrail",HolyGrail_HolyGrail);let uM=Phaser.Utils.Objects.GetValue;let Tabs_Tabs=class Tabs_Tabs extends dW{constructor(e,i){void 0===i&&(i={}),i.column=3,i.row=3,i.columnProportions=[0,0,0],i.rowProportions=[0,0,0];var s,r,n,a,o=uM(i,"expand.panel",!1);o&&(i.columnProportions[1]=1,i.rowProportions[1]=1),super(e,i),this.type="rexTabs",this.eventEmitter=uM(i,"eventEmitter",this);var h=uM(i,"background",void 0),l=uM(i,"panel",void 0),c=uM(i,"leftButtons",void 0),g=uM(i,"leftButtonsBackground",void 0),m=uM(i,"rightButtons",void 0),x=uM(i,"rightButtonsBackground",void 0),S=uM(i,"topButtons",void 0),_=uM(i,"topButtonsBackground",void 0),k=uM(i,"bottomButtons",void 0),E=uM(i,"bottomButtonsBackground",void 0),R=uM(i,"click",void 0);if(h&&this.addBackground(h),l&&this.add(l,{column:1,row:1,expand:o}),c){var j=uM(i,"space.leftButtonsOffset",0),Y=uM(i,"space.leftButton",0),X=uM(i,"expand.leftButtons",!1),$=uM(i,"align.leftButtons","top");s=new un(e,{groupName:"left",background:g,buttons:c,orientation:"y",space:{item:Y},expand:X,click:R,eventEmitter:this.eventEmitter}),this.add(s,{column:0,row:1,align:$,padding:{top:j},expand:X})}if(m){var Z=uM(i,"space.rightButtonsOffset",0),q=uM(i,"space.rightButton",0),tt=uM(i,"expand.rightButtons",!1),te=uM(i,"align.rightButtons","top");r=new un(e,{groupName:"right",background:x,buttons:m,orientation:"y",space:{item:q},expand:tt,click:R,eventEmitter:this.eventEmitter}),this.add(r,{column:2,row:1,align:te,padding:{top:Z},expand:tt})}if(S){var ti=uM(i,"space.topButtonsOffset",0),ts=uM(i,"space.topButton",0),tr=uM(i,"expand.topButtons",!1),tn=uM(i,"align.topButtons","left");n=new un(e,{groupName:"top",background:_,buttons:S,orientation:"x",space:{item:ts},expand:tr,align:uM(i,"align.topButtons",void 0),click:R,eventEmitter:this.eventEmitter}),this.add(n,{column:1,row:0,align:tn,padding:{left:ti},expand:tr})}if(k){var to=uM(i,"space.bottomButtonsOffset",0),th=uM(i,"space.bottomButton",0),tl=uM(i,"expand.bottomButtons",!1),td=uM(i,"align.bottomButtons","left");a=new un(e,{groupName:"bottom",background:E,buttons:k,orientation:"x",space:{item:th},expand:tl,align:uM(i,"align.bottomButtons",void 0),click:R,eventEmitter:this.eventEmitter}),this.add(a,{column:1,row:2,align:td,padding:{left:to},expand:tl})}this.addChildrenMap("background",h),this.addChildrenMap("panel",l),this.addChildrenMap("leftButtons",c),this.addChildrenMap("rightButtons",m),this.addChildrenMap("topButtons",S),this.addChildrenMap("bottomButtons",k),this.addChildrenMap("leftButtonsSizer",s),this.addChildrenMap("rightButtonsSizer",r),this.addChildrenMap("topButtonsSizer",n),this.addChildrenMap("bottomButtonsSizer",a)}};Object.assign(Tabs_Tabs.prototype,{getButtonsSizer(e){return this.childrenMap[`${e}ButtonsSizer`]},getButton(e,i){var s=this.getButtonsSizer(e);return s?s.getButton(i):void 0},setButtonEnable(e,i,s){return this.getButtonsSizer(e).setButtonEnable(i,s),this},setLeftButtonEnable(e,i){return this.childrenMap.leftButtonsSizer.setButtonEnable(e,i),this},setRightButtonEnable(e,i){return this.childrenMap.rightButtonsSizer.setButtonEnable(e,i),this},setTopButtonEnable(e,i){return this.childrenMap.topButtonsSizer.setButtonEnable(e,i),this},setBottomButtonEnable(e,i){return this.childrenMap.bottomButtonsSizer.setButtonEnable(e,i),this},toggleButtonEnable(e,i){return this.getButtonsSizer(e).toggleButtonEnable(i),this},toggleLeftButtonEnable(e){return this.childrenMap.leftButtonsSizer.toggleButtonEnable(e),this},toggleRightButtonEnable(e){return this.childrenMap.rightButtonsSizer.toggleButtonEnable(e),this},toggleTopButtonEnable(e){return this.childrenMap.topButtonsSizer.toggleButtonEnable(e),this},toggleBottomButtonEnable(e){return this.childrenMap.bottomButtonsSizer.toggleButtonEnable(e),this},getButtonEnable(e,i){return this.getButtonsSizer(e).getButtonEnable(i)},getLeftButtonEnable(e){return this.childrenMap.leftButtonsSizer.getButtonEnable(e)},getRightButtonEnable(e){return this.childrenMap.rightButtonsSizer.getButtonEnable(e)},getTopButtonEnable(e){return this.childrenMap.topButtonsSizer.getButtonEnable(e)},getBottomButtonEnable(e){return this.childrenMap.bottomButtonsSizer.getButtonEnable(e)},emitButtonClick(e,i){var s=this.getButtonsSizer(e);return s&&s.emitButtonClick(i),this},emitLeftButtonClick(e){return this.childrenMap.leftButtonsSizer.emitButtonClick(e),this},emitRightButtonClick(e){return this.childrenMap.rightButtonsSizer.emitButtonClick(e),this},emitTopButtonClick(e){return this.childrenMap.topButtonsSizer.emitButtonClick(e),this},emitBottomButtonClick(e){return this.childrenMap.bottomButtonsSizer.emitButtonClick(e),this},getLeftButton(e){return this.childrenMap.leftButtonsSizer.getButton(e)},getRightButton(e){return this.childrenMap.rightButtonsSizer.getButton(e)},getTopButton(e){return this.childrenMap.topButtonsSizer.getButton(e)},getBottomButton(e){return this.childrenMap.bottomButtonsSizer.getButton(e)},showButton(e,i){return Show(this.getButton(e,i)),this},showLeftButton(e){return Show(this.getLeftButton(e)),this},showRightButton(e){return Show(this.getRightButton(e)),this},showTopButton(e){return Show(this.getTopButton(e)),this},showBottomButton(e){return Show(this.getBottomButton(e)),this},hideButton(e,i){return Hide(this.getButton(e,i)),this},hideLeftButton(e){return Hide(this.getLeftButton(e)),this},hideRightButton(e){return Hide(this.getRightButton(e)),this},hideTopButton(e){return Hide(this.getTopButton(e)),this},hideBottomButton(e){return Hide(this.getBottomButton(e)),this},addButton(e,i){return this.getButtonsSizer(e).addButton(i),this},addLeftButton(e){return this.addButton("left",e),this},addRightButton(e){return this.addButton("right",e),this},addTopButton(e){return this.addButton("top",e),this},removeButton(e,i,s){return this.getButtonsSizer(e).removeButton(i,s),this},removeLeftButton(e,i){return this.removeButton("left",e,i),this},removeRightButton(e,i){return this.removeButton("right",e,i),this},removeTopButton(e,i){return this.removeButton("top",e,i),this},removeBottomButton(e,i){return this.removeButton("bottom",e,i),this},clearButtons(e,i){return this.getButtonsSizer(e).clearButtons(i),this},clearLeftButtons(e){return this.clearButtons("left",e),this},clearRightButtons(e){return this.clearButtons("right",e),this},clearTopButtons(e){return this.clearButtons("top",e),this},clearBottomButtonss(e){return this.clearButtons("bottom",e),this},forEachButton(e,i,s){return this.getButtonsSizer(e).forEachButtton(i,s),this},forEachLeftButton(e,i){return this.childrenMap.leftButtonsSizer.forEachButtton(e,i),this},forEachRightButton(e,i){return this.childrenMap.rightButtonsSizer.forEachButtton(e,i),this},forEachTopButton(e,i){return this.childrenMap.topButtonsSizer.forEachButtton(e,i),this},forEachBottomButton(e,i){return this.childrenMap.bottomButtonsSizer.forEachButtton(e,i),this}}),ObjectFactory.register("tabs",function(e){var i=new Tabs_Tabs(this.scene,e);return this.scene.add.existing(i),i}),(0,k.Z)(window,"RexPlugins.UI.Tabs",Tabs_Tabs),ObjectFactory.register("slider",function(e){var i=new Slider_Slider(this.scene,e);return this.scene.add.existing(i),i}),(0,k.Z)(window,"RexPlugins.UI.Slider",Slider_Slider);let Cell=class Cell{constructor(e,i){this.container=null,this._deltaHeight=0,this.setParent(e)}setParent(e){this.parent=e,this.parentContainer=e.getParentContainer()}destroy(e){void 0===e&&(e=!1),e||this.destroyContainer(),this.deltaHeight=0,this.data=void 0,this.container=null,this.parent=void 0,this.parentContainer=void 0}get table(){return this.parent}get scrollMode(){return this.parentContainer.scrollMode}get colIndx(){return this.parent.cellIndxeToColIndex(this.index)}get rowIndx(){return this.parent.cellIndxeToRowIndex(this.index)}getContainer(){return this.container}setContainer(e){return e?(this.container&&this.container.destroy(),this.container=e,this.parentContainer.add(e)):this.destroyContainer(),this}destroyContainer(){return this.container&&(this.container.destroy(),this.container=null),this}popContainer(){if(!this.container)return null;var e=this.container;return this.container=null,this.parentContainer.remove(e),e}setXY(e,i){return this.container&&this.parentContainer.setChildLocalPosition(this.container,e,i),this}setCellContainerAlign(e){return"string"==typeof e&&(e=ab[e]),this.cellContainerAlign=e,this}get deltaHeight(){return this._deltaHeight}set deltaHeight(e){null==e&&(e=0);var i=this.parent;0===this._deltaHeight&&0!==e?i.nonZeroDeltaHeightCount++:0!==this._deltaHeight&&0===e&&i.nonZeroDeltaHeightCount--;var s=this._deltaHeight!==e;if(this._deltaHeight=e,s){i.resetTotalRowsHeight();var r=0===this.scrollMode?"cellheightchange":"cellwidthchange";this.parentContainer.emit(r,this,this.container,this.parentContainer)}}get deltaWidth(){return this.deltaHeight}set deltaWidth(e){this.deltaHeight=e}setDeltaHeight(e){return this.deltaHeight=e,this}setDeltaWidth(e){return this.deltaHeight=e,this}get height(){return 0===this.scrollMode?this.deltaHeight+this.parent.defaultCellHeight:this.parent.defaultCellWidth}set height(e){1!==this.scrollMode&&this.setDeltaHeight(e-this.parent.defaultCellHeight)}setHeight(e){return this.height=e,this}get width(){return 0===this.scrollMode?this.parent.defaultCellWidth:this.deltaHeight+this.parent.defaultCellHeight}set width(e){0!==this.scrollMode&&this.setDeltaHeight(e-this.parent.defaultCellHeight)}setWidth(e){return this.width=e,this}get scene(){return this.parentContainer.scene}};Object.assign(Cell.prototype,td);let uE=Phaser.Utils.Objects.GetValue,uR=Phaser.Utils.Array.SpliceOne;var uL=class{constructor(e,i){this.parent=e,this.cells=[],this.cellPool=new X,this.resetFromJSON(i)}resetFromJSON(e){void 0===e&&(e={}),this.colCount=void 0,this.nonZeroDeltaHeightCount=0,this.resetTotalRowsHeight();var i=e.cellHeight;void 0===i&&(i=30);var s=e.cellWidth;return void 0===s&&(s=30),this.setDefaultCellHeight(i),this.setDefaultCellWidth(s),this.initCells(uE(e,"cellsCount",0)),this.setColumnCount(uE(e,"columns",1)),this}destroy(e){this.cellPool.destroy(),this.cells=void 0,this.parent=void 0}get defaultCellHeightMode(){return 0===this.nonZeroDeltaHeightCount}setDefaultCellHeight(e){return this.defaultCellHeight=e,this}setDefaultCellWidth(e){return this.defaultCellWidth=e,this}initCells(e){var i=this.cells;i.length=e;for(var s=0;s<e;s++)i[s]=null;return this}insertNewCells(e,i){var s=this.cells;if(e===s.length){var r=e+i;s.legth=r;for(var n=e;n<r;n++)s[n]=null}else{var a=[];a.length=i;for(var n=0;n<i;n++)a[n]=null;this.cells.splice(e,0,...a)}return this.resetTotalRowsHeight(),this}removeCells(e,i){for(var s=e+i,r=e;r<s;r++)this.freeCell(r);return s===this.cells.length?this.cells.length=e:(1===i?uR(this.cells,e):this.cells.splice(e,i),this.buildCellIndex(e)),this.resetTotalRowsHeight(),this}setColumnCount(e){this.colCount=e,this.resetTotalRowsHeight();var i=this.parent;if(i.expandCellSize){var s=0===i.scrollMode?i.width:i.height;this.setDefaultCellWidth(s/e)}return this}get rowCount(){return Math.ceil(this.cells.length/this.colCount)}get cellsCount(){return this.cells.length}isValidCellIdx(e){return e>=0&&e<this.cells.length}heightToRowIndex(e,i){if(void 0===i&&(i=0),0===e)return 0;if(this.defaultCellHeightMode){var s=e/this.defaultCellHeight;return 1===i?Math.ceil(s):Math.floor(s)}for(var r,n=this.rowCount,a=e,s=0;;)if(a-=this.getRowHeight(s),r=s>=0&&s<n,a>0&&r)s+=1;else{if(0===a)return 2===i&&(s+=1),s;if(1===i){var o=s;s+=1,(r=s>=0&&s<n)||(s=o)}return s}}widthToColIndex(e,i){if(0===e)return 0;var s=e/this.defaultCellWidth;return i?Math.ceil(s):Math.floor(s)}colRowToCellIndex(e,i){return e>=this.colCount?null:i*this.colCount+e}rowIndexToHeight(e,i){if(this.defaultCellHeightMode)return(i-e+1)*this.defaultCellHeight;for(var s=0,r=e;r<=i;r++)s+=this.getRowHeight(r);return s}colIndexToWidth(e,i){return(i-e+1)*this.defaultCellWidth}getRowHeight(e){var i=this.colCount;if(i<=1)return this.getCellHeight(this.colRowToCellIndex(0,e));for(var s,r=0,n=0;n<i;n++)r<(s=this.getCellHeight(this.colRowToCellIndex(n,e)))&&(r=s);return r}getColWidth(e){return this.defaultCellWidth}getCellHeight(e){if(!this.isValidCellIdx(e))return 0;if(this.defaultCellHeightMode)i=this.defaultCellHeight;else{var i,s=this.getCell(e,!1),r=s?s.deltaHeight:0;i=this.defaultCellHeight+r}return i}resetTotalRowsHeight(){this._totalRowsHeight=null}get totalRowsHeight(){return null===this._totalRowsHeight&&(this._totalRowsHeight=this.rowIndexToHeight(0,this.rowCount-1)),this._totalRowsHeight}get totalColumnWidth(){return this.colCount*this.defaultCellWidth}cellIndxeToColIndex(e){return e%this.colCount}cellIndxeToRowIndex(e){return Math.floor(e/this.colCount)}getCell(e,i){if(!this.isValidCellIdx(e))return null;if(void 0===i&&(i=!0),null===this.cells[e]&&i){var s=this.newCell(e);this.cells[e]=s}return this.cells[e]}newCell(e){var i=this.cellPool.pop();return null===i?i=new Cell(this):i.setParent(this),i.index=e,i}buildCellIndex(e){void 0===e&&(e=0);for(var i,s=this.cells,r=e,n=s.length;r<n;r++)(i=s[r])&&(i.index=r);return this}getParentContainer(){return this.parent}freeCell(e){return"number"==typeof e&&(e=this.cells[e]),e&&(e.destroy(),this.cellPool.push(e)),this}},mask_MaskToGameObject=function(e){return e.hasOwnProperty("geometryMask")?e.geometryMask:e.bitmapMask};let uB=Phaser.Geom.Intersects.RectangleToRectangle,uI=Phaser.Geom.Rectangle.Overlaps;var IsVisible=function(e){if(!e.displayList)return!1;for(;;){var i=e.rexContainer;if(!i)return e.visible;if(!i.visible)return!1;var s=i.parent;if(!s)return!0;e=s}},ContainsPoints=function(e,i){var s=i.top,r=i.bottom,n=i.left,a=i.right;return 0+(e.contains(n,s)?1:0)+(e.contains(n,r)?1:0)+(e.contains(a,s)?1:0)+(e.contains(a,r)?1:0)},ShowAll=function(e,i,s){i.hasOwnProperty("isRexContainerLite")?(i.syncChildrenEnable=!1,e.setChildMaskVisible(i,!0),i.syncChildrenEnable=!0):(i.clearMask&&i.clearMask(),e.setChildMaskVisible(i,!0))},ShowSome=function(e,i,s){i.hasOwnProperty("isRexContainerLite")?(i.syncChildrenEnable=!1,e.setChildMaskVisible(i,!0),i.syncChildrenEnable=!0):(i.setMask&&i.setMask(s),e.setChildMaskVisible(i,!0))},ShowNone=function(e,i,s){i.hasOwnProperty("isRexContainerLite")?(i.syncChildrenEnable=!1,e.setChildMaskVisible(i,!1),i.syncChildrenEnable=!0):(i.clearMask&&i.clearMask(),e.setChildMaskVisible(i,!1))},mask_MaskChildren=function(e,i,s){if(i){void 0===s&&(s=e.getAllChildren());for(var r,n,a=e.getBounds(),o=mask_MaskToGameObject(i),h=0,l=s.length;h<l;h++)if((r=s[h])!==o&&IsVisible(r)){if(r.getBounds)switch(ContainsPoints(a,n=r.getBounds(n))){case 4:ShowAll(e,r,i);break;case 0:uB(a,n)||uI(a,n)?ShowSome(e,r,i):ShowNone(e,r,i);break;default:ShowSome(e,r,i)}else ShowSome(e,r,i)}}};let uG=Phaser.Utils.Objects.GetValue,uD={update:0,everyTick:1};var uj={setupChildrenMask(e){return!1===e||(this.setMaskUpdateMode(uG(e,"updateMode",0)),this.enableChildrenMask(uG(e,"padding",0)),this.setMaskLayer(uG(e,"layer",void 0)),this.startMaskUpdate()),this},destroyChildrenMask(){return this.childrenMask&&(this.stopMaskUpdate(),this.childrenMask.destroy(),this.childrenMask=void 0),this},setMaskUpdateMode(e){return"string"==typeof e&&(e=uD[e]),this.maskUpdateMode=e,this},startMaskUpdate(){this.scene.game.events.on("poststep",this.maskChildren,this)},stopMaskUpdate(){this.scene.game.events.off("poststep",this.maskChildren,this)},enableChildrenMask(e){var i=mask_AddChildMask.call(this,null,this,0,e);return this.childrenMask=i.createGeometryMask(),this},setMaskChildrenFlag(e){return void 0===e&&(e=!0),this.maskChildrenFlag=e,this},setMaskLayer(e){return this.maskLayer=e,this},maskChildren(){return this.childrenMask&&this.maskChildrenFlag&&0!==this.alpha&&this.visible&&(this.privateRenderLayer?this.privateRenderLayer.setMask(this.childrenMask):this.maskLayer?(this.addToLayer(this.maskLayer),this.maskLayer.setMask(this.childrenMask)):mask_MaskChildren(this,this.childrenMask),0===this.maskUpdateMode&&(this.maskChildrenFlag=!1)),this},layoutChildrenMask(){if(!this.childrenMask)return this;var e=mask_MaskToGameObject(this.childrenMask);return e.setPosition().resize(),this.resetChildPositionState(e),this}},updatetable_ShowCell=function(e){var i=null,s=e.getContainer();if(s?(i=s,e.popContainer()):this.cellContainersPool&&null!==(i=this.cellContainersPool.getFirstDead())&&i.setActive(!0).setVisible(!0),this.emit("cellvisible",e,i,this),this.cellContainersPool){var s=e.getContainer();s?null===i?this.cellContainersPool.add(s):i!==s&&(this.cellContainersPool.add(s),this.cellContainersPool.killAndHide(i)):null!==i&&this.cellContainersPool.killAndHide(i)}},updatetable_HideCell=function(e){if(this.emit("cellinvisible",e),this.cellContainersPool){var i=e.popContainer();i&&this.cellContainersPool.killAndHide(i)}e.destroyContainer()},ClearVisibleCellIndexes=function(){var e=this.preVisibleCells;this.preVisibleCells=this.visibleCells,this.visibleCells=e,this.visibleCells.clear()},PointToCellIndex=function(e,i){i-=this.y+this.topLeftY,e-=this.x+this.topLeftX;var s=this.tableOY-(0===this.scrollMode?i:e),r=this.tableOX-(0===this.scrollMode?e:i),n=this.table,a=n.heightToRowIndex(-s,0),o=n.widthToColIndex(-r),h=n.colRowToCellIndex(o,a);return null!==h&&this.isCellVisible(h)?h:null};let uA=Phaser.Math.Clamp;var uF={setTableOY:function(e){var i=this.table,s=this.topTableOY,r=this.bottomTableOY,n=e>this.topTableOY,a=e<this.bottomTableOY;return this.clampTableOXY&&(i.rowCount<i.heightToRowIndex(this.instHeight,1)?e=0:n?e=s:a&&(e=r)),this._tableOY!==e&&(this._tableOY=e),n&&!this.execeedTopState&&this.emit("execeedtop",this,e,s),this.execeedTopState=n,a&&!this.execeedBottomState&&this.emit("execeedbottom",this,e,r),this.execeedBottomState=a,this},setTableOX:function(e){var i=this.table,s=this.leftTableOX,r=this.rightTableOX,n=e>this.leftTableOX,a=e<this.rightTableOX;return this.clampTableOXY&&(i.colCount<i.widthToColIndex(this.instWidth,!0)?e=0:n?e=s:a&&(e=r)),this._tableOX!==e&&(this._tableOX=e),n&&!this.execeedLeftState&&this.emit("execeedleft",this,e,s),this.execeedLeftState=n,a&&!this.execeedRightState&&this.emit("execeedright",this,e,r),this.execeedRightState=a,this},showCells:function(){if(0!==this.cellsCount){var e=this.table;this.startRowIndex=Math.max(e.heightToRowIndex(-this.tableOY,2),0);for(var i=this.startRowIndex,s=Math.max(e.widthToColIndex(-this.tableOX),0),r=s,n=e.colRowToCellIndex(r,i),a=this.bottomBound,o=this.rightBound,h=e.cellsCount-1,l=e.colCount-1,c=this.getCellTLX(r),g=c,m=this.getCellTLY(i);m<a&&n<=h;){if(this.table.isValidCellIdx(n)){var x,S,_=e.getCell(n,!0);if(this.visibleCells.set(_),this.preVisibleCells.contains(_)||this.showCell(_),0===this.scrollMode?(x=g,S=m):(x=m,S=g),null==_.cellContainerAlign)_.setXY(x,S);else{var k=_.getContainer();actions_AlignIn(k,x,S,_.width,_.height,_.cellContainerAlign),_.setXY(k.x,k.y)}}g<o&&r<l?(g+=e.getColWidth(r),r+=1):(g=c,m+=e.getRowHeight(i),r=s,i+=1),n=e.colRowToCellIndex(r,i)}}},showCell:updatetable_ShowCell,getCellTLX:function(e){var i=0===this.scrollMode?this.topLeftX:this.topLeftY;return this.tableOX+this.table.colIndexToWidth(0,e-1)+i},getCellTLY:function(e){var i=0===this.scrollMode?this.topLeftY:this.topLeftX;return this.tableOY+this.table.rowIndexToHeight(0,e-1)+i},hideCells:function(){var e=this.preVisibleCells,i=this.visibleCells;e.iterate(function(e){i.contains(e)||this.hideCell(e)},this)},hideCell:updatetable_HideCell,updateTable:function(e){return void 0===e&&(e=!1),e&&(ClearVisibleCellIndexes.call(this),this.hideCells()),ClearVisibleCellIndexes.call(this),this.showCells(),this.hideCells(),this.setMaskChildrenFlag(),this},isCellVisible:function(e){var i=this.table.getCell(e,!1);return i&&this.visibleCells.contains(i)},pointToCellIndex:PointToCellIndex,pointToCellContainer:function(e,i){var s=PointToCellIndex.call(this,e,i);if(null!==s)return this.getCellContainer(s)},eachVisibleCell:function(e,i){return this.visibleCells.each(e,i),this},iterateVisibleCell:function(e,i){return this.visibleCells.iterate(e,i),this},eachCell:function(e,i){return this.table.cells.slice().forEach(e,i),this},iterateCell:function(e,i){return this.table.cells.forEach(e,i),this},setCellsCount:function(e){var i=this.cellsCount;return i===e||(i>e?this.removeCells(e,i-e):this.insertNewCells(i,e-i)),this},insertNewCells:function(e,i){return"object"==typeof e&&(e=e.index),void 0===i&&(i=1),i<=0||(e=uA(e,0,this.cellsCount),this.table.insertNewCells(e,i)),this},removeCells:function(e,i){if("object"==typeof e&&(e=e.index),void 0===i&&(i=1),e<0&&(i+=e,e=0),i<=0||e>this.cellsCount)return this;for(var s,r=e,n=e+i;r<n;r++)(s=this.getCell(r,!1))&&(this.visibleCells.contains(s)&&(updatetable_HideCell.call(this,s),this.visibleCells.delete(s)),this.preVisibleCells.delete(s));return this.table.removeCells(e,i),this},setColumnCount:function(e){return this.table.colCount===e||this.table.setColumnCount(e),this},setGridSize:function(e,i){return this.setCellsCount(e*i),this.table.setColumnCount(e),this},updateVisibleCell:function(e){var i=this.table.getCell(e,!1);return i&&i.container&&updatetable_ShowCell.call(this,i),this}};Object.assign(uF,uj);let uz=Phaser.GameObjects.Group,uW=Phaser.Structs.Set,uV=Phaser.Utils.Objects.GetValue;let GridTable_GridTable=class GridTable_GridTable extends av{constructor(e,i,s,r,n,a){void 0===a&&(a={}),super(e,i,s,r,n),this.type="rexGridTable",this._tableOX=0,this._tableOY=0,this.visibleCells=new uW,this.preVisibleCells=new uW,this.execeedTopState=!1,this.execeedBottomState=!1,this.execeedLeftState=!1,this.execeedRightState=!1,uV(a,"reuseCellContainer",!1)&&(this.cellContainersPool=new uz(e));var o,h,l,c=uV(a,"cellVisibleCallback",null);if(null!==c){var g=uV(a,"cellVisibleCallbackScope",void 0);this.on("cellvisible",c,g)}if(null!==(c=uV(a,"cellInvisibleCallback",null))){var g=uV(a,"cellInvisibleCallbackScope",void 0);this.on("cellinvisible",c,g)}uV(a,"enableLayer",!1)&&this.enableLayer(),this.setupChildrenMask(uV(a,"mask",void 0)),this.setScrollMode(uV(a,"scrollMode",0)),this.setClampMode(uV(a,"clamplTableOXY",!0));var m=0===this.scrollMode;if(m?(o=a.cellWidth,h=a.cellHeight,l=a.columns):(o=a.cellHeight,h=a.cellWidth,l=uV(a,"rows",a.columns)),l||(l=1),this.expandCellSize=void 0===o,this.expandCellSize){var r=m?this.width:this.height;o=r/l}a.cellWidth=o,a.cellHeight=h,a.columns=l,this.table=new uL(this,a),this.updateTable()}destroy(e){this.scene&&!this.ignoreDestroy&&(this.destroyChildrenMask(),this.table.destroy(e),this.table=void 0,this.cellContainersPool&&(this.cellContainersPool.destroy(!0),this.cellContainersPool=void 0),super.destroy(e))}setScrollMode(e){return"string"==typeof e&&(e=uY[e.toLowerCase()]),this.scrollMode=e,this}setClampMode(e){return void 0===e&&(e=!0),this.clampTableOXY=e,this}get tableOY(){return this._tableOY}get tableOX(){return this._tableOX}set tableOY(e){this.setTableOY(e).updateTable()}set tableOX(e){this.setTableOX(e).updateTable()}setTableOXY(e,i){return this.setTableOY(i).setTableOX(e),this}addTableOY(e){return this.setTableOY(this.tableOY+e),this}addTableOX(e){return this.setTableOX(this.tableOX+e),this}addTableOXY(e,i){return this.addTableOY(i).addTableOX(e),this}setTableOYByPercentage(e){return this.setTableOY(-this.tableVisibleHeight*e),this}getTableOYPercentage(){var e=this.tableVisibleHeight;return 0===e?0:-(this.tableOY/e)}setTableOXByPercentage(e){return this.setTableOX(-this.tableVisibleWidth*e),this}getTableOXPercentage(){var e=this.tableVisibleWidth;return 0===e?0:-(this.tableOX/e)}set t(e){this.setTableOYByPercentage(e).updateTable()}get t(){return this.getTableOYPercentage()}set s(e){this.setTableOXByPercentage(e).updateTable()}get s(){return this.getTableOXPercentage()}scrollToBottom(){if(this.t=1,0===this.t)return this;do this.t=1;while(1!==this.t);return this}scrollToRow(e){this.scrollToBottom();var i=this.table.rowIndexToHeight(0,e-1);return this.setTableOY(-i).updateTable(),this}scrollToNextRow(e){return void 0===e&&(e=1),this.scrollToRow(this.startRowIndex+e),this}getCell(e){return this.table.getCell(e,!0)}getCellContainer(e){var i,s=this.table.getCell(e,!1);return s&&(i=s.getContainer()),i}get cellsCount(){return this.table.cellsCount}get columnCount(){return this.table.colCount}setCellHeight(e,i){return("number"==typeof e?this.table.getCell(e,!0):e).height=i,this}setCellWidth(e,i){return("number"==typeof e?this.table.getCell(e,!0):e).width=i,this}get instHeight(){return 0===this.scrollMode?this.height:this.width}get instWidth(){return 0===this.scrollMode?this.width:this.height}get tableHeight(){return this.table.totalRowsHeight}get tableWidth(){return this.table.totalColumnWidth}get topTableOY(){return 0}get bottomTableOY(){return-this.tableVisibleHeight}get leftTableOX(){return 0}get rightTableOX(){return-this.tableVisibleWidth}get tableVisibleHeight(){var e=this.tableHeight-this.instHeight;return e<0&&(e=0),e}get tableVisibleWidth(){var e=this.tableWidth-this.instWidth;return e<0&&(e=0),e}get bottomLeftY(){return-(this.displayHeight*this.originY)+this.displayHeight}get topRightX(){return-(this.displayWidth*this.originX)+this.displayWidth}get topLeftX(){return-(this.displayWidth*this.originX)}get topLeftY(){return-(this.displayHeight*this.originY)}get bottomBound(){return 0===this.scrollMode?this.bottomLeftY:this.topRightX}get rightBound(){return 0===this.scrollMode?this.topRightX:this.bottomLeftY}resize(e,i){return this.width===e&&this.height===i||(super.resize(e,i),this.expandCellSize&&this.table.setDefaultCellWidth(this.instWidth/this.table.colCount),this.updateTable(!0),this.layoutChildrenMask(),this.maskChildren()),this}};Object.assign(GridTable_GridTable.prototype,uF);let uY={v:0,vertical:0,h:1,horizontal:1};var gridtable_InjectProperties=function(e){Object.defineProperty(e,"childOY",{configurable:!0,get:function(){return e.tableOY},set:function(i){e.tableOY=i}}),Object.defineProperty(e,"childOX",{configurable:!0,get:function(){return e.tableOX},set:function(i){e.tableOX=i}}),Object.defineProperty(e,"topChildOY",{get:function(){return e.topTableOY}}),Object.defineProperty(e,"bottomChildOY",{get:function(){return e.bottomTableOY}}),Object.defineProperty(e,"leftChildOX",{get:function(){return e.leftTableOX}}),Object.defineProperty(e,"rightChildOX",{get:function(){return e.rightTableOX}}),Object.defineProperty(e,"childVisibleHeight",{get:function(){return e.instHeight}}),Object.defineProperty(e,"childHeight",{get:function(){return e.tableHeight}}),Object.defineProperty(e,"childVisibleWidth",{get:function(){return e.instWidth}}),Object.defineProperty(e,"childWidth",{get:function(){return e.tableWidth}})},gridtable_TableOnCellVisible=function(e){e.on("cellvisible",function(e,i,s){var r=this.createCellContainerCallback,n=this.createCellContainerCallbackScope;e.item=this.items[e.index],e.items=this.items,(i=n?r.call(n,e,i,s):r(e,i,s))&&(null==e.cellContainerAlign&&i.setOrigin&&i.setOrigin(0),i.isRexSizer&&i.layout()),e.item=void 0,e.items=void 0,e.setContainer(i)},this)},input_EmitCellEvent=function(e,i,s,r,n,a,o){if(null!=(h=void 0===n?r:s.pointToCellIndex(r,n))){var h,l=s.getCellContainer(h);l&&e.emit(i,l,h,a,o)}},input_PointerUpDownCell=function(e,i){e.on("pointerdown",function(i,s,r,n){input_EmitCellEvent(this.eventEmitter,"cell.down",e,i.worldX,i.worldY,i,n)},this).on("pointerup",function(i,s,r,n){input_EmitCellEvent(this.eventEmitter,"cell.up",e,i.worldX,i.worldY,i,n)},this)},OverCell_OnMove=function(e,i,s,r){var n=this.childrenMap.child,a=n.pointToCellIndex(e.worldX,e.worldY);if(a!==n.input.lastOverCellIndex){var o=n.input.lastOverCellIndex;n.input.lastOverCellIndex=a,input_EmitCellEvent(this.eventEmitter,"cell.out",n,o,void 0,e,r),input_EmitCellEvent(this.eventEmitter,"cell.over",n,a,void 0,e,r)}},OverCell_OnOut=function(e,i){var s=this.childrenMap.child,r=s.input.lastOverCellIndex;s.input.lastOverCellIndex=void 0,input_EmitCellEvent(this.eventEmitter,"cell.out",s,r,void 0,e,i)},input_OverCell=function(e,i){e.on("pointermove",OverCell_OnMove,this).on("pointerover",OverCell_OnMove,this).on("pointerout",OverCell_OnOut,this)};let uX=Phaser.Utils.Objects.GetValue;var input_ClickCell=function(e,i){var s=uX(i,"click",void 0);!1!==s&&(void 0===s&&(s={}),s.threshold=10,e._click=new no(e,s),e._click.on("click",function(e,i,s,r){input_EmitCellEvent(this.eventEmitter,"cell.click",i,s.worldX,s.worldY,s,r)},this))};let uH=Phaser.Utils.Objects.GetValue;var input_TapCell=function(e,i){var s=uH(i,"tap",void 0);!1!==s&&(e._tap=new o$(e,s),e._tap.on("tap",function(e,i,s){var r=`cell.${e.tapsCount}tap`;input_EmitCellEvent(this.eventEmitter,r,e.gameObject,e.worldX,e.worldY,s)},this))};let uU=Phaser.Utils.Objects.GetValue;var input_PressCell=function(e,i){var s=uU(i,"press",void 0);!1!==s&&(e._press=new oQ(e,s),e._press.on("pressstart",function(i,s,r){input_EmitCellEvent(this.eventEmitter,"cell.pressstart",e,i.worldX,i.worldY,r)},this).on("pressend",function(i,s,r){input_EmitCellEvent(this.eventEmitter,"cell.pressend",e,i.worldX,i.worldY,r)},this))};let uN=Phaser.Utils.Objects.GetValue;var input_SwipeCell=function(e,i){var s=uN(i,"swipe",void 0);!1!==s&&(void 0===s&&(s={}),s.dir="4dir",e._swipe=new Swipe_Swipe(e,s),e._swipe.on("swipe",function(i,s,r){var n=i.left?"left":i.right?"right":i.up?"up":"down";input_EmitCellEvent(this.eventEmitter,`cell.swipe${n}`,e,i.worldX,i.worldY,r)},this))},input_TableSetInteractive=function(e,i){e.setInteractive(),input_PointerUpDownCell.call(this,e,i),input_OverCell.call(this,e,i),input_ClickCell.call(this,e,i),input_TapCell.call(this,e,i),input_PressCell.call(this,e,i),input_SwipeCell.call(this,e,i)};let u$=Phaser.Utils.Objects.GetValue;let gridtable_GridTable_GridTable=class gridtable_GridTable_GridTable extends cB{constructor(e,i){void 0===i&&(i={});var s,r,n=utils_GetScrollMode(i),a=u$(i,"table",void 0);void 0===a&&(a={}),a.scrollMode=2===n?0:n,a.clamplTableOXY=u$(i,"clamplChildOY",!1);var o=u$(a,"width",void 0),h=u$(a,"height",void 0),l=new GridTable_GridTable(e,0,0,o,h,a);e.add.existing(l),0===a.scrollMode?(s=void 0===o,r=void 0===h):(s=void 0===h,r=void 0===o),gridtable_InjectProperties(l),l._minWidth=void 0===o?0:void 0,l._minHeight=void 0===h?0:void 0,i.type="rexGridTable",i.child={gameObject:l,expandWidth:s,expandHeight:r};var c=u$(i,"space",void 0);c&&(c.child=u$(c,"table",0)),super(e,i),this.addChildrenMap("table",l),this.addChildrenMap("tableLayer",l.maskLayer),this.eventEmitter=u$(i,"eventEmitter",this);var g=u$(i,"createCellContainerCallback",object_NOOP),m=u$(i,"createCellContainerCallbackScope",void 0);this.setCreateCellContainerCallback(g,m),gridtable_TableOnCellVisible.call(this,l),this.resizeControllerFlag=!1;var x=0===n?"cellheightchange":"cellwidthchange";l.on(x,function(){this.resizeControllerFlag=!0},this),u$(a,"interactive",!0)&&input_TableSetInteractive.call(this,l,a),this.setItems(u$(i,"items",[]),!1),e.game.events.on("poststep",this.onPostStep,this)}destroy(e){this.scene&&!this.ignoreDestroy&&(this.scene.game.events.off("poststep",this.onPostStep,this),super.destroy(e))}setCreateCellContainerCallback(e,i){return this.createCellContainerCallback=e,this.createCellContainerCallbackScope=i,this}refresh(){return this.setItems(this.items),this}getCell(e){return this.childrenMap.child.getCell(e)}getCellContainer(e){return this.childrenMap.child.getCellContainer(e)}updateVisibleCell(e){return this.childrenMap.child.updateVisibleCell(e)}onPostStep(){this.resizeControllerFlag&&(this.resizeController(),this.resizeControllerFlag=!1)}get startRowIndex(){return this.childrenMap.child.startRowIndex}};Object.assign(gridtable_GridTable_GridTable.prototype,{scrollToRow(e){return this.childrenMap.child.scrollToRow(e),this},scrollToNextRow(e){return this.childrenMap.child.scrollToNextRow(e),this}},{setItems:function(e,i){void 0===e?this.items=[]:this.items=e,void 0===i&&(i=!0);var s=this.childrenMap.child;return s.setCellsCount(this.items.length),i&&(s.updateTable(!0),this.resizeController()),this}}),ObjectFactory.register("gridTable",function(e){var i=new gridtable_GridTable_GridTable(this.scene,e);return this.scene.add.existing(i),i}),(0,k.Z)(window,"RexPlugins.UI.GridTable",gridtable_GridTable_GridTable);var methods_GetEaseConfig=function(e,i){return e.sameOrientation?e.orientation=i.orientation:e.orientation=0===i.orientation?1:0,e},SetTransitCallbackMethods_PopUp=function(e,i){e.popUp(methods_GetEaseConfig(e.root.easeIn,e))},ScaleDown=function(e,i){e.scaleDown(methods_GetEaseConfig(e.root.easeOut,e))},time_PostUpdateDelayCall=function(e,i,s,r,n){var a=system_GetSceneObject(e);return a.time.delayedCall(i,function(){a.sys.events.once("postupdate",function(){s.call(r,n)})})},uZ={expandSubMenu:function(e,i){var s,r=this.childrenMap.subMenu;if(r&&r.parentButton===e)return this;this.collapseSubMenu(),s=this.root.toggleOrientation?0===this.orientation?1:0:this.orientation;var r=new this.constructor(this.scene,{items:i,orientation:s,space:this.space,createBackgroundCallback:this.root.createBackgroundCallback,createBackgroundCallbackScope:this.root.createBackgroundCallbackScope,createButtonCallback:this.root.createButtonCallback,createButtonCallbackScope:this.root.createButtonCallbackScope,easeIn:this.root.easeIn,easeOut:this.root.easeOut,_rootMenu:this.root,_parentMenu:this,_parentButton:e});return this.pin(r),this.childrenMap.subMenu=r,this.root.emit("expand",r,e,this),this},collapse:function(){var e=this.root;e.emit("collapse",this,this.parentButton,e);var i=e.easeOut.duration;return e.transitOutCallback(this,i),this.collapseSubMenu(),this.delayCall(i,this.destroy,this),this},collapseSubMenu:function(){var e=this.childrenMap.subMenu;return void 0===e||(this.childrenMap.subMenu=void 0,this.remove(e),e.collapse()),this}};Object.assign(uZ,{setTransitInCallback(e){return void 0===e&&(e=SetTransitCallbackMethods_PopUp),this.transitInCallback=e,this},setTransitOutCallback(e){return void 0===e&&(e=ScaleDown),this.transitOutCallback=e,this}},{delayCall(e,i,s){return this.timer=time_PostUpdateDelayCall(this,e,i,s),this},removeDelayCall(){return this.timer&&(this.timer.remove(!1),this.timer=void 0),this}});var methods_CreateBackground=function(e,i,s,r){var n;return s&&(i.scene=e,n=r?s.call(r,i):s(i),i.scene=void 0),n},methods_CreateButtons=function(e,i,s,r){var n,a,o=[];if(i&&s)for(var h=0,l=i.length;h<l;h++)(n=i[h]).scene=e,a=r?s.call(r,n,h,i):s(n,h,i),n.scene=void 0,o.push(a);return o},methods_MenuSetInteractive=function(e){e.on(e.root.expandEventName,function(e,i){if(!this._isPassedEvent){var s=this.root.childrenKey,r=this.items[i][s];r&&this.expandSubMenu(e,r)}},e).on("button.click",function(e,i,s,r){this!==this.root&&(this.root._isPassedEvent=!0,this.root.emit("button.click",e,i,s,r),this.root._isPassedEvent=!1)},e).on("button.over",function(e,i,s,r){this!==this.root&&(this.root._isPassedEvent=!0,this.root.emit("button.over",e,i,s,r),this.root._isPassedEvent=!1)},e).on("button.out",function(e,i,s,r){this!==this.root&&(this.root._isPassedEvent=!0,this.root.emit("button.out",e,i,s,r),this.root._isPassedEvent=!1)},e)},methods_ParseEaseConfig=function(e,i){return"number"==typeof i&&(i={duration:i}),i.hasOwnProperty("orientation")&&void 0!==i.orientation?i.sameOrientation=utils_GetOrientationMode(i.orientation)===e.orientation:i.sameOrientation=!0,i.destroy=!1,i},methods_Expand=function(){var e=this.root,i=e.easeIn.duration;e.transitInCallback(this,i),this!==this.root&&this.delayCall(i,function(){this.root.emit("popup.complete",this)},this)};let uK=Phaser.Utils.Objects.GetValue;let Menu_Menu=class Menu_Menu extends un{constructor(e,i){void 0===i&&(i={}),i.hasOwnProperty("orientation")||(i.orientation=1);var s=i._rootMenu,r=i._parentMenu,n=i._parentButton,a=uK(i,"popup",!0),o=uK(i,"items",void 0),h=uK(i,"createBackgroundCallback",void 0),l=uK(i,"createBackgroundCallbackScope",void 0);i.background=methods_CreateBackground(e,o,h,l);var c=uK(i,"createButtonCallback",void 0),g=uK(i,"createButtonCallbackScope",void 0);if(i.buttons=methods_CreateButtons(e,o,c,g),super(e,i),this.type="rexMenu",this.items=o,this.root=void 0===s?this:s,this.isRoot=this.root===this,this.parentMenu=r,this.parentButton=n,this.timer=void 0,this.isRoot){this.isPopUpMode=a;var m=i.bounds;void 0===m&&(m=system_GetViewport(e)),this.bounds=m,this.subMenuSide=[this.y<m.centerY?u0:uQ,this.x<m.centerX?uq:uJ];var x=uK(i,"subMenuSide",void 0);void 0!==x&&("string"==typeof x&&(x=u1[x]),this.subMenuSide[this.orientation]=x),this.toggleOrientation=uK(i,"toggleOrientation",!1),this.expandEventName=uK(i,"expandEvent","button.click"),this.easeIn=methods_ParseEaseConfig(this,uK(i,"easeIn",0)),this.easeOut=methods_ParseEaseConfig(this,uK(i,"easeOut",0)),this.setTransitInCallback(uK(i,"transitIn")),this.setTransitOutCallback(uK(i,"transitOut")),this.createBackgroundCallback=h,this.createBackgroundCallbackScope=l,this.createButtonCallback=c,this.createButtonCallbackScope=g,this.childrenKey=uK(i,"childrenKey","children"),this._isPassedEvent=!1,this.pointerDownOutsideCollapsing=uK(i,"pointerDownOutsideCollapsing",!0),this.pointerDownOutsideCollapsing&&e.input.on("pointerdown",this.onPointerDownOutside,this)}var S=0,_=0;if(!this.root.easeIn.sameOrientation){var k=methods_GetEaseConfig(this.root.easeIn,this).orientation,E=r?r.orientation:this.orientation,x=this.root.subMenuSide[E];0===k&&x===uJ&&(S=1),1===k&&x===uQ&&(_=1)}if(a&&this.setOrigin(S,_).layout(),!this.isRoot){this.setScale(this.root.scaleX,this.root.scaleY);var x=this.root.subMenuSide[r.orientation];switch(x){case uJ:this.alignTop(n.top).alignRight(n.left);break;case uq:this.alignTop(n.top).alignLeft(n.right);break;case uQ:this.alignLeft(n.left).alignBottom(n.top);break;case u0:this.alignLeft(n.left).alignTop(n.bottom)}}methods_MenuSetInteractive(this),a&&(this.pushIntoBounds(this.root.bounds),methods_Expand.call(this))}destroy(e){this.scene&&!this.ignoreDestroy&&(this.isRoot&&this.pointerDownOutsideCollapsing&&this.scene.input.off("pointerdown",this.onPointerDownOutside,this),super.destroy(e),this.removeDelayCall())}isInTouching(e){return!!super.isInTouching(e)||!!this.childrenMap.subMenu&&this.childrenMap.subMenu.isInTouching(e)}onPointerDownOutside(e){this.isInTouching(e)||(this.isPopUpMode?this.collapse():this.collapseSubMenu())}};let uJ=2,uq=0,uQ=3,u0=1,u1={up:uQ,down:u0,left:uJ,right:uq};Object.assign(Menu_Menu.prototype,uZ),ObjectFactory.register("menu",function(e){var i=new Menu_Menu(this.scene,e);return this.scene.add.existing(i),i}),(0,k.Z)(window,"RexPlugins.UI.Menu",Menu_Menu);let u2={down:0,up:1};var listpanel_CreateListPanel=function(){var e,i,s=this.scene,r=this.listCreateBackgroundCallback;r&&(e=r.call(this,s),s.add.existing(e));var n=[],a=this.listCreateButtonCallback;if(a)for(var o=this.options,h=0,l=o.length;h<l;h++){var c=a.call(this,s,o[h],h,o);c&&(s.add.existing(c),n.push(c))}var g=this.listWidth;void 0===g&&(g="text"===this.listAlignMode?this.getElement("text").width:this.width);var m=this.listHeight;return i=this.listWrapEnable?new FixWidthButtons_Buttons(s,{width:g,height:m,background:e,buttons:n,space:this.listSpace,draggable:this.listDraggable}):new un(s,{width:g,height:m,orientation:"y",background:e,buttons:n,space:this.listSpace,draggable:this.listDraggable}),s.add.existing(i),i},scale_ScaleDown=function(e,i,s,r,n){void 0===r&&(r="Linear");var a={};switch(a.mode=0,s){case 0:case"x":a.end={x:0};break;case 1:case"y":a.end={y:0};break;default:a.end=0}return a.duration=i,a.ease=r,void 0===n?n=new aV(e,a):n.resetFromJSON(a),n.restart(),n};let u5=Phaser.Utils.Objects.GetValue,u3={down:0,up:1};var dropdown_SetPosition=function(e,i){var s,r,n,a,o,h=u5(i,"expandDirection",void 0);"string"==typeof h&&(h=u3[h]);var l=(r="alignTargetX",object_HasValue(i,s="alignTarget")?object_GetValue(i,s):r&&object_HasValue(i,r)?object_GetValue(i,r):n&&object_HasValue(i,n)?object_GetValue(i,n):void 0),c=u5(i,"alignTargetY",l),g=u5(i,"alignOffsetX",0),m=u5(i,"alignOffsetY",0),x=u5(i,"alignSide","").includes("right"),S=u5(i,"bounds"),_=0===h,k=1===h,E=!_&&!k,R=_||E?0:1;e.setOrigin(x?1:0,R),a=x?l.getTopRight().x:l.getTopLeft().x,o=c.getBottomLeft().y,e.setPosition(a+g,o+m);var j=S;j||(j=system_GetViewport(e.scene)),E&&e.getBottomLeft().y>j.bottom&&(o=c.getTopLeft().y,e.setOrigin(0,1).setPosition(a+g,o+m))};let u7=Phaser.Utils.Objects.GetValue;var u6=class extends ou{constructor(e,i){void 0===i&&(i={}),null==i.transitIn&&(i.transitIn=function(e,i){popup(e,i,"y","Cubic")}),null==i.transitOut&&(i.transitOut=function(e,i){scale_ScaleDown(e,i,"y","Linear")}),i.manualClose=!0,i.clickOutsideClose=!0,i.destroy=!0,super(e,i),dropdown_SetPosition(e,i),e.isRexSizer&&e.layout();var s=u7(i,"touchOutsideClose",!1),r=u7(i,"anyTouchClose",!1);r&&(s=!1),r?this.once("open",this.anyTouchClose,this):s&&this.once("open",this.touchOutsideClose,this),this.requestOpen()}shutdown(e){this.isShutdown||(this.scene.input.off("pointerup",this.touchCloseCallback,this),super.shutdown(e))}touchOutsideClose(){return this.scene.input.on("pointerup",this.touchCloseCallback,this),this.clickOutsideTest=!0,this}anyTouchClose(){return this.scene.input.once("pointerup",this.touchCloseCallback,this),this}touchCloseCallback(e){this.clickOutsideTest&&bounds_IsPointInBounds(this.parent,e.worldX,e.worldY)||this.requestClose()}onOpen(){this.emit("open",this.parent,this),super.onOpen()}onClose(){this.emit("close",this.parent,this),super.onClose()}},u4={openListPanel:function(){if(this.listPanel)return this;var e,i=listpanel_CreateListPanel.call(this);i.on("button.over",function(e,s,r,n){this.currentOverIndex=s,this.listOnButtonOver&&this.listOnButtonOver.call(this,e,s,r,n),this.emit("button.over",this,i,e,s,r,n)},this).on("button.out",function(e,s,r,n){this.currentOverIndex===s&&(this.currentOverIndex=void 0),this.listOnButtonOut&&this.listOnButtonOut.call(this,e,s,r,n),this.emit("button.out",this,i,e,s,r,n)},this),e=this.listAlignMode&&"label"!==this.listAlignMode?this.getElement(this.listAlignMode):this;var s=new u6(i,{duration:{in:this.listEaseInDuration,out:this.listEaseOutDuration},transitIn:this.listTransitInCallback,transitOut:this.listTransitOutCallback,expandDirection:this.listExpandDirection,alignTargetX:e,alignTargetY:this,alignSide:this.listAlignSide,bounds:this.listBounds,anyTouchClose:!0}).on("open",function(){i.on("button.click",function(e,s,r,n){this.listOnButtonClick&&this.listOnButtonClick.call(this,e,s,r,n),this.emit("button.click",this,i,e,s,r,n)},this),this.emit("list.open",this,i)},this).on("close",function(){this.listPanel=void 0,this.dropDownBehavior=void 0,this.emit("list.close",this)},this);return this.listPanel=i,this.dropDownBehavior=s,this.pin(i),this},closeListPanel:function(){return this.dropDownBehavior&&(this.dropDownBehavior.requestClose(),this.currentOverIndex=void 0),this},toggleListPanel:function(){return this.listPanel?this.closeListPanel():this.openListPanel(),this},emitButtonClick:function(e){if(void 0===e&&(e=this.currentOverIndex),void 0===e)return this;var i=this.listPanel,s=i?i.getButton(e):this.options[e];return this.listOnButtonClick&&this.listOnButtonClick.call(this,s,e),this.emit("button.click",this,i,s,e),this},emitButtonOver:function(e){var i=this.listPanel;return i&&i.emitButtonOver(e),this}};Object.assign(u4,{setWrapEnable(e){return void 0===e&&(e=!0),this.listWrapEnable=e,this},setCreateButtonCallback(e){return this.listCreateButtonCallback=e,this},setCreateListBackgroundCallback(e){return this.listCreateBackgroundCallback=e,this},setButtonClickCallback(e){return this.listOnButtonClick=e,this},setButtonOverCallback(e){return this.listOnButtonOver=e,this},setButtonOutCallback(e){return this.listOnButtonOut=e,this},setListExpandDirection(e){return"string"==typeof e&&(e=u2[e]),this.listExpandDirection=e,this},setListEaseInDuration(e){return void 0===e&&(e=0),this.listEaseInDuration=e,this},setListEaseOutDuration(e){return void 0===e&&(e=0),this.listEaseOutDuration=e,this},setListTransitInCallback(e){return this.listTransitInCallback=e,this},settListTransitOutCallback(e){return this.listTransitOutCallback=e,this},setListBounds(e){return this.listBounds=e,this},setListWidth(e){return this.listWidth=e,this},setListHeight(e){return this.listHeight=e,this},setListSize(e,i){return this.setListWidth(e).setListHeight(i),this},setListAlignmentMode(e){return this.listAlignMode=e,this},setListAlignmentSide(e){return void 0===e&&(e=""),this.listAlignSide=e,this},setListSpace(e){return void 0===e&&(e={}),this.listSpace=e,this},setListDraggable(e){return void 0===e&&(e=!0),this.listDraggable=e,this}},{focusNextButton(){if(!this.isOpened)return this;var e,i=this.currentOverIndex;return e=void 0===i?0:(i+1)%this.listPanel.getButtons().length,this.emitButtonOver(e),this},focusPrevButton(){if(!this.isOpened)return this;var e,i=this.currentOverIndex;if(void 0===i)e=0;else{var s=this.listPanel.getButtons().length;e=(i-1+s)%s}return this.emitButtonOver(e),this}});let u8=Phaser.Utils.Objects.GetValue;let DropDownList_DropDownList=class DropDownList_DropDownList extends dd{constructor(e,i){super(e,i),this.type="rexDropDownList",this.timer=void 0,this.listPanel=void 0,this.currentOverIndex=void 0,this.setOptions(u8(i,"options"));var s=u8(i,"list");this.setWrapEnable(u8(s,"wrap",!1)),this.setCreateButtonCallback(u8(s,"createButtonCallback")),this.setCreateListBackgroundCallback(u8(s,"createBackgroundCallback")),this.setButtonClickCallback(u8(s,"onButtonClick")),this.setButtonOverCallback(u8(s,"onButtonOver")),this.setButtonOutCallback(u8(s,"onButtonOut")),this.setListExpandDirection(u8(s,"expandDirection")),this.setListEaseInDuration(u8(s,"easeIn",500)),this.setListEaseOutDuration(u8(s,"easeOut",100)),this.setListTransitInCallback(u8(s,"transitIn")),this.settListTransitOutCallback(u8(s,"transitOut")),this.setListSize(u8(s,"width"),u8(s,"height")),this.setListAlignmentMode(u8(s,"alignParent","text")),this.setListAlignmentSide(u8(s,"alignSide","")),this.setListBounds(u8(s,"bounds")),this.setListSpace(u8(s,"space")),this.setListDraggable(u8(s,"draggable",!1)),this.setValueChangeCallback(u8(i,"setValueCallback"),u8(i,"setValueCallbackScope")),this.setValue(u8(i,"value")),this.onClick(this.toggleListPanel,this)}destroy(e){this.scene&&!this.ignoreDestroy&&(this.listPanel&&(this.listPanel.destroy(e),this.listPanel=void 0),super.destroy(e))}get isOpened(){return!!this.listPanel}setOptions(e){return void 0===e&&(e=[]),this.options=e,this}setValueChangeCallback(e,i){return this.valueChangeCallback=e,this.valueChangeCallbackScope=i,this}setValue(e){return this.value=e,this}get value(){return this._value}set value(e){if(this._value!==e){var i=this._value;this._value=e;var s=this.valueChangeCallback,r=this.valueChangeCallbackScope;s&&(r?s.call(r,this,e,i):s(this,e,i)),this.emit("valuechange",this,e,i)}}};Object.assign(DropDownList_DropDownList.prototype,u4);var u9=DropDownList_DropDownList;ObjectFactory.register("dropDownList",function(e){var i=new u9(this.scene,e);return this.scene.add.existing(i),i}),(0,k.Z)(window,"RexPlugins.UI.DropDownList",u9);var build_BuildListConfig=function(e,i,s){i=i?DeepClone(i):{},void 0===s&&(s={});var r=i.label||i.button,n=i.button||i.label;delete i.label,delete i.button;var a=s.label||s.button||s,o=s.button||s.label||s,h=build_BuildLabelConfig(e,r,a);return h.list=i.list||{},h.list.createButtonCallback=function(e,i){var s=build_CreateLabel(e,n,o).resetDisplayContent(i);return i.hasOwnProperty("value")&&(s.value=i.value),s},h.list.onButtonOver=function(e,i,s,r){e.setHoverState&&e.setHoverState(!0)},h.list.onButtonOut=function(e,i,s,r){e.setHoverState&&e.setHoverState(!1)},h},pt=class extends u9{constructor(e,i,s){super(e,i=build_BuildListConfig(e,i,s)),this.type="rexSimpleDropDownList"}setOptions(e){void 0===e&&(e=[]);for(var i=0,s=e.length;i<s;i++){var r=e[i];"string"==typeof r&&(e[i]={text:r,value:r})}return super.setOptions(e),this}};ObjectFactory.register("simpleDropDownList",function(e,i){var s=new pt(this.scene,e,i);return this.scene.add.existing(s),s}),(0,k.Z)(window,"RexPlugins.UI.SimpleDropDownList",pt);var TextHeightToLineCount=function(e){var i,s,r;switch(text_GetTextObjectType(e)){case 0:case 1:i=e.height-e.padding.top-e.padding.bottom,s=e.lineSpacing,r=e.style.metrics.fontSize+e.style.strokeThickness;break;case 2:i=e.height,s=0;var n=e.fontSize/e.fontData.size;r=e.fontData.lineHeight*n}return(i-s)/(r+s)},GetString=function(e){return Array.isArray(e)?e=e.join("\n"):"number"==typeof e&&(e=e.toString()),e};let pe=Phaser.Math.Clamp;var pi={getLines:function(e,i){if(void 0===e&&(e=this.startLineIndex),void 0===i){var s,r=this.pageLinesCount;i=r>0?e+r:this.totalLinesCount}switch(i>this.totalLinesCount&&(i=this.totalLinesCount),this.textObjectType){case 0:case 2:s=this.lines.slice(e,i).join("\n");break;case 1:var n=this.lines.getLineStartIndex(e),a=this.lines.getLineEndIndex(i-1);((s=this.lines.getSliceTagText(n,a,!0)).match(/\n/g)||[]).length>i-e-1&&(s=s.substring(0,s.length-1))}return s}};Object.assign(pi,{clearText(){return this.sections.length=0,this.pageStartIndexes.length=0,this.lines.length=0,this},appendPage(e){var i,s=this.totalLinesCount;this.sections.push(GetString(e));var e=this.sections.join("\n");this.lines=text_TextToLines(this.parent,e,this.lines);var r=this.totalLinesCount-s;i=this.pageLinesCount>0?Math.ceil(r/this.pageLinesCount):1;for(var n=0;n<i;n++)this.pageStartIndexes.push(s+n*this.pageLinesCount);return this},setText(e,i){void 0===i&&(i=!0),i&&this.resetIndex(),this.clearText();for(var s=GetString(e).split(this.pageBreak),r=0,n=s.length;r<n;r++)this.appendPage(s[r]);return this},appendText(e){var i=this.content+GetString(e);return this.setText(i,!1),this}},{resetIndex(){return this.pageIndex=-1,this.startLineIndex=-1,this.endLineIndex=void 0,this},setPageIndex(e){return e=pe(e,0,this.lastPageIndex),this.pageIndex=e,this.startLineIndex=this.pageStartIndexes[e],this.endLineIndex=this.pageStartIndexes[e+1],this},getPage(e){return void 0===e&&(e=this.pageIndex),this.setPageIndex(e).getLines(this.startLineIndex,this.endLineIndex)},getNextPage(){return this.getPage(this.pageIndex+1)},getPreviousPage(){return this.getPage(this.pageIndex-1)},getFirstPage(){return this.getPage(0)},getLastPage(){return this.getPage(this.lastPageIndex)},setStartLineIndex(e){var i=Math.max(this.totalLinesCount-this.pageLinesCount,0);return e=pe(e,0,i),this.startLineIndex=e,this.endLineIndex=e+this.pageLinesCount,this},getPageByLineIndex(e){return this.setStartLineIndex(e).getLines(this.startLineIndex,this.endLineIndex)},getPageOfNextLine(){return this.getPageByLineIndex(this.startLineIndex+1)},getPageOfPreviousLine(){return this.getPageByLineIndex(this.startLineIndex-1)},getPageOfFirstLine(){return this.getPageByLineIndex(0)},getPageOfLastLine(){return this.getPageByLineIndex(this.totalLinesCount)}},{showPage(e){return this.displayText(this.getPage(e)),this},showNextPage(){return this.displayText(this.getNextPage()),this},showPreviousPage(){return this.displayText(this.getPreviousPage()),this},showFirstPage(){return this.displayText(this.getFirstPage()),this},showLastPage(){return this.displayText(this.getLastPage()),this},show(){return this.displayText(this.getLines()),this},showPageByLineIndex(e){return this.displayText(this.getPageByLineIndex(e)),this},showNextLine(){return this.displayText(this.getPageOfNextLine()),this},showPreviousLine(){return this.displayText(this.getPageOfPreviousLine()),this},showFirstLine(){return this.displayText(this.getPageOfFirstLine()),this},showLastLine(){return this.displayText(this.getPageOfLastLine()),this},displayText(e){text_SetNoWrapText(this.parent,e)}});let ps=Phaser.Utils.Objects.GetValue;Phaser.Math.Clamp;let TextPage_TextPage=class TextPage_TextPage extends i0{constructor(e,i){super(e,{eventEmitter:!1}),this.textObjectType=text_GetTextObjectType(this.parent),this.pageStartIndexes=[],this.lines=text_TextToLines(this.parent,""),this.sections=[],this.resetFromJSON(i)}resetFromJSON(e){return this.setMaxLines(ps(e,"maxLines",void 0)),this.setPageBreak(ps(e,"pageBreak","\f\n")),this.setText(ps(e,"text","")),this.startLineIndex=ps(e,"start",-1),this.endLineIndex=ps(e,"end",void 0),this.setPageIndex(ps(e,"page",-1)),this}toJSON(){return{maxLines:this.maxLines,text:this.content,start:this.startLineIndex,end:this.endLineIndex,page:this.pageIndex,pageBreak:this.pageBreak}}shutdown(e){if(!this.isShutdown){switch(this.textObjectType){case 0:case 2:this.lines.length=0;break;case 1:this.lines.destroy()}this.pageStartIndexes.length=0,this.sections.length=0,this.lines=void 0,this.pageStartIndexes=void 0,this.sections=void 0,super.shutdown(e)}}setMaxLines(e){return this.maxLines=e,this}setPageBreak(e){return this.pageBreak=e,this}get pageCount(){return this.pageStartIndexes.length}get lastPageIndex(){return this.pageCount-1}get isFirstPage(){return this.pageIndex<=0}get isLastPage(){return this.pageIndex>=this.pageCount-1}get totalLinesCount(){return this.lines?this.lines.length:0}get pageLinesCount(){if(void 0!==this.maxLines)return this.maxLines;switch(this.textObjectType){case 0:case 1:var e,i=this.parent.style.maxLines;e=i>0?i:Math.floor(TextHeightToLineCount(this.parent));break;case 2:e=this.totalLinesCount}return e}get isFirstLine(){return this.startLineIndex<=0}get isLastLine(){return this.endLineIndex===this.totalLinesCount}get content(){return this.sections.join(this.pageBreak)}};Object.assign(TextPage_TextPage.prototype,pi);var utils_GetPlainText=function(e,i){return e.getPlainText&&(i=e.getPlainText(i)),i},GetNewLineIndex=function(e,i){for(var s=void 0,r=0;r<i&&-1!==(s=e.indexOf("\n",s+1));r++);return s},utils_GetSubString=function(e,i,s,r){return e.getSubString?e.getSubString(i,s,r):i.slice(s,r)},utils_GetTypingString=function(e,i,s,r){var n=this.parent;if(0===r){var a=0,o=i;this.insertIdx=o,h=utils_GetSubString(n,e,a,o)}else if(1===r){var o=s,a=o-i;this.insertIdx=0,h=utils_GetSubString(n,e,a,o)}else if(2===r){var a=Math.floor(s/2-i/2),o=a+i;this.insertIdx=i%2?i:0,h=utils_GetSubString(n,e,a,o)}else if(3===r){var h,l,c,g=Math.floor(i/2);if(g>0){var o=s,a=o-g;l=utils_GetSubString(n,e,a,o)}else l="";var m=i-g;if(m>0){var a=0,o=0+m;this.insertIdx=o,c=utils_GetSubString(n,e,a,o)}else c="",this.insertIdx=0;h=c+l}return this.insertChar=h.charAt(this.insertIdx-1),h},text_GetWrapText=function(e,i){switch(text_GetTextObjectType(e)){case 0:e.style.syncFont(e.canvas,e.context),i=e.runWordWrap(i);break;case 1:i=e.getText(i,void 0,void 0,!0);break;case 2:i=e.setText(i).getTextBounds().wrappedText}return i};let pr=Phaser.Utils.Objects.GetFastValue,pn=Phaser.Utils.Objects.GetValue;let TextTyping_TextTyping=class TextTyping_TextTyping extends i0{constructor(e,i){super(e,i),this.timer=null,this.resetFromJSON(i)}resetFromJSON(e){this.setTextWrapEnable(pn(e,"wrap",!1)),this.setTypeMode(pn(e,"typeMode",0)),this.setTypingSpeed(pn(e,"speed",333)),this.setTextCallback=pr(e,"setTextCallback",null),this.setTextCallbackScope=pr(e,"setTextCallbackScope",null),this.setTypingContent(pr(e,"text","")),this.typingIdx=pr(e,"typingIdx",0),this.insertIdx=null,this.insertChar=null;var i=pr(e,"elapsed",null);return null!==i&&this.start(void 0,void 0,this.typingIdx,i),this}shutdown(e){this.isShutdown||(this.freeTimer(),super.shutdown(e))}setTypeMode(e){return"string"==typeof e&&(e=pa[e]),this.typeMode=e,this}setTypeSpeed(e){return this.speed=e,this}setTypingSpeed(e){return this.speed=e,this}setTextWrapEnable(e){return void 0===e&&(e=!0),this.textWrapEnable=e,this}set text(e){var i=TextTyping_TransferText(e);this.textWrapEnable&&(i=text_GetWrapText(this.parent,i)),this._text=i}get text(){return this._text}get isTyping(){return null!==this.getTimer()}get isLastChar(){return this.typingIdx===this.textLen}setTypingContent(e){return this.text=e,this.textLen=utils_GetPlainText(this.parent,this.text).length,this}onTyping(){var e=utils_GetTypingString.call(this,this.text,this.typingIdx,this.textLen,this.typeMode);this.setText(e),this.emit("typechar",this.insertChar),this.emit("type"),this.isLastChar?(this.freeTimer(),this.emit("complete",this,this.parent)):(this.timer.delay=this.speed,this.typingIdx++)}startTimer(e){var i;return this.timer&&this.freeTimer(),void 0===e?i=0:(this.speed,i=e),this.timer=this.scene.time.addEvent({delay:1e-4,startAt:i,loop:!0,callback:this.onTyping,callbackScope:this}),this}getTimer(){return this.timer}freeTimer(){return this.timer&&(this.timer.remove(),this.timer=null),this}setText(e){this.setTextCallback&&(e=this.setTextCallbackScope?this.setTextCallback.call(this.setTextCallbackScope,e,this.isLastChar,this.insertIdx):this.setTextCallback(e,this.isLastChar,this.insertIdx)),this.textWrapEnable?text_SetNoWrapText(this.parent,e):this.parent.setText(e)}};var TextTyping_TransferText=function(e){return Array.isArray(e)?e=e.join("\n"):"number"==typeof e&&(e=e.toString()),e};let pa={"left-to-right":0,"right-to-left":1,"middle-to-sides":2,"sides-to-middle":3};Object.assign(TextTyping_TextTyping.prototype,{start:function(e,i,s,r){return void 0!==e&&this.setTypingContent(e),void 0!==i&&(this.speed=i),void 0===s&&(s=0),this.typingIdx=s+1,0===this.speed?this.stop(!0):(this.setText(""),this.startTimer(r)),this},startFromLine:function(e,i,s,r){var n;return i>0&&(n=GetNewLineIndex(utils_GetPlainText(this.parent,e),i)),this.start(e,s,n,r)},stop:function(e){if(this.getTimer()&&this.freeTimer(),e){for(;!this.isLastChar;)utils_GetTypingString.call(this,this.text,this.typingIdx,this.textLen,this.typeMode),this.emit("typechar",this.insertChar),this.typingIdx++;this.setText(this.text),this.emit("type"),this.emit("complete",this,this.parent)}return this},pause:function(){var e=this.getTimer();return e&&(e.paused=!0),this},resumeTyping:function(){var e=this.getTimer();return e&&(e.paused=!1),this},appendText:function(e){var i=this.text.concat(TransferText(e));return this.isTyping?this.setTypingContent(i):this.start(i,void 0,this.textLen),this}});let po=Phaser.Utils.Objects.GetValue,ph={page:0,line:1};var textbox_Base=function(e,i){return void 0===i&&(i="rexTextBox"),class extends e{constructor(e,s){super(e,s),this.type=i,this.isRunning=!1;var r=this.childrenMap.text,n=po(s,"expandTextWidth",!1),a=po(s,"expandTextHeight",!1);if(n||a){var o=text_GetTextObjectType(r);switch(o){case 0:case 1:if(r.resize=function(e,i){var s=n?e:0,o=a?i:0;r.setFixedSize(s,o),s>0&&r.setWordWrapWidth(s)},1===o){var h=r.style;0===h.wrapMode&&(h.wrapMode=1)}}n&&(r._minWidth=0),a&&(r._minHeight=0)}this.setTypingMode(po(s,"typingMode","page")),this.page=new TextPage_TextPage(r,po(s,"page",void 0)),this.typing=new TextTyping_TextTyping(r,po(s,"typing",s.type)),this.typing.on("complete",this.onTypingComplete,this).on("type",this.onType,this).on("typechar",this.onTypeChar,this),this.textWidthSave=r.width,this.textHeightSave=r.height}setTypingMode(e){return"string"==typeof e&&(e=ph[e]),this.typingMode=e,this}start(e,i){return this.isRunning=!0,this.page.setText(e),void 0!==i&&this.setTypingSpeed(i),this.emit("start"),0===this.typingMode?this.typeNextPage():this.typeNextLine(),this}typeNextPage(){if(!this.isRunning)return this;if(this.isLastPage)this.emit("complete");else{var e=this.page.getNextPage();this.typing.start(e)}return this}typeNextLine(){if(!this.isRunning)return this;if(this.isLastLine)this.isRunning=!1,this.emit("complete");else{var e,i=this.page.getPageOfNextLine();e=this.isFirstLine?0:this.page.pageLinesCount-1,this.typing.startFromLine(i,e)}}pause(){return this.isRunning&&this.isTyping&&(this.typing.pause(),this.emit("pause")),this}resume(){return this.isRunning&&(this.isTyping||(this.emit("resume"),this.typing.resume())),this}stop(e){return this.isRunning&&this.typing.stop(e),this}showLastPage(){return this.isRunning&&(this.typing.stop(),0===this.typingMode?this.page.showLastPage():this.page.showLastLine(),this.emit("type"),this.onTypingComplete()),this}setTypeSpeed(e){return this.typing.setTypingSpeed(e),this}setTypingSpeed(e){return this.typing.setTypingSpeed(e),this}get isTyping(){return this.typing.isTyping}get isLastPage(){return this.page.isLastPage}get isFirstPage(){return this.page.isFirstPage}get pageCount(){return this.page.pageCount}get pageIndex(){return this.page.pageIndex}get isLastLine(){return this.page.isLastLine}get isFirstLine(){return this.page.isFirstLine}get lineCound(){return this.page.totalLinesCount}get startLineIndex(){return this.page.startLineIndex}get endLineIndex(){return this.page.endLineIndex}get typingSpeed(){return this.typing.speed}onType(){var e=this.childrenMap.text;(this.textWidthSave!==e.width||this.textHeightSave!==e.height)&&(this.textWidthSave=e.width,this.textHeightSave=e.height,this.getTopmostSizer().layout()),this.emit("type")}onTypeChar(e){this.emit("typechar",e)}onTypingComplete(){if(0===this.typingMode){var e=this.isLastPage;this.isRunning=!e,this.emit("pageend"),e&&this.emit("complete")}else this.typeNextLine()}}};let TextBox_TextBox=class TextBox_TextBox extends textbox_Base(cH){constructor(e,i){void 0===i&&(i={}),i.hasOwnProperty("layoutMode")||(i.layoutMode=1),super(e,i)}};var pl=TextBox_TextBox;ObjectFactory.register("textBox",function(e){var i=new pl(this.scene,e);return this.scene.add.existing(i),i}),(0,k.Z)(window,"RexPlugins.UI.TextBox",pl);var pd=class extends pl{constructor(e,i,s){super(e,i=build_BuildTitleLabelConfig(e,i,s))}};ObjectFactory.register("simpleTextBox",function(e){var i=new pd(this.scene,e);return this.scene.add.existing(i),i}),(0,k.Z)(window,"RexPlugins.UI.SimpleTextBox",pd);let pc=Phaser.Utils.Objects.GetValue;var pu=class extends dr{constructor(e,i){super(e,i),this.type="rexNumberBar";var s,r,n,a=pc(i,"background",void 0),o=pc(i,"icon",void 0),h=pc(i,"iconMask",void 0),l=pc(i,"slider",void 0),c=pc(i,"text",void 0),g=pc(i,"space.icon",0),m=pc(i,"space.slider",0);a&&this.addBackground(a),o&&(0===this.orientation?(l||c)&&(r={right:g}):(l||c)&&(r={bottom:g}),this.add(o,{proportion:0,align:"center",padding:r}),h&&(h=mask_AddChildMask.call(this,o,o,1))),l&&(l.orientation=this.orientation,l.eventEmitter=this,l.value=null,l.hasOwnProperty("input")||(l.input=-1),s=new Slider_Slider(e,l),e.add.existing(s),0===this.orientation?c&&(r={right:m}):c&&(r={bottom:m}),n=0===this.orientation?void 0===pc(l,"width",void 0)?1:0:void 0===pc(l,"height",void 0)?1:0,this.add(s,{proportion:n,align:"center",padding:r})),c&&this.add(c),this.addChildrenMap("background",a),this.addChildrenMap("icon",o),this.addChildrenMap("iconMask",h),this.addChildrenMap("slider",s),this.addChildrenMap("text",c);var x=pc(i,"valuechangeCallback",null);if(null!==x){var S=pc(i,"valuechangeCallbackScope",void 0);this.on("valuechange",x,S)}this.setEnable(pc(i,"enable",void 0)),this.setValue(pc(i,"value",0))}get enable(){return!!this.childrenMap.slider&&this.childrenMap.slider.enable}set enable(e){this.childrenMap.slider&&this.childrenMap.slider.setEnable(e)}setEnable(e){return void 0===e&&(e=!0),this.enable=e,this}get value(){return this.childrenMap.slider?this.childrenMap.slider.value:0}set value(e){this.childrenMap.slider&&(this.childrenMap.slider.value=e)}setValue(e,i,s){return this.childrenMap.slider&&this.childrenMap.slider.setValue(e,i,s),this}addValue(e,i,s){return this.childrenMap.slider&&this.childrenMap.slider.addValue(e,i,s),this}getValue(e,i){return this.childrenMap.slider?this.childrenMap.slider.getValue(e,i):0}easeValueTo(e,i,s){return this.childrenMap.slider&&this.childrenMap.slider.easeValueTo(e,i,s),this}stopEaseValue(){return this.childrenMap.slider&&this.childrenMap.slider.stopEaseValue(),this}setEaseValueDuration(e){return this.childrenMap.slider&&this.childrenMap.slider.setEaseValueDuration(e),this}setEaseValueFunction(e){return this.childrenMap.slider&&this.childrenMap.slider.setEaseValueFunction(e),this}get text(){var e=this.childrenMap.text;return void 0===e?"":e.text?e.text:e.getData("text")}set text(e){var i=this.childrenMap.text;void 0!==i&&(i.setText?i.setText(e):i.setData("text",e))}setText(e){return this.text=e,this}};ObjectFactory.register("numberBar",function(e){var i=new pu(this.scene,e);return this.scene.add.existing(i),i}),(0,k.Z)(window,"RexPlugins.UI.NumberBar",pu),ObjectFactory.register("scrollBar",function(e){var i=new cg(this.scene,e);return this.scene.add.existing(i),i}),(0,k.Z)(window,"RexPlugins.UI.ScrollBar",cg);let pp=Phaser.Utils.Objects.GetValue,pg={leftTop:"left-top",centerTop:"center-top",rightTop:"right-top",leftCenter:"left-center",center:"center",rightCenter:"right-center",leftBottom:"left-bottom",centerBottom:"center-bottom",rightBottom:"right-bottom"};var pv=class extends h${constructor(e,i){super(e,i),this.type="rexBadge";var s=pp(i,"background",void 0);s&&this.addBackground(s),this.addChildrenMap("background",s);var r=pp(i,"main",void 0);for(var n in r&&this.add(r,{key:"main",align:"center",expand:!1}),this.addChildrenMap("main",r),pg){var a=pp(i,n,void 0);a&&(this.add(a,{key:n,align:pg[n],expand:!1}),this.addChildrenMap(n,a))}}};ObjectFactory.register("badgeLabel",function(e){var i=new pv(this.scene,e);return this.scene.add.existing(i),i}),(0,k.Z)(window,"RexPlugins.UI.BadgeLabel",pv);let pf=h$.prototype.add;var methods_AddChildMethods_Add=function(e,i,s,r,n,a,o,h,l){return e.setVisible(!1),pf.call(this,e,i,s,r,n,a,o,h,l),this};let pm=af.prototype.setChildVisible;var pb={getPage:function(e){return void 0===e?null:this.sizerChildren.hasOwnProperty(e)?this.sizerChildren[e]:null},swapPage:function(e,i){this._previousKey=this._currentKey;var s=this.previousPage;s&&(0===this.swapMode?(pm.call(this,s,!1),this.emit("pageinvisible",s,this._previousKey,this)):s.destroy()),e&&!this.sizerChildren.hasOwnProperty(e)&&this.emit("createpage",e,this),this._currentKey=e;var r=this.currentPage;return r&&(pm.call(this,r,!0),this.emit("pagevisible",r,this._currentKey,this),void 0===i&&(i=this.fadeInDuration),i>0&&r.setAlpha(0).fadeIn(i,1)),this},hasPage:function(e){return this.sizerChildren.hasOwnProperty(e)}};Object.assign(pb,{add:methods_AddChildMethods_Add,addPage:methods_AddChildMethods_Add});let py=Phaser.Utils.Objects.GetValue;let Pages_Pages=class Pages_Pages extends h${constructor(e,i){super(e,i),this.type="rexPages",this.childrenMap=this.sizerChildren,this._previousKey=void 0,this._currentKey=void 0,this.setSwapMode(py(i,"swapMode",0)),this.setFadeInDuration(py(i,"fadeIn",0))}setSwapMode(e){return"string"==typeof e&&(e=pC[e]),this.swapMode=e,this}setFadeInDuration(e){return this.fadeInDuration=e,this}get previousKey(){return this._previousKey}get currentKey(){return this._currentKey}set currentKey(e){this.swapPage(e)}get currentPage(){return this.getPage(this.currentKey)}get previousPage(){return this.getPage(this.previousKey)}get keys(){return Object.keys(this.sizerChildren)}};Object.assign(Pages_Pages.prototype,pb);let pC={invisible:0,destroy:1};ObjectFactory.register("pages",function(e){var i=new Pages_Pages(this.scene,e);return this.scene.add.existing(i),i}),(0,k.Z)(window,"RexPlugins.UI.Pages",Pages_Pages);let px=Phaser.GameObjects.Mesh;var pS=class extends px{get tint(){return 0===this.vertices.length?16777215:this.vertices[0].color}forceUpdate(){return this.dirtyCache[10]=1,this}};let p_=Phaser.Math.Vector3,pw=Phaser.Math.Matrix4;var pP=new p_,pk=new p_,pT=new pw,utils_TransformVerts=function(e,i,s,r,n,a,o){void 0===i&&(i=0),void 0===s&&(s=0),void 0===r&&(r=0),void 0===n&&(n=0),void 0===a&&(a=0),void 0===o&&(o=0),pP.set(i,s,r),pk.set(n,a,o),pT.fromRotationXYTranslation(pk,pP,!0);for(var h=0,l=e.vertices.length;h<l;h++)e.vertices[h].transformMat4(pT)};let pO=Phaser.Utils.Objects.IsPlainObject,pM=Phaser.Utils.Objects.GetValue,pE=Phaser.Geom.Mesh.GenerateGridVerts,pR=Phaser.Math.RadToDeg,pL=Phaser.Math.DegToRad,pB=1+1/Math.sin(pL(45));var pI=class extends pS{constructor(e,i,s,r,n,a){pO(i)&&(i=pM(a=i,"x",0),s=pM(a,"y",0),r=pM(a,"key",null),n=pM(a,"frame",null)),super(e,i,s,r,n),this.type="rexPerspectiveImage",this.setSizeToFrame(),this.resetPerspective(),this.panZ(pB),this.hideCCW=pM(a,"hideCCW",!0);var o=pM(a,"gridWidth",0),h=pM(a,"gridHeight",o);this.resetVerts(o,h),this.prevFrame=this.frame}preUpdate(e,i){this.prevFrame!==this.frame&&(this.prevFrame=this.frame,this.syncSize()),super.preUpdate(e,i)}get originX(){return .5}get originY(){return .5}resetPerspective(){return this.setPerspective(this.width,this.height,45),this}resetVerts(e,i){if(void 0!==e&&(this.gridWidth=e),void 0!==i&&(this.gridHeight=i),this.clear(),this.dirtyCache[9]=-1,0===this.width||0===this.height)return this;var e,i,s=this.frame.cutWidth,r=this.frame.cutHeight;0===this.gridWidth?e=Math.max(s/8,32):i=this.gridWidth,i=0===this.gridHeight?Math.max(r/8,32):this.gridHeight,pE({mesh:this,width:s/this.height,height:r/this.height,widthSegments:Math.ceil(s/e),heightSegments:Math.ceil(r/i)});var n=this.transformInfo;return n&&this.transformVerts(n.x,n.y,n.z,n.rotateX,n.rotateY,n.rotateZ),this}syncSize(){return this.setSizeToFrame(),this.resetPerspective(),this.resetVerts(),this}get rotationX(){return this.modelRotation.x}set rotationX(e){this.modelRotation.x=e}get angleX(){return pR(this.rotationX)}set angleX(e){this.rotationX=pL(e)}get rotationY(){return this.modelRotation.y}set rotationY(e){this.modelRotation.y=e}get angleY(){return pR(this.rotationY)}set angleY(e){this.rotationY=pL(e)}get rotationZ(){return this.modelRotation.z}set rotationZ(e){this.modelRotation.z=e}get angleZ(){return pR(this.rotationZ)}set angleZ(e){this.rotationZ=pL(e)}transformVerts(e,i,s,r,n,a){return void 0===e&&(e=0),void 0===i&&(i=0),void 0===s&&(s=0),void 0===r&&(r=0),void 0===n&&(n=0),void 0===a&&(a=0),this.transformInfo||(this.transformInfo={}),this.transformInfo.x=e,this.transformInfo.y=i,this.transformInfo.rotateX=r,this.transformInfo.rotateY=n,this.transformInfo.rotateZ=a,utils_TransformVerts(this,e,i,s,r,n,a),this}};let pG=Phaser.Textures.DynamicTexture;var rendertexture_CreateDynamicTexture=function(e,i,s){return void 0===i&&(i=2),void 0===s&&(s=2),new pG(e.sys.textures,null,i,s)};let pD=Phaser.Utils.Objects.IsPlainObject,pj=Phaser.Utils.Objects.GetValue;var pA=class extends pI{constructor(e,i,s,r,n,a){pD(i)&&(i=pj(a=i,"x",0),s=pj(a,"y",0),r=pj(a,"width",32),n=pj(a,"height",32)),super(e,i,s,rendertexture_CreateDynamicTexture(e,r,n),null,a),this.type="rexPerspectiveRenderTexture",this.rt=this.texture}destroy(e){this.scene&&!this.ignoreDestroy&&(super.destroy(e),this.rt.destroy(),this.rt=null)}snapshot(e,i){return void 0===i&&(i={}),i.gameObjects=e,i.renderTexture=this.rt,rendertexture_Snapshot(i),(this.width!==this.frame.realWidth||this.height!==this.frame.realHeight)&&this.syncSize(),this}};Phaser.Animations.AnimationState,Phaser.Utils.Objects.IsPlainObject,Phaser.Utils.Objects.GetValue;var utils_ForEachFace=function(e,i,s,r){if(Array.isArray(e))for(var n=0,a=e.length;n<a;n++){var o=e[n];if((!r||o)&&(s?i.call(s,o,n,e):i(o,n,e)))return}else for(var h in e){var o=e[h];if((!r||o)&&(s?i.call(s,o,h,e):i(o,h,e)))return}};let pF=Phaser.Math.RadToDeg,pz=Phaser.Math.DegToRad;var pW=class extends av{constructor(e,i,s,r,n,a){super(e,i,s,r,n),this.faces=a,utils_ForEachFace(a,function(e){e.setPosition(i,s),this.add(e)},this,!0)}get rotationX(){return 0}set rotationX(e){}get angleX(){return pF(this.rotationX)}set angleX(e){this.rotationX=pz(e)}get rotateX(){return pF(this.rotationX)}set rotateX(e){this.rotationX=pz(e)}get rotationY(){return 0}set rotationY(e){}get angleY(){return pF(this.rotationY)}set angleY(e){this.rotationY=pz(e)}get rotateY(){return pF(this.rotationY)}set rotateY(e){this.rotationY=pz(e)}get rotationZ(){return 0}set rotationZ(e){}get angleZ(){return pF(this.rotationZ)}set angleZ(e){this.rotationZ=pz(e)}get rotateZ(){return pF(this.rotationZ)}set rotateZ(e){this.rotationZ=pz(e)}setDebug(e,i){return utils_ForEachFace(this.faces,function(s){s.setDebug(e,i)},null,!0),this}panX(e){return utils_ForEachFace(this.faces,function(i){i.panX(e)},null,!0),this}panY(e){return utils_ForEachFace(this.faces,function(i){i.panY(e)},null,!0),this}panZ(e){return utils_ForEachFace(this.faces,function(i){i.panZ(e)},null,!0),this}transformVerts(e,i,s,r,n,a){return utils_ForEachFace(this.faces,function(o){o.transformVerts(e,i,s,r,n,a)},null,!0),this}forEachFace(e,i,s){return utils_ForEachFace(this.faces,e,i,s),this}};let pV=Phaser.Utils.Objects.IsPlainObject,pY={key:"__WHITE"},pX={image:pI,rendertexture:pA};var utils_CreatePerspectiveObject=function(e,i){var s;return void 0===i&&(i=pY),pV(i)?(!i.hasOwnProperty("type")&&(i.hasOwnProperty("key")?i.type="image":i.hasOwnProperty("width")&&(i.type="rendertexture")),s=new pX[i.type](e,i),e.add.existing(s)):s=i,s},utils_CreateFaces=function(e,i,s){var r;if(void 0===s){r=[];for(var n,a,o=0,h=i.length;o<h;o++)n=(a=i[o])?utils_CreatePerspectiveObject(e,a):null,r.push(n)}else{r={};for(var n,l,o=0,h=s.length;o<h;o++)l=s[o],n=i.hasOwnProperty(l)?utils_CreatePerspectiveObject(e,i[l]):null,r[l]=n}return r};let pH=Phaser.Math.DegToRad,pU=pH(180);var card_LayoutFaces=function(e,i){var s=i.back;s&&(0===e.orientation?s.transformVerts(0,0,0,0,pU,0):s.transformVerts(0,0,0,pU,0,0))};let pN=Phaser.Utils.Objects.GetValue,p$=Phaser.Math.Linear,pZ={right:0,"left-to-right":0,left:1,"right-to-left":1};var pK=class extends ss{constructor(e,i){super(e,i),this.resetFromJSON(i),this.boot()}resetFromJSON(e){return super.resetFromJSON(e),this.setEase(pN(e,"ease","Cubic")),this.setFrontToBackDirection(pN(e,"frontToBack",0)),this.setBackToFrontDirection(pN(e,"backToFront",1)),this}setFrontToBackDirection(e){return"string"==typeof e&&(e=pZ[e]),this.endAngleFB=0===e?180:-180,this}setBackToFrontDirection(e){return"string"==typeof e&&(e=pZ[e]),this.endAngleBF=0===e?-180:180,this}start(e,i){if(this.timer.isRunning)return this;this.timer.setDelay(this.delay).setDuration(e);var s=i+1;return 0===this.parent.face?(this.startAngle=0,this.endAngle=this.endAngleFB*s):(this.startAngle=this.endAngleBF,this.endAngle=this.startAngle-this.endAngleBF*s),super.start(),this}flip(e,i){return this.isRunning||(void 0===e&&(e=this.duration),void 0===i&&(i=0),this.start(e,i),this.emit("start",this.parent,this),this.parent.currentFaceIndex=(this.parent.currentFaceIndex+i+1)%2),this}flipRight(e,i){return 0===this.parent.currentFaceIndex?this.setFrontToBackDirection(0):this.setBackToFrontDirection(0),this.flip(e,i),this}flipLeft(e,i){return 0===this.parent.currentFaceIndex?this.setFrontToBackDirection(1):this.setBackToFrontDirection(1),this.flip(e,i),this}updateGameObject(e,i){var s=this.easeFn(i.t),r=p$(this.startAngle,this.endAngle,s);0===e.orientation?e.angleY=r:e.angleX=r}};let pJ=Phaser.Utils.Objects.IsPlainObject,pq=Phaser.Utils.Objects.GetValue,pQ=["back","front"],p0={x:0,horizontal:0,h:0,y:1,vertical:1,v:1},p1={front:0,back:1};var p2=class extends pW{constructor(e,i,s,r){pJ(i)&&(i=pq(r=i,"x",0),s=pq(r,"y",0));var n=utils_CreateFaces(e,r,pQ),a=n.back,o=n.front,h=pq(r,"width"),l=pq(r,"height");(void 0===h||void 0===l)&&(void 0===h&&(h=Math.max(o?o.width:0,a?a.width:0)),void 0===l&&(l=Math.max(o?o.height:0,a?a.height:0))),super(e,i,s,h,l,n),this.type="rexPerspectiveCard",this.frontFaceRotationX=0,this.frontFaceRotationY=0,this.frontFaceRotationZ=0,utils_ForEachFace(n,function(e,i){this[`${i}Face`]=e},this);var c=pq(r,"flip",void 0);!1!==c&&(this.flip=new pK(this,c)),this.setOrientation(pq(r,"orientation",0)),card_LayoutFaces(this,n),this.setFace(pq(r,"face",0))}get rotationX(){return this.frontFaceRotationX}set rotationX(e){this.frontFaceRotationX!==e&&(this.frontFaceRotationX=e,utils_ForEachFace(this.faces,function(i){i.rotationX=e},null,!0))}get rotationY(){return this.frontFaceRotationY}set rotationY(e){this.frontFaceRotationY!==e&&(this.frontFaceRotationY=e,utils_ForEachFace(this.faces,function(i){i.rotationY=e},null,!0))}get rotationZ(){return this.frontFaceRotationZ}set rotationZ(e){this.frontFaceRotationZ!==e&&(this.frontFaceRotationZ=e,utils_ForEachFace(this.faces,function(i){i.rotationZ=e},null,!0))}setOrientation(e){return"string"==typeof e&&(e=p0[e]),this.orientation=e,this}get face(){return this.currentFaceIndex}set face(e){"string"==typeof e&&(e=p1[e]),this.currentFaceIndex=e;var i=1===e?180:0;0===this.orientation?this.angleY=i:this.angleX=i}setFace(e){return this.face=e,this}toggleFace(){var e=0===this.face?1:0;return this.setFace(e),this}};Phaser.Utils.Objects.GetValue,Phaser.Math.RadToDeg,Phaser.Math.DegToRad,Phaser.Math.Angle.WrapDegrees,Phaser.Math.Angle.ShortestBetween,Phaser.Math.Wrap,Phaser.Math.Linear,Phaser.Utils.Objects.IsPlainObject,Phaser.Utils.Objects.GetValue,Phaser.Math.DegToRad,Phaser.Math.RadToDeg,Phaser.Math.Angle.WrapDegrees,Phaser.Math.Linear,Phaser.Math.Wrap,Phaser.Utils.Objects.IsPlainObject,Phaser.Utils.Objects.GetValue,Phaser.Math.Wrap;let p5=Phaser.Utils.Objects.GetValue;var rendertexture_Init=function(e,i,s){i.visibleSibling=[],i.isRunning=!1,i.useParentBounds=p5(s,"useParentBounds",!1),i.setPosition(e.x,e.y).setVisible(!1),e.pin(i)},rendertexture_Exit=function(e,i){if(!e)return!1;for(var s=i.visibleSibling,r=0,n=s.length;r<n;r++)e.setChildVisible(s[r],!0);return s.length=0,e.setChildVisible(i,!1),i.isRunning=!1,!0},rendertexture_Enter=function(e,i){if(!e)return!1;rendertexture_Exit(e,i);var s=i.useParentBounds;rendertexture_Snapshot({gameObjects:e.getAllVisibleChildren(),renderTexture:i.rt,x:i.x,y:i.y,width:s?e.displayWidth:void 0,height:s?e.displayHeighth:void 0,originX:s?e.originX:void 0,originY:s?e.originY:void 0}),e.setChildVisible(i,!0);for(var r=i.visibleSibling,n=e.children,a=0,o=n.length;a<o;a++){var h=n[a];h.visible&&h!==i&&(e.setChildVisible(h,!1),r.push(h))}return i.isRunning=!0,!0},rendertexture_MeshRenderTextureBase=function(e){return class extends e{constructor(e,i){var s=e.scene;super(s,0,0,1,1,i),s.add.existing(this),rendertexture_Init(e,this,i)}destroy(e){this.scene&&!this.ignoreDestroy&&(this.exit(),super.destroy(e))}enter(){return rendertexture_Enter(this.rexContainer.parent,this)&&this.syncSize(),this}exit(){return rendertexture_Exit(this.rexContainer.parent,this),this}}};let ContainerPerspective=class ContainerPerspective extends rendertexture_MeshRenderTextureBase(pA){get perspectiveState(){return this.isRunning}};let p3=Phaser.Utils.Objects.GetValue;var perspectivecard_CreatePerspectiveCardMesh=function(e){var i=this.scene;this.setSnapshotPadding(p3(e,"snapshotPadding",0)),e=object_Clone(e),delete e.width,delete e.height,e.front={width:1,height:1},e.back={width:1,height:1};var s=new p2(i,e);i.add.existing(s);var r=s.flip;if(r){var n=this;r.on("start",function(){n.enterPerspectiveMode()}).on("complete",function(){n.exitPerspectiveMode()})}return s};let p7=["front","back"],p6=Phaser.Utils.Objects.GetValue;let PerspectiveCard_PerspectiveCard=class PerspectiveCard_PerspectiveCard extends h${constructor(e,i){super(e,i),this.type="rexPerspectiveCard";var s=i.back,r=p6(i,"expand.back",!0);this.add(s,{key:"back",expand:r});var n=i.front,a=p6(i,"expand.front",!0);this.add(n,{key:"front",expand:a}),this.perspectiveCard=perspectivecard_CreatePerspectiveCardMesh.call(this,i),this.pin(this.perspectiveCard),this.exitPerspectiveMode(!1)}get flip(){return this.perspectiveCard.flip}get face(){return this.perspectiveCard.face}set face(e){if(!this.flip||!this.flip.isRunning){this.perspectiveCard.face=e;var i=0===e,s=this.childrenMap.front,r=this.childrenMap.back;this.setChildVisible(s,i),this.setChildVisible(r,!i)}}setFace(e){return this.face=e,this}toggleFace(){var e=0===this.face?1:0;return this.setFace(e),this}get isInPerspectiveMode(){return this.perspectiveCard.visible}get rotationX(){return this.perspectiveCard.rotationX}set rotationX(e){this.enterPerspectiveMode(),this.perspectiveCard.rotationX=e}get angleX(){return this.perspectiveCard.angleX}set angleX(e){this.enterPerspectiveMode(),this.perspectiveCard.angleX=e}get rotationY(){return this.perspectiveCard.rotationY}set rotationY(e){this.enterPerspectiveMode(),this.perspectiveCard.rotationY=e}get angleY(){return this.perspectiveCard.angleY}set angleY(e){this.enterPerspectiveMode(),this.perspectiveCard.angleY=e}get rotationZ(){return this.perspectiveCard.rotationZ}set rotationZ(e){this.enterPerspectiveMode(),this.perspectiveCard.rotationZ=e}get angleZ(){return this.perspectiveCard.angleZ}set angleZ(e){this.enterPerspectiveMode(),this.perspectiveCard.angleZ=e}panX(e){return this.enterPerspectiveMode(),this.perspectiveCard.panX(e),this}panY(e){return this.enterPerspectiveMode(),this.perspectiveCard.panY(e),this}panZ(e){return this.enterPerspectiveMode(),this.perspectiveCard.panZ(e),this}transformVerts(e,i,s,r,n,a){return this.enterPerspectiveMode(),this.perspectiveCard.transformVerts(e,i,s,r,n,a),this}forEachFace(e,i,s){return this.enterPerspectiveMode(),this.perspectiveCard.forEachFace(e,i,s),this}};Object.assign(PerspectiveCard_PerspectiveCard.prototype,{enterPerspectiveMode(){return this.isInPerspectiveMode||(this.setChildVisible(this.perspectiveCard,!0),this.snapshotFace(0),this.snapshotFace(1),this.setChildVisible(this.childrenMap.front,!1),this.setChildVisible(this.childrenMap.back,!1),this.perspectiveCard.setSize(this.width,this.height)),this},exitPerspectiveMode(){if(!this.isInPerspectiveMode)return this;this.setChildVisible(this.perspectiveCard,!1);var e=0===this.perspectiveCard.face;return this.setChildVisible(this.childrenMap.front,e),this.setChildVisible(this.childrenMap.back,!e),this},setSnapshotPadding(e){return this.snapshotPadding=e,this},snapshotFace(e){"number"==typeof e&&(e=p7[e]);var i=this.perspectiveCard.faces[e],s=this.childrenMap[e];i.rt.clear();var r=s.visible;s.visible=!0;var n=s.isRexContainerLite?s.getAllVisibleChildren():s;return i.snapshot(n,{padding:this.snapshotPadding}),s.visible=r,this}}),ObjectFactory.register("perspectiveCard",function(e){var i=new PerspectiveCard_PerspectiveCard(this.scene,e);return this.scene.add.existing(i),i}),(0,k.Z)(window,"RexPlugins.UI.PerspectiveCard",PerspectiveCard_PerspectiveCard);let p4=Phaser.Utils.Objects.IsPlainObject,p8=Phaser.Utils.Objects.GetValue,p9=Phaser.Utils.String.UUID;var gt={top:1,left:3,right:5,bottom:7},ge={top:"bottom",left:"right",right:"left",bottom:"top"},gi={getPageKey:function(e){var i=this.getElement("tabs.buttons");if(!(e>=i.length))return i[e].name},getPageIndex:function(e){for(var i=this.getElement("tabs.buttons"),s=0,r=i.length;s<r;s++)if(i[s].name===e)return s},addPage:function(e,i,s){if(p4(e)){var r=e;e=p8(r,"key"),i=p8(r,"tab"),s=p8(r,"page")}return e||(e=p9()),i.name=e,this.childrenMap.tabs.addButton(i),this.childrenMap.pages.addPage(s,{key:e}),this},getPage:function(e){return"number"==typeof e&&(e=this.getPageKey(e)),this.childrenMap.pages.getPage(e)},getTab:function(e){var i;return i="number"==typeof e?e:this.getPageIndex(e),this.getElement("tabs.buttons")[i]},setTabPosition:function(e){var i=gt[e];if(void 0===i)return this;var s=this.childrenMap.tabs,r=this.sizerChildren.indexOf(s);if(r===i)return this;this.sizerChildren[r]=null,this.sizerChildren[i]=s;var n=this.getSizerConfig(s).padding,a=ge[this.tabsPosition];return n[ge[e]]=n[a],n[a]=0,this.tabsPosition=e,this}};Object.assign(gi,{swapPage:function(e,i){var s,r;return null!=(s="number"==typeof e?e:this.getPageIndex(e))&&(void 0!==i&&(r=this.childrenMap.pages.fadeInDuration,this.childrenMap.pages.fadeInDuration=i),this.childrenMap.tabs.emitButtonClick(s),void 0!==r&&(this.childrenMap.pages.fadeInDuration=r)),this},swapFirstPage:function(e){return this.swapPage(0,e),this},swapLastPage:function(e){var i=this.getElement("tabs.buttons").length-1;return this.swapPage(i,e),this}},{removePage(e,i){"number"==typeof e&&(e=this.getPageKey(e));var s=this.childrenMap.tabs,r=s.getByName(e),n=this.childrenMap.pages,a=n.getElement(e);return r&&a&&(n.removeChildrenMap(e),s.removeButton(r,i),n.remove(a,i)),this},removeAllPages(e){for(var i=this.getElement("tabs.buttons"),s=i.length-1;s>=0;s--)this.removePage(i[s].name,e);return this}});let gs=Phaser.Utils.Objects.GetValue,gr=dW.prototype.add;let TabPages_TabPages=class TabPages_TabPages extends dW{constructor(e,i){void 0===i&&(i={}),i.column=3,i.row=3,i.columnProportions=[0,0,0],i.rowProportions=[0,0,0];var s,r,n=gs(i,"expand.pages",!0);n&&(i.columnProportions[1]=1,i.rowProportions[1]=1),super(e,i),this.type="rexTabPages";var a=gs(i,"background",void 0);a&&this.addBackground(a);var o=gs(i,"pages"),h=new Pages_Pages(e,o);e.add.existing(h);var l=gs(i,"tabsPosition",void 0);void 0===l&&(l=gs(i,"tabPosition","top"));var c=gs(i,"wrapTabs",!1),g=c?FixWidthButtons_Buttons:un,m=gs(i,"tabs",void 0);void 0===m&&(m={}),m.orientation="top"===l||"bottom"===l?"x":"y",m.buttonsType="radio",c||m.hasOwnProperty("expand")||(m.expand=gs(i,"expand.tabs",!1));var x=new g(e,m);e.add.existing(x),gr.call(this,h,{column:1,row:1,expand:n});var S=gs(i,"space.item",0);switch(l){case"top":s=1,r=0,S={bottom:S};break;case"bottom":s=1,r=2,S={top:S};break;case"left":s=0,r=1,S={right:S};break;case"right":s=2,r=1,S={left:S}}gr.call(this,x,{column:s,row:r,padding:S,expand:!!c||gs(i,"expand.tabs",!1),align:gs(i,"align.tabs","left")}),this.addChildrenMap("background",a),this.addChildrenMap("tabs",x),this.addChildrenMap("pages",h),this.tabsPosition=l,x.on("button.click",function(e){var i=e.name;h.hasPage(i)&&h.swapPage(i)}),x.on("button.statechange",function(e,i,s,r){this.emit(s?"tab.focus":"tab.blur",e,e.name)},this),h.on("pagevisible",function(e,i,s){this.emit("page.focus",e,i)}),h.on("pageinvisible",function(e,i,s){this.emit("page.blur",e,i)})}get currentKey(){return this.getElement("pages").currentKey}set currentKey(e){this.showPage(e)}get keys(){return this.getElement("pages").keys}get currentPage(){return this.getElement("pages").currentPage}get previousPage(){return this.getElement("pages").previousPage}};Object.assign(TabPages_TabPages.prototype,gi);var gn=TabPages_TabPages;ObjectFactory.register("tabPages",function(e){var i=new gn(this.scene,e);return this.scene.add.existing(i),i}),(0,k.Z)(window,"RexPlugins.UI.TabPages",gn);var ga=class extends ou{constructor(e,i){void 0===i&&(i={}),i.destroy=!1,super(e,i)}onOpen(){this.emit("open",this.parent,this),super.onOpen()}onClose(){this.emit("close",this.parent,this),super.onClose()}},DefaultExpandCallback=function(e,i){aX.popUp.call(e,i,this.expandDirection)},DefaultCollapseCallback=function(e,i){aX.scaleDown.call(e,i,this.expandDirection)};let go=Phaser.Utils.Objects.GetValue;let Folder_Folder=class Folder_Folder extends dr{constructor(e,i){void 0===i&&(i={}),i.hasOwnProperty("orientation")||(i.orientation=1),super(e,i),this.type="rexFolder",this.reLayoutEnable=!0,this.expanded=void 0,this.expandDirection=1===this.orientation?"y":"x";var s=i.background,r=i.title,n=i.child;s&&this.addBackground(s);var a=go(i,"space"),o=go(i,"align.title",1===this.orientation?"left":"top"),h=go(i,"expand.title",!0);this.add(r,{proportion:0,align:o,expand:h,padding:{left:go(a,"titleLeft",0),right:go(a,"titleRight",0),top:go(a,"titleTop",0),bottom:go(a,"titleBottom",0)}});var l=go(i,"toggleByTarget",void 0),c=go(i,"toggleClickConfig");if(void 0===l&&(l=r),l&&oE.onClick.call(l,function(){this.toggle()},this,c),this.childTransition=new ga(n),!go(i,"customChildOrigin",!1)){var g=this.rtl?1:0;n.setOrigin(g)}var o=go(i,"align.child","left"),h=go(i,"expand.child",!0),m=h?1:0;this.add(n,{proportion:m,align:o,expand:h,padding:{left:go(a,"childLeft",0),right:go(a,"childRight",0),top:go(a,"childTop",0),bottom:go(a,"childBottom",0)}}),this.addChildrenMap("title",r),this.addChildrenMap("child",n),this.addChildrenMap("background",s);var x=i.transition;this.setTransitionDuration(go(x,"duration",200)),this.setExpandCallback(go(x,"expandCallback",void 0)),this.setCollapseCallback(go(x,"collapseCallback",void 0)),this.reLayoutTarget=go(i,"reLayoutTarget",void 0);var S=i.onExpandStart;S&&this.on("expand.start",S);var _=i.onExpandComplete;_&&this.on("expand.complete",_);var k=i.onCollapseStart;k&&this.on("collapse.start",k);var E=i.onCollapseComplete;E&&this.on("collapse.complete",E);var R=go(i,"expanded",void 0);void 0!==R&&this.setExpandedState(R)}};Object.assign(Folder_Folder.prototype,{expand(e){if(!0===this.expanded)return this;void 0===e&&(e=this.transitionDuration),this.expanded=!0;var i=this.childrenMap.title,s=this.childrenMap.child;return this.show(s),this.reLayoutEnable&&(this.reLayoutTarget?this.reLayoutTarget:this.getTopmostSizer()).layout(),i.emit("folder.expand",e,this),s.emit("folder.expand",e,this),this.emit("expand.start",this),this.childTransition.once("open",function(){this.emit("expand.complete",this)},this).requestOpen(null,e),this},collapse(e){if(!1===this.expanded)return this;void 0===e&&(e=this.transitionDuration),this.expanded=!1;var i=this.childrenMap.title,s=this.childrenMap.child;return i.emit("folder.collapse",e,this),s.emit("folder.collapse",e,this),this.emit("collapse.start",this),this.childTransition.once("close",function(){this.setChildScale(s,1,1).hide(s),this.reLayoutEnable&&(this.reLayoutTarget?this.reLayoutTarget:this.getTopmostSizer()).layout(),this.emit("collapse.complete",this)},this).requestClose(null,e),this},toggle(e){return this.expanded?this.collapse(e):this.expand(e),this},setExpandedState(e){return this.reLayoutEnable=!1,void 0===e?this.expanded=void 0:e?this.expand(0):this.collapse(0),this.reLayoutEnable=!0,this}},{setTransitionDuration(e){return this.transitionDuration=e,this.childTransition.setTransitInTime(e).setTransitOutTime(e),this},setExpandCallback(e){return void 0===e&&(e=DefaultExpandCallback.bind(this)),this.childTransition.setTransitInCallback(e),this},setCollapseCallback(e){return void 0===e&&(e=DefaultCollapseCallback.bind(this)),this.childTransition.setTransitOutCallback(e),this}});var gh=Folder_Folder;ObjectFactory.register("folder",function(e){var i=new gh(this.scene,e);return this.scene.add.existing(i),i}),(0,k.Z)(window,"RexPlugins.UI.Folder",gh);var NodeBase=function(e){return class extends e{setText(e){return this.text=e,this}get text(){return this.childrenMap.nodeBody.text}set text(e){var i=this.childrenMap.nodeBody;i.setText&&i.setText(e)}setTexture(e,i){var s=this.childrenMap.nodeBody;return s.setTexture&&s.setTexture(e,i),this}get texture(){var e=this.childrenMap.nodeBody;if(e)return e.texture}get frame(){var e=this.childrenMap.nodeBody;if(e)return e.frame}}};let gl=Phaser.Utils.Objects.GetValue;var tree_GetGameObjectFromConfig=function(e,i,s,r,n){var a,o=gl(i,s);return system_IsGameObject(o)?(a=o,delete i[s]):object_IsFunction(o)?(a=o(e,r),e.add.existing(a)):n&&(a=n(e,o,r),e.add.existing(a)),a};let gd=Phaser.Utils.Objects.GetValue;let Node=class Node extends NodeBase(dr){constructor(e,i,s){var r=i.space;super(e,{orientation:"x",space:{left:gd(r,"nodeLeft",0),right:gd(r,"nodeRight",0),top:gd(r,"nodeTop",0),bottom:gd(r,"nodeBottom",0)}}),this.type="rexTreeNode";var n=tree_GetGameObjectFromConfig(e,i,"nodeBackground",s),a=tree_GetGameObjectFromConfig(e,i,"nodeBody",s,DefaultCreateNodeBodyCallback);n&&this.addBackground(n),this.add(a,{proportion:1,key:"nodeBody"})}getTreePatent(){return this.rexSizer.treeParent}getTreeRoot(){var e=this.rexSizer.treeParent;return e?e.getTreeRoot():null}};var DefaultCreateNodeBodyCallback=function(e,i,s){var r=new cz(e,i);return r.resetDisplayContent(""),r},methods_SyncDisplayList=function(e,i){var s=e.parentContainer;if(s){i.isRexContainerLite?i.addToContainer(s):s.add(i);return}var r=e.displayList;if(system_IsLayerGameObject(r)){i.isRexContainerLite?i.addToLayer(r):r.add(i);return}e.scene.add.existing(i)};let gc=Phaser.Utils.String.UUID;var gu={};Object.assign(gu,{getTreePatent(e){if(void 0===e&&(e=this),e.rexSizer)return e.rexSizer.treeParent},getTreeRoot(e){var i;for(void 0===e&&(e=this);e.rexSizer;){if(null===(i=e.rexSizer.treeParent))return e;e=i}},isGrandsonNode(e){var i;if(void 0===e||!e.rexSizer)return!1;for(;e.rexSizer;){if((i=e.rexSizer.treeParent)===this)return!0;if(null===i)break;e=i}return!1}},{addTree(e,i){return system_IsGameObject(e)&&(e={nodeBody:e,nodeKey:i}),this.insertTree(void 0,e)},insertTree(e,i){"string"==typeof i?(s=i,i=void 0):i&&(s=i.nodeKey,delete i.nodeKey),void 0===s&&(s=gc());var s,r=this.createTree(i);return methods_SyncDisplayList(this,r),this.insertNode(e,r,{expand:!0}),r},addNode(e,i){return this.insertNode(void 0,e,i)},insertNode(e,i,s){var r;return system_IsGameObject(i)||(s=i,i=new Node(this.scene,this.configSave,{isLeaf:!0})),"string"==typeof s?(r=s,s=void 0):s&&(r=s.nodeKey,delete s.nodeKey),void 0===r&&(r=gc()),void 0===s&&(s={}),s.hasOwnProperty("expand")||(s.expand=!0),this.removeNode(i,!1),i.rexSizer.treeParent=this,this.nodesMap.hasOwnProperty(r)&&(console.error(`[Trees] Duplicate nodeKey '${r}'`),this.removeNode(this.nodesMap[r],!0)),i.nodeKey=r,this.nodesMap[r]=i,this.childrenMap.child.insert(e,i,s),i}},{removeNode(e,i){if(!e)return this;var s=this.getTreePatent(e);return s&&(delete s.nodesMap[e.nodeKey],e.nodeKey=null,e.rexSizer.treeParent=null,s.childrenMap.child.remove(e,i)),this},removeAllNodes(e){var i=this.nodesMap;for(var s in i)this.removeNode(i[s],e);return this}},{getNode(e){if("string"==typeof e&&(e=e.split(".")),0!==e.length){var i=e.shift(),s=this.nodesMap[i];return 0===e.length?s:s&&this.isTree(s)?s.getNode(e):null}},getNodes(e){var i=this.nodesMap;if(e)for(var s in i)e.push(i[s]);else e=nodes;return e},getAllNodes(e){}});let gp=Phaser.Utils.Objects.GetValue;var DefaultCreateToggleButtonCallback=function(e,i,s){var r=new triangle_Triangle_Triangle(e,i);return r.on("expand.start",function(e){e.setDirection("down")}).on("collapse.complete",function(e){e.setDirection("right")}),r},tree_CreateTitleSizer=function(e,i){var s=new Node(e,i,{isLeaf:!1});e.add.existing(s);var r=tree_GetGameObjectFromConfig(e,i,"toggleButton",{isLeaf:!1},DefaultCreateToggleButtonCallback);return s.insert(0,r,{padding:{right:gp(i,"space.toggleButton",0)},fitRatio:1,key:"toggleButton"}),s};let gg=Phaser.Utils.Objects.GetValue;var tree_CreateChildrenSizer=function(e,i){var s=new dr(e,{orientation:gg(i,"childrenOrientation","y")});e.add.existing(s);var r=tree_GetGameObjectFromConfig(e,i,"childrenBackground",{isLeaf:!1});return r&&s.addBackground(r),s};let gv=Phaser.Utils.Objects.Clone;var methods_Merge=function(e,i){var s=e?gv(e):{};if(!i)return s;for(var r in i)s[r]=i[r];return s};let gf=Phaser.Utils.Objects.GetValue;let Tree=class Tree extends NodeBase(gh){constructor(e,i){void 0===i&&(i={});var s=tree_GetGameObjectFromConfig(e,i,"background",{isLeaf:!1}),r=tree_CreateChildrenSizer(e,i),n=r.childrenMap.items,a=tree_CreateTitleSizer(e,i),o=a.childrenMap.toggleButton,h=a.childrenMap.nodeBody,l=utils_GetOrientationMode(gf(i,"orientation","y")),c=i.space;if(c){var g=gf(c,"indent",0);c.childLeft=gf(c,"indentLeft",1===l?g:0),c.childRight=gf(c,"indentRight",0),c.childTop=gf(c,"indentTop",0===l?g:0),c.childBottom=gf(c,"indentBottom",0)}super(e,{background:s,title:a,child:r,toggleByTarget:o,transition:i.transition,orientation:l,space:c,align:i.align,expand:i.expand}),this.type="rexTree",this.rexSizer.treeParent=null,this.nodesMap={},this.configSave=i,this.addChildrenMap("toggleButton",o),this.addChildrenMap("nodeBody",h),this.addChildrenMap("childrenNodes",n),this.on("expand.start",function(){o.emit("expand.start",o)}).on("expand.complete",function(){o.emit("expand.complete",o)}).on("collapse.start",function(){o.emit("collapse.start",o)}).on("collapse.complete",function(){o.emit("collapse.complete",o)});var m=gf(i,"expanded",!0);void 0!==m&&this.setExpandedState(m)}destroy(e){this.scene&&!this.ignoreDestroy&&(this.configSave=void 0,Clear(this.nodesMap),this.nodesMap=void 0,super.destroy(e))}createTree(e){return Tree.CreateTree(this.scene,this.configSave,e)}isTree(e){return!!e&&e instanceof TreeNode}};Tree.CreateTree=function(e,i,s){return new Tree(e,methods_Merge(i,s))},Object.assign(Tree.prototype,gu);let gm=Phaser.Utils.String.UUID;var gb={};Object.assign(gb,{addTree(e){return system_IsGameObject(e)&&(e={nodeBody:e,nodeKey:nodeKey}),this.insertTree(void 0,e)},insertTree(e,i){"string"==typeof i?(s=i,i=void 0):i&&(s=i.nodeKey,delete i.nodeKey),void 0===s&&(s=gm());var s,r=Tree.CreateTree(this.scene,this.treeConfig,i);return methods_SyncDisplayList(this,r),r.nodeKey=s,this.treesMap[s]=r,this.insert(e,r,{expand:!0}),r}},{removeTree(e,i){return e&&(delete this.treesMap[e.nodeKey],e.nodeKey=null,this.remove(e,i)),this},removeAllNodes(e){var i=this.treesMap;for(var s in i)this.removeTree(i[s],e);return this}},{getTree(e){return this.treesMap[e]},getNode(e){var i=e.indexOf(".");if(-1===i)return this.getTree(e);var s=this.getTree(e.substring(0,i));if(s)return s.getNode(e.substring(i+1))}});let gy=Phaser.Utils.Objects.GetValue;let Trees_Trees=class Trees_Trees extends dr{constructor(e,i){void 0===i&&(i={}),i.hasOwnProperty("orientation")||(i.orientation="y"),super(e,i),this.type="rexTrees",this.treesMap={},this.treeConfig=gy(i,"tree")}destroy(e){this.scene&&!this.ignoreDestroy&&(this.treeConfig=void 0,Clear(this.treesMap),this.treesMap=void 0,super.destroy(e))}};Object.assign(Trees_Trees.prototype,gb),ObjectFactory.register("trees",function(e){var i=new Trees_Trees(this.scene,e);return this.scene.add.existing(i),i}),(0,k.Z)(window,"RexPlugins.UI.Trees",Trees_Trees),ObjectFactory.register("textArea",function(e){var i=new TextArea_TextArea(this.scene,e);return this.scene.add.existing(i),i}),(0,k.Z)(window,"RexPlugins.UI.TextArea",TextArea_TextArea);var textareainput_InjectProperties=function(e){Object.defineProperty(e,"childOY",{configurable:!0,get:function(){return e.textOY},set:function(i){e.textOY=i}}),Object.defineProperty(e,"topChildOY",{get:function(){return e.topTextOY}}),Object.defineProperty(e,"bottomChildOY",{get:function(){return e.bottomTextOY}}),Object.defineProperty(e,"childVisibleHeight",{get:function(){return e.textVisibleHeight}}),Object.defineProperty(e,"childHeight",{get:function(){return e.contentHeight}})};let gC=Phaser.Utils.Objects.GetValue;let TextAreaInput_TextAreaInput=class TextAreaInput_TextAreaInput extends cB{constructor(e,i){void 0===i&&(i={});var s,r,n,a=gC(i,"text");system_IsGameObject(a)?s=a:(void 0===a&&(a={}),a.textArea=!0,s=new CanvasInput_CanvasInput(e,a),e.add.existing(s)),textareainput_InjectProperties(s);var o=void 0===a.width,h=void 0===a.height;o&&(s.minWidth=0),h&&(s.minHeight=0),i.scrollMode=0,i.type="rexTextAreaInput",i.child={gameObject:s,expandWidth:o,expandHeight:h};var l=gC(i,"space",void 0);l&&(l.child=gC(l,"text",0)),i.scroller=!1,super(e,i),this.addChildrenMap("text",s),s.on("cursorin",function(){var e=s.textOY,i=s.contentHeight,a=r!==e,o=n!==i;r=e,n=i,o&&this.resizeController(),(a||o)&&(this.t=s.t)},this),s.on("textchange",function(e){this.emit("textchange",e,this)},this);var c=gC(i,"content",void 0);c&&this.setText(c)}get text(){return this.childrenMap.child.text}get lineHeight(){return this.childrenMap.child.lineHeight}get lineIndex(){return Math.floor(-this.childOY/this.lineHeight)}get linesCount(){return this.childrenMap.child.linesCount}get contentHeight(){return this.childrenMap.child.contentHeight}get readOnly(){return this.childrenMap.child.readOnly}set readOnly(e){this.childrenMap.child.readOnly=e}setReadOnly(e){return this.childrenMap.child.setReadOnly(e),this}};Object.assign(TextAreaInput_TextAreaInput.prototype,{setText(e){return this.childrenMap.child.setText(e),this},appendText(e){return this.setText(this.text+e),this}},{scrollToLine(e){return this.setChildOY(-this.lineHeight*e),this},scrollToNextLine(e){void 0===e&&(e=1);var i=this.lineIndex+e;return this.scrollToLine(i),this}}),ObjectFactory.register("textAreaInput",function(e){var i=new TextAreaInput_TextAreaInput(this.scene,e);return this.scene.add.existing(i),i}),(0,k.Z)(window,"RexPlugins.UI.TextAreaInput",TextAreaInput_TextAreaInput);var gx={getChildrenWidth:function(){if(this.rexSizer.hidden)return 0;var e,i=this.child,s=i.rexSizer,r=!1;if(s.hidden?e=0:0===this.scrollMode?void 0===(e=this.getChildWidth(i))&&(r=!0):e=0,!r)return e},getChildrenHeight:function(){if(this.rexSizer.hidden)return 0;var e,i=this.child,s=i.rexSizer,r=!1;if(s.hidden)e=0;else switch(this.scrollMode){case 0:default:e=0;break;case 1:void 0===(e=this.getChildHeight(i))&&(r=!0)}if(!r)return e},getChildrenSizers:function(e){return void 0===e&&(e=[]),this.child&&this.child.isRexSizer&&e.push(this.child),e},resetChildPosition:function(){var e=this.left,i=this.top;switch(this.scrollMode){case 0:i+=this.childOY;break;case 1:e+=this.childOY;break;default:i+=this.childOY,e+=this.childOX}this.child.setPosition(e,i),this.resetChildPositionState(this.child),this.setMaskChildrenFlag()},layoutChildren:function(){var e,i,s=this.child;if(!s.rexSizer.hidden){switch(this.scrollMode){case 0:e=this.width;break;case 1:i=this.height}s.isRexSizer?s.runLayout(this,e,i):size_ResizeGameObject(s,e,i),this.resetChildPosition(),this.layoutChildrenMask(),this.maskChildren()}},removeChildCallback:function(e,i){!i&&e.clearMask&&e.clearMask(!1)}};Object.assign(gx,uj);let gS=Phaser.Utils.Objects.IsPlainObject,g_=Phaser.Utils.Objects.GetValue,gw=Phaser.Display.Align.TOP_LEFT;let ScrollableBlock=class ScrollableBlock extends hD{constructor(e,i,s,r,n,a){gS(i)?(i=g_(a=i,"x",0),s=g_(a,"y",0),r=g_(a,"width",void 0),n=g_(a,"height",void 0)):gS(r)&&(r=g_(a=r,"width",void 0),n=g_(a,"height",void 0)),super(e,i,s,r,n,a),this.type="rexScrollableBlock",this.child=void 0,this.childrenMask=void 0,this._childOY=0,this._childOX=0,this.execeedTopState=!1,this.execeedBottomState=!1,this.execeedLeftState=!1,this.execeedRightState=!1,this.setScrollMode(g_(a,"scrollMode",0));var o=g_(a,"clamplChildOY",!0),h=g_(a,"clamplChildOX",o);this.setClampMode(o,h);var l=g_(a,"child",void 0),c=g_(a,"expand",!0);l.setOrigin&&l.setOrigin(0),this.add(l),this.sizerChildren=[l];var g=this.getSizerConfig(l);g.align=gw,g.expand=c,this.child=l,this.setupChildrenMask(g_(a,"mask",void 0)),this.childrenMask&&(this.maskGameObject=mask_MaskToGameObject(this.childrenMask))}destroy(e){this.scene&&!this.ignoreDestroy&&(this.destroyChildrenMask(),this.child=void 0,super.destroy(e))}setScrollMode(e){return"string"==typeof e&&(e=dQ[e.toLowerCase()]),this.scrollMode=e,this}setClampMode(e,i){return this.clampChildOY=e,this.clampChildOX=i,this}get instHeight(){return 0===this.scrollMode||2===this.scrollMode?this.height:this.width}get instWidth(){return 0===this.scrollMode||2===this.scrollMode?this.width:this.height}get childHeight(){return 0===this.scrollMode||2===this.scrollMode?GetDisplayHeight(this.child):GetDisplayWidth(this.child)}get childWidth(){return 0===this.scrollMode||2===this.scrollMode?GetDisplayWidth(this.child):GetDisplayHeight(this.child)}get topChildOY(){return 0}get bottomChildOY(){return-this.visibleHeight}get leftChildOX(){return 0}get rightChildOX(){return-this.visibleWidth}get childVisibleHeight(){return this.instHeight}get childVisibleWidth(){return this.instWidth}get visibleHeight(){var e=this.childHeight-this.childVisibleHeight;return e<0&&(e=0),e}get visibleWidth(){var e=this.childWidth-this.childVisibleWidth;return e<0&&(e=0),e}childOYExceedTop(e){return void 0===e&&(e=this.childOY),e>this.topChildOY}childOYExeceedBottom(e){return void 0===e&&(e=this.childOY),e<this.bottomChildOY}childOXExceedLeft(e){return void 0===e&&(e=this.childOX),e>this.leftChildOX}childOXExeceedRight(e){return void 0===e&&(e=this.childOX),e<this.rightChildOX}get childOY(){return this._childOY}set childOY(e){var i=this.topChildOY,s=this.bottomChildOY,r=this.childOYExceedTop(e),n=this.childOYExeceedBottom(e);this.clampChildOY&&(this.childVisibleHeight>this.childHeight?e=0:r?e=i:n&&(e=s)),this._childOY!==e&&(this._childOY=e,this.resetChildPosition()),r&&!this.execeedTopState&&this.emit("execeedtop",this,e,i),this.execeedTopState=r,n&&!this.execeedBottomState&&this.emit("execeedbottom",this,e,s),this.execeedBottomState=n}get childOX(){return this._childOX}set childOX(e){var i=this.leftChildOX,s=this.rightChildOX,r=this.childOXExceedLeft(e),n=this.childOXExeceedRight(e);this.clampChildOX&&(this.childVisibleWidth>this.childWidth?e=0:r?e=i:n&&(e=s)),this._childOX!==e&&(this._childOX=e,this.resetChildPosition()),r&&!this.execeedLeftState&&this.emit("execeedleft",this,e,i),this.execeedLeftState=r,n&&!this.execeedRightState&&this.emit("execeedright",this,e,s),this.execeedRightState=n}setChildOY(e){return this.childOY=e,this}setChildOX(e){return this.childOX=e,this}set t(e){this.childOY=-this.visibleHeight*e}get t(){var e=this.visibleHeight;return 0===e?0:-(this.childOY/e)}set s(e){this.childOX=-this.visibleWidth*e}get s(){var e=this.visibleWidth;return 0===e?0:-(this.childOX/e)}setChildOYByPercentage(e){return this.t=e,this}setChildOXByPercentage(e){return this.s=e,this}};Object.assign(ScrollableBlock.prototype,gx);let gP=["top","bottom","centerY","center"],gk=["left","right","centerX","center"];var AlignChild=function(e,i,s){var r,n="Y"===(i=i.toUpperCase()),a=this.childrenMap.child;if(n){if(s)for(var o=0,h=gP.length;o<h;o++){var l=gP[o];if(-1!==s.indexOf(l)){s=l;break}}switch(s){case"top":r=a.top-e.getTopLeft().y;break;case"bottom":r=a.bottom-e.getBottomLeft().y;break;case"centerY":case"center":r=a.centerY-e.getCenter().y;break;default:var c=a.top-e.getTopLeft().y,g=a.bottom-e.getBottomLeft().y;r=c<=0&&g>=0?0:Math.abs(c)<=Math.abs(g)?c:g}}else{if(s)for(var o=0,h=gk.length;o<h;o++){var l=gk[o];if(-1!==s.indexOf(l)){s=l;break}}switch(s){case"left":r=a.left-e.getTopLeft().x;break;case"right":r=a.right-e.getTopRight().x;break;case"centerX":case"center":r=a.centerX-e.getCenter().x;break;default:var m=a.left-e.getTopLeft().x,x=a.right-e.getTopRight().x;r=m<=0&&x>=0?0:Math.abs(m)<=Math.abs(x)?m:x}}switch(this.scrollMode){case 0:case 1:this.childOY+=r;break;default:this[`childO${i}`]+=r}};let gT=Phaser.Utils.Objects.GetValue;let ScrollablePanel_ScrollablePanel=class ScrollablePanel_ScrollablePanel extends cB{constructor(e,i){void 0===i&&(i={});var s,r,n=utils_GetScrollMode(i),a=gT(i,"panel",void 0);void 0===a&&(a={}),a.scrollMode=n,a.clamplChildOY=gT(i,"clamplChildOY",!1),a.clamplChildOX=gT(i,"clamplChildOX",!1);var o=new ScrollableBlock(e,a);switch(e.add.existing(o),n){case 0:s=gT(i,"expand.panel",!0),r=!0;break;case 1:s=!0,r=gT(i,"expand.panel",!0);break;default:s=!0,r=!0}i.type="rexScrollablePanel",i.child={gameObject:o,expandWidth:s,expandHeight:r,align:gT(i,"align.panel","center")};var h=gT(i,"space",void 0);h&&(h.child=gT(h,"panel",0)),super(e,i),this.addChildrenMap("panel",o.child),this.addChildrenMap("panelLayer",o.maskLayer),this.addChildrenMap("mask",o.maskGameObject),this.addChildrenMap("scrollableBlock",o)}setChildrenInteractive(e){return void 0===e&&(e={}),e.hasOwnProperty("eventEmitter")||(e.eventEmitter=this),e.hasOwnProperty("targets")||(e.targets=[this.childrenMap.panel]),setchildreninteractive_SetChildrenInteractive(this.childrenMap.child,e),this}};Object.assign(ScrollablePanel_ScrollablePanel.prototype,{scrollToChild:function(e,i){if(!this.hasChild(e))return this;switch(this.scrollMode){case 0:AlignChild.call(this,e,"y",i);break;case 1:AlignChild.call(this,e,"x",i);break;default:AlignChild.call(this,e,"y",i),AlignChild.call(this,e,"x",i)}return this}}),ObjectFactory.register("scrollablePanel",function(e){var i=new ScrollablePanel_ScrollablePanel(this.scene,e);return this.scene.add.existing(i),i}),(0,k.Z)(window,"RexPlugins.UI.ScrollablePanel",ScrollablePanel_ScrollablePanel);var gO={popUp:function(e,i){e.popUp(i)},scaleDown:function(e,i){e.scaleDown(i)},fadeIn:function(e,i){e.fadeIn(i)},fadeOut:function(e,i){e.fadeOut(i)}},gM={popUp:0,fadeIn:1,scaleDown:0,fadeOut:1};let gE=Phaser.Utils.Objects.GetValue;let Toast_Toast=class Toast_Toast extends dd{constructor(e,i){void 0===i&&(i={text:createDefaultTextObject(e)}),super(e,i),this.type="rexToast",this.setTransitInTime(gE(i,"duration.in",200)),this.setDisplayTime(gE(i,"duration.hold",1200)),this.setTransitOutTime(gE(i,"duration.out",200)),this.setTransitInCallback(gE(i,"transitIn",gM.popUp)),this.setTransitOutCallback(gE(i,"transitOut",gM.scaleDown)),this.player=new c3(this,{dtMode:1}),this.messages=[],this.scaleX0=void 0,this.scaleY0=void 0,this.setVisible(!1)}destroy(e){this.scene&&!this.ignoreDestroy&&(this.player.destroy(),this.player=void 0,this.messages=void 0,super.destroy(e))}setScale(e,i){return void 0===i&&(i=e),this.scaleX0=e,this.scaleY0=i,super.setScale(e,i),this}};Object.assign(Toast_Toast.prototype,{setDisplayTime(e){return this.displayTime=e,this},setTransitOutTime(e){return this.transitOutTime=e,this},setTransitInTime(e){return this.transitInTime=e,this},setTransitInCallback(e){switch("string"==typeof e&&(e=gM[e]),e){case gM.popUp:e=gO.popUp;break;case gM.fadeIn:e=gO.fadeIn}return e||(e=object_NOOP),this.transitInCallback=e,this},setTransitOutCallback(e){switch("string"==typeof e&&(e=gM[e]),e){case gM.scaleDown:e=gO.scaleDown;break;case gM.fadeOut:e=gO.fadeOut}return e||(e=object_NOOP),this.transitOutCallback=e,this}},{showMessage(e){if(void 0===this.scaleX0&&(this.scaleX0=this.scaleX),void 0===this.scaleY0&&(this.scaleY0=this.scaleY),void 0===e){if(0===this.messages.length)return this;e=this.messages.shift()}if(this.player.isPlaying)return this.messages.push(e),this;this.setScale(this.scaleX0,this.scaleY0).setVisible(!0),"string"==typeof e?this.setText(e):e(this),this.layout();var i=[[0,[this.transitInCallback,this,this.transitInTime]],[0,[this.emit,"transitin",this,this.transitInTime]],[this.transitInTime,[object_NOOP]],[this.displayTime,[this.transitOutCallback,this,this.transitOutTime]],[0,[this.emit,"transitout",this,this.transitOutTime]],[this.transitOutTime,[this.setVisible,!1]],[30,[object_NOOP]]];return this.player.load(i,this).once("complete",function(){this.showMessage()},this).start(),this},removeAllMessages(){return this.messages.length=0,this}}),ObjectFactory.register("toast",function(e){var i=new Toast_Toast(this.scene,e);return this.scene.add.existing(i),i}),(0,k.Z)(window,"RexPlugins.UI.Toast",Toast_Toast);var methods_CreateSwatch=function(e,i){if(!1===i)return null;if(system_IsGameObject(i))return i;var s=new tC(e,i);return e.add.existing(s),s},build_CreateInputText=function(e,i,s){void 0===s&&(s=!0),s?i=i?DeepClone(i):{}:i||(i={});var r=new CanvasInput_CanvasInput(e,i);return e.add.existing(r),r};let gR=["AliceBlue","AntiqueWhite","Aqua","Aquamarine","Azure","Beige","Bisque","Black","BlanchedAlmond","Blue","BlueViolet","Brown","BurlyWood","CadetBlue","Chartreuse","Chocolate","Coral","CornflowerBlue","Cornsilk","Crimson","Cyan","DarkBlue","DarkCyan","DarkGoldenRod","DarkGray","DarkGrey","DarkGreen","DarkKhaki","DarkMagenta","DarkOliveGreen","DarkOrange","DarkOrchid","DarkRed","DarkSalmon","DarkSeaGreen","DarkSlateBlue","DarkSlateGray","DarkSlateGrey","DarkTurquoise","DarkViolet","DeepPink","DeepSkyBlue","DimGray","DimGrey","DodgerBlue","FireBrick","FloralWhite","ForestGreen","Fuchsia","Gainsboro","GhostWhite","Gold","GoldenRod","Gray","Grey","Green","GreenYellow","HoneyDew","HotPink","IndianRed","Indigo","Ivory","Khaki","Lavender","LavenderBlush","LawnGreen","LemonChiffon","LightBlue","LightCoral","LightCyan","LightGoldenRodYellow","LightGray","LightGrey","LightGreen","LightPink","LightSalmon","LightSeaGreen","LightSkyBlue","LightSlateGray","LightSlateGrey","LightSteelBlue","LightYellow","Lime","LimeGreen","Linen","Magenta","Maroon","MediumAquaMarine","MediumBlue","MediumOrchid","MediumPurple","MediumSeaGreen","MediumSlateBlue","MediumSpringGreen","MediumTurquoise","MediumVioletRed","MidnightBlue","MintCream","MistyRose","Moccasin","NavajoWhite","Navy","OldLace","Olive","OliveDrab","Orange","OrangeRed","Orchid","PaleGoldenRod","PaleGreen","PaleTurquoise","PaleVioletRed","PapayaWhip","PeachPuff","Peru","Pink","Plum","PowderBlue","Purple","RebeccaPurple","Red","RosyBrown","RoyalBlue","SaddleBrown","Salmon","SandyBrown","SeaGreen","SeaShell","Sienna","Silver","SkyBlue","SlateBlue","SlateGray","SlateGrey","Snow","SpringGreen","SteelBlue","Tan","Teal","Thistle","Tomato","Turquoise","Violet","Wheat","White","WhiteSmoke","Yellow","YellowGreen"],gL=[15792383,16444375,65535,8388564,15794175,16119260,16770244,0,16772045,255,9055202,10824234,14596231,6266528,8388352,13789470,16744272,6591981,16775388,14423100,65535,139,35723,12092939,11119017,11119017,25600,12433259,9109643,5597999,16747520,10040012,9109504,15308410,9419919,4734347,3100495,3100495,52945,9699539,16716947,49151,6908265,6908265,2003199,11674146,16775920,2263842,16711935,14474460,16316671,16766720,14329120,8421504,8421504,32768,11403055,15794160,16738740,13458524,4915330,16777200,15787660,15132410,16773365,8190976,16775885,11393254,15761536,14745599,16448210,13882323,13882323,9498256,16758465,16752762,2142890,8900346,7833753,7833753,11584734,16777184,65280,3329330,16445670,16711935,8388608,6737322,205,12211667,9662683,3978097,8087790,64154,4772300,13047173,1644912,16121850,16770273,16770229,16768685,128,16643558,8421376,7048739,16753920,16729344,14315734,15657130,10025880,11529966,14381203,16773077,16767673,13468991,16761035,14524637,11591910,8388736,6697881,16711680,12357519,4286945,9127187,16416882,16032864,3050327,16774638,10506797,12632256,8900331,6970061,7372944,7372944,16775930,65407,4620980,13808780,32896,14204888,16737095,4251856,15631086,16113331,16777215,16119285,16776960,10145074];for(var gB,gI,gG,gD,gj,gA,gF,gz,gW,gV,gY,gX={},gH=0,gU=gR.length;gH<gU;gH++)gX[gR[gH].toLowerCase()]=gL[gH];var color_ColorStringToInteger=function(e){if("string"!=typeof e)return e;if(e.startsWith("#"))e=parseInt(e.substring(1),16);else if(e.startsWith("0x"))e=parseInt(e.substring(2),16);else{var i;i=(i=e).toLowerCase(),e=gX.hasOwnProperty(i)?gX[i]:null}return e};let gN=Phaser.Utils.String.Pad;var color_GetHexColorString=function(e,i){void 0===i&&(i="0x");var s=e.toString(16).toUpperCase();return i+(s=gN(s,6,0,1))},methods_SetSwatchColor=function(e,i){e&&(e.setTint?e.setTint(i):e.setFillStyle&&e.setFillStyle(i))};let g$=Phaser.Utils.Objects.GetValue,gZ=Phaser.Utils.Objects.IsPlainObject,gK=Phaser.Math.Clamp;var gJ=class extends dr{constructor(e,i){void 0===i&&(i={}),i.orientation=0,super(e,i),this.type="rexColorInputLite";var s=g$(i,"background",void 0),r=g$(i,"swatch");gZ(r)&&(o=g$(r,"size"));var n=methods_CreateSwatch(e,g$(i,"swatch")),a=g$(i,"inputText",{});if(a&&(h=build_CreateInputText(e,a)),s&&this.addBackground(s),n){void 0!==(o=g$(i,"swatchSize",o))?(size_ResizeGameObject(n,o,o),l=!1):l=g$(i,"squareExpandSwatch",!0);var o,h,l,c=l?1:0;this.add(n,{proportion:0,expand:!1,fitRatio:c})}if(h){var g=void 0===g$(a,"width")?1:0,m=void 0===g$(a,"height");this.add(h,{proportion:g,expand:m})}this.addChildrenMap("background",s),this.addChildrenMap("swatch",n),this.addChildrenMap("inputText",h),h&&h.on("close",function(){this.setValue(h.value)},this);var x=g$(i,"valuechangeCallback",null);if(null!==x){var S=g$(i,"valuechangeCallbackScope",void 0);this.on("valuechange",x,S)}this.setValue(g$(i,"value",0))}get value(){return this._value}set value(e){if("string"==typeof e){if(null==(e=color_ColorStringToInteger(e))){var i=this.childrenMap.inputText;i&&i.setText(color_GetHexColorString(this._value));return}}else e=gK(Math.floor(e),0,16777215);if(this._value!==e){this._value=e;var s=this.childrenMap.swatch;s&&methods_SetSwatchColor(s,e);var i=this.childrenMap.inputText;i&&i.setText(color_GetHexColorString(e)),this.emit("valuechange",this._value)}}setValue(e){return this.value=e,this}get color(){return this._value}set color(e){this.value=e}setColor(e){return this.color=e,this}};let gq={down:0,up:1},gQ=Phaser.Display.Color,g0=Phaser.Math.Percent;var DrawHPalette=function(e,i,s){void 0===s&&(s=!1);var r=e.width,n=e.height,a=new gQ;if(s)for(var o=0;o<n;o++){var h=g0(o,0,n);a.setFromHSV(h,1,1),i.fillStyle=a.rgba,i.fillRect(0,o,r,1)}else for(var l=0;l<r;l++){var h=g0(l,0,r);a.setFromHSV(h,1,1),i.fillStyle=a.rgba,i.fillRect(l,0,1,n)}},DrawSVPalette=function(e,i,s){for(var r=e.width,n=e.height,a=i.getImageData(0,0,r,n),o=a.data,h=new gQ,l=0;l<n;l++)for(var c=0;c<r;c++){var g=g0(c,0,r),m=1-g0(l,0,n);h.setFromHSV(s,g,m);var x=(l*r+c)*4;o[x]=h.red,o[x+1]=h.green,o[x+2]=h.blue,o[x+3]=255}i.putImageData(a,0,0)};let g1=Phaser.Display.Color,g2=Phaser.Math.Percent,g5=Phaser.Display.Color.ColorToRGBA,g3=Phaser.Display.Color.HSVToRGB;var g7=void 0,g6=class extends nm{constructor(e,i,s,r,n,a){void 0===i&&(i=0),void 0===s&&(s=0),void 0===r&&(r=2),void 0===n&&(n=2),super(e,i,s,r,n),this.type="rexColorPicker.HPaletteCanvas",this.colorObject=new g1,this.setOrientation(a),this.setSize(r,n)}setOrientation(e){return this.orientation=utils_GetOrientationMode(e),this}updateTexture(){return DrawHPalette(this.canvas,this.context,this.orientation),super.updateTexture(),this}get color(){return this.colorObject.color}get hue(){return this._hue}set hue(e){this._hue=e}getHue(e,i){return void 0===e||(0===this.orientation?this.hue=g2(e,0,this.width):this.hue=g2(i,0,this.height)),this.hue}getColor(e,i){if(void 0===e)return this.color;var s=this.getHue(e,i);return this.colorObject.setFromRGB(g3(s,1,1)),this.colorObject.color}setColor(e){return this.color,this}colorToLocalPosition(e,i){return void 0===i?i={}:!0===i&&(void 0===g7&&(g7={}),i=g7),this.colorObject.setFromRGB(g5(e)),0===this.orientation?(i.x=this.width*this.colorObject.h,i.y=this.height/2):(i.x=this.width/2,i.y=this.height*this.colorObject.h),i}},g4=Phaser.Math.RotateAround,LocalToWorld=function(e,i,s,r){return void 0===r?r={}:!0===r&&(void 0===gB&&(gB={}),r=gB),i-=e.width*e.originX,s-=e.height*e.originY,g4({x:i*e.scaleX,y:s*e.scaleY},0,0,-e.rotation),r.x=e.x+i,r.y=e.y+s,r},g8=class extends h${constructor(e,i){void 0===i&&(i={}),super(e,i);var s=null!=i.width?1:0,r=new g6(e).setOrientation(s);e.add.existing(r),this.type="rexColorPicker.HPalette",r.setInteractive().on("pointerdown",this.onPaletteCanvasPointerDown,this).on("pointermove",this.onPaletteCanvasPointerDown,this);var n=new tC(e,{strokeColor:16777215,strokeWidth:2});e.add.existing(n),this.add(r,{key:"paletteCanvas",expand:!0}).add(n,{key:"marker",expand:!1})}resize(e,i){if(this.width===e&&this.height===i)return this;super.resize(e,i);var s=Math.min(e,i);return this.childrenMap.marker.setSize(s,s),this}onPaletteCanvasPointerDown(e,i,s,r){if(e.isDown){var n=this.childrenMap.paletteCanvas.getColor(i,s);this.setMarkerPosition(n),this.emit("input",n)}}get color(){return this.childrenMap.paletteCanvas.color}setColor(e){return this.color===e||(this.childrenMap.paletteCanvas.setColor(e),this.setMarkerPosition(e)),this}setMarkerPosition(e){var i=this.childrenMap.paletteCanvas,s=this.childrenMap.marker,r=i.colorToLocalPosition(e,!0);return LocalToWorld(i,r.x,r.y,s),this.resetChildPositionState(s),this}getHue(e,i){return this.childrenMap.paletteCanvas.getHue(e,i)}};let g9=Phaser.Display.Color,vt=Phaser.Math.Percent,ve=Phaser.Display.Color.ColorToRGBA,vi=Phaser.Display.Color.HSVToRGB;var vs=void 0,vr=class extends nm{constructor(e,i,s,r,n,a){void 0===i&&(i=0),void 0===s&&(s=0),void 0===r&&(r=2),void 0===n&&(n=2),super(e,i,s,r,n),this.type="rexColorPicker.SVPaletteCanvas",void 0===a&&(a=1),this.colorObject=new g9,this.setHue(a),this.setSize(r,n)}get color(){return this.colorObject.color}get hue(){return this._hue}set hue(e){this._hue!==e&&(this._hue=e,this.colorObject.h=e,this.dirty=!0)}setHue(e){return this.hue=e,this}updateTexture(){return DrawSVPalette(this.canvas,this.context,this.hue),super.updateTexture(),this}getColor(e,i){if(void 0===e)return this.colorObject.color;var s=vt(e,0,this.width),r=1-vt(i,0,this.height);return this.colorObject.setFromRGB(vi(this.hue,s,r)),this.colorObject.color}setColor(e){return this.color===e||(this.colorObject.setFromRGB(ve(e)),this.setHue(this.colorObject.h)),this}colorToLocalPosition(e,i){return void 0===i?i={}:!0===i&&(void 0===vs&&(vs={}),i=vs),this.colorObject.setFromRGB(ve(e)),i.x=this.width*this.colorObject.s,i.y=this.height*(1-this.colorObject.v),i}},vn=class extends h${constructor(e,i){super(e,i);var s=new vr(e);e.add.existing(s),this.type="rexColorPicker.SVPalette",s.setInteractive().on("pointerdown",this.onPaletteCanvasPointerDown,this).on("pointermove",this.onPaletteCanvasPointerDown,this);var r=new tC(e,{radius:5,strokeColor:16777215,strokeWidth:2});e.add.existing(r),this.add(s,{key:"paletteCanvas",expand:!0}).add(r,{key:"marker",expand:!1})}onPaletteCanvasPointerDown(e,i,s,r){if(e.isDown){var n=this.childrenMap.paletteCanvas.getColor(i,s);this.setMarkerPosition(n),this.emit("input",n)}}get color(){return this.childrenMap.paletteCanvas.color}setHue(e){return this.childrenMap.paletteCanvas.setHue(e),this}setColor(e){return this.color===e||(this.childrenMap.paletteCanvas.setColor(e),this.setMarkerPosition(e)),this}setMarkerPosition(e){var i=this.childrenMap.paletteCanvas,s=this.childrenMap.marker,r=i.colorToLocalPosition(e,!0);return LocalToWorld(i,r.x,r.y,s),this.resetChildPositionState(s),this}};let va=Phaser.Utils.Objects.GetValue;var vo={bottom:0,left:1,top:2,right:3},vh=class extends dr{constructor(e,i){super(e,i),this.type="rexColorPicker",this.freezePalettes=!1;var s,r,n,a,o=va(i,"hPalette.position",0);"string"==typeof o&&(o=vo[o]);var h=0===o||2===o?1:0;this.setOrientation(h);var l=va(i,"background",void 0);if(0===this.orientation){var s=va(i,"hPalette.width",void 0);void 0===s&&(s=va(i,"hPalette.size",10))}else void 0===(r=va(i,"hPalette.height",void 0))&&(r=va(i,"hPalette.size",10));var c=new g8(e,{width:s,height:r});e.add.existing(c);var g=va(i,"svPalette.width",void 0),m=va(i,"svPalette.height",void 0),x=new vn(e,{width:g,height:m});e.add.existing(x),l&&this.addBackground(l);var S={proportion:0,expand:!0};0===this.orientation?(n=void 0===g?1:0,a=void 0===m):(n=void 0===m?1:0,a=void 0===g);var _={proportion:n,expand:a};0===o||3===o?this.add(x,_).add(c,S):this.add(c,S).add(x,_),c.on("input",function(){x.setHue(c.getHue()),this.setValue(x.color,!0)},this),x.on("input",function(){this.setValue(x.color,!0)},this),this.addChildrenMap("background",l),this.addChildrenMap("hPalette",c),this.addChildrenMap("svPalette",x);var k=va(i,"valuechangeCallback",null);if(null!==k){var E=va(i,"valuechangeCallbackScope",void 0);this.on("valuechange",k,E)}this.setValue(va(i,"value",16777215))}get value(){return this._value}set value(e){if(this._value!==e){var i=this._value;this._value=e,this.freezePalettes||this.updatePalettes(),this.emit("valuechange",e,i,this)}}setValue(e,i){return this.freezePalettes=!!i,this.value=e,this.freezePalettes=!1,this}get color(){return this._value}set color(e){this.value=e}setColor(e){return this.color=e,this}updatePalettes(){return this.childrenMap.hPalette.setColor(this.color),this.childrenMap.svPalette.setColor(this.color),this}postLayout(e,i,s){return this.childrenMap.hPalette.setMarkerPosition(this.value),this.childrenMap.svPalette.setMarkerPosition(this.value),this}};let vl=Phaser.Utils.Objects.GetValue,vd=Phaser.Display.Color,vc=Phaser.Display.Color.ColorToRGBA,vu=Phaser.Display.Color.HSVToRGB,vp=Phaser.Math.Clamp;var vg=class extends dr{constructor(e,i){void 0===i&&(i={}),i.orientation=0,super(e,i),this.type="rexColorComponents",this.colorObject=new vd;var s=vl(i,"background",void 0),r=vl(i,"formatLabel",void 0);system_IsGameObject(r)||(r=build_CreateLabel(e,r).resetDisplayContent());var n=[];if(i.inputText0&&i.inputText1&&i.inputText2)n.push(i.inputText0),n.push(i.inputText1),n.push(i.inputText2);else for(var a=vl(i,"inputText"),o=0;o<3;o++){var h=build_CreateInputText(e,a).setMaxLength(3).setNumberInput();n.push(h)}s&&this.addBackground(s);var l=vl(i,"proportion.formatLabel",0),c=vl(i,"expand.formatLabel",!!r.isRexContainerLite);this.add(r,{proportion:l,expand:c});for(var l=void 0===vl(a,"width")?1:0,c=void 0===vl(a,"height"),o=0,g=n.length;o<g;o++)this.add(n[o],{proportion:l,expand:c});this.addChildrenMap("background",s),this.addChildrenMap("formatLabel",r),this.addChildrenMap("components",n),this.onClick(r,this.toggleColorFormat,this);for(var o=0,g=n.length;o<g;o++)n[o].on("close",function(){this.updateColorObject(),this.setValue(this.colorObject.color)},this);var m=vl(i,"valuechangeCallback",null);if(null!==m){var x=vl(i,"valuechangeCallbackScope",void 0);this.on("valuechange",m,x)}r.setText("RGB"),this.setValue(vl(i,"value",16777215))}get value(){return this._value}set value(e){e=vp(Math.floor(e),0,16777215),this._value!==e&&(this._value=e,this.colorObject.setFromRGB(vc(e)),this.updateComponents(),this.emit("valuechange",this._value))}setValue(e){return this.value=e,this}get color(){return this._value}set color(e){this.value=e}setColor(e){return this.color=e,this}get colorFormat(){return this.childrenMap.formatLabel.text}set colorFormat(e){this.colorFormat!==e&&(this.childrenMap.formatLabel.setText(e),this.updateComponents())}setColorFormat(e){return this.colorFormat=e,this}toggleColorFormat(){return this.colorFormat="RGB"===this.colorFormat?"HSV":"RGB",this}updateComponents(){var e,i,s,r=this.childrenMap.components;return"RGB"===this.colorFormat?(e=this.colorObject.red,i=this.colorObject.green,s=this.colorObject.blue):(e=Math.floor(360*this.colorObject.h),i=Math.floor(100*this.colorObject.s),s=Math.floor(100*this.colorObject.v)),r[0].setValue(e),r[1].setValue(i),r[2].setValue(s),this}updateColorObject(){var e=this.childrenMap.components;if("RGB"===this.colorFormat){var i=vp(e[0].value,0,255),s=vp(e[1].value,0,255),r=vp(e[2].value,0,255);this.colorObject.setTo(i,s,r)}else{var n=vp(e[0].value,0,359)/360,a=vp(e[1].value,0,100)/100,o=vp(e[2].value,0,100)/100;this.colorObject.setFromRGB(vu(n,a,o))}return this}};let vv=Phaser.Utils.Objects.GetValue;var vf=class extends dr{constructor(e,i){void 0===i&&(i={}),i.orientation=1,super(e,i),this.type="rexColorInput.ColorPickerPanel";var s,r=vv(i,"background",void 0),n=new vh(e,{hPalette:i.hPalette||{},svPalette:i.svPalette||{},space:{item:vv(i,"space.hPalette",8)}});e.add.existing(n),i.colorComponents&&(s=new vg(e,i.colorComponents),e.add.existing(s)),r&&(this.addBackground(r),new ob(r,{stopAllLevels:!1})),this.add(n,{proportion:1,expand:!0}),s&&this.add(s,{proportion:0,expand:!0}),this.addChildrenMap("background",r),this.addChildrenMap("colorPicker",n),this.addChildrenMap("colorComponents",s),n.on("valuechange",function(e){this.setValue(e)},this),s&&s.on("valuechange",function(e){this.setValue(e)},this),this.setValue(vv(i,"value",16777215))}get value(){return this._value}set value(e){if(this._value!==e){this._value=e,this.childrenMap.colorPicker.setValue(e);var i=this.childrenMap.colorComponents;i&&i.setValue(e),this.emit("valuechange",e)}}setValue(e){return this.value=e,this}};Phaser.Utils.Objects.GetValue;var methods_CreateColorPicker=function(e){var i,s,e=this.scene,r=this.colorPickerCreateBackgroundCallback;r&&(i=r.call(this,e),e.add.existing(i));var n=this.colorPickerWidth;void 0===n&&(n=this.width);var a=this.colorPickerHeight;void 0===a&&(a=n),s=this.colorComponentsHeight>0&&{height:this.colorComponentsHeight,formatLabel:this.colorComponentsFormatLabelConfig,inputText:this.colorComponentsInputTextConfig,space:this.colorComponentsSpace};var o=new vf(e,{width:n,height:a,background:i,space:this.colorPickerSpace,hPalette:{position:this.colorPickerHPalettePosition},colorComponents:s,value:this.value});return e.add.existing(o),o},vm={openColorPicker:function(){if(!this.colorPicker){var e=methods_CreateColorPicker.call(this).layout(),i=new u6(e,{duration:{in:this.colorPickerEaseInDuration,out:this.colorPickerEaseOutDuration},transitIn:this.colorPickerTransitInCallback,transitOut:this.colorPickerTransitOutCallback,expandDirection:this.colorPickerExpandDirection,alignTargetX:this,alignTargetY:this,bounds:this.colorPickerBounds,touchOutsideClose:!0}).on("open",function(){e.on("valuechange",function(e){this.setValue(e)},this)},this).on("close",function(){this.colorPicker=void 0,this.dropDownBehavior=void 0},this);return this.colorPicker=e,this.dropDownBehavior=i,this.pin(e),this}}};Object.assign(vm,{setCreateColorPickerBackgroundCallback(e){return this.colorPickerCreateBackgroundCallback=e,this},setColorPickerHPalettePosition(e){return this.colorPickerHPalettePosition=e,this},setColorPickerExpandDirection(e){return"string"==typeof e&&(e=gq[e]),this.colorPickerExpandDirection=e,this},setColorPickerEaseInDuration(e){return void 0===e&&(e=0),this.colorPickerEaseInDuration=e,this},setColorPickerEaseOutDuration(e){return void 0===e&&(e=0),this.colorPickerEaseOutDuration=e,this},setColorPickerTransitInCallback(e){return this.colorPickerTransitInCallback=e,this},setColorPickerTransitOutCallback(e){return this.colorPickerTransitOutCallback=e,this},setColorPickerBounds(e){return this.colorPickerBounds=e,this},setColorPickerWidth(e){return this.colorPickerWidth=e,this},setColorPickerHeight(e){return this.colorPickerHeight=e,this},setColorPickerSize(e,i){return this.setColorPickerWidth(e).setColorPickerHeight(i),this},setColorPickerSpace(e){return void 0===e&&(e={}),this.colorPickerSpace=e,this},setColorComponentsHeight(e){return this.colorComponentsHeight=e,this},setColorComponentsFormatLabelConfig(e){return this.colorComponentsFormatLabelConfig=e,this},setColorComponentsInputTextConfig(e){return this.colorComponentsInputTextConfig=e,this},setColorComponentsSpace(e){return void 0===e&&(e={}),this.colorComponentsSpace=e,this}});let vb=Phaser.Utils.Objects.GetValue;let ColorInput_ColorInput=class ColorInput_ColorInput extends gJ{constructor(e,i){void 0===i&&(i={}),super(e,i),this.type="rexColorInput",i.hasOwnProperty("colorPicker")||(i.colorPicker={background:{color:0}});var s=i.colorPicker,r=!1!==s&&null!==s;if(r){this.setColorPickerSize(vb(s,"width",160),vb(s,"height",170));var n,a=vb(s,"background");n=a?function(e){return build_CreateBackground(e,a)}:vb(s,"createBackgroundCallback"),this.setCreateColorPickerBackgroundCallback(n),this.setColorPickerHPalettePosition(vb(s,"hPalettePosition",0)),this.setColorPickerExpandDirection(vb(s,"expandDirection")),this.setColorPickerEaseInDuration(vb(s,"easeIn",200)),this.setColorPickerEaseOutDuration(vb(s,"easeOut",200)),this.setColorPickerTransitInCallback(vb(s,"transitIn")),this.setColorPickerTransitOutCallback(vb(s,"transitOut")),this.setColorPickerBounds(vb(s,"bounds"));var o=vb(s,"space");void 0===o&&(o={left:10,right:10,top:10,bottom:10,item:8}),this.setColorPickerSpace(o)}var h=i.colorComponents,l=!1!==h&&null!==h;if(r&&l){this.setColorComponentsHeight(vb(h,"height",30)),this.setColorComponentsFormatLabelConfig(vb(h,"formatLabel"));var c=vb(h,"inputText");c||(c=vb(i,"inputText")),this.setColorComponentsInputTextConfig(c);var g=vb(h,"space");void 0===g&&(g={item:8}),this.setColorComponentsSpace(g)}var m=this.childrenMap.swatch;m&&r&&this.onClick(m,this.openColorPicker,this)}};Object.assign(ColorInput_ColorInput.prototype,vm),ObjectFactory.register("colorInput",function(e){var i=new ColorInput_ColorInput(this.scene,e);return this.scene.add.existing(i),i}),(0,k.Z)(window,"RexPlugins.UI.ColorInput",ColorInput_ColorInput),ObjectFactory.register("colorInputLite",function(e){var i=new gJ(this.scene,e);return this.scene.add.existing(i),i}),(0,k.Z)(window,"RexPlugins.UI.ColorInputBase",gJ),ObjectFactory.register("colorPicker",function(e){var i=new vh(this.scene,e);return this.scene.add.existing(i),i}),(0,k.Z)(window,"RexPlugins.UI.ColorPicker",vh),ObjectFactory.register("colorComponents",function(e){var i=new vg(this.scene,e);return this.scene.add.existing(i),i}),(0,k.Z)(window,"RexPlugins.UI.ColorComponents",vg);var input_RequestDrag=function(e){for(var i,s=e.scene.input,r=s.manager,n=r.pointersTotal,a=r.pointers,o=0;o<n;o++)if((i=a[o]).primaryDown&&0===s.getDragState(i)&&input_IsPointerInHitArea(e,i))return s.setDragState(i,1),s._drag[i.id]=[e],0===s.dragDistanceThreshold||0===s.dragTimeThreshold?(s.setDragState(i,3),s.processDragStartList(i)):s.setDragState(i,2),!0;return!1};let vy=Phaser.Utils.Objects.GetValue,vC=Phaser.Math.Distance.Between,vx=Phaser.Math.RotateAroundDistance,vS={both:0,"h&v":0,"x&y":0,horizontal:1,h:1,x:1,vertical:2,v:2,y:2};var v_=class extends i0{constructor(e,i){super(e,{eventEmitter:!1}),this._enable=void 0,e.setInteractive(vy(i,"inputConfig",void 0)),this.resetFromJSON(i),this.boot()}resetFromJSON(e){return this.pointer=void 0,this.setEnable(vy(e,"enable",!0)),this.setAxisMode(vy(e,"axis",0)),this.setAxisRotation(vy(e,"rotation",0)),this}toJSON(){return{enable:this.enable,axis:this.axisMode,rotation:this.axisRotation}}boot(){var e=this.parent;e.on("dragstart",this.onDragStart,this),e.on("drag",this.onDrag,this),e.on("dragend",this.onDragEnd,this)}shutdown(e){this.isShutdown||(this.pointer=void 0,super.shutdown(e))}get enable(){return this._enable}set enable(e){if(this._enable!==e)return e||this.dragend(),this._enable=e,this.scene.input.setDraggable(this.parent,e),this}setEnable(e){return void 0===e&&(e=!0),this.enable=e,this}toggleEnable(){return this.setEnable(!this.enable),this}setAxisMode(e){return"string"==typeof e&&(e=vS[e]),this.axisMode=e,this}setAxisRotation(e){return this.axisRotation=e,this}drag(){return input_RequestDrag(this.parent),this}dragend(){if(this.isDragging)return this.scene.input.setDragState(this.pointer,5),this}onDragStart(e,i,s){this.isDragging||(this.pointer=e)}onDrag(e,i,s){if(this.pointer===e){var r=this.parent;if(0===this.axisMode)r.x=i,r.y=s;else if(0===this.axisRotation)1===this.axisMode?r.x=i:2===this.axisMode&&(r.y=s);else{var n,a={x:i,y:s};n=vC(a.x,a.y,r.x,r.y),a=vx(a,r.x,r.y,-this.axisRotation,n),1===this.axisMode?a.y=r.y:2===this.axisMode&&(a.x=r.x),n=vC(a.x,a.y,r.x,r.y),a=vx(a,r.x,r.y,this.axisRotation,n),r.x=a.x,r.y=a.y}}}onDragEnd(e,i,s,r){this.pointer===e&&(this.pointer=void 0)}get isDragging(){return void 0!==this.pointer}},methods_OnDragSplitter=function(){var e=this.sizerChildren[0],i=this.sizerChildren[1],s=this.sizerChildren[2],r=this.getSizerConfig(e).padding,n=this.getSizerConfig(i).padding,a=this.getSizerConfig(s).padding;if(0===this.orientation){var o=this.innerLeft+r.left,h=this.innerRight-a.right,l=GetDisplayWidth(i),c=i.x+l*(0-i.originX),g=i.x+l*(1-i.originX),m=c-n.left-this.space.item-r.right,x=g+n.right+this.space.item+a.left,S=m-o,_=h-x,k=S+_;this.minFirstChildSize>0&&S<this.minFirstChildSize&&(_=k-(S=this.minFirstChildSize)),this.minSecondChildSize>0&&_<this.minSecondChildSize&&(S=k-(_=this.minSecondChildSize)),this.setSplitRatio(S/k)}else{var E=this.innerTop+r.top,R=this.innerBottom-a.bottom,j=GetDisplayHeight(i),Y=i.y+j*(0-i.originY),X=i.y+j*(1-i.originY),$=Y-n.top-this.space.item-r.bottom,Z=X+n.bottom+this.space.item+a.top,q=$-E,tt=R-Z,te=q+tt;this.minFirstChildSize>0&&q<this.minFirstChildSize&&(tt=te-(q=this.minFirstChildSize)),this.minSecondChildSize>0&&tt<this.minSecondChildSize&&(q=te-(tt=this.minSecondChildSize)),this.setSplitRatio(q/te)}var ti=this.minWidth,ts=this.minHeight;this.setMinSize(this.width,this.height).layout().setMinSize(ti,ts)};let vw=Phaser.Utils.Objects.GetValue,vP=Phaser.Math.Clamp;var vk=class extends dr{constructor(e,i){i.hasOwnProperty("orientation")||(i.orientation=i.hasOwnProperty("leftPanel")?0:1),super(e,i),this.type="rexSplit";var s,r,n,a,o=vw(i,"background",void 0);0===this.orientation?(s="leftPanel",r="rightPanel",n="minLeftPanelWidth",a="minRightPanelWidth"):(s="topPanel",r="bottomPanel",n="minTopPanelHeight",a="minBottomPanelHeight");var h=vw(i,s,void 0),l=vw(i,"splitter",void 0),c=vw(i,r,void 0);o&&this.addBackground(o);var g=vw(i,"space",void 0);this.add(h,{proportion:1,expand:!0,padding:{left:vw(g,`${s}Left`,0),right:vw(g,`${s}Right`,0),top:vw(g,`${s}Top`,0),bottom:vw(g,`${s}Bottom`,0)}}),this.add(l,{proportion:0,expand:!0,padding:{left:vw(g,"splitterLeft",0),right:vw(g,"splitterRight",0),top:vw(g,"splitterTop",0),bottom:vw(g,"splitterBottom",0)}}),this.add(c,{proportion:1,expand:!0,padding:{left:vw(g,`${r}Left`,0),right:vw(g,`${r}Right`,0),top:vw(g,`${r}Top`,0),bottom:vw(g,`${r}Bottom`,0)}}),this.addChildrenMap("background",o),this.addChildrenMap(s,h),this.addChildrenMap("splitter",l),this.addChildrenMap(r,c),this.minFirstChildSize=vw(i,n,0),this.minSecondChildSize=vw(i,a,0),this.setSplitRatio(vw(i,"splitRatio",.5)),this.splitterDragBehavior=new v_(l,{axis:0===this.orientation?1:2}),l.on("dragstart",function(){this.emit("splitter.dragstart",l,this.splitRatio)},this).on("dragend",function(){this.emit("splitter.dragend",l,this.splitRatio)},this).on("drag",function(){methods_OnDragSplitter.call(this),this.emit("splitter.drag",l,this.splitRatio)},this).on("pointerover",function(){this.emit("splitter.over",l,this.splitRatio)},this).on("pointerout",function(){this.emit("splitter.out",l,this.splitRatio)},this)}get splitterEnable(){return this.splitterDragBehavior.enable}set splitterEnable(e){this.splitterDragBehavior.setEnable(e)}setSplitterEnable(e){return void 0===e&&(e=!0),this.splitterEnable=e,this}set minLeftPanelWidth(e){this.minFirstChildSize=e}get minLeftPanelWidth(){return this.minFirstChildSize}set minRightPanelWidth(e){this.minSecondChildSize=e}get minRightPanelWidth(){return this.minSecondChildSize}set minTopPanelHeight(e){this.minFirstChildSize=e}get minTopPanelHeight(){return this.minFirstChildSize}set minBottomPanelHeight(e){this.minSecondChildSize=e}get minBottomPanelHeight(){return this.minSecondChildSize}setMinLeftPanelWidth(e){return this.minLeftPanelWidth=e,this}setMinRightPanelWidth(e){return this.minRightPanelWidth=e,this}setMinTopPanelHeight(e){return this.minTopPanelHeight=e,this}setMinBottomPanelHeight(e){return this.minBottomPanelHeight=e,this}get splitRatio(){return this._splitRatio}set splitRatio(e){e=vP(e,0,1),this._splitRatio!==e&&(this._splitRatio=e,this.getSizerConfig(this.sizerChildren[0]).proportion=e,this.getSizerConfig(this.sizerChildren[2]).proportion=1-e)}setSplitRatio(e){return this.splitRatio=e,this}};ObjectFactory.register("splitPanels",function(e){var i=new vk(this.scene,e);return this.scene.add.existing(i),i}),(0,k.Z)(window,"RexPlugins.UI.SplitPanels",vk);var GetCallback=function(e,i){return function(s,r,n,a){"panel"!==r&&n.moveChild(s,a?0:e,i)}},MovePanelCallbacks_GetCallback=function(e,i){return function(s,r,n,a){"panel"===r&&n.moveChild(s,a?0:e,i)}};let vT={visible:{show:function(){return function(e,i,s,r){"panel"!==i&&s.setChildVisible(e,!0)}},hide:function(){return function(e,i,s,r){"panel"!==i&&s.setChildVisible(e,!1)}}},fade:{show:function(e,i){return void 0===i&&(i=1),function(s,r,n,a){"panel"!==r&&n.fadeChild(s,a?0:e,i)}},hide:function(e,i){return void 0===i&&(i=0),function(s,r,n,a){"panel"!==r&&n.fadeChild(s,a?0:e,i)}}},move:{show:GetCallback,hide:GetCallback},"move-panel":{show:MovePanelCallbacks_GetCallback,hide:MovePanelCallbacks_GetCallback}};var defaultcallbacks_GetDefaultCallbacks=function(e){var i,s,r,n;return[i,...s]="string"==typeof e?[e]:e,vT.hasOwnProperty(i)?(r=vT[i].show.apply(null,s),n=vT[i].hide.apply(null,s)):(r=object_NOOP,n=object_NOOP),{show:r,hide:n}};let vO=af.prototype.setChildVisible;var vM={};Object.assign(vM,{setChildVisible(e,i){var s;if("string"==typeof e){var s=e;e=this.sizerChildren[s]}else s=object_IndexOf(this.sizerChildren,e);return void 0===i&&(i=this.currentChildKey===s),vO.call(this,e,i),this}},{fadeChild(e,i,s){var r;return"string"==typeof e?(r=e,e=this.sizerChildren[r]):r=object_IndexOf(this.sizerChildren,e),void 0===i&&(i=500),void 0===s&&(s=this.currentChildKey===r?1:0),e.fadeIn(i,{start:e.alpha,end:s}),this},fadeChildPromise(e,i,s){return("string"==typeof e&&(e=this.sizerChildren[key]),this.fadeChild(e,i,s),e._fade)?WaitComplete(e._fade):Promise.resolve()}},{moveChild(e,i,s,r){"string"==typeof e?(n=e,e=this.sizerChildren[n]):n=object_IndexOf(this.sizerChildren,e),void 0===i&&(i=500);var n,a,o,h,l,c=this.currentChildKey===n;if(void 0===r)switch(n){case"leftSide":case"rightSide":r=GetDisplayWidth(e);break;case"topSide":case"bottomSide":r=GetDisplayHeight(e);break;default:if(c)switch(this.previousChildKey){case"leftSide":case"rightSide":r=GetDisplayWidth(this.sizerChildren[this.previousChildKey]);break;case"topSide":case"bottomSide":r=GetDisplayHeight(this.sizerChildren[this.previousChildKey]);break;default:r=0}else switch(this.currentChildKey){case"leftSide":case"rightSide":r=GetDisplayWidth(this.sizerChildren[this.currentChildKey]);break;case"topSide":case"bottomSide":r=GetDisplayHeight(this.sizerChildren[this.currentChildKey]);break;default:r=0}}if(c)switch(n){case"panel":switch(this.previousChildKey){case"leftSide":a=!0;break;case"rightSide":o=!0;break;case"topSide":h=!0;break;case"bottomSide":l=!0}break;case"leftSide":o=!0;break;case"rightSide":a=!0;break;case"topSide":l=!0;break;case"bottomSide":h=!0}else switch(n){case"panel":switch(this.currentChildKey){case"leftSide":o=!0;break;case"rightSide":a=!0;break;case"topSide":l=!0;break;case"bottomSide":h=!0}break;case"leftSide":a=!0;break;case"rightSide":o=!0;break;case"topSide":h=!0;break;case"bottomSide":l=!0}return a?e.moveTo(i,`-=${r}`,void 0,s):o?e.moveTo(i,`+=${r}`,void 0,s):h?e.moveTo(i,void 0,`-=${r}`,s):l?e.moveTo(i,void 0,`+=${r}`,s):e.moveTo(0),this},moveChildPromise(e,i,s,r){return("string"==typeof e&&(e=this.sizerChildren[key]),this.moveChild(e,i,s,r),e._easeMove)?WaitComplete(e._easeMove):Promise.resolve()}});let vE=Phaser.Utils.Objects.GetValue;let Sides_Sides=class Sides_Sides extends h${constructor(e,i){super(e,i),this.type="rexSides",this.childrenMap=this.sizerChildren,this.previousChildKey=void 0,this.currentChildKey=void 0;var s=vE(i,"showChildCallback",void 0);if(s){if(object_IsFunction(s)){var r=vE(i,"showChildCallbackScope",void 0);this.on("showchild",s,r);var n=vE(i,"hideChildCallback",void 0),a=vE(i,"hideChildCallbackScope",void 0);this.on("hidechild",n,a)}else{var o=defaultcallbacks_GetDefaultCallbacks(s);this.on("showchild",o.show),this.on("hidechild",o.hide)}}var h=vE(i,"background",void 0),l=vE(i,"panel",void 0),c=vE(i,"leftSide",void 0),g=vE(i,"rightSide",void 0),m=vE(i,"topSide",void 0),x=vE(i,"bottomSide",void 0);if(h&&this.addBackground(h),l&&this.add(l,"panel","center",0,!0),c){var S=vE(i,"expand.left",!0);this.add(c,"leftSide","left-top",0,{height:S})}if(g){var S=vE(i,"expand.right",!0);this.add(g,"rightSide","right-top",0,{height:S})}if(m){var S=vE(i,"expand.top",!0);this.add(m,"topSide","left-top",0,{width:S})}if(x){var S=vE(i,"expand.bottom",!0);this.add(x,"bottomSide","left-bottom",0,{width:S})}}reset(){return this.previousChildKey=void 0,this.currentChildKey="panel",this.showChild("panel",!0),this.hideChild("leftSide",!0),this.hideChild("rightSide",!0),this.hideChild("topSide",!0),this.hideChild("bottomSide",!0),this}};Object.assign(Sides_Sides.prototype,{showChild(e,i){var s=this.sizerChildren[e];return s&&(this.emit("showchild",s,e,this,i),this.resetChildState(s)),this},hideChild(e,i){var s=this.sizerChildren[e];return s&&(this.emit("hidechild",s,e,this,i),this.resetChildState(s)),this},swapChild(e,i){return this.currentChildKey===e||("panel"===this.currentChildKey||"panel"===e?(this.previousChildKey=this.currentChildKey,this.currentChildKey=e,this.hideChild(this.previousChildKey,i),this.showChild(this.currentChildKey,i)):(this.swapChild("panel",i),this.swapChild(e,i))),this},showPanel(e){return this.swapChild("panel",e),this},showLeftSide(){return this.swapChild("leftSide"),this},showRightSide(){return this.swapChild("rightSide"),this},showTopSide(){return this.swapChild("topSide"),this},showBottomSide(){return this.swapChild("bottomSide"),this},hideLeftSide(){return"leftSide"==this.currentChildKey&&this.showPanel(),this},hideRightSide(){return"rightSide"==this.currentChildKey&&this.showPanel(),this},hideTopSide(){return"topSide"==this.currentChildKey&&this.showPanel(),this},hideBottomSide(){return"bottomSide"==this.currentChildKey&&this.showPanel(),this},toggleLeftSide(){var e="panel"!==this.currentChildKey?"panel":"leftSide";return this.swapChild(e),this},toggleRightSide(){var e="panel"!==this.currentChildKey?"panel":"rightSide";return this.swapChild(e),this},toggleTopSide(){var e="panel"!==this.currentChildKey?"panel":"topSide";return this.swapChild(e),this},toggleBottomSide(){var e="panel"!==this.currentChildKey?"panel":"bottomSide";return this.swapChild(e),this}},vM),ObjectFactory.register("sides",function(e){var i=new Sides_Sides(this.scene,e);return this.scene.add.existing(i),i}),(0,k.Z)(window,"RexPlugins.UI.Sides",Sides_Sides);let vR=Phaser.Utils.Array.GetFirst,vL=Phaser.Utils.Array.Remove;var vB=class extends dd{constructor(e,i){super(e,i=build_BuildLabelConfig(e,i)),this.type="rexTweaker.Title"}setTitle(e){return(e=e?DeepClone(e):{}).hasOwnProperty("text")||(e.hasOwnProperty("title")?e.text=e.title:e.text=""),this.resetDisplayContent(e),this}},vI=class extends vB{constructor(e,i){void 0===i&&(i={}),super(e,i),this.type="rexTweaker.FolderTitle";var s=new triangle_Triangle_Triangle(e,i.expandedIcon);e.add.existing(s),this.addSpace().add(s,{proportion:0,expand:!1,padding:1,fitRatio:1}),this.addChildrenMap("expandedIcon",s)}setExpandedState(e){void 0===e&&(e=!0);var i=e?"down":"right";return this.childrenMap.expandedIcon.setDirection(i),this}},utils_CreateTweaker=function(e,i){var s=new vN(e,i);return e.add.existing(s),s},builders_CreateBackground=function(e,i,s){return build_CreateBackground(e,s)};let folder_Folder_Folder=class folder_Folder_Folder extends gh{constructor(e,i){super(e,i),this.type="rexTweaker.Folder"}setTitle(e){return this.childrenMap.title.setTitle(e),this}};Object.assign(folder_Folder_Folder.prototype,{setBindingTarget(e){return this.childrenMap.child.setBindingTarget(e),this}},{getMaxInputRowTitleWidth(){return this.childrenMap.child.getMaxInputRowTitleWidth()+this.getInnerPadding("left")},setInputRowTitleWidth(e){return e-=this.getInnerPadding("left"),this.childrenMap.child.setInputRowTitleWidth(e),this}});let vG=Phaser.Utils.Objects.GetValue;var builders_CreateFolder=function(e,i,s){var r=vG(s,"title")||{},n=new vI(e,r);e.add.existing(n),n.on("folder.expand",function(){n.setExpandedState(!0)}).on("folder.collapse",function(){n.setExpandedState(!1)});var a=utils_CreateTweaker(e,{root:vG(s,"root"),styles:vG(s,"tweaker"),space:vG(s,"space")||{}}),o=builders_CreateBackground(e,i,vG(s,"background")),h=new folder_Folder_Folder(e,{orientation:1,title:n,child:a,background:o,transition:{duration:vG(s,"transition.duration",200)}});return e.add.existing(h),h};let vD=Phaser.Utils.Objects.GetValue;let tabpages_TabPages_TabPages=class tabpages_TabPages_TabPages extends gn{constructor(e,i){super(e,i),this.type="rexTweaker.TabPages"}};Object.assign(tabpages_TabPages_TabPages.prototype,{setBindingTarget(e){for(var i=this.childrenMap.pages.children,s=0,r=i.length;s<r;s++)i[s].setBindingTarget(e);return this}},{getMaxInputRowTitleWidth(){for(var e=0,i=this.childrenMap.pages.children,s=0,r=i.length;s<r;s++)e=Math.max(e,i[s].getMaxInputRowTitleWidth());return e+this.getInnerPadding("left")},setInputRowTitleWidth(e){e-=this.getInnerPadding("left");for(var i=this.childrenMap.pages.children,s=0,r=i.length;s<r;s++)i[s].setInputRowTitleWidth(e);return this}});let vj=Phaser.Utils.Objects.GetValue;var builders_CreateTab=function(e,i,s){var r=new tabpages_TabPages_TabPages(e,s);e.add.existing(r);for(var n=vj(s,"tab"),a={root:vj(s,"root"),styles:vj(s,"tweaker")},o=vj(i,"pages")||[],h=0,l=o.length;h<l;h++){var c=o[h];r.addPage({key:c.title,tab:build_CreateLabel(e,n).setActiveState(!1).resetDisplayContent({text:c.title}),page:utils_CreateTweaker(e,a)})}return r.on("tab.focus",function(e,i){e.setActiveState(!0)}).on("tab.blur",function(e,i){e.setActiveState(!1)}),r};let vA=Phaser.Utils.Objects.GetValue,vF=Phaser.Utils.Objects.GetValue,vz=Phaser.Utils.Objects.GetValue;let InputRow=class InputRow extends dr{constructor(e,i){super(e,i),this.type="rexTweaker.InputRow",this.bindingTarget=void 0,this.bindTargetKey=void 0,this.autoUpdateEnable=!0;var s,r=i.inputTitle,n=i.inputField,a=i.background,o=vz(i,"proportion.title",0),h=vz(i,"space.title",0);s=0===this.orientation?{right:h}:{bottom:h},this.add(r,{proportion:o,expand:!0,padding:s});var l=n.defaultProportion;void 0===l&&(l=1===i.parentOrientation?1:0);var o=vz(i,"proportion.inputField",l);this.add(n,{proportion:o,expand:!0}),a&&this.addBackground(a),this.addChildrenMap("title",r),this.addChildrenMap("inputField",n),this.addChildrenMap("background",a),this.setupBinding()}destroy(e){this.scene&&!this.ignoreDestroy&&(this.stopMonitorTarget(),super.destroy(e))}setTitle(e){return this.childrenMap.title.setTitle(e),this}preLayout(){var e=this.childrenMap.title;e&&(e.minWidth=0),super.preLayout()}};Object.assign(InputRow.prototype,{setupBinding(){return this.childrenMap.inputField.on("valuechange",function(e){this.autoUpdateEnable&&this.setTargetValue(e)},this),this},setAutoUpdateEnable(e){return void 0===e&&(e=!0),this.autoUpdateEnable=e,this},setBindingTarget(e,i){return this.bindingTarget=e,void 0!==i&&this.setBindingTargetKey(i),this.syncTargetValue(),this},setBindingTargetKey(e){return this.bindTargetKey=e,this},setValueCallbacks(e){return this.onGetValue=vF(e,"onGetValue"),this.onSetValue=vF(e,"onSetValue"),this},getTargetValue(){return this.bindingTarget?null!=this.bindTargetKey?this.bindingTarget[this.bindTargetKey]:this.onGetValue?this.onGetValue(this.bindingTarget):void 0:void 0},setTargetValue(e){return this.bindingTarget&&(null!=this.bindTargetKey?this.bindingTarget[this.bindTargetKey]=e:this.onSetValue&&this.onSetValue(this.bindingTarget,e)),this},syncTargetValue(){if(!this.bindingTarget)return this;var e=this.childrenMap.inputField;return e.syncValue&&e.syncValue(this.getTargetValue()),this}},{startMonitorTarget(){return this.isMonitoring||(this.isMonitoring=!0,this.scene.events.on("postupdate",this.onMonitorTarget,this)),this},stopMonitorTarget(){return this.isMonitoring&&(this.isMonitoring=!1,this.scene.events.off("postupdate",this.onMonitorTarget,this)),this},onMonitorTarget(){if(this.bindingTarget){var e=this.getTargetValue(),i=this.childrenMap.inputField;i.value!==e&&i.syncValue(e)}}},{getMinTitleWidth(){var e=this.childrenMap.title;if(!e||0!==e.orientation)return 0;var i=e.rexSizer.padding;return this.getChildWidth(this.childrenMap.title)+i.left+i.right+this.getInnerPadding("left")},setMinTitleWidth(e){var i=this.childrenMap.title;if(!i||0!==i.orientation)return this;var s=i.rexSizer.padding;return e-=s.left+s.right,i.minWidth=e,this}});var builders_CreateTitleLabel=function(e,i,s){var r=new vB(e,s);return e.add.existing(r),r},builders_CreateInputField=function(e,i,s){for(var r,n=this.inputHandlers,a=0,o=n.length;a<o;a++){var h,l=n[a];if(l.accept(i)){r=new(h=l.baseClass,void 0===h&&(h=dr),class extends h{get bindingTarget(){return this.getParentSizer().bindingTarget}get bindingKey(){return this.getParentSizer().bindTargetKey}get value(){return this._value}validate(e){return!!this.syncValueFlag||!this.validateCallback||this.validateCallback(e,this._value,this.bindingTarget,this.bindingKey)}getFotmatText(e){return e=this.textFormatCallback?this.textFormatCallback(e):e.toString()}set value(e){if(this._value!==e&&(this.validate(e)||(e=this._value),this.displayValueCallback&&this.displayValueCallback(this,e),this._value!==e)){var i=this._value;this._value=e,this.syncValueFlag||this.emit("valuechange",e,i,this.bindingTarget,this.bindingKey)}}getValue(){return this.value}setValue(e){return this.value=e,this}syncValue(e){return this.syncValueFlag=!0,this.value=e,this.syncValueFlag=!1,this}setup(e,i){return void 0===i&&(i=!1),(i||e.hasOwnProperty("format"))&&this.setTextFormatCallback(e.format),(i||e.hasOwnProperty("onValidate"))&&this.setValidateCallback(e.onValidate),this.setupCallback&&this.setupCallback(this,e,i),this}setSetupCallback(e){return this.setupCallback=e,this}setDisplayValueCallback(e){return this.displayValueCallback=e,this}setTextFormatCallback(e){return this.textFormatCallback=e,this}setValidateCallback(e){return this.validateCallback=e,this}})(e),e.add.existing(r),r.setSetupCallback(l.setup).setDisplayValueCallback(l.displayValue),l.build(r,s);break}}return r&&r.setup(i,!0),r};let vW=Phaser.Utils.Objects.GetValue;var builders_CreateInputRow=function(e,i,s){var r=builders_CreateInputField.call(this,e,i,s);if(!r)return null;var n=builders_CreateTitleLabel(e,i,vW(s,"title")||{}),a=build_CreateBackground(e,vW(s,"background")||{}),o=new InputRow(e,{...s,...i,inputTitle:n,inputField:r,background:a});return e.add.existing(o),o.setTitle(i),o.setValueCallbacks(i),o},build_CreateRoundRectangle=function(e,i){var s=new tC(e,i);return e.add.existing(s),s};let vV=Phaser.Utils.Objects.GetValue;var utils_CreateButtons=function(e,i){var s=new(vV(i,"wrap",!1)?FixWidthButtons_Buttons:un)(e,i);return e.add.existing(s),s};let vY=Phaser.Utils.Objects.GetValue;var builders_CreateButtons=function(e,i,s){for(var r=builders_CreateTitleLabel(e,i,vY(s,"title")||{}),n=i.buttons,a=vY(s,"button")||{},o=[],h=0,l=n.length;h<l;h++){var c=build_CreateLabel(e,a);o.push(c);var g=n[h];c.resetDisplayContent(g.label),c.callback=g.callback}var m=utils_CreateButtons(e,{buttons:o,expand:!0,wrap:vY(i,"wrap",!1)});m.defaultProportion=1;var x=build_CreateRoundRectangle(e,vY(s,"background")||{}),S=new InputRow(e,{...s,inputTitle:r,inputField:m,background:x});return e.add.existing(S),S.setTitle(i),m.on("button.click",function(e){e.callback(S.bindingTarget)}),S};let vX=Phaser.Utils.Objects.GetValue,vH=Phaser.Utils.Objects.GetValue,vU=Phaser.Utils.Objects.GetValue;let TweakerShell=class TweakerShell extends dr{constructor(e,i){if(void 0===i&&(i={}),void 0===i.orientation&&(i.orientation=1),super(e,i),this.type="rexTweakerShell",this.root=i.root||this,this.styles=vU(i,"styles")||{},this.styles.orientation=this.orientation,this.itemWidth=vU(this.styles,"itemWidth",0),this.root===this&&1===this.orientation){var s=vU(i,"inputRow.alignTitle");void 0===s?s=!vU(this.styles,"inputRow.proportion.title"):s&&(0,k.Z)(this.styles,"inputRow.proportion.title",0),this.alignInputRowTitle=s}else this.alignInputRowTitle=!1,this.inputHandlers=this.root.inputHandlers;var r=builders_CreateBackground(e,void 0,i.background);r&&this.addBackground(r)}preLayout(){super.preLayout(),this.alignInputRowTitle&&this.setInputRowTitleWidth(this.getMaxInputRowTitleWidth())}};Object.assign(TweakerShell.prototype,{registerInputHandler:function(e){var i=!0;return e.hasOwnProperty("accept")||(i=!1,console.error(`[Tweaker] Can't register inputHandler '${e.name}', missing 'accept' callback.`)),e.hasOwnProperty("build")||(i=!1,console.error(`[Tweaker] Can't register inputHandler '${e.name}', missing 'build' callback.`)),i&&this.inputHandlers.unshift(e),this},removeInputHandler:function(e){var i=vR(this.inputHandlers,"name",e);return i&&vL(this.inputHandlers,i),this},addFolder:function(e){var i=this.scene,s=vD(this.styles,"folder")||{};s.tweaker=this.styles,s.root=this.root;var r=builders_CreateFolder(i,e,s);delete s.tweaker,delete s.root,this.add(r,{expand:!0}),r.setTitle(e);var n=vD(e,"expanded",!0);void 0!==n&&r.setExpandedState(n);var a=r.getElement("child");return e.key&&this.root.addChildrenMap(e.key,a),a},addTab:function(e){var i=this.scene,s=vA(this.styles,"tab")||{};s.tweaker=this.styles,s.root=this.root;var r=builders_CreateTab(i,e,s);delete s.tweaker,delete s.root,this.add(r,{expand:!0});for(var n=vA(e,"pages")||[],a=[],o=0,h=0,l=n.length;h<l;h++){var c=r.getPage(h);n[h].show&&(o=h);var g=n[h].key;g&&this.root.addChildrenMap(g,c),a.push(c)}return r.swapPage(o,0),a},addInput:function(e,i,s){1==arguments.length?(e=(s=e).bindingTarget,i=s.bindingKey):(void 0===s&&(s={}),s.bindingTarget=e,s.bindingKey=i),s.title||(s.title=i),s.bindingTarget&&s.bindingKey?s.value=s.bindingTarget[s.bindingKey]:s.value=void 0;var r,n=this.styles.inputRow||{};n.parentOrientation=this.styles.orientation;var a=builders_CreateInputRow.call(this,this.scene,s,n);if(!a)return console.error(`[Tweaker] Can't add Input
    title: ${s.title}
    view: ${s.view}
`),this;var o=a.childrenMap.inputField;return 1===this.orientation?r=0:(r=this.itemWidth>0?0:1,a.setMinWidth(this.itemWidth)),this.add(a,{proportion:r,expand:!0}),s.onValueChange&&o.on("valuechange",s.onValueChange),a.setAutoUpdateEnable(s.autoUpdate),a.setBindingTarget(e,i),s.monitor&&a.startMonitorTarget(),s.key&&this.root.addChildrenMap(s.key,a),this},addButtons:function(e){var i=this.scene;void 0===e&&(e={});var s=e.bindingTarget;delete e.bindingTarget;var r=builders_CreateButtons(i,e,vX(this.styles,"inputRow")||{});return this.add(r,{expand:!0}),s&&r.setBindingTarget(s),e.key&&this.root.addChildrenMap(e.key,r),this},addButton:function(e){return void 0===e&&(e={}),e.buttons=[{label:e.label,callback:e.callback}],delete e.label,delete e.callback,this.addButtons(e),this},addSeparator:function(e){var i=builders_CreateBackground(this.scene,e,vH(this.styles,"separator"));return this.add(i,{expand:!0}),this},setBindingTarget:function(e){for(var i=this.sizerChildren,s=0,r=i.length;s<r;s++){var n=i[s];n.setBindingTarget&&n.setBindingTarget(e)}return this},getMaxInputRowTitleWidth:function(){for(var e=0,i=this.sizerChildren,s=0,r=i.length;s<r;s++){var n=i[s];!n.rexSizer.hidden&&(n.getMinTitleWidth?e=Math.max(e,n.getMinTitleWidth()):n.getMaxInputRowTitleWidth&&(e=Math.max(e,n.getMaxInputRowTitleWidth())))}return e+this.getInnerPadding("left")},setInputRowTitleWidth:function(e){e-=this.getInnerPadding("left");for(var i=this.sizerChildren,s=0,r=i.length;s<r;s++){var n=i[s];!n.rexSizer.hidden&&(n.setMinTitleWidth?n.setMinTitleWidth(e):n.setInputRowTitleWidth&&n.setInputRowTitleWidth(e))}return this}});var vN=TweakerShell,SetInputTextReadOnly=function(e,i){void 0===i&&(i=!0),e.getElement("inputText").setReadOnly(i)},v$={name:"TextInput",accept:e=>e.hasOwnProperty("view")?"string"===e.view:"string"==typeof e.value,build(e,i){var s=e.scene;e.type="rexTweaker.TextInput";var r=build_CreateInputText(s,i.inputText);e.add(r,{proportion:1,expand:!0,key:"inputText"}),r.on("close",function(){e.setValue(r.value)})},setup(e,i,s){(s||i.hasOwnProperty("inputTextReadOnly"))&&SetInputTextReadOnly(e,!!i.inputTextReadOnly)},displayValue(e,i){e.getElement("inputText").setText(e.getFotmatText(i))}},utils_CreateInputTextArea=function(e,i,s){void 0===s&&(s=!0),s?i=i?DeepClone(i):{}:i||(i={});var r=new TextAreaInput_TextAreaInput(e,i);return e.add.existing(r),r},TextAreaInputHandler_SetInputTextReadOnly=function(e,i){void 0===i&&(i=!0),e.getElement("inputText").setReadOnly(i)},vZ={name:"TextAreaInput",accept:e=>!!e.hasOwnProperty("view")&&"textarea"===e.view,build(e,i){var s=e.scene;this.type="rexTweaker.TextAreaInput";var r=i.inputTextArea;void 0===r&&(r={}),r.hasOwnProperty("text")||(r.text=i.inputText),r.hasOwnProperty("slider")||(r.slider=i.slider);var n=utils_CreateInputTextArea(s,r);e.add(n,{proportion:1,expand:!0,key:"inputText"}),n.on("close",function(){e.setValue(n.value)})},setup(e,i,s){(s||i.hasOwnProperty("inputTextReadOnly"))&&TextAreaInputHandler_SetInputTextReadOnly(e,!!i.inputTextReadOnly)},displayValue(e,i){e.getElement("inputText").setText(e.getFotmatText(i))}},NumberInputHandler_SetInputTextReadOnly=function(e,i){void 0===i&&(i=!0),e.getElement("inputText").setReadOnly(i)},vK={name:"NumberInput",accept:e=>e.hasOwnProperty("view")?"number"===e.view:"number"==typeof e.value,build(e,i){var s=e.scene;e.type="rexTweaker.NumberInput";var r=build_CreateInputText(s,i.inputNumber||i.inputText).setNumberInput();e.add(r,{proportion:1,expand:!0,key:"inputText"}),r.on("close",function(){e.setValue(r.value)})},setup(e,i,s){(s||i.hasOwnProperty("inputTextReadOnly"))&&NumberInputHandler_SetInputTextReadOnly(e,!!i.inputTextReadOnly)},displayValue(e,i){e.getElement("inputText").setText(e.getFotmatText(i))}},utils_CreateSlider=function(e,i){var s=new Slider_Slider(e,i);return e.add.existing(s),s};let vJ=Phaser.Utils.Objects.GetValue,vq=Phaser.Math.Linear,vQ=Phaser.Math.Snap.Floor;var SetRange=function(e,i,s,r){e.minValue=i,e.maxValue=s,e.step=r,e.getElement("slider").setGap(r,i,s)},RangeInputHandler_SetInputTextReadOnly=function(e,i){void 0===i&&(i=!0),e.getElement("inputText").setReadOnly(i)},v0={name:"RangeInput",accept:e=>e.hasOwnProperty("view")?"range"===e.view:"number"==typeof e.value&&e.hasOwnProperty("min")&&e.hasOwnProperty("max"),build(e,i){var s=e.scene;e.type="rexTweaker.RangeInput";var r=i.slider,n=vJ(r,0===e.orientation?"track.height":"track.width"),a=utils_CreateSlider(s,r),o=1===i.parentOrientation?2:0,h=vJ(i,"proportion.range.slider",o);e.add(a,{proportion:h,expand:void 0===n,key:"slider"});var l=build_CreateInputText(s,i.inputNumber||i.inputText).setNumberInput(),o=1===i.parentOrientation?1:0,h=vJ(i,"proportion.range.inputText",o);e.add(l,{proportion:h,expand:!0,key:"inputText"}),l.on("close",function(){e.setValue(l.value)}),a.on("valuechange",function(){var i=vq(e.minValue,e.maxValue,a.value);e.step&&(i=vQ(i,e.step,e.minValue)),e.setValue(i)})},setup(e,i,s){(s||i.hasOwnProperty("max"))&&SetRange(e,i.min,i.max,i.step),(s||i.hasOwnProperty("inputTextReadOnly"))&&RangeInputHandler_SetInputTextReadOnly(e,!!i.inputTextReadOnly)},displayValue(e,i){e.getElement("slider").setValue(i,e.minValue,e.maxValue),e.getElement("inputText").setText("").setText(e.getFotmatText(i))}},utils_CreateColorInput=function(e,i,s){void 0===s&&(s=!0),s?i=i?DeepClone(i):{}:i||(i={});var r=new ColorInput_ColorInput(e,i);return e.add.existing(r),r},v1={name:"ColorInput",accept:e=>!!e.hasOwnProperty("view")&&"color"===e.view,build(e,i){var s=e.scene;e.type="rexTweaker.ColorInput";var r=i.colorInput;void 0===r&&(r={}),r.hasOwnProperty("inputText")||(r.inputText=i.inputText);var n=utils_CreateColorInput(s,r);e.add(n,{proportion:1,expand:!0,key:"colorInput"}),n.on("valuechange",function(i){e.setValue(i)})},displayValue(e,i){e.getElement("colorInput").setValue(i)}},utils_CreateCheckbox=function(e,i){var s=new nl(e,i);return e.add.existing(s),s},v2={name:"CheckboxInput",accept:e=>e.hasOwnProperty("view")?"boolean"===e.view:"boolean"==typeof e.value,build(e,i){var s=e.scene;e.type="rexTweaker.CheckboxInput";var r=i.checkbox,n=utils_CreateCheckbox(s,r),a=r.size;void 0!==a&&n.setSize(a,a);var o=void 0!==a?0:1;e.add(n,{proportion:0,expand:!1,fitRatio:o,key:"checkbox"}),n.on("valuechange",function(i){e.setValue(i)})},displayValue(e,i){e.getElement("checkbox").setValue(i)}},utils_CreateToggleSwitch=function(e,i){var s=new nf(e,i);return e.add.existing(s),s},v5={name:"ToggleSwitchInput",accept:e=>!!e.hasOwnProperty("view")&&"toggleSwitch"===e.view,build(e,i){var s=e.scene;e.type="rexTweaker.ToggleSwitchInput";var r=i.toggleSwitch,n=utils_CreateToggleSwitch(s,r),a=r.size;void 0!==a&&n.setSize(a,a);var o=void 0!==a?0:1;e.addSpace().add(n,{proportion:0,expand:!1,fitRatio:o,key:"toggleSwitch"}),n.on("valuechange",function(i){e.setValue(i)})},displayValue(e,i){e.getElement("toggleSwitch").setValue(i)}},utils_CreateDropDownList=function(e,i){i=build_BuildListConfig(e,i);var s=new u9(e,i);return e.add.existing(s),s},GetOptionIndex=function(e,i){for(var s=0,r=e.length;s<r;s++)if(e[s].value===i)return s},GetOption=function(e,i){var s=GetOptionIndex(e,i);if(null!=s)return e[s]},SetOptions=function(e,i){e.getElement("list").setOptions(i)},v3={name:"ListInput",accept:e=>e.hasOwnProperty("view")?"list"===e.view:e.hasOwnProperty("options"),build(e,i){var s=e.scene;e.type="rexTweaker.ListInput";var r=utils_CreateDropDownList(s,i.list);e.add(r,{proportion:1,expand:!0,key:"list"}),r.on("button.click",function(i,s,r,n,a,o){e.setValue(r.value)})},setup(e,i,s){(s||i.hasOwnProperty("options"))&&SetOptions(e,i.options)},displayValue(e,i){var s=e.getElement("list"),r=GetOption(s.options,i);s.resetDisplayContent(r).setMinSize(s.width,s.height).layout().setMinSize(0,0)}},inputhandlers_utils_CreateButtons=function(e,i){var s=new un(e,i);return e.add.existing(s),s},SetButtonsActiveState=function(e,i){for(var s=0,r=e.length;s<r;s++){var n=e[s];n&&n.setActiveState(s===i)}};let v7=Phaser.Utils.Objects.GetValue;var ButtonsInputHandler_SetOptions=function(e,i){var s=e.getElement("list");s.options=i;var r=e.scene,n=s.buttonConfig;s.clearButtons(!0);for(var a=0,o=i.length;a<o;a++){var h=i[a],l=build_CreateLabel(r,n).setActiveState(!1).resetDisplayContent({text:h.text});s.addButton(l)}},v6={name:"ButtonsInput",accept:e=>!!e.hasOwnProperty("view")&&"buttons"===e.view,build(e,i){var s=e.scene;e.type="rexTweaker.ButtonsInput";var r=i.button?DeepClone(i.button):{},n=v7(r,"expand",!0);n&&(r.align="center"),delete r.expand;var a=inputhandlers_utils_CreateButtons(s,{expand:n});a.buttonConfig=r,e.add(a,{proportion:1,expand:!0,key:"list"}),a.on("button.click",function(i,s,r,n){var o=a.options[s];o&&(e._selectedIndex=s,e.setValue(o.value),e._selectedIndex=void 0)})},setup(e,i,s){(s||i.hasOwnProperty("options"))&&ButtonsInputHandler_SetOptions(e,i.options)},displayValue(e,i){var s=e.getElement("list"),r=e._selectedIndex;void 0===r&&(r=GetOptionIndex(s.options,i)),SetButtonsActiveState(s.getElement("buttons"),r)}},methods_RegisterDefaultInputHandlers=function(){this.registerInputHandler(v$).registerInputHandler(vZ).registerInputHandler(vK).registerInputHandler(v0).registerInputHandler(v1).registerInputHandler(v2).registerInputHandler(v5).registerInputHandler(v3).registerInputHandler(v6)},v4=class extends vN{constructor(e,i){void 0===i&&(i={}),i.hasOwnProperty("style")&&(i.styles=i.style),void 0===i.styles&&(i.styles={}),i.background=i.styles.background||{},i.space=i.styles.space||{},super(e,i),this.type="rexTweaker",this.inputHandlers=[],methods_RegisterDefaultInputHandlers.call(this)}destroy(e){this.scene&&!this.ignoreDestroy&&(super.destroy(e),this.inputHandlers=void 0)}};ObjectFactory.register("tweaker",function(e){var i=new v4(this.scene,e);return this.scene.add.existing(i),i}),(0,k.Z)(window,"RexPlugins.UI.Tweaker",v4),ObjectFactory.register("click",function(e,i){return new no(e,i)}),(0,k.Z)(window,"RexPlugins.UI.Click",no),ObjectFactory.register("clickOutside",function(e,i){return new oB(e,i)}),(0,k.Z)(window,"RexPlugins.UI.ClickOutside",oB),ObjectFactory.register("inTouching",function(e,i){return new oD(e,i)}),(0,k.Z)(window,"RexPlugins.UI.InTouching",oD),ObjectFactory.register("tap",function(e,i){return system_IsGameObject(e)||(i=e,e=this.scene),new o$(e,i)}),(0,k.Z)(window,"RexPlugins.UI.Tap",o$),ObjectFactory.register("press",function(e,i){return system_IsGameObject(e)||(i=e,e=this.scene),new oQ(e,i)}),(0,k.Z)(window,"RexPlugins.UI.Press",oQ),ObjectFactory.register("swipe",function(e,i){return system_IsGameObject(e)||(i=e,e=this.scene),new Swipe_Swipe(e,i)}),(0,k.Z)(window,"RexPlugins.UI.Swipe",Swipe_Swipe),ObjectFactory.register("pan",function(e,i){return system_IsGameObject(e)||(i=e,e=this.scene),new o3(e,i)}),(0,k.Z)(window,"RexPlugins.UI.Pan",o3),ObjectFactory.register("drag",function(e,i){return new v_(e,i)}),(0,k.Z)(window,"RexPlugins.UI.Drag",v_),ObjectFactory.register("pinch",function(e){return new hy(this.scene,e)}),(0,k.Z)(window,"RexPlugins.UI.Pinch",hy),ObjectFactory.register("rotate",function(e){return new Rotate_Rotate(this.scene,e)}),(0,k.Z)(window,"RexPlugins.UI.Rotate",Rotate_Rotate);let v8=Phaser.Utils.Objects.IsPlainObject,v9=Phaser.Utils.Objects.GetValue;var GetFaceUpdatingCallback=function(e,i,s){var r;if(void 0===e)e=s.texture.key,i=s.frame.name;else if(v8(e)){var n=e;e=v9(n,"key",s.texture.key),i=v9(n,"frame",s.frame.name)}else"string"==typeof e||(r=e);return void 0===r&&(r=function(s){s.setTexture(e,i)}),r};let ft=Phaser.Utils.Objects.GetValue,fe=Phaser.Utils.Objects.GetAdvancedValue,fi=Phaser.Math.Linear,fs={x:0,horizontal:0,y:1,vertical:1},fr={front:0,back:1};var fn=class extends ss{constructor(e,i){super(e,i),this.resetFromJSON(i),this.boot()}resetFromJSON(e){return super.resetFromJSON(e),this.setDuration(fe(e,"duration",500)),this.setEase(ft(e,"ease","Sine")),this.setOrientation(ft(e,"orientation",0)),this.setFrontFace(ft(e,"front",void 0)),this.setBackFace(ft(e,"back",void 0)),this.setFace(ft(e,"face",0)),this}setOrientation(e){return"string"==typeof e&&(e=fs[e]),this.orientation=e,this}get face(){return this._face}set face(e){"string"==typeof e&&(e=fr[e]),this._face=e,0===e&&this.frontFaceCallback?this.frontFaceCallback(this.parent):1===e&&this.backFaceCallback&&this.backFaceCallback(this.parent)}setFace(e){return this.face=e,this}toggleFace(){var e=0===this.face?1:0;return this.setFace(e),this}setFrontFace(e,i){return this.frontFaceCallback=GetFaceUpdatingCallback(e,i,this.parent),this}setBackFace(e,i){return this.backFaceCallback=GetFaceUpdatingCallback(e,i,this.parent),this}start(){if(this.timer.isRunning)return this;var e=this.parent;return 0===this.orientation?this.scale0=e.scaleX:this.scale0=e.scaleY,this.timer.setDelay(this.delay).setDuration(this.duration/2).setRepeat(1),super.start(),this}flip(e){return this.isRunning||(void 0!==e&&this.setDuration(e),this.start()),this}updateGameObject(e,i){i.justRestart&&this.toggleFace();var s=i.t;i.isOddIteration&&(s=1-s),s=this.easeFn(s);var r=fi(this.scale0,0,s);0===this.orientation?e.scaleX=r:e.scaleY=r}};ObjectFactory.register("flip",function(e,i){return new fn(e,i)}),(0,k.Z)(window,"RexPlugins.UI.Flip",fn),ObjectFactory.register("shake",function(e,i){return new a9(e,i)}),(0,k.Z)(window,"RexPlugins.UI.Shake",a9),ObjectFactory.register("touchEventStop",function(e,i){return new ob(e,i)}),(0,k.Z)(window,"RexPlugins.UI.TouchEventStop",ob),ObjectFactory.register("perspective",function(e,i){return new ContainerPerspective(e,i)}),(0,k.Z)(window,"RexPlugins.UI.Perspective",ContainerPerspective);let fa=Phaser.Math.RotateAround;var LocalXYToWorldXY=function(e,i,s){var r=e.width/2,n=e.height/2;return fo.x=i-r,fo.y=s-n,fa(fo,0,0,e.rotation),fo.x*=e.scaleX,fo.y*=e.scaleY,fo.x+=e.x,fo.y+=e.y,fo},WorldXYToLocalXY=function(e,i,s){var r=e.width/2,n=e.height/2;return fo.x=i-e.x,fo.y=s-e.y,fo.x/=e.scaleX,fo.y/=e.scaleY,fa(fo,0,0,-e.rotation),fo.x+=r,fo.y+=n,fo},fo={x:0,y:0},fh=class{constructor(e,i){this.parent=e,this.vertex=i,this._localX=void 0,this._localY=void 0}destroy(){this.parent=void 0,this.vertex=void 0}updateVertexPosition(e,i){var s=this.parent,r=s.height,n=s.frame.cutWidth/r/2,a=s.frame.cutHeight/r/2,o=this.vertex;return o.x=e/r-n,o.y=-(i/r-a),s.forceUpdate(),this}get localX(){return this._localX}set localX(e){this.setLocalXY(e,this._localY)}get localY(){return this._localY}set localY(e){this.setLocalXY(this._localX,e)}get localXOrigin(){return this._localXOrigin}get localYOrigin(){return this._localYOrigin}resetLocalXY(e,i){return this._localXOrigin=e,this._localYOrigin=i,this._localX=e,this._localY=i,this}setLocalXY(e,i,s){return this._localX===e&&this._localY===i||(this._localX=e,this._localY=i,s||this.updateVertexPosition(e,i)),this}setWorldXY(e,i){if(this._worldX===e&&this._worldY===i)return this;var s=WorldXYToLocalXY(this.parent,e,i);return this.setLocalXY(s.x,s.y),this}setPosition(e,i){return this.setWorldXY(e,i),this}getWorldXY(){return LocalXYToWorldXY(this.parent,this._localX,this._localY)}get x(){return LocalXYToWorldXY(this.parent,this._localX,this._localY).x}set x(e){this.setWorldXY(e,this.y)}get y(){return LocalXYToWorldXY(this.parent,this._localX,this._localY).y}set y(e){this.setWorldXY(this.x,e)}};let fl=Phaser.Geom.Mesh.Vertex,fd=Phaser.Geom.Mesh.Face,fc=[0,2,3,0,3,1],fu=[1,3,2,1,2,0],fp=[0,3,4,0,4,1,1,4,2,4,5,2,3,6,4,6,7,4,4,7,8,4,8,5];var methods_InitFaces=function(e){for(var i,s=e.isNinePointMode,r=s?9:4,n=e.vertices,a=e.faces,o=e.controlPoints,h=0;h<r;h++){var l=new fl;n.push(l),o.push(new fh(e,l))}i=s?fp:e.fourPointsModeRTL?fu:fc;for(var h=0,c=i.length;h<c;h+=3){var g=n[i[h+0]],m=n[i[h+1]],x=n[i[h+2]];a.push(new fd(g,m,x))}s?(e.topLeft=o[0],e.topCenter=o[1],e.topRight=o[2],e.centerLeft=o[3],e.center=o[4],e.centerRight=o[5],e.bottomLeft=o[6],e.bottomCenter=o[7],e.bottomRight=o[8]):(e.topLeft=o[0],e.topRight=o[1],e.bottomLeft=o[2],e.bottomRight=o[3])},methods_GetPointPosition=function(e){var i,s=e.height,r=e.width;if(e.isNinePointMode){var n=(0+r)/2,a=(0+s)/2;i=[0,0,n,0,r,0,0,a,n,a,r,a,0,s,n,s,r,s]}else i=[0,0,r,0,0,s,r,s];return i};let fg=Phaser.Utils.Objects.IsPlainObject,fv=Phaser.Utils.Objects.GetValue;var ff=class extends pS{constructor(e,i,s,r,n,a){fg(i)&&(i=fv(a=i,"x",0),s=fv(a,"y",0),r=fv(a,"key",null),n=fv(a,"frame",null)),super(e,i,s,r,n),this.type="rexQuadImage",this.isNinePointMode=fv(a,"ninePointMode",!1),this.fourPointsModeRTL=fv(a,"rtl",!1),this.controlPoints=[],methods_InitFaces(this),this.hideCCW=!1,this.syncSize()}destroy(e){if(this.scene&&!this.ignoreDestroy){super.destroy(e);for(var i=0,s=this.controlPoints.length;i<s;i++)this.controlPoints[i].destroy();this.controlPoints=void 0}}resetVerts(){this.dirtyCache[9]=-1;for(var e=methods_GetPointPosition(this),i=this.width,s=this.height,r=this.frame.cutWidth/s/2,n=this.frame.cutHeight/s/2,a=this.frame.u0,o=this.frame.u1,h=this.frame.v0,l=this.frame.v1,c=o-a,g=l-h,m=this.controlPoints,x=0,S=e.length;x<S;x+=2){var _=e[x+0],k=e[x+1],E=x/2,R=_/s-r,j=k/s-n,Y=a+c*(_/i),X=h+g*(k/s);this.vertices[E].set(R,-j,0).setUVs(Y,X),m[E].resetLocalXY(_,k)}return this}syncSize(){return this.setSizeToFrame(),this.setOrtho(this.width/this.height,1),this.resetVerts(),this}};Phaser.Utils.Objects.IsPlainObject,Phaser.Utils.Objects.GetValue;var skewimage_Skew=function(e,i,s){void 0===i&&(i=0),void 0===s&&(s=0);for(var r=e.width,n=e.height,a=.5*r,o=.5*n,h=Math.tan(i)*o,l=Math.tan(s)*a,c=e.controlPoints,g=0,m=c.length;g<m;g++){var x=c[g],S=x.localXOrigin,_=x.localYOrigin;x.localX=S+(_>o?h:-h),x.localY=_+(S>a?l:-l)}};let fm=Phaser.Utils.Objects.IsPlainObject,fb=Phaser.Utils.Objects.GetValue,fy=Phaser.Math.DegToRad,fC=Phaser.Math.RadToDeg;var fx=class extends ff{constructor(e,i,s,r,n){if(fm(i)){var a=i;i=fb(a,"x",0),s=fb(a,"y",0),r=fb(a,"key",null),n=fb(a,"frame",null)}super(e,i,s,r,n),this.type="rexSkewmage",this._skewX=0,this._skewY=0}get skewX(){return this._skewX}set skewX(e){this._skewX=e,skewimage_Skew(this,this._skewX,this._skewY)}get skewXDeg(){return fC(this._skewX)}set skewXDeg(e){this.skewX=fy(e)}get skewY(){return this._skewY}set skewY(e){this._skewY=e,skewimage_Skew(this,this._skewX,this._skewY)}get skewYDeg(){return fC(this._skewY)}set skewYDeg(e){this.skewY=fy(e)}setSkewX(e){return this.skewX=e,this}setSkewY(e){return this.skewY=e,this}setSkew(e,i){return void 0===i&&(i=e),this.skewX=e,this.skewY=i,this}setSkewXDeg(e){return this.skewXDeg=e,this}setSkewYDeg(e){return this.skewYDeg=e,this}setSkewDeg(e,i){return void 0===i&&(i=e),this.skewXDeg=e,this.skewYDeg=i,this}};let fS=Phaser.Utils.Objects.IsPlainObject,f_=Phaser.Utils.Objects.GetValue;var fw=class extends fx{constructor(e,i,s,r,n){if(fS(i)){var a=i;i=f_(a,"x",0),s=f_(a,"y",0),r=f_(a,"width",32),n=f_(a,"height",32)}super(e,i,s,rendertexture_CreateDynamicTexture(e,r,n),null),this.type="rexSkewRenderTexture",this.rt=this.texture}destroy(e){this.scene&&!this.ignoreDestroy&&(super.destroy(e),this.rt.destroy(),this.rt=null)}};let ContainerSkew=class ContainerSkew extends rendertexture_MeshRenderTextureBase(fw){get skewState(){return this.isRunning}};ObjectFactory.register("skew",function(e,i){return new ContainerSkew(e,i)}),(0,k.Z)(window,"RexPlugins.UI.Skew",ContainerSkew),ObjectFactory.register("anchor",function(e,i){return new aj(e,i)}),(0,k.Z)(window,"RexPlugins.UI.Anchor",aj),ObjectFactory.register("textTyping",function(e,i){return new TextTyping_TextTyping(e,i)}),(0,k.Z)(window,"RexPlugins.UI.TextTyping",TextTyping_TextTyping),ObjectFactory.register("textPage",function(e,i){return new TextPage_TextPage(e,i)}),(0,k.Z)(window,"RexPlugins.UI.TextPage",TextPage_TextPage);var fP=void 0,LastOpenedEditor_SetLastOpenedEditor=function(e){e!==fP&&(void 0!==fP&&fP.close(),fP=e)},LastOpenedEditor_CloseLastOpenEditor=function(e){e===fP&&(fP=void 0)};let fk=Phaser.Utils.Objects.GetValue,fT=Phaser.Utils.Objects.Clone;var methods_CreateInputText=function(e,i){void 0===i&&(i={}),i=fT(i);var s=e.scene,r=e.style,n=fk(i,"backgroundColor",r.backgroundColor);null===n&&(n="transparent"),i.text=fk(i,"text",e.text),i.fontFamily=fk(i,"fontFamily",r.fontFamily),i.fontSize=fk(i,"fontSize",r.fontSize),i.color=fk(i,"color",r.color),i.backgroundColor=n,i.direction=fk(i,"rtl",r.rtl)?"rtl":"ltr",i.align=fk(i,"align",r.hasOwnProperty("align")?r.align:r.hasOwnProperty("halign")?r.halign:"left"),"rtl"===i.direction&&text_IsTextGameObject(e)&&(i.align="right");var a=e.padding;a.left>0&&(i.paddingLeft=`${a.left}px`),a.right>0&&(i.paddingRight=`${a.right}px`),r.backgroundCornerRadius&&(i.borderRadius=fk(i,"borderRadius",`${r.backgroundCornerRadius}px`));var o=new InputText_InputText(s,e.x,e.y,fk(i,"width",e.width),fk(i,"height",e.height),i);o.setScale(e.scaleX,e.scaleY).setOrigin(e.originX,e.originY).setScrollFactor(e.scrollFactorX,e.scrollFactorY);var h=e.parentContainer;return h?h.add(o):s.add.existing(o),o};let fO=Phaser.Utils.Objects.GetValue,fM=Phaser.Utils.Objects.Merge,fE=Phaser.Utils.Objects.GetValue;let TextEdit_TextEdit=class TextEdit_TextEdit extends i0{constructor(e,i){super(e),this.inputText=void 0,this.onClose=void 0,this.delayCall=void 0,this.setOpenConfig(i),fE(i,"clickEnable",!0)&&e.on("pointerdown",function(){this.open()},this).setInteractive()}shutdown(e){this.isShutdown||(this.close(),super.shutdown(e))}setOpenConfig(e){return void 0===e&&(e={}),this.openConfig=e,this}get isOpened(){return void 0!==this.inputText}get text(){return this.isOpened?this.inputText.text:this.parent.text}};Object.assign(TextEdit_TextEdit.prototype,{open:function(e,i){void 0===e&&(e={}),e=fM(e,this.openConfig),LastOpenedEditor_SetLastOpenedEditor(this),object_IsFunction(e)&&(i=e,e=void 0);var s=fO(e,"inputType",void 0);void 0===s&&(s=fO(e,"type","text")),void 0===i&&(i=fO(e,"onClose",void 0));var r=fO(e,"onOpen",void 0),n=fO(e,"onTextChanged",void 0);return this.inputText=methods_CreateInputText(this.parent,e).on("textchange",function(e){var i=e.text;n?n(this.parent,i):this.parent.text=i},this).setFocus(),this.parent.setVisible(!1),this.onClose=i,fO(e,"enterClose","textarea"!==s)&&this.scene.input.keyboard.once("keydown-ENTER",this.close,this),this.delayCall=this.scene.time.delayedCall(0,function(){this.scene.input.once("pointerdown",this.close,this),r&&r(this.parent),this.emit("open",this.parent)},[],this),this},close:function(){return LastOpenedEditor_CloseLastOpenEditor(this),this.parent.setVisible(!0),this.inputText&&(this.inputText.destroy(),this.inputText=void 0),this.delayCall&&(this.delayCall.remove(),this.delayCall=void 0),this.scene.input.keyboard.off("keydown-ENTER",this.close,this),this.scene.input.off("pointerdown",this.close,this),this.onClose&&this.onClose(this.parent),this.emit("close",this.parent),this}}),ObjectFactory.register("textEdit",function(e,i){return new TextEdit_TextEdit(e,i)}),(0,k.Z)(window,"RexPlugins.UI.TextEdit",TextEdit_TextEdit),ObjectFactory.register("layerManager",function(e){return new LayerManager_LayerManager(this.scene,e)}),(0,k.Z)(window,"RexPlugins.UI.LayerManager",LayerManager_LayerManager);var GetTextSize=function(e,i,s){return void 0===s[i]&&(e.setFontSize(i),s[i]={width:e.width,height:e.height}),s[i]},TestFontSize=function(e,i,s,r,n){var a,o,h=GetTextSize(e,i,n),l=GetTextSize(e,i+1,n);if(void 0!==r){if(h.height<=r&&l.height>r)a=0;else{if(h.height>r)return -1;a=Math.floor(r-h.height)}}if(h.width<=s&&l.width>s)return 0;if(h.width>s)return -1;var o=Math.floor(s-h.width);return void 0===a?o:Math.min(o,a)},SetTextWidth=function(e,i,s){var r=e.style;r&&(r.fixedWidth=i,r.parent.width=i,void 0!==s&&(r.fixedHeight=s,r.parent.height=s),r.update(!1))},fontsizefit_FontSizeFit=function(e,i,s){if(null==i)return e;if(0===i)return SetTextWidth(e,0,s),e;var r=e.text.length;if(0===r)return SetTextWidth(e,i,s),e;var n=Math.floor(1.5*i/r);void 0!==s&&n>s&&(n=Math.floor(s));for(var a={},o=TestFontSize(e,n,i,s,a),h=0;h<=65535&&0!==o;h++){if((n+=o)<0){n=0;break}o=TestFontSize(e,n,i,s,a)}return 65535===h&&console.warn("FontSizeFit: Test count exceeds 65535"),e.setFontSize(n),SetTextWidth(e,i,s),e};let fR=Phaser.Utils.Objects.GetValue;let UIPlugin=class UIPlugin extends Phaser.Plugins.ScenePlugin{constructor(e,i){super(e,i),this.add=new ObjectFactory(e)}start(){this.scene.events.on("destroy",this.destroy,this)}isInTouching(e,i,s,r){return!!e.visible&&input_IsPointerInBounds(e,i,s,r)}get viewport(){return system_GetViewport(this.scene,this.scene.cameras.main,!0)}};Object.assign(UIPlugin.prototype,{getParentSizer:GetParent,getTopmostSizer:GetTopmostParent,removeFromParent:utils_RemoveFromParent,hide:Hide,show:Show,isShown:IsShown,confirmAction:confirmdialog_ConfirmAction,edit:function(e,i,s){return e._edit||(e._edit=new TextEdit_TextEdit(e,{clickEnable:!1})),e._edit.open(i,s),e._edit},wrapExpandText:wrapexpandtext_WrapExpandText,fontSizeExpandText:function(e,i){"number"==typeof i&&(i={minWidth:i});var s=fR(i,"minWidth",0),r=fR(i,"minHeight",0),n=fR(i,"fitHeight",!1);return e._minWidth=s,e._minHeight=r,n?(e.runWidthWrap=function(i){return e.setFixedSize&&e.setFixedSize(0,0),e.setFontSize(1),e},e.resize=function(i,s){return fontsizefit_FontSizeFit(e,i,s),e}):(e.runWidthWrap=function(i){return e.setFixedSize&&e.setFixedSize(0,0),fontsizefit_FontSizeFit(e,i,void 0),e},e.resize=function(i,s){return e.width===i&&e.height===s||e.setFixedSize(i,s),e}),e},fontSizeResize:fontsizefit_FontSizeFit,setFontSizeToFitWidth:fontsizefit_FontSizeFit,waitEvent:WaitEvent_WaitEvent,waitComplete:WaitComplete,delayPromise:promise_Delay,setChildrenInteractive:setchildreninteractive_SetChildrenInteractive,fadeIn:fade_in,fadeOutDestroy:fade_out_destroy,easeMoveTo:easemove_EaseMoveTo,easeMoveFrom:easemove_EaseMoveFrom,modal:ModalPromise_Modal,modalPromise:function(e,i){var s=ModalPromise_Modal(e,i);return new Promise(function(e,i){s.once("close",function(i){e(i)})})},modalClose:ModalClose,requestDrag:input_RequestDrag,openFileChooser:filechooser_Open});var fL=UIPlugin},11377:function(e,i,s){var r;!function(){function aa(e,i,s){return e.call.apply(e.bind,arguments)}function ba(e,i,s){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var s=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(s,r),e.apply(i,s)}}return function(){return e.apply(i,arguments)}}function p(e,i,s){return(p=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?aa:ba).apply(null,arguments)}var n=Date.now||function(){return+new Date};function ca(e,i){this.a=e,this.o=i||e,this.c=this.o.document}var a=!!window.FontFace;function t(e,i,s,r){if(i=e.c.createElement(i),s)for(var n in s)s.hasOwnProperty(n)&&("style"==n?i.style.cssText=s[n]:i.setAttribute(n,s[n]));return r&&i.appendChild(e.c.createTextNode(r)),i}function u(e,i,s){(e=e.c.getElementsByTagName(i)[0])||(e=document.documentElement),e.insertBefore(s,e.lastChild)}function v(e){e.parentNode&&e.parentNode.removeChild(e)}function w(e,i,s){i=i||[],s=s||[];for(var r=e.className.split(/\s+/),n=0;n<i.length;n+=1){for(var a=!1,o=0;o<r.length;o+=1)if(i[n]===r[o]){a=!0;break}a||r.push(i[n])}for(n=0,i=[];n<r.length;n+=1){for(o=0,a=!1;o<s.length;o+=1)if(r[n]===s[o]){a=!0;break}a||i.push(r[n])}e.className=i.join(" ").replace(/\s+/g," ").replace(/^\s+|\s+$/,"")}function y(e,i){for(var s=e.className.split(/\s+/),r=0,n=s.length;r<n;r++)if(s[r]==i)return!0;return!1}function z(e,i,s){function d(){h&&r&&n&&(h(o),h=null)}i=t(e,"link",{rel:"stylesheet",href:i,media:"all"});var r=!1,n=!0,o=null,h=s||null;a?(i.onload=function(){r=!0,d()},i.onerror=function(){r=!0,o=Error("Stylesheet failed to load"),d()}):setTimeout(function(){r=!0,d()},0),u(e,"head",i)}function A(e,i,s,r){var n=e.c.getElementsByTagName("head")[0];if(n){var a=t(e,"script",{src:i}),o=!1;return a.onload=a.onreadystatechange=function(){o||this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||(o=!0,s&&s(null),a.onload=a.onreadystatechange=null,"HEAD"==a.parentNode.tagName&&n.removeChild(a))},n.appendChild(a),setTimeout(function(){o||(o=!0,s&&s(Error("Script load timeout")))},r||5e3),a}return null}function B(){this.a=0,this.c=null}function C(e){return e.a++,function(){e.a--,D(e)}}function D(e){0==e.a&&e.c&&(e.c(),e.c=null)}function F(e){this.a=e||"-"}function G(e,i){this.c=e,this.f=4,this.a="n";var s=(i||"n4").match(/^([nio])([1-9])$/i);s&&(this.a=s[1],this.f=parseInt(s[2],10))}function I(e){var i=[];e=e.split(/,\s*/);for(var s=0;s<e.length;s++){var r=e[s].replace(/['"]/g,"");-1!=r.indexOf(" ")||/^\d/.test(r)?i.push("'"+r+"'"):i.push(r)}return i.join(",")}function J(e){return e.a+e.f}function H(e){var i="normal";return"o"===e.a?i="oblique":"i"===e.a&&(i="italic"),i}function ha(e,i){this.c=e,this.f=e.o.document.documentElement,this.h=i,this.a=new F("-"),this.j=!1!==i.events,this.g=!1!==i.classes}function L(e){if(e.g){var i=y(e.f,e.a.c("wf","active")),s=[],r=[e.a.c("wf","loading")];i||s.push(e.a.c("wf","inactive")),w(e.f,s,r)}K(e,"inactive")}function K(e,i,s){e.j&&e.h[i]&&(s?e.h[i](s.c,J(s)):e.h[i]())}function ja(){this.c={}}function M(e,i){this.c=e,this.f=i,this.a=t(this.c,"span",{"aria-hidden":"true"},this.f)}function N(e){u(e.c,"body",e.a)}function O(e){return"display:block;position:absolute;top:-9999px;left:-9999px;font-size:300px;width:auto;height:auto;line-height:normal;margin:0;padding:0;font-variant:normal;white-space:nowrap;font-family:"+I(e.c)+";"+("font-style:"+H(e)+";font-weight:")+e.f+"00;"}function P(e,i,s,r,n,a){this.g=e,this.j=i,this.a=r,this.c=s,this.f=n||3e3,this.h=a||void 0}function Q(e,i,s,r,n,a,o){this.v=e,this.B=i,this.c=s,this.a=r,this.s=o||"BESbswy",this.f={},this.w=n||3e3,this.u=a||null,this.m=this.j=this.h=this.g=null,this.g=new M(this.c,this.s),this.h=new M(this.c,this.s),this.j=new M(this.c,this.s),this.m=new M(this.c,this.s),e=O(e=new G(this.a.c+",serif",J(this.a))),this.g.a.style.cssText=e,e=O(e=new G(this.a.c+",sans-serif",J(this.a))),this.h.a.style.cssText=e,e=O(e=new G("serif",J(this.a))),this.j.a.style.cssText=e,e=O(e=new G("sans-serif",J(this.a))),this.m.a.style.cssText=e,N(this.g),N(this.h),N(this.j),N(this.m)}F.prototype.c=function(e){for(var i=[],s=0;s<arguments.length;s++)i.push(arguments[s].replace(/[\W_]+/g,"").toLowerCase());return i.join(this.a)},P.prototype.start=function(){var e=this.c.o.document,i=this,s=n(),r=new Promise(function(r,a){!function f(){var o;n()-s>=i.f?a():e.fonts.load(H(o=i.a)+" "+o.f+"00 300px "+I(o.c),i.h).then(function(e){1<=e.length?r():setTimeout(f,25)},function(){a()})}()}),a=null;Promise.race([new Promise(function(e,s){a=setTimeout(s,i.f)}),r]).then(function(){a&&(clearTimeout(a),a=null),i.g(i.a)},function(){i.j(i.a)})};var o={D:"serif",C:"sans-serif"},h=null;function T(){if(null===h){var e=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent);h=!!e&&(536>parseInt(e[1],10)||536===parseInt(e[1],10)&&11>=parseInt(e[2],10))}return h}function la(e,i,s){for(var r in o)if(o.hasOwnProperty(r)&&i===e.f[o[r]]&&s===e.f[o[r]])return!0;return!1}function V(e,i){setTimeout(p(function(){v(this.g.a),v(this.h.a),v(this.j.a),v(this.m.a),i(this.a)},e),0)}function W(e,i,s){this.c=e,this.a=i,this.f=0,this.m=this.j=!1,this.s=s}Q.prototype.start=function(){this.f.serif=this.j.a.offsetWidth,this.f["sans-serif"]=this.m.a.offsetWidth,this.A=n(),function U(e){var i,s=e.g.a.offsetWidth,r=e.h.a.offsetWidth;(i=s===e.f.serif&&r===e.f["sans-serif"])||(i=T()&&la(e,s,r)),i?n()-e.A>=e.w?T()&&la(e,s,r)&&(null===e.u||e.u.hasOwnProperty(e.a.c))?V(e,e.v):V(e,e.B):setTimeout(p(function(){U(this)},e),50):V(e,e.v)}(this)};var l=null;function na(e){0==--e.f&&e.j&&(e.m?((e=e.a).g&&w(e.f,[e.a.c("wf","active")],[e.a.c("wf","loading"),e.a.c("wf","inactive")]),K(e,"active")):L(e.a))}function oa(e){this.j=e,this.a=new ja,this.h=0,this.f=this.g=!0}function ra(e,i){this.c=e,this.a=i}function sa(e,i){this.c=e,this.a=i}function ta(e,i){e?this.c=e:this.c=c,this.a=[],this.f=[],this.g=i||""}W.prototype.g=function(e){var i=this.a;i.g&&w(i.f,[i.a.c("wf",e.c,J(e).toString(),"active")],[i.a.c("wf",e.c,J(e).toString(),"loading"),i.a.c("wf",e.c,J(e).toString(),"inactive")]),K(i,"fontactive",e),this.m=!0,na(this)},W.prototype.h=function(e){var i=this.a;if(i.g){var s=y(i.f,i.a.c("wf",e.c,J(e).toString(),"active")),r=[],n=[i.a.c("wf",e.c,J(e).toString(),"loading")];s||r.push(i.a.c("wf",e.c,J(e).toString(),"inactive")),w(i.f,r,n)}K(i,"fontinactive",e),na(this)},oa.prototype.load=function(e){this.c=new ca(this.j,e.context||this.j),this.g=!1!==e.events,this.f=!1!==e.classes,function(e,i,s){var r,n=[],a=s.timeout;(r=i).g&&w(r.f,[r.a.c("wf","loading")]),K(r,"loading");var n=function(e,i,s){var r,n=[];for(r in i)if(i.hasOwnProperty(r)){var a=e.c[r];a&&n.push(a(i[r],s))}return n}(e.a,s,e.c),o=new W(e.c,i,a);for(e.h=n.length,i=0,s=n.length;i<s;i++)n[i].load(function(i,s,r){!function(e,i,s,r,n){var a=0==--e.h;(e.f||e.g)&&setTimeout(function(){var e=n||null,o=r||{};if(0===s.length&&a)L(i.a);else{i.f+=s.length,a&&(i.j=a);var h,c=[];for(h=0;h<s.length;h++){var g=s[h],m=o[g.c],x=i.a,S=g;if(x.g&&w(x.f,[x.a.c("wf",S.c,J(S).toString(),"loading")]),K(x,"fontloading",S),x=null,null===l){if(window.FontFace){var S=/Gecko.*Firefox\/(\d+)/.exec(window.navigator.userAgent),_=/OS X.*Version\/10\..*Safari/.exec(window.navigator.userAgent)&&/Apple/.exec(window.navigator.vendor);l=S?42<parseInt(S[1],10):!_}else l=!1}x=l?new P(p(i.g,i),p(i.h,i),i.c,g,i.s,m):new Q(p(i.g,i),p(i.h,i),i.c,g,i.s,e,m),c.push(x)}for(h=0;h<c.length;h++)c[h].start()}},0)}(e,o,i,s,r)})}(this,new ha(this.c,e),e)},ra.prototype.load=function(e){var i=this,s=i.a.projectId,r=i.a.version;if(s){var n=i.c.o;A(this.c,(i.a.api||"https://fast.fonts.net/jsapi")+"/"+s+".js"+(r?"?v="+r:""),function(r){r?e([]):(n["__MonotypeConfiguration__"+s]=function(){return i.a},function b(){if(n["__mti_fntLst"+s]){var i,r=n["__mti_fntLst"+s](),a=[];if(r)for(var o=0;o<r.length;o++){var h=r[o].fontfamily;void 0!=r[o].fontStyle&&void 0!=r[o].fontWeight?(i=r[o].fontStyle+r[o].fontWeight,a.push(new G(h,i))):a.push(new G(h))}e(a)}else setTimeout(function(){b()},50)}())}).id="__MonotypeAPIScript__"+s}else e([])},sa.prototype.load=function(e){var i,s,r=this.a.urls||[],n=this.a.families||[],a=this.a.testStrings||{},o=new B;for(i=0,s=r.length;i<s;i++)z(this.c,r[i],C(o));var h=[];for(i=0,s=n.length;i<s;i++)if((r=n[i].split(":"))[1])for(var l=r[1].split(","),c=0;c<l.length;c+=1)h.push(new G(r[0],l[c]));else h.push(new G(r[0]));o.c=function(){e(h,a)},D(o)};var c="https://fonts.googleapis.com/css";function ya(e){this.f=e,this.a=[],this.c={}}var g={latin:"BESbswy","latin-ext":"\xe7\xf6\xfcğş",cyrillic:"йяЖ",greek:"αβΣ",khmer:"កខគ",Hanuman:"កខគ"},m={thin:"1",extralight:"2","extra-light":"2",ultralight:"2","ultra-light":"2",light:"3",regular:"4",book:"4",medium:"5","semi-bold":"6",semibold:"6","demi-bold":"6",demibold:"6",bold:"7","extra-bold":"8",extrabold:"8","ultra-bold":"8",ultrabold:"8",black:"9",heavy:"9",l:"3",r:"4",b:"7"},x={i:"i",italic:"i",n:"n",normal:"n"},S=/^(thin|(?:(?:extra|ultra)-?)?light|regular|book|medium|(?:(?:semi|demi|extra|ultra)-?)?bold|black|heavy|l|r|b|[1-9]00)?(n|i|normal|italic)?$/;function Ea(e,i){this.c=e,this.a=i}var _={Arimo:!0,Cousine:!0,Tinos:!0};function Ga(e,i){this.c=e,this.a=i}function Ha(e,i){this.c=e,this.f=i,this.a=[]}Ea.prototype.load=function(e){var i=new B,s=this.c,r=new ta(this.a.api,this.a.text),n=this.a.families;!function(e,i){for(var s=i.length,r=0;r<s;r++){var n=i[r].split(":");3==n.length&&e.f.push(n.pop());var a="";2==n.length&&""!=n[1]&&(a=":"),e.a.push(n.join(a))}}(r,n);var a=new ya(n);(function(e){for(var i=e.f.length,s=0;s<i;s++){var r=e.f[s].split(":"),n=r[0].replace(/\+/g," "),a=["n4"];if(2<=r.length){var o,h,l=r[1];if(o=[],l)for(var l=l.split(","),c=l.length,_=0;_<c;_++){if((h=l[_]).match(/^[\w-]+$/)){var k=S.exec(h.toLowerCase());if(null==k)h="";else{if(h=null==(h=k[2])||""==h?"n":x[h],null==(k=k[1])||""==k)k="4";else var E=m[k],k=E||(isNaN(k)?"4":k.substr(0,1));h=[h,k].join("")}}else h="";h&&o.push(h)}0<o.length&&(a=o),3==r.length&&(r=r[2],o=[],0<(r=r?r.split(","):o).length&&(r=g[r[0]])&&(e.c[n]=r))}for(e.c[n]||(r=g[n])&&(e.c[n]=r),r=0;r<a.length;r+=1)e.a.push(new G(n,a[r]))}})(a),z(s,function(e){if(0==e.a.length)throw Error("No fonts to load!");if(-1!=e.c.indexOf("kit="))return e.c;for(var i=e.a.length,s=[],r=0;r<i;r++)s.push(e.a[r].replace(/ /g,"+"));return i=e.c+"?family="+s.join("%7C"),0<e.f.length&&(i+="&subset="+e.f.join(",")),0<e.g.length&&(i+="&text="+encodeURIComponent(e.g)),i}(r),C(i)),i.c=function(){e(a.a,a.c,_)},D(i)},Ga.prototype.load=function(e){var i=this.a.id,s=this.c.o;i?A(this.c,(this.a.api||"https://use.typekit.net")+"/"+i+".js",function(i){if(i)e([]);else if(s.Typekit&&s.Typekit.config&&s.Typekit.config.fn){i=s.Typekit.config.fn;for(var r=[],n=0;n<i.length;n+=2)for(var a=i[n],o=i[n+1],h=0;h<o.length;h++)r.push(new G(a,o[h]));try{s.Typekit.load({events:!1,classes:!1,async:!0})}catch(e){}e(r)}},2e3):e([])},Ha.prototype.load=function(e){var i,s=this.f.id,r=this.c.o,n=this;s?(r.__webfontfontdeckmodule__||(r.__webfontfontdeckmodule__={}),r.__webfontfontdeckmodule__[s]=function(i,s){for(var r=0,a=s.fonts.length;r<a;++r){var o=s.fonts[r];n.a.push(new G(o.name,function(e){var i=4,s="n",r=null;return e&&((r=e.match(/(normal|oblique|italic)/i))&&r[1]&&(s=r[1].substr(0,1).toLowerCase()),(r=e.match(/([1-9]00|normal|bold)/i))&&r[1]&&(/bold/i.test(r[1])?i=7:/[1-9]00/.test(r[1])&&(i=parseInt(r[1].substr(0,1),10)))),s+i}("font-weight:"+o.weight+";font-style:"+o.style)))}e(n.a)},A(this.c,(this.f.api||"https://f.fontdeck.com/s/css/js/")+((i=this.c).o.location.hostname||i.a.location.hostname)+"/"+s+".js",function(i){i&&e([])})):e([])};var k=new oa(window);k.a.c.custom=function(e,i){return new sa(i,e)},k.a.c.fontdeck=function(e,i){return new Ha(i,e)},k.a.c.monotype=function(e,i){return new ra(i,e)},k.a.c.typekit=function(e,i){return new Ga(i,e)},k.a.c.google=function(e,i){return new Ea(i,e)};var E={load:p(k.load,k)};void 0!==(r=(function(){return E}).call(i,s,i,e))&&(e.exports=r)}()}}]);